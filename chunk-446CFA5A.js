import{a as N}from"./chunk-XMNZROGR.js";import{a as Y}from"./chunk-G2ARRPXW.js";import{a as U,b as L,c as J}from"./chunk-D5PD74ZZ.js";import{$ as b,$a as R,Ea as f,F as g,Fa as I,Fb as q,Ga as v,J as n,Ka as F,M as u,O as E,Ra as B,W as V,X as p,Y as d,_ as y,aa as h,ba as o,bb as $,ca as r,da as m,ha as x,j as M,ja as P,la as a,m as T,ma as O,na as k,oa as A,ob as j,pb as z,qb as H,rb as Q,sa as s,ta as S,ua as _,x as C,y as w}from"./chunk-HHDR55EE.js";var K=["swiperContainer"];function W(i,t){if(i&1){let e=x();o(0,"a",19),P("click",function(){C(e);let c=a(2);return w(c.toggleBiography())}),s(1),r()}if(i&2){let e=a(2);n(),_(" ",e.showFullBiography?"See Less":"See More"," ")}}function X(i,t){if(i&1&&(o(0,"div")(1,"div",12)(2,"div",13),m(3,"img",14),r(),o(4,"div",15)(5,"h2",16),s(6),r(),o(7,"p",17),s(8),f(9,"seeMore"),p(10,W,2,1,"a",18),r(),o(11,"h4"),s(12,"Birthday:"),r(),o(13,"p"),s(14),f(15,"date"),r(),o(16,"h4"),s(17," Place of Birth:"),r(),o(18,"p"),s(19),r()()()()),i&2){let e=a();n(3),h("src","https://image.tmdb.org/t/p/w500"+(e.personDetails==null?null:e.personDetails.profile_path),g),n(3),_(" ",e.personDetails==null?null:e.personDetails.name," "),n(2),_(" ",e.showFullBiography?e.personDetails==null?null:e.personDetails.biography:v(9,6,e.personDetails==null?null:e.personDetails.biography,50)," "),n(2),d(e.shouldShowToggle(e.personDetails==null?null:e.personDetails.biography)?10:-1),n(4),_(" ",v(15,9,e.personDetails==null?null:e.personDetails.birthday,"longDate")),n(5),_(" ",e.personDetails==null?null:e.personDetails.place_of_birth)}}function Z(i,t){if(i&1&&m(0,"img",22),i&2){let e=t.$implicit;h("src","https://image.tmdb.org/t/p/w500"+e.file_path,g)}}function ee(i,t){if(i&1){let e=x();o(0,"div",23)(1,"button",24),P("click",function(){C(e);let c=a(2);return w(c.toggleImagesView())}),s(2),r()()}if(i&2){let e=a(2);n(2),_(" ",e.showAllImages?"See Less":"See More"," ")}}function ie(i,t){if(i&1&&(o(0,"div",3)(1,"h3",17),m(2,"i",20),s(3," Images"),r(),o(4,"div",21),y(5,Z,1,1,"img",22,V().trackByFn,!0),r(),p(7,ee,3,1,"div",23),r()),i&2){let e=a();n(5),b(e.visibleImages),n(2),d(e.personImages.length>10?7:-1)}}function te(i,t){if(i&1&&m(0,"img",28),i&2){let e=a(2).$implicit;h("src","https://image.tmdb.org/t/p/w500"+e.profile_path,g)}}function ne(i,t){if(i&1&&m(0,"img",29),i&2){let e=a(2).$implicit;h("src","https://image.tmdb.org/t/p/w500"+e.poster_path,g)}}function oe(i,t){if(i&1&&(o(0,"button",30),s(1),r()),i&2){let e=a(2).$implicit;n(),_(" ",e.vote_average," ")}}function re(i,t){if(i&1&&(o(0,"p"),s(1),f(2,"seeMore"),r()),i&2){let e=a(2).$implicit;n(),S(v(2,1,e.name,1))}}function ae(i,t){if(i&1&&(o(0,"p"),s(1),f(2,"seeMore"),r()),i&2){let e=a(2).$implicit;n(),S(v(2,1,e.title,1))}}function se(i,t){if(i&1&&(o(0,"p")(1,"span",31),m(2,"i",32),s(3),f(4,"timeAgo"),r()()),i&2){let e=a(2).$implicit;n(3),_(" ",I(4,1,e.release_date))}}function le(i,t){if(i&1&&(o(0,"p")(1,"span",31),m(2,"i",32),s(3),f(4,"timeAgo"),r()()),i&2){let e=a(2).$implicit;n(3),_(" ",I(4,1,e.first_air_date))}}function pe(i,t){if(i&1){let e=x();o(0,"div",26),P("click",function(){C(e);let c=a().$implicit,D=a();return w(D.goToMediaDetails(c.media_type,c.id))}),o(1,"div",27),p(2,te,1,1,"img",28),p(3,ne,1,1,"img",29),p(4,oe,2,1,"button",30),r(),p(5,re,3,4,"p"),p(6,ae,3,4,"p"),p(7,se,5,3,"p"),p(8,le,5,3,"p"),r()}if(i&2){let e=a().$implicit;n(2),d(e.profile_path?2:-1),n(),d(e.poster_path?3:-1),n(),d(e.vote_average?4:-1),n(),d(e.name?5:-1),n(),d(e.title?6:-1),n(),d(e.release_date?7:-1),n(),d(e.first_air_date?8:-1)}}function de(i,t){if(i&1&&p(0,pe,9,7,"div",25),i&2){let e=t.$implicit;d(e.poster_path&&e.first_air_date||e.poster_path&&e.release_date?0:-1)}}var G=class i{constructor(t,e,l,c,D,ce){this._MediaDetailsService=t;this.route=e;this._Router=l;this.cd=c;this.profileService=D;this.userService=ce}overviewVisible=!1;showFullBiography=!1;showAllImages=!1;type;id;personDetails=null;personImages=[];visibleImages=[];personCredits=[];visibleItems={};swiperInstance;swiperTimeout;routeSub;dataSub;uid="";swiperContainer;ngOnInit(){this.userService.currentUser$.pipe(T(1)).subscribe(t=>{t&&(this.uid=t.uid)}),this.routeSub=this.route.paramMap.subscribe(t=>{this.type=t.get("mediaType")||"",this.id=t.get("mediaId")||"",this.dataSub=M({details:this._MediaDetailsService.getMediaDetails(this.type,this.id),images:this._MediaDetailsService.getMostDetails(this.type,this.id,"images"),personCredits:this._MediaDetailsService.getMostDetails(this.type,this.id,"combined_credits")}).subscribe({next:({details:e,images:l,personCredits:c})=>{this.personDetails=e,this.uid&&this.personDetails&&this.addToHistory(),this.personImages=l.profiles||[],this.visibleImages=this.personImages.slice(0,10),this.personCredits=c.cast||[],this.swiperTimeout=setTimeout(()=>{this.personCredits.length>=2&&(this.initSwiper(),this.cd.detectChanges())},0)}})})}trackByFn(t,e){return e.file_path||t}trackMediaPerson(t,e){return`${e.credit_id||e.id||t}-${e.media_type}`}ngAfterViewInit(){this.swiperTimeout=setTimeout(()=>{this.personCredits.length>=2&&this.initSwiper()},0)}ngOnDestroy(){this.routeSub?.unsubscribe(),this.dataSub?.unsubscribe(),this.swiperTimeout&&clearTimeout(this.swiperTimeout),this.swiperInstance&&typeof this.swiperInstance.destroy=="function"&&(this.swiperInstance.destroy(!0,!0),this.swiperInstance=null)}toggleBiography(){this.showFullBiography=!this.showFullBiography}shouldShowToggle(t){return t?.split(" ").length>40}toggleImagesView(){this.showAllImages=!this.showAllImages,this.visibleImages=this.showAllImages?this.personImages:this.personImages.slice(0,10)}initSwiper(){if(!this.personCredits||this.personCredits.length<2)return;this.swiperInstance&&typeof this.swiperInstance.destroy=="function"&&(this.swiperInstance.destroy(!0,!0),this.swiperInstance=null);let t=Math.min(5,this.personCredits.length);this.swiperInstance=new Swiper(this.swiperContainer.nativeElement,{loop:this.personCredits.length>t,slidesPerView:t,spaceBetween:20,autoplay:{delay:2500,disableOnInteraction:!1},navigation:{nextEl:".custom-next",prevEl:".custom-prev"},breakpoints:{0:{slidesPerView:2},500:{slidesPerView:3},700:{slidesPerView:4},1e3:{slidesPerView:3},1150:{slidesPerView:4},1500:{slidesPerView:Math.min(5,this.personCredits.length)}}})}goToMediaDetails(t,e){t==="person"?this._Router.navigate(["person-details",t,e]):this._Router.navigate(["media-details",t,e])}addToHistory(){this.uid&&this.profileService.addToHistory(this.uid,{id:this.personDetails.id,title:this.personDetails.name,imageUrl:this.personDetails.profile_path?"https://image.tmdb.org/t/p/w500/"+this.personDetails.profile_path:"",type:"person"})}static \u0275fac=function(e){return new(e||i)(u(Y),u(R),u($),u(F),u(J),u(q))};static \u0275cmp=E({type:i,selectors:[["app-person-profile"]],viewQuery:function(e,l){if(e&1&&O(K,5),e&2){let c;k(c=A())&&(l.swiperContainer=c.first)}},decls:17,vars:3,consts:[["swiperContainer",""],[3,"page"],[1,"person-profile","mt-5"],[1,"my-3","overflow-hidden"],[1,"py-3","overflow-hidden"],["appAnimateOnScroll","slideUp"],[1,"fa-solid","fa-play","fa-1x"],[1,"swiper","position-relative"],[1,"swiper-navigation"],[1,"swiper-button-prev","custom-prev"],[1,"swiper-button-next","custom-next"],[1,"swiper-wrapper"],[1,"row"],[1,"col-lg-3","col-md-4","col-12"],["appAnimateOnScroll","zoomIn","alt","Person Image","height","350",1,"img-fluid","rounded-3","w-100",3,"src"],[1,"col-lg-9","col-md-8","col-12","py-2","overflow-hidden"],["appAnimateOnScroll","slideDown"],["appAnimateOnScroll","slideUp",1,"py-2"],["role","button",1,"text-primary","ms-2"],["role","button",1,"text-primary","ms-2",3,"click"],[1,"fa-solid","fa-camera","fa-1x"],[1,"w-100","d-flex","justify-content-center","flex-wrap","gap-1","py-3"],["width","100","alt","Image",1,"img-fluid","rounded-3",3,"src"],[1,"text-center","py-2"],[1,"text-white","px-2","py-1","button-mix-color",3,"click"],[1,"swiper-slide","slider-container","rounded-3"],[1,"swiper-slide","slider-container","rounded-3",3,"click"],[1,"position-relative"],["alt","Person Image",1,"rounded-3",3,"src"],["alt","mediaPerson Poster",1,"rounded-3",3,"src"],[1,"vote","p-1","rounded-3","border-0","fw-bolder","text-white","position-absolute","top-0","end-0"],[1,"date-media"],[1,"fa-solid","fa-clock","text-white"]],template:function(e,l){e&1&&(m(0,"app-main-header-page",1),o(1,"section")(2,"div",2),p(3,X,20,12,"div"),p(4,ie,8,1,"div",3),o(5,"div",4)(6,"h3",5),m(7,"i",6),s(8," Screen Appearances "),r()(),o(9,"div",7,0)(11,"div",8),m(12,"button",9)(13,"button",10),r(),o(14,"div",11),y(15,de,1,1,null,null,l.trackMediaPerson,!0),r()()()()),e&2&&(h("page",l.personDetails==null?null:l.personDetails.name),n(3),d(l.personDetails?3:-1),n(),d(l.personImages?4:-1),n(11),b(l.personCredits))},dependencies:[N,Q,B,U,L],styles:["i[_ngcontent-%COMP%]{color:var(--main-color)}.swiper-navigation[_ngcontent-%COMP%]{position:absolute;top:50%;width:100%;z-index:20;display:flex;justify-content:space-between;transform:translateY(-50%);pointer-events:none}.swiper-button-prev[_ngcontent-%COMP%], .swiper-button-next[_ngcontent-%COMP%]{pointer-events:all;background-color:#0009;border:none;color:#fff;padding:25px;cursor:pointer;transition:background-color .3s ease}.slider-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:250px;width:100%}@media screen and (max-width:1300px){.slider-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px}}@media screen and (max-width:500px){.slider-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px}}"],data:{animation:[H,j,z]}})};export{G as PersonProfileComponent};
