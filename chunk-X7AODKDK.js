import{a as q}from"./chunk-ZM3WDTF4.js";import{a as H}from"./chunk-6IIAW7ZD.js";import{a as z,k as U,l as j,m as Q,n as L,o as N}from"./chunk-CUQ73EIQ.js";import{Aa as F,Da as p,E as u,Ea as I,F as f,Fa as v,Pa as C,Q as w,Qa as V,Ra as b,U as n,X as x,Ya as A,Z as T,db as B,fb as O,ga as M,ha as d,ia as c,ka as P,la as y,ma as m,na as o,nb as R,oa as r,p as S,pa as _,pb as $,ta as g,va as h,xa as a,ya as E,za as k}from"./chunk-B4T3W676.js";var Y=["swiperContainer"];function G(i,t){if(i&1){let e=g();o(0,"a",18),h("click",function(){u(e);let s=a(2);return f(s.toggleBiography())}),p(1),r()}if(i&2){let e=a(2);n(),v(" ",e.showFullBiography?"See Less":"See More"," ")}}function K(i,t){if(i&1){let e=g();o(0,"div")(1,"div",12)(2,"div",13)(3,"img",14),h("visible",function(){u(e);let s=a();return f(s.overviewVisible=!0)}),r()(),o(4,"div",15)(5,"h2",5),h("visible",function(){u(e);let s=a();return f(s.overviewVisible=!0)}),p(6),r(),o(7,"p",16),p(8),C(9,"seeMore"),d(10,G,2,1,"a",17),r(),o(11,"h4"),p(12,"Birthday:"),r(),o(13,"p"),p(14),C(15,"date"),r(),o(16,"h4",5),h("visible",function(){u(e);let s=a();return f(s.overviewVisible=!0)}),p(17," Place of Birth:"),r(),o(18,"p"),p(19),r()()()()}if(i&2){let e=a();n(3),m("@zoomIn",e.overviewVisible?"visible":"void")("src","https://image.tmdb.org/t/p/w500"+(e.personDetails==null?null:e.personDetails.profile_path),w),n(2),m("@slideDown",e.overviewVisible?"visible":"void"),n(),v(" ",e.personDetails==null?null:e.personDetails.name," "),n(2),v(" ",e.showFullBiography?e.personDetails==null?null:e.personDetails.biography:b(9,9,e.personDetails==null?null:e.personDetails.biography,50)," "),n(2),c(e.shouldShowToggle(e.personDetails==null?null:e.personDetails.biography)?10:-1),n(4),v(" ",b(15,12,e.personDetails==null?null:e.personDetails.birthday,"longDate")),n(2),m("@slideUp",e.overviewVisible?"visible":"void"),n(3),v(" ",e.personDetails==null?null:e.personDetails.place_of_birth)}}function W(i,t){if(i&1&&_(0,"img",22),i&2){let e=t.$implicit;m("src","https://image.tmdb.org/t/p/w500"+e.file_path,w)}}function X(i,t){if(i&1){let e=g();o(0,"div",23)(1,"button",24),h("click",function(){u(e);let s=a(2);return f(s.toggleImagesView())}),p(2),r()()}if(i&2){let e=a(2);n(2),v(" ",e.showAllImages?"See Less":"See More"," ")}}function Z(i,t){if(i&1){let e=g();o(0,"div",3)(1,"h3",19),h("visible",function(){u(e);let s=a();return f(s.overviewVisible=!0)}),_(2,"i",20),p(3," Images"),r(),o(4,"div",21),P(5,W,1,1,"img",22,M().trackByFn,!0),r(),d(7,X,3,1,"div",23),r()}if(i&2){let e=a();n(),m("@slideDown",e.overviewVisible?"visible":"void"),n(4),y(e.visibleImages),n(2),c(e.personImages.length>10?7:-1)}}function ee(i,t){if(i&1&&_(0,"img",28),i&2){let e=a(2).$implicit;m("src","https://image.tmdb.org/t/p/w500"+e.profile_path,w)}}function ie(i,t){if(i&1&&_(0,"img",29),i&2){let e=a(2).$implicit;m("src","https://image.tmdb.org/t/p/w500"+e.poster_path,w)}}function te(i,t){if(i&1&&(o(0,"button",30),p(1),r()),i&2){let e=a(2).$implicit;n(),v(" ",e.vote_average," ")}}function ne(i,t){if(i&1&&(o(0,"p"),p(1),C(2,"seeMore"),r()),i&2){let e=a(2).$implicit;n(),I(b(2,1,e.name,2))}}function oe(i,t){if(i&1&&(o(0,"p"),p(1),C(2,"seeMore"),r()),i&2){let e=a(2).$implicit;n(),I(b(2,1,e.title,2))}}function re(i,t){if(i&1&&(o(0,"p")(1,"span",31),_(2,"i",32),p(3),C(4,"timeAgo"),r()()),i&2){let e=a(2).$implicit;n(3),v(" ",V(4,1,e.release_date))}}function se(i,t){if(i&1&&(o(0,"p")(1,"span",31),_(2,"i",32),p(3),C(4,"timeAgo"),r()()),i&2){let e=a(2).$implicit;n(3),v(" ",V(4,1,e.first_air_date))}}function ae(i,t){if(i&1){let e=g();o(0,"div",26),h("click",function(){u(e);let s=a().$implicit,D=a();return f(D.goToMediaDetails(s.media_type,s.id))}),o(1,"div",27),d(2,ee,1,1,"img",28),d(3,ie,1,1,"img",29),d(4,te,2,1,"button",30),r(),d(5,ne,3,4,"p"),d(6,oe,3,4,"p"),d(7,re,5,3,"p"),d(8,se,5,3,"p"),r()}if(i&2){let e=a().$implicit;n(2),c(e.profile_path?2:-1),n(),c(e.poster_path?3:-1),n(),c(e.vote_average?4:-1),n(),c(e.name?5:-1),n(),c(e.title?6:-1),n(),c(e.release_date?7:-1),n(),c(e.first_air_date?8:-1)}}function le(i,t){if(i&1&&d(0,ae,9,7,"div",25),i&2){let e=t.$implicit;c(e.poster_path&&e.first_air_date||e.poster_path&&e.release_date?0:-1)}}var J=class i{constructor(t,e,l,s){this._MediaDetailsService=t;this.route=e;this._Router=l;this.cd=s}overviewVisible=!1;showFullBiography=!1;showAllImages=!1;type;id;personDetails=null;personImages=[];visibleImages=[];personCredits=[];visibleItems={};swiperInstance;swiperTimeout;sub;swiperContainer;ngOnInit(){this.sub=this.route.paramMap.subscribe(t=>{this.type=t.get("mediaType")||"",this.id=t.get("mediaId")||"",S({details:this._MediaDetailsService.getMediaDetails(this.type,this.id),images:this._MediaDetailsService.getMostDetails(this.type,this.id,"images"),personCredits:this._MediaDetailsService.getMostDetails(this.type,this.id,"combined_credits")}).subscribe({next:({details:e,images:l,personCredits:s})=>{this.personDetails=e,this.personImages=l.profiles||[],this.visibleImages=this.personImages.slice(0,10),this.personCredits=s.cast||[],this.swiperTimeout=setTimeout(()=>{this.personCredits.length>=2&&(this.initSwiper(),this.cd.detectChanges())},0)}})})}trackByFn(t,e){return e.file_path||t}trackMediaPerson(t,e){return`${e.credit_id||e.id||t}-${e.media_type}`}ngAfterViewInit(){this.swiperTimeout=setTimeout(()=>{this.personCredits.length>=2&&this.initSwiper()},0)}ngOnDestroy(){this.sub?.unsubscribe(),this.swiperTimeout&&clearTimeout(this.swiperTimeout),this.swiperInstance&&typeof this.swiperInstance.destroy=="function"&&(this.swiperInstance.destroy(!0,!0),this.swiperInstance=null,console.log("Swiper destroyed \u2705"))}toggleBiography(){this.showFullBiography=!this.showFullBiography}shouldShowToggle(t){return t?.split(" ").length>40}toggleImagesView(){this.showAllImages=!this.showAllImages,this.visibleImages=this.showAllImages?this.personImages:this.personImages.slice(0,10)}initSwiper(){!this.personCredits||this.personCredits.length<2||(this.swiperInstance&&typeof this.swiperInstance.destroy=="function"&&(this.swiperInstance.destroy(!0,!0),this.swiperInstance=null),this.swiperInstance=new Swiper(this.swiperContainer.nativeElement,{loop:this.personCredits.length>4,slidesPerView:Math.min(5,this.personCredits.length),spaceBetween:20,autoplay:{delay:2500,disableOnInteraction:!1},navigation:{nextEl:".custom-next",prevEl:".custom-prev"},breakpoints:{0:{slidesPerView:1},570:{slidesPerView:2},830:{slidesPerView:3},1e3:{slidesPerView:2},1100:{slidesPerView:3},1300:{slidesPerView:4},1500:{slidesPerView:Math.min(5,this.personCredits.length)}}}),console.log("Swiper instance initialized \u2705"))}goToMediaDetails(t,e){t==="person"?this._Router.navigate(["person-details",t,e]):this._Router.navigate(["media-details",t,e])}static \u0275fac=function(e){return new(e||i)(x(H),x(R),x($),x(A))};static \u0275cmp=T({type:i,selectors:[["app-person-profile"]],viewQuery:function(e,l){if(e&1&&E(Y,5),e&2){let s;k(s=F())&&(l.swiperContainer=s.first)}},decls:17,vars:5,consts:[["swiperContainer",""],[3,"page"],[1,"person-profile","mt-5"],[1,"my-3","overflow-hidden"],[1,"py-3","overflow-hidden"],["appAnimateOnVisible","",3,"visible"],[1,"fa-solid","fa-play","fa-1x"],[1,"swiper","position-relative"],[1,"swiper-navigation"],[1,"swiper-button-prev","custom-prev"],[1,"swiper-button-next","custom-next"],[1,"swiper-wrapper"],[1,"row"],[1,"col-lg-3","col-md-4","col-12"],["appAnimateOnVisible","","alt","Person Image","height","350",1,"img-fluid","rounded-3","w-100",3,"visible","src"],[1,"col-lg-9","col-md-8","col-12","py-2","overflow-hidden"],[1,"py-2"],["role","button",1,"text-primary","ms-2"],["role","button",1,"text-primary","ms-2",3,"click"],["appAnimateOnVisible","",1,"py-2",3,"visible"],[1,"fa-solid","fa-camera","fa-1x"],[1,"w-100","d-flex","justify-content-center","flex-wrap","gap-3","py-3"],["width","100","alt","Image",1,"img-fluid","rounded-3",3,"src"],[1,"text-center","py-2"],[1,"text-white","px-2","py-1","button-mix-color",3,"click"],[1,"swiper-slide","media-container"],[1,"swiper-slide","media-container",3,"click"],[1,"position-relative"],["alt","Person Image",3,"src"],["alt","mediaPerson Poster",3,"src"],[1,"vote","p-1","rounded-0","border-0","fw-bolder","text-white","position-absolute","top-0","end-0"],[1,"date-media"],[1,"fa-solid","fa-clock","text-white"]],template:function(e,l){if(e&1){let s=g();_(0,"app-main-header-page",1),o(1,"section")(2,"div",2),d(3,K,20,15,"div"),d(4,Z,8,2,"div",3),o(5,"div",4)(6,"h3",5),h("visible",function(){return u(s),f(l.overviewVisible=!0)}),_(7,"i",6),p(8," Movies & TV Shows "),r()(),o(9,"div",7,0)(11,"div",8),_(12,"button",9)(13,"button",10),r(),o(14,"div",11),P(15,le,1,1,null,null,l.trackMediaPerson,!0),r()()()()}e&2&&(m("page",l.personDetails==null?null:l.personDetails.name),n(3),c(l.personDetails?3:-1),n(),c(l.personImages?4:-1),n(2),m("@slideDown",l.overviewVisible?"visible":"void"),n(3),m("@slideUp",void 0),n(6),y(l.personCredits))},dependencies:[q,O,L,B,z,N],styles:["i[_ngcontent-%COMP%]{color:var(--main-color)}.swiper-navigation[_ngcontent-%COMP%]{position:absolute;top:50%;width:100%;z-index:20;display:flex;justify-content:space-between;transform:translateY(-50%);pointer-events:none}.swiper-button-prev[_ngcontent-%COMP%], .swiper-button-next[_ngcontent-%COMP%]{pointer-events:all;background-color:#0009;border:none;color:#fff;padding:25px;cursor:pointer;transition:background-color .3s ease}"],data:{animation:[j,Q,U]}})};export{J as PersonProfileComponent};
