import{Tb as c,Ub as p,V as a,Vb as w,Wb as l,Xb as u,Yb as y,Zb as k,_b as v,a as d,ac as P,b as f,d as g,t as h,x as b}from"./chunk-65UPVVKP.js";var $=class s{transform(t,e){if(!t||typeof t!="string")return"";let r=t.split(" ");return r.slice(0,e).join(" ")+(r.length>e?"...":"")}static \u0275fac=function(e){return new(e||s)};static \u0275pipe=a({name:"seeMore",type:s,pure:!0})};var T=class s{transform(t){let e=new Date(t),n=Math.floor((new Date().getTime()-e.getTime())/1e3),i={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60};for(let o in i){let m=Math.floor(n/i[o]);if(m>=1)return`${m} ${this.getLabel(o,m)} ago`}return"just now"}getLabel(t,e){return e===1?{year:"year",month:"month",week:"week",day:"day",hour:"hour",minute:"minute"}[t]:{year:"years",month:"months",week:"weeks",day:"days",hour:"hours",minute:"minutes"}[t]}static \u0275fac=function(e){return new(e||s)};static \u0275pipe=a({name:"timeAgo",type:s,pure:!0})};var F=class s{db=b(v);addToHistory(t,e){return g(this,null,function*(){let r=c(this.db,`users/${t}/history`),n=w(r,l("id","==",e.id),l("type","==",e.type));if(!(yield u(n)).empty)return null;let o=new Date().toISOString();return k(r,f(d({},e),{openedAt:o}))})}getHistory(t){let e=c(this.db,`users/${t}/history`);return P(e,{idField:"docId"})}removeFromHistory(t,e){let r=p(this.db,`users/${t}/history/${e}`);return y(r)}clearHistory(t){let e=c(this.db,`users/${t}/history`);return u(e).then(r=>{let n=r.docs.map(i=>y(p(this.db,`users/${t}/history/${i.id}`)));return Promise.all(n)})}static \u0275fac=function(e){return new(e||s)};static \u0275prov=h({token:s,factory:s.\u0275fac,providedIn:"root"})};export{$ as a,T as b,F as c};
