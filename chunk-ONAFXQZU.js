var Ax=Object.defineProperty,Rx=Object.defineProperties;var Nx=Object.getOwnPropertyDescriptors;var Cl=Object.getOwnPropertySymbols,Px=Object.getPrototypeOf,CD=Object.prototype.hasOwnProperty,SD=Object.prototype.propertyIsEnumerable,Mx=Reflect.get;var bD=(t,e,n)=>e in t?Ax(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V=(t,e)=>{for(var n in e||={})CD.call(e,n)&&bD(t,n,e[n]);if(Cl)for(var n of Cl(e))SD.call(e,n)&&bD(t,n,e[n]);return t},ye=(t,e)=>Rx(t,Nx(e));var kx=(t,e)=>{var n={};for(var r in t)CD.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Cl)for(var r of Cl(t))e.indexOf(r)<0&&SD.call(t,r)&&(n[r]=t[r]);return n};var $r=(t,e,n)=>Mx(Px(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});function re(t){return typeof t=="function"}function Jo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Sl=Jo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ui(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Me=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof Sl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{AD(o)}catch(s){e=e??[],s instanceof Sl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Sl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)AD(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ui(n,e)}remove(e){let{_finalizers:n}=this;n&&Ui(n,e),e instanceof t&&e._removeParent(this)}};Me.EMPTY=(()=>{let t=new Me;return t.closed=!0,t})();var bg=Me.EMPTY;function Al(t){return t instanceof Me||t&&"closed"in t&&re(t.remove)&&re(t.add)&&re(t.unsubscribe)}function AD(t){re(t)?t():t.unsubscribe()}var un={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Zo={setTimeout(t,e,...n){let{delegate:r}=Zo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Zo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Rl(t){Zo.setTimeout(()=>{let{onUnhandledError:e}=un;if(e)e(t);else throw t})}function nc(){}var RD=Cg("C",void 0,void 0);function ND(t){return Cg("E",void 0,t)}function PD(t){return Cg("N",t,void 0)}function Cg(t,e,n){return{kind:t,value:e,error:n}}var Bi=null;function Xo(t){if(un.useDeprecatedSynchronousErrorHandling){let e=!Bi;if(e&&(Bi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Bi;if(Bi=null,n)throw r}}else t()}function MD(t){un.useDeprecatedSynchronousErrorHandling&&Bi&&(Bi.errorThrown=!0,Bi.error=t)}var $i=class extends Me{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Al(e)&&e.add(this)):this.destination=Fx}static create(e,n,r){return new es(e,n,r)}next(e){this.isStopped?Ag(PD(e),this):this._next(e)}error(e){this.isStopped?Ag(ND(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ag(RD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},xx=Function.prototype.bind;function Sg(t,e){return xx.call(t,e)}var Rg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Nl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Nl(r)}else Nl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Nl(n)}}},es=class extends $i{constructor(e,n,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&un.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Sg(e.next,o),error:e.error&&Sg(e.error,o),complete:e.complete&&Sg(e.complete,o)}):i=e}this.destination=new Rg(i)}};function Nl(t){un.useDeprecatedSynchronousErrorHandling?MD(t):Rl(t)}function Ox(t){throw t}function Ag(t,e){let{onStoppedNotification:n}=un;n&&Zo.setTimeout(()=>n(t,e))}var Fx={closed:!0,next:nc,error:Ox,complete:nc};var ts=typeof Symbol=="function"&&Symbol.observable||"@@observable";function St(t){return t}function Pl(...t){return Ng(t)}function Ng(t){return t.length===0?St:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var J=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Vx(n)?n:new es(n,r,i);return Xo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=kD(r),new r((i,o)=>{let s=new es({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ts](){return this}pipe(...n){return Ng(n)(this)}toPromise(n){return n=kD(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function kD(t){var e;return(e=t??un.Promise)!==null&&e!==void 0?e:Promise}function Lx(t){return t&&re(t.next)&&re(t.error)&&re(t.complete)}function Vx(t){return t&&t instanceof $i||Lx(t)&&Al(t)}var{isArray:jx}=Array,{getPrototypeOf:Ux,prototype:Bx,keys:$x}=Object;function Ml(t){if(t.length===1){let e=t[0];if(jx(e))return{args:e,keys:null};if(Hx(e)){let n=$x(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Hx(t){return t&&typeof t=="object"&&Ux(t)===Bx}function Pg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function OD(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function c(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function xD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hi(t){return this instanceof Hi?(this.v=t,this):new Hi(t)}function FD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(w){return Promise.resolve(w).then(y,p)}}function a(y,w){r[y]&&(i[y]=function(N){return new Promise(function(S,P){o.push([y,N,S,P])>1||c(y,N)})},w&&(i[y]=w(i[y])))}function c(y,w){try{l(r[y](w))}catch(N){g(o[0][3],N)}}function l(y){y.value instanceof Hi?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){c("next",y)}function p(y){c("throw",y)}function g(y,w){y(w),o.shift(),o.length&&c(o[0][0],o[0][1])}}function LD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof xD=="function"?xD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var kl=t=>t&&typeof t.length=="number"&&typeof t!="function";function xl(t){return re(t?.then)}function Ol(t){return re(t[ts])}function Fl(t){return Symbol.asyncIterator&&re(t?.[Symbol.asyncIterator])}function Ll(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function zx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Vl=zx();function jl(t){return re(t?.[Vl])}function Ul(t){return FD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Hi(n.read());if(i)return yield Hi(void 0);yield yield Hi(r)}}finally{n.releaseLock()}})}function Bl(t){return re(t?.getReader)}function $e(t){if(t instanceof J)return t;if(t!=null){if(Ol(t))return qx(t);if(kl(t))return Gx(t);if(xl(t))return Wx(t);if(Fl(t))return VD(t);if(jl(t))return Kx(t);if(Bl(t))return Qx(t)}throw Ll(t)}function qx(t){return new J(e=>{let n=t[ts]();if(re(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Gx(t){return new J(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Wx(t){return new J(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Rl)})}function Kx(t){return new J(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function VD(t){return new J(e=>{Yx(t,e).catch(n=>e.error(n))})}function Qx(t){return VD(Ul(t))}function Yx(t,e){var n,r,i,o;return OD(this,void 0,void 0,function*(){try{for(n=LD(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function jD(t){return t&&re(t.schedule)}function UD(t){return t[t.length-1]}function $l(t){return re(UD(t))?t.pop():void 0}function Hr(t){return jD(UD(t))?t.pop():void 0}function se(t,e,n,r,i){return new Mg(t,e,n,r,i)}var Mg=class extends $i{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function kg(t){return re(t?.lift)}function ue(t){return e=>{if(kg(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function X(t,e){return ue((n,r)=>{let i=0;n.subscribe(se(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:Jx}=Array;function Zx(t,e){return Jx(e)?t(...e):t(e)}function Hl(t){return X(e=>Zx(t,e))}function zl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Xx(...t){let e=$l(t),{args:n,keys:r}=Ml(t),i=new J(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let h=0;h<s;h++){let p=!1;$e(n[h]).subscribe(se(o,g=>{p||(p=!0,l--),a[h]=g},()=>c--,void 0,()=>{(!c||!p)&&(l||o.next(r?zl(r,a):a),o.complete())}))}});return e?i.pipe(Hl(e)):i}var xt=new J(t=>t.complete());function Mn(t){return t<=0?()=>xt:ue((e,n)=>{let r=0;e.subscribe(se(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function ns(){return ue((t,e)=>{let n=null;t._refCount++;let r=se(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var rs=class extends J{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,kg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Me;let n=this.getSubject();e.add(this.source.subscribe(se(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Me.EMPTY)}return e}refCount(){return ns()(this)}};var BD=Jo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ye=(()=>{class t extends J{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ql(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new BD}next(n){Xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?bg:(this.currentObservers=null,o.push(n),new Me(()=>{this.currentObservers=null,Ui(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new J;return n.source=this,n}}return t.create=(e,n)=>new ql(e,n),t})(),ql=class extends Ye{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:bg}};var ct=class extends Ye{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var xg={now(){return(xg.delegate||Date).now()},delegate:void 0};var Gl=class extends Me{constructor(e,n){super()}schedule(e,n=0){return this}};var rc={setInterval(t,e,...n){let{delegate:r}=rc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=rc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var is=class extends Gl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return rc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&rc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ui(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var os=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};os.now=xg.now;var ss=class extends os{constructor(e,n=os.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var ic=new ss(is);var Wl=class extends is{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Kl=class extends ss{};var Og=new Kl(Wl);function Ot(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function zr(t,e=0){return ue((n,r)=>{n.subscribe(se(r,i=>Ot(r,t,()=>r.next(i),e),()=>Ot(r,t,()=>r.complete(),e),i=>Ot(r,t,()=>r.error(i),e)))})}function qr(t,e=0){return ue((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function $D(t,e){return $e(t).pipe(qr(e),zr(e))}function HD(t,e){return $e(t).pipe(qr(e),zr(e))}function zD(t,e){return new J(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function qD(t,e){return new J(n=>{let r;return Ot(n,e,()=>{r=t[Vl](),Ot(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function Ql(t,e){if(!t)throw new Error("Iterable cannot be null");return new J(n=>{Ot(n,e,()=>{let r=t[Symbol.asyncIterator]();Ot(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function GD(t,e){return Ql(Ul(t),e)}function WD(t,e){if(t!=null){if(Ol(t))return $D(t,e);if(kl(t))return zD(t,e);if(xl(t))return HD(t,e);if(Fl(t))return Ql(t,e);if(jl(t))return qD(t,e);if(Bl(t))return GD(t,e)}throw Ll(t)}function Ie(t,e){return e?WD(t,e):$e(t)}function K(...t){let e=Hr(t);return Ie(t,e)}function as(t,e){let n=re(t)?t:()=>t,r=i=>i.error(n());return new J(e?i=>e.schedule(r,0,i):r)}function Fg(t){return!!t&&(t instanceof J||re(t.lift)&&re(t.subscribe))}var ar=Jo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Yl(...t){let e=Hr(t),n=$l(t),{args:r,keys:i}=Ml(t);if(r.length===0)return Ie([],e);let o=new J(eO(r,e,i?s=>zl(i,s):St));return n?o.pipe(Hl(n)):o}function eO(t,e,n=St){return r=>{KD(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)KD(e,()=>{let l=Ie(t[c],e),h=!1;l.subscribe(se(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function KD(t,e,n){t?Ot(n,t,e):e()}function QD(t,e,n,r,i,o,s,a){let c=[],l=0,h=0,p=!1,g=()=>{p&&!c.length&&!l&&e.complete()},y=N=>l<r?w(N):c.push(N),w=N=>{o&&e.next(N),l++;let S=!1;$e(n(N,h++)).subscribe(se(e,P=>{i?.(P),o?y(P):e.next(P)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<r;){let P=c.shift();s?Ot(e,s,()=>w(P)):w(P)}g()}catch(P){e.error(P)}}))};return t.subscribe(se(e,y,()=>{p=!0,g()})),()=>{a?.()}}function He(t,e,n=1/0){return re(e)?He((r,i)=>X((o,s)=>e(r,o,i,s))($e(t(r,i))),n):(typeof e=="number"&&(n=e),ue((r,i)=>QD(r,i,t,n)))}function cs(t=1/0){return He(St,t)}function YD(){return cs(1)}function us(...t){return YD()(Ie(t,Hr(t)))}function oc(t){return new J(e=>{$e(t()).subscribe(e)})}function ut(t,e){return ue((n,r)=>{let i=0;n.subscribe(se(r,o=>t.call(e,o,i++)&&r.next(o)))})}function cr(t){return ue((e,n)=>{let r=null,i=!1,o;r=e.subscribe(se(n,void 0,void 0,s=>{o=$e(t(s,cr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function JD(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(se(s,h=>{let p=l++;c=a?t(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ur(t,e){return re(e)?He(t,e,1):He(t,1)}function tO(t,e=ic){return ue((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+t,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}n.subscribe(se(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Gr(t){return ue((e,n)=>{let r=!1;e.subscribe(se(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Lg(t,e=St){return t=t??nO,ue((n,r)=>{let i,o=!0;n.subscribe(se(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function nO(t,e){return t===e}function Jl(t=rO){return ue((e,n)=>{let r=!1;e.subscribe(se(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function rO(){return new ar}function zi(t){return ue((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function lr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ut((i,o)=>t(i,o,r)):St,Mn(1),n?Gr(e):Jl(()=>new ar))}function ls(t){return t<=0?()=>xt:ue((e,n)=>{let r=[];e.subscribe(se(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Vg(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ut((i,o)=>t(i,o,r)):St,ls(1),n?Gr(e):Jl(()=>new ar))}function Zl(t,e){return ue(JD(t,e,arguments.length>=2,!0))}function Xl(...t){let e=Hr(t);return ue((n,r)=>{(e?us(t,n,e):us(t,n)).subscribe(r)})}function lt(t,e){return ue((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(se(r,c=>{i?.unsubscribe();let l=0,h=o++;$e(t(c,h)).subscribe(i=se(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function qi(t){return ue((e,n)=>{$e(t).subscribe(se(n,()=>n.complete(),nc)),!n.closed&&e.subscribe(n)})}function et(t,e,n){let r=re(t)||e||n?{next:t,error:e,complete:n}:t;return r?ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(se(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):St}var jg;function ed(){return jg}function kn(t){let e=jg;return jg=t,e}var ZD=Symbol("NotFound");function ds(t){return t===ZD||t?.name==="\u0275NotFound"}function od(t,e){return Object.is(t,e)}var vt=null,td=!1,Ug=1,iO=null,_t=Symbol("SIGNAL");function ee(t){let e=vt;return vt=t,e}function sd(){return vt}var Gi={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function hs(t){if(td)throw new Error("");if(vt===null)return;vt.consumerOnSignalRead(t);let e=vt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=vt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:vt.producers,n!==void 0&&n.producer===t)){vt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===vt&&(!r||sO(i,vt)))return;let o=ps(vt),s={producer:t,consumer:vt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};vt.producersTail=s,e!==void 0?e.nextProducer=s:vt.producers=s,o&&eb(t,s)}function XD(){Ug++}function ad(t){if(!(ps(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Ug)){if(!t.producerMustRecompute(t)&&!ac(t)){id(t);return}t.producerRecomputeValue(t),id(t)}}function Bg(t){if(t.consumers===void 0)return;let e=td;td=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||oO(r)}}finally{td=e}}function $g(){return vt?.consumerAllowSignalWrites!==!1}function oO(t){t.dirty=!0,Bg(t),t.consumerMarkedDirty?.(t)}function id(t){t.dirty=!1,t.lastCleanEpoch=Ug}function Wi(t){return t&&(t.producersTail=void 0,t.recomputing=!0),ee(t)}function fs(t,e){if(ee(e),!t)return;t.recomputing=!1;let n=t.producersTail,r=n!==void 0?n.nextProducer:t.producers;if(r!==void 0){if(ps(t))do r=Hg(r);while(r!==void 0);n!==void 0?n.nextProducer=void 0:t.producers=void 0}}function ac(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(ad(n),r!==n.version))return!0}return!1}function cd(t){if(ps(t)){let e=t.producers;for(;e!==void 0;)e=Hg(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function eb(t,e){let n=t.consumersTail,r=ps(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)eb(i.producer,i)}function Hg(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!ps(e)){let o=e.producers;for(;o!==void 0;)o=Hg(o)}return n}function ps(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function ud(t){iO?.(t)}function sO(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function ld(t,e){let n=Object.create(aO);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(ad(n),hs(n),n.value===sc)throw n.error;return n.value};return r[_t]=n,ud(n),r}var nd=Symbol("UNSET"),rd=Symbol("COMPUTING"),sc=Symbol("ERRORED"),aO=ye(V({},Gi),{value:nd,dirty:!0,error:null,equal:od,kind:"computed",producerMustRecompute(t){return t.value===nd||t.value===rd},producerRecomputeValue(t){if(t.value===rd)throw new Error("");let e=t.value;t.value=rd;let n=Wi(t),r,i=!1;try{r=t.computation(),ee(null),i=e!==nd&&e!==sc&&r!==sc&&t.equal(e,r)}catch(o){r=sc,t.error=o}finally{fs(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function cO(){throw new Error}var tb=cO;function nb(t){tb(t)}function zg(t){tb=t}var uO=null;function qg(t,e){let n=Object.create(dd);n.value=t,e!==void 0&&(n.equal=e);let r=()=>rb(n);return r[_t]=n,ud(n),[r,s=>gs(n,s),s=>Gg(n,s)]}function rb(t){return hs(t),t.value}function gs(t,e){$g()||nb(t),t.equal(t.value,e)||(t.value=e,lO(t))}function Gg(t,e){$g()||nb(t),gs(t,e(t.value))}var dd=ye(V({},Gi),{equal:od,value:void 0,kind:"signal"});function lO(t){t.version++,XD(),Bg(t),uO?.(t)}function ib(t){let e=ee(null);try{return t()}finally{ee(e)}}var md="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",F=class extends Error{code;constructor(e,n){super(Zi(e,n)),this.code=e}};function dO(t){return`NG0${Math.abs(t)}`}function Zi(t,e){return`${dO(t)}${e?": "+e:""}`}var Zt=globalThis;function ve(t){for(let e in t)if(t[e]===ve)return e;throw Error("")}function ab(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function hr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(hr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function yd(t,e){return t?e?`${t} ${e}`:t:e||""}var hO=ve({__forward_ref__:ve});function vd(t){return t.__forward_ref__=vd,t.toString=function(){return hr(this())},t}function dt(t){return om(t)?t():t}function om(t){return typeof t=="function"&&t.hasOwnProperty(hO)&&t.__forward_ref__===vd}function cb(t,e){t==null&&sm(e,t,null,"!=")}function sm(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function $(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Yr(t){return{providers:t.providers||[],imports:t.imports||[]}}function hc(t){return fO(t,_d)}function am(t){return hc(t)!==null}function fO(t,e){return t.hasOwnProperty(e)&&t[e]||null}function pO(t){let e=t?.[_d]??null;return e||null}function Kg(t){return t&&t.hasOwnProperty(fd)?t[fd]:null}var _d=ve({\u0275prov:ve}),fd=ve({\u0275inj:ve}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=$({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function cm(t){return t&&!!t.\u0275providers}var um=ve({\u0275cmp:ve}),lm=ve({\u0275dir:ve}),dm=ve({\u0275pipe:ve}),hm=ve({\u0275mod:ve}),lc=ve({\u0275fac:ve}),Xi=ve({__NG_ELEMENT_ID__:ve}),ob=ve({__NG_ENV_ID__:ve});function Jr(t){return typeof t=="string"?t:t==null?"":String(t)}function pd(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Jr(t)}var fm=ve({ngErrorCode:ve}),ub=ve({ngErrorMessage:ve}),uc=ve({ngTokenPath:ve});function pm(t,e){return lb("",-200,e)}function Ed(t,e){throw new F(-201,!1)}function gO(t,e){t[uc]??=[];let n=t[uc],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(cb(e.provide,"Token with multi: true should have a provide property"),r=pd(e.provide)):r=pd(e),n[0]!==r&&t[uc].unshift(r)}function mO(t,e){let n=t[uc],r=t[fm],i=t[ub]||t.message;return t.message=vO(i,r,n,e),t}function lb(t,e,n){let r=new F(e,t);return r[fm]=e,r[ub]=t,n&&(r[uc]=n),r}function yO(t){return t[fm]}function vO(t,e,n=[],r=null){let i="";n&&n.length>1&&(i=` Path: ${n.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return Zi(e,`${t}${o}${i}`)}var Qg;function db(){return Qg}function At(t){let e=Qg;return Qg=t,e}function gm(t,e,n){let r=hc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Ed(t,"Injector")}var _O={},Ki=_O,Yg="__NG_DI_FLAG__",Jg=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Qi(n)||0;try{return this.injector.get(e,r&8?null:Ki,r)}catch(i){if(ds(i))return i;throw i}}};function EO(t,e=0){let n=ed();if(n===void 0)throw new F(-203,!1);if(n===null)return gm(t,void 0,e);{let r=IO(e),i=n.retrieve(t,r);if(ds(i)){if(r.optional)return null;throw i}return i}}function q(t,e=0){return(db()||EO)(dt(t),e)}function M(t,e){return q(t,Qi(e))}function Qi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function IO(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Zg(t){let e=[];for(let n=0;n<t.length;n++){let r=dt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new F(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=wO(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(q(i,o))}else e.push(q(r))}return e}function mm(t,e){return t[Yg]=e,t.prototype[Yg]=e,t}function wO(t){return t[Yg]}function Wr(t,e){let n=t.hasOwnProperty(lc);return n?t[lc]:null}function hb(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function fb(t){return t.flat(Number.POSITIVE_INFINITY)}function Id(t,e){t.forEach(n=>Array.isArray(n)?Id(n,e):e(n))}function ym(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function fc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function pb(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function wd(t,e,n){let r=ys(t,e);return r>=0?t[r|1]=n:(r=~r,pb(t,r,e,n)),r}function Td(t,e){let n=ys(t,e);if(n>=0)return t[n|1]}function ys(t,e){return TO(t,e,1)}function TO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Zr={},Rt=[],fr=new U(""),vm=new U("",-1),_m=new U(""),dc=class{get(e,n=Ki){if(n===Ki){let i=lb("",-201);throw i.name="\u0275NotFound",i}return n}};function Em(t){return t[hm]||null}function Xr(t){return t[um]||null}function Im(t){return t[lm]||null}function gb(t){return t[dm]||null}function Ft(t){return{\u0275providers:t}}function mb(...t){return{\u0275providers:wm(!0,t),\u0275fromNgModule:!0}}function wm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Id(e,s=>{let a=s;gd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&yb(i,o),n}function yb(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Tm(i,o=>{e(o,r)})}}function gd(t,e,n,r){if(t=dt(t),!t)return!1;let i=null,o=Kg(t),s=!o&&Xr(t);if(!o&&!s){let c=t.ngModule;if(o=Kg(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)gd(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Id(o.imports,h=>{gd(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&yb(l,e)}if(!a){let l=Wr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Rt},i),e({provide:_m,useValue:i,multi:!0},i),e({provide:fr,useValue:()=>q(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;Tm(c,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Tm(t,e){for(let n of t)cm(n)&&(n=n.\u0275providers),Array.isArray(n)?Tm(n,e):e(n)}var DO=ve({provide:String,useValue:ve});function vb(t){return t!==null&&typeof t=="object"&&DO in t}function bO(t){return!!(t&&t.useExisting)}function CO(t){return!!(t&&t.useFactory)}function Yi(t){return typeof t=="function"}function _b(t){return!!t.useClass}var pc=new U(""),hd={},sb={},Wg;function gc(){return Wg===void 0&&(Wg=new dc),Wg}var ke=class{},Ji=class extends ke{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,em(e,s=>this.processProvider(s)),this.records.set(vm,ms(void 0,this)),i.has("environment")&&this.records.set(ke,ms(void 0,this));let o=this.records.get(pc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(_m,Rt,{self:!0}))}retrieve(e,n){let r=Qi(n)||0;try{return this.get(e,Ki,r)}catch(i){if(ds(i))return i;throw i}}destroy(){cc(this),this._destroyed=!0;let e=ee(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ee(e)}}onDestroy(e){return cc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){cc(this);let n=kn(this),r=At(void 0),i;try{return e()}finally{kn(n),At(r)}}get(e,n=Ki,r){if(cc(this),e.hasOwnProperty(ob))return e[ob](this);let i=Qi(r),o,s=kn(this),a=At(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=PO(e)&&hc(e);h&&this.injectableDefInScope(h)?l=ms(Xg(e),hd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?gc():this.parent;return n=i&8&&n===Ki?null:n,c.get(e,n)}catch(c){let l=yO(c);throw l===-200||l===-201?new F(l,null):c}finally{At(a),kn(s)}}resolveInjectorInitializers(){let e=ee(null),n=kn(this),r=At(void 0),i;try{let o=this.get(fr,Rt,{self:!0});for(let s of o)s()}finally{kn(n),At(r),ee(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(hr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=dt(e);let n=Yi(e)?e:dt(e&&e.provide),r=AO(e);if(!Yi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ms(void 0,hd,!0),i.factory=()=>Zg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=ee(null);try{if(n.value===sb)throw pm(hr(e));return n.value===hd&&(n.value=sb,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&NO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ee(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=dt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Xg(t){let e=hc(t),n=e!==null?e.factory:Wr(t);if(n!==null)return n;if(t instanceof U)throw new F(204,!1);if(t instanceof Function)return SO(t);throw new F(204,!1)}function SO(t){if(t.length>0)throw new F(204,!1);let n=pO(t);return n!==null?()=>n.factory(t):()=>new t}function AO(t){if(vb(t))return ms(void 0,t.useValue);{let e=Dm(t);return ms(e,hd)}}function Dm(t,e,n){let r;if(Yi(t)){let i=dt(t);return Wr(i)||Xg(i)}else if(vb(t))r=()=>dt(t.useValue);else if(CO(t))r=()=>t.useFactory(...Zg(t.deps||[]));else if(bO(t))r=(i,o)=>q(dt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=dt(t&&(t.useClass||t.provide));if(RO(t))r=()=>new i(...Zg(t.deps));else return Wr(i)||Xg(i)}return r}function cc(t){if(t.destroyed)throw new F(205,!1)}function ms(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function RO(t){return!!t.deps}function NO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function PO(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function em(t,e){for(let n of t)Array.isArray(n)?em(n,e):n&&cm(n)?em(n.\u0275providers,e):e(n)}function Ve(t,e){let n;t instanceof Ji?(cc(t),n=t):n=new Jg(t);let r,i=kn(n),o=At(void 0);try{return e()}finally{kn(i),At(o)}}function Eb(){return db()!==void 0||ed()!=null}var Xt=0,G=1,te=2,Je=3,en=4,tn=5,vs=6,_s=7,xe=8,eo=9,On=10,Se=11,Es=12,bm=13,to=14,Lt=15,ei=16,no=17,Fn=18,mc=19,Cm=20,dr=21,Dd=22,yc=23,zt=24,bd=25,je=26,Sm=1,Am=6,ti=7,vc=8,ro=9,tt=10;function Ln(t){return Array.isArray(t)&&typeof t[Sm]=="object"}function ln(t){return Array.isArray(t)&&t[Sm]===!0}function Rm(t){return(t.flags&4)!==0}function ni(t){return t.componentOffset>-1}function Cd(t){return(t.flags&1)===1}function dn(t){return!!t.template}function Is(t){return(t[te]&512)!==0}function io(t){return(t[te]&256)===256}var Ib="svg",wb="math";function nn(t){for(;Array.isArray(t);)t=t[Xt];return t}function Nm(t){for(;Array.isArray(t);){if(typeof t[Sm]=="object")return t;t=t[Xt]}return null}function Pm(t,e){return nn(e[t])}function hn(t,e){return nn(e[t.index])}function _c(t,e){return t.data[e]}function Sd(t,e){return t[e]}function Mm(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function rn(t,e){let n=e[t];return Ln(n)?n:n[Xt]}function Tb(t){return(t[te]&4)===4}function Ad(t){return(t[te]&128)===128}function Db(t){return ln(t[Je])}function Vn(t,e){return e==null?null:t[e]}function km(t){t[no]=0}function xm(t){t[te]&1024||(t[te]|=1024,Ad(t)&&Ic(t))}function bb(t,e){for(;t>0;)e=e[to],t--;return e}function Ec(t){return!!(t[te]&9216||t[zt]?.dirty)}function Rd(t){t[On].changeDetectionScheduler?.notify(8),t[te]&64&&(t[te]|=1024),Ec(t)&&Ic(t)}function Ic(t){t[On].changeDetectionScheduler?.notify(0);let e=Kr(t);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!Ad(e)));)e=Kr(e)}function Om(t,e){if(io(t))throw new F(911,!1);t[dr]===null&&(t[dr]=[]),t[dr].push(e)}function Cb(t,e){if(t[dr]===null)return;let n=t[dr].indexOf(e);n!==-1&&t[dr].splice(n,1)}function Kr(t){let e=t[Je];return ln(e)?e[Je]:e}function Fm(t){return t[_s]??=[]}function Lm(t){return t.cleanup??=[]}function Sb(t,e,n,r){let i=Fm(e);i.push(n),t.firstCreatePass&&Lm(t).push(r,i.length-1)}var ae={lFrame:Hb(null),bindingsEnabled:!0,skipHydrationRootTNode:null},wc=function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t}(wc||{}),MO=0,tm=!1;function Ab(){return ae.lFrame.elementDepthCount}function Rb(){ae.lFrame.elementDepthCount++}function Vm(){ae.lFrame.elementDepthCount--}function Nb(){return ae.bindingsEnabled}function Pb(){return ae.skipHydrationRootTNode!==null}function jm(t){return ae.skipHydrationRootTNode===t}function Um(){ae.skipHydrationRootTNode=null}function Z(){return ae.lFrame.lView}function Ue(){return ae.lFrame.tView}function Mb(t){return ae.lFrame.contextLView=t,t[xe]}function kb(t){return ae.lFrame.contextLView=null,t}function ht(){let t=Bm();for(;t!==null&&t.type===64;)t=t.parent;return t}function Bm(){return ae.lFrame.currentTNode}function xb(){let t=ae.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ws(t,e){let n=ae.lFrame;n.currentTNode=t,n.isParent=e}function $m(){return ae.lFrame.isParent}function Ob(){ae.lFrame.isParent=!1}function Fb(){return ae.lFrame.contextLView}function Hm(t){sm("Must never be called in production mode"),MO=t}function zm(){return tm}function qm(t){let e=tm;return tm=t,e}function Tc(){let t=ae.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Lb(){return ae.lFrame.bindingIndex}function Vb(t){return ae.lFrame.bindingIndex=t}function pr(){return ae.lFrame.bindingIndex++}function Nd(t){let e=ae.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function jb(){return ae.lFrame.inI18n}function Ub(t,e){let n=ae.lFrame;n.bindingIndex=n.bindingRootIndex=t,Pd(e)}function Bb(){return ae.lFrame.currentDirectiveIndex}function Pd(t){ae.lFrame.currentDirectiveIndex=t}function Gm(t){let e=ae.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Wm(){return ae.lFrame.currentQueryIndex}function Md(t){ae.lFrame.currentQueryIndex=t}function kO(t){let e=t[G];return e.type===2?e.declTNode:e.type===1?t[tn]:null}function Km(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=kO(o),i===null||(o=o[to],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ae.lFrame=$b();return r.currentTNode=e,r.lView=t,!0}function kd(t){let e=$b(),n=t[G];ae.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function $b(){let t=ae.lFrame,e=t===null?null:t.child;return e===null?Hb(t):e}function Hb(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function zb(){let t=ae.lFrame;return ae.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Qm=zb;function xd(){let t=zb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function qb(t){return(ae.lFrame.contextLView=bb(t,ae.lFrame.contextLView))[xe]}function jn(){return ae.lFrame.selectedIndex}function ri(t){ae.lFrame.selectedIndex=t}function Dc(){let t=ae.lFrame;return _c(t.tView,t.selectedIndex)}function Gb(){return ae.lFrame.currentNamespace}var Wb=!0;function Od(){return Wb}function Fd(t){Wb=t}function nm(t,e=null,n=null,r){let i=Ym(t,e,n,r);return i.resolveInjectorInitializers(),i}function Ym(t,e=null,n=null,r,i=new Set){let o=[n||Rt,mb(t)];return r=r||(typeof t=="object"?void 0:hr(t)),new Ji(o,e||gc(),r||null,i)}var Ze=class t{static THROW_IF_NOT_FOUND=Ki;static NULL=new dc;static create(e,n){if(Array.isArray(e))return nm({name:""},n,e,"");{let r=e.name??"";return nm({name:r},e.parent,e.providers,r)}}static \u0275prov=$({token:t,providedIn:"any",factory:()=>q(vm)});static __NG_ELEMENT_ID__=-1},ze=new U(""),gr=(()=>{class t{static __NG_ELEMENT_ID__=xO;static __NG_ENV_ID__=n=>n}return t})(),rm=class extends gr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return io(this._lView)}onDestroy(e){let n=this._lView;return Om(n,e),()=>Cb(n,e)}};function xO(){return new rm(Z())}var xn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Nt=new U("",{providedIn:"root",factory:()=>{let t=M(ke),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(xn),e.handleError(n))}}}),Kb={provide:fr,useValue:()=>void M(xn),multi:!0};function Jm(t){return typeof t=="function"&&t[_t]!==void 0}function bc(t,e){let[n,r,i]=qg(t,e?.equal),o=n,s=o[_t];return o.set=r,o.update=i,o.asReadonly=Qb.bind(o),o}function Qb(){let t=this[_t];if(t.readonlyFn===void 0){let e=()=>this();e[_t]=t,t.readonlyFn=e}return t.readonlyFn}function Zm(t){return Jm(t)&&typeof t.set=="function"}var Qr=class{},Ts=new U("",{providedIn:"root",factory:()=>!1});var Xm=new U(""),ey=new U("");var Un=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ct(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new J(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})(),ii=(()=>{class t{internalPendingTasks=M(Un);scheduler=M(Qr);errorHandler=M(Nt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})();function Cc(...t){}var ty=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:()=>new im})}return t})(),im=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Ps(t){return{toString:t}.toString()}var Ld="__parameters__";function $O(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function RC(t,e,n){return Ps(()=>{let r=$O(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(Ld)?c[Ld]:Object.defineProperty(c,Ld,{value:[]})[Ld];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Pt=mm(RC("Optional"),8);var NC=mm(RC("SkipSelf"),4);function HO(t){return typeof t=="function"}var Gd=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function PC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var ho=(()=>{let t=()=>MC;return t.ngInherit=!0,t})();function MC(t){return t.type.prototype.ngOnChanges&&(t.setInput=qO),zO}function zO(){let t=xC(this),e=t?.current;if(e){let n=t.previous;if(n===Zr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function qO(t,e,n,r,i){let o=this.declaredInputs[r],s=xC(t)||GO(t,{previous:Zr,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Gd(l&&l.currentValue,n,c===Zr),PC(t,e,i,n)}var kC="__ngSimpleChanges__";function xC(t){return t[kC]||null}function GO(t,e){return t[kC]=e}var Yb=[];var De=function(t,e=null,n){for(let r=0;r<Yb.length;r++){let i=Yb[r];i(t,e,n)}};function WO(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=MC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function KO(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function $d(t,e,n){OC(t,e,3,n)}function Hd(t,e,n,r){(t[te]&3)===n&&OC(t,e,n,r)}function ny(t,e){let n=t[te];(n&3)===e&&(n&=16383,n+=1,t[te]=n)}function OC(t,e,n,r){let i=r!==void 0?t[no]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[no]+=65536),(a<o||o==-1)&&(QO(t,n,e,c),t[no]=(t[no]&4294901760)+c+2),c++}function Jb(t,e){De(4,t,e);let n=ee(null);try{e.call(t)}finally{ee(n),De(5,t,e)}}function QO(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[te]>>14<t[no]>>16&&(t[te]&3)===e&&(t[te]+=16384,Jb(a,o)):Jb(a,o)}var bs=-1,ao=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function YO(t){return(t.flags&8)!==0}function JO(t){return(t.flags&16)!==0}function ZO(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];XO(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function FC(t){return t===3||t===4||t===6}function XO(t){return t.charCodeAt(0)===64}function Cs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Zb(t,n,i,null,e[++r]):Zb(t,n,i,null,null))}}return t}function Zb(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function LC(t){return t!==bs}function Wd(t){return t&32767}function e1(t){return t>>16}function Kd(t,e){let n=e1(t),r=e;for(;n>0;)r=r[to],n--;return r}var py=!0;function Qd(t){let e=py;return py=t,e}var t1=256,VC=t1-1,jC=5,n1=0,Bn={};function r1(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Xi)&&(r=n[Xi]),r==null&&(r=n[Xi]=n1++);let i=r&VC,o=1<<i;e.data[t+(i>>jC)]|=o}function Yd(t,e){let n=UC(t,e);if(n!==-1)return n;let r=e[G];r.firstCreatePass&&(t.injectorIndex=e.length,ry(r.data,t),ry(e,null),ry(r.blueprint,null));let i=Xy(t,e),o=t.injectorIndex;if(LC(i)){let s=Wd(i),a=Kd(i,e),c=a[G].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function ry(t,e){t.push(0,0,0,0,0,0,0,0,e)}function UC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Xy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=qC(i),r===null)return bs;if(n++,i=i[to],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return bs}function gy(t,e,n){r1(t,e,n)}function i1(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(FC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function BC(t,e,n){if(n&8||t!==void 0)return t;Ed(e,"NodeInjector")}function $C(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[eo],o=At(void 0);try{return i?i.get(e,r,n&8):gm(e,r,n&8)}finally{At(o)}}return BC(r,e,n)}function HC(t,e,n,r=0,i){if(t!==null){if(e[te]&2048&&!(r&2)){let s=c1(t,e,n,r,Bn);if(s!==Bn)return s}let o=zC(t,e,n,r,Bn);if(o!==Bn)return o}return $C(e,n,r,i)}function zC(t,e,n,r,i){let o=s1(n);if(typeof o=="function"){if(!Km(e,t,r))return r&1?BC(i,n,r):$C(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Ed(n);else return s}finally{Qm()}}else if(typeof o=="number"){let s=null,a=UC(t,e),c=bs,l=r&1?e[Lt][tn]:null;for((a===-1||r&4)&&(c=a===-1?Xy(t,e):e[a+8],c===bs||!eC(r,!1)?a=-1:(s=e[G],a=Wd(c),e=Kd(c,e)));a!==-1;){let h=e[G];if(Xb(o,a,h.data)){let p=o1(a,e,n,s,r,l);if(p!==Bn)return p}c=e[a+8],c!==bs&&eC(r,e[G].data[a+8]===l)&&Xb(o,a,e)?(s=h,a=Wd(c),e=Kd(c,e)):a=-1}}return i}function o1(t,e,n,r,i,o){let s=e[G],a=s.data[t+8],c=r==null?ni(a)&&py:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=zd(a,s,n,c,l);return h!==null?Rc(e,s,h,a,i):Bn}function zd(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let w=s[y];if(y<c&&n===w||y>=c&&w.type===n)return y}if(i){let y=s[c];if(y&&dn(y)&&y.type===n)return c}return null}function Rc(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof ao){let a=o;if(a.resolving){let y=pd(s[n]);throw pm(y)}let c=Qd(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?At(a.injectImpl):null,g=Km(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&WO(n,s[n],e)}finally{p!==null&&At(p),Qd(c),a.resolving=!1,Qm()}}return o}function s1(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Xi)?t[Xi]:void 0;return typeof e=="number"?e>=0?e&VC:a1:e}function Xb(t,e,n){let r=1<<t;return!!(n[e+(t>>jC)]&r)}function eC(t,e){return!(t&2)&&!(t&1&&e)}var so=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return HC(this._tNode,this._lView,e,Qi(r),n)}};function a1(){return new so(ht(),Z())}function hh(t){return Ps(()=>{let e=t.prototype.constructor,n=e[lc]||my(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[lc]||my(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function my(t){return om(t)?()=>{let e=my(dt(t));return e&&e()}:Wr(t)}function c1(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[te]&2048&&!Is(s);){let a=zC(o,s,n,r|2,Bn);if(a!==Bn)return a;let c=o.parent;if(!c){let l=s[Cm];if(l){let h=l.get(n,Bn,r);if(h!==Bn)return h}c=qC(s),s=s[to]}o=c}return i}function qC(t){let e=t[G],n=e.type;return n===2?e.declTNode:n===1?t[tn]:null}function Oc(t){return i1(ht(),t)}function u1(){return Ms(ht(),Z())}function Ms(t,e){return new Gt(hn(t,e))}var Gt=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=u1}return t})();function l1(t){return t instanceof Gt?t.nativeElement:t}function d1(){return this._results[Symbol.iterator]()}var Jd=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ye}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=fb(e);(this._changesDetected=!hb(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=d1};function GC(t){return(t.flags&128)===128}var ev=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(ev||{}),WC=new Map,h1=0;function f1(){return h1++}function p1(t){WC.set(t[mc],t)}function yy(t){WC.delete(t[mc])}var tC="__ngContext__";function Ss(t,e){Ln(e)?(t[tC]=e[mc],p1(e)):t[tC]=e}function KC(t){return YC(t[Es])}function QC(t){return YC(t[en])}function YC(t){for(;t!==null&&!ln(t);)t=t[en];return t}var vy;function tv(t){vy=t}function JC(){if(vy!==void 0)return vy;if(typeof document<"u")return document;throw new F(210,!1)}var fh=new U("",{providedIn:"root",factory:()=>g1}),g1="ng",ph=new U(""),si=new U("",{providedIn:"platform",factory:()=>"unknown"});var m1=new U(""),gh=new U("",{providedIn:"root",factory:()=>JC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var y1="h",v1="b";var ZC="r";var XC="di";var eS=!1,tS=new U("",{providedIn:"root",factory:()=>eS});var _1=(t,e,n,r)=>{};function E1(t,e,n,r){_1(t,e,n,r)}function nv(t){return(t.flags&32)===32}var I1=()=>null;function nS(t,e,n=!1){return I1(t,e,n)}function rS(t,e){let n=t.contentQueries;if(n!==null){let r=ee(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Md(o),a.contentQueries(2,e[s],s)}}}finally{ee(r)}}}function _y(t,e,n){Md(0);let r=ee(null);try{e(t,n)}finally{ee(r)}}function iS(t,e,n){if(Rm(e)){let r=ee(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{ee(r)}}}var mr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(mr||{}),Vd;function w1(){if(Vd===void 0&&(Vd=null,Zt.trustedTypes))try{Vd=Zt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Vd}function mh(t){return w1()?.createHTML(t)||t}var jd;function T1(){if(jd===void 0&&(jd=null,Zt.trustedTypes))try{jd=Zt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return jd}function nC(t){return T1()?.createScriptURL(t)||t}var yr=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${md})`}},Ey=class extends yr{getTypeName(){return"HTML"}},Iy=class extends yr{getTypeName(){return"Style"}},wy=class extends yr{getTypeName(){return"Script"}},Ty=class extends yr{getTypeName(){return"URL"}},Dy=class extends yr{getTypeName(){return"ResourceURL"}};function mn(t){return t instanceof yr?t.changingThisBreaksApplicationSecurity:t}function vr(t,e){let n=oS(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${md})`)}return n===e}function oS(t){return t instanceof yr&&t.getTypeName()||null}function rv(t){return new Ey(t)}function iv(t){return new Iy(t)}function ov(t){return new wy(t)}function sv(t){return new Ty(t)}function av(t){return new Dy(t)}function D1(t){let e=new Cy(t);return b1()?new by(e):e}var by=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(mh(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.firstChild?.remove(),n)}catch{return null}}},Cy=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=mh(e),n}};function b1(){try{return!!new window.DOMParser().parseFromString(mh(""),"text/html")}catch{return!1}}var C1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Fc(t){return t=String(t),t.match(C1)?t:"unsafe:"+t}function _r(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function Lc(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var sS=_r("area,br,col,hr,img,wbr"),aS=_r("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),cS=_r("rp,rt"),S1=Lc(cS,aS),A1=Lc(aS,_r("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),R1=Lc(cS,_r("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rC=Lc(sS,A1,R1,S1),uS=_r("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),N1=_r("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),P1=_r("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),M1=Lc(uS,N1,P1),k1=_r("script,style,template"),Sy=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=F1(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=O1(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=iC(e).toLowerCase();if(!rC.hasOwnProperty(n))return this.sanitizedSomething=!0,!k1.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!M1.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;uS[a]&&(c=Fc(c)),this.buf.push(" ",s,'="',oC(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=iC(e).toLowerCase();rC.hasOwnProperty(n)&&!sS.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(oC(e))}};function x1(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function O1(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw lS(e);return e}function F1(t){let e=t.firstChild;if(e&&x1(t,e))throw lS(e);return e}function iC(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function lS(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var L1=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,V1=/([^\#-~ |!])/g;function oC(t){return t.replace(/&/g,"&amp;").replace(L1,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(V1,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Ud;function cv(t,e){let n=null;try{Ud=Ud||D1(t);let r=e?String(e):"";n=Ud.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Ud.getInertBodyElement(r)}while(r!==o);let a=new Sy().sanitizeChildren(sC(n)||n);return mh(a)}finally{if(n){let r=sC(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}function sC(t){return"content"in t&&j1(t)?t.content:null}function j1(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var yn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(yn||{});function dS(t){let e=fS();return e?e.sanitize(yn.URL,t)||"":vr(t,"URL")?mn(t):Fc(Jr(t))}function hS(t){let e=fS();if(e)return nC(e.sanitize(yn.RESOURCE_URL,t)||"");if(vr(t,"ResourceURL"))return nC(mn(t));throw new F(904,!1)}function U1(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?hS:dS}function uv(t,e,n){return U1(e,n)(t)}function fS(){let t=Z();return t&&t[On].sanitizer}function B1(t){return t.ownerDocument.defaultView}function $1(t){return t.ownerDocument}function pS(t){return t instanceof Function?t():t}function H1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var gS="ng-template";function z1(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&H1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(lv(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function lv(t){return t.type===4&&t.value!==gS}function q1(t,e,n){let r=t.type===4&&!n?gS:t.value;return e===r}function G1(t,e,n){let r=4,i=t.attrs,o=i!==null?Q1(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!fn(r)&&!fn(c))return!1;if(s&&fn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!q1(t,c,n)||c===""&&e.length===1){if(fn(r))return!1;s=!0}}else if(r&8){if(i===null||!z1(t,i,c,n)){if(fn(r))return!1;s=!0}}else{let l=e[++a],h=W1(c,i,lv(t),n);if(h===-1){if(fn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(fn(r))return!1;s=!0}}}}return fn(r)||s}function fn(t){return(t&1)===0}function W1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Y1(e,t)}function K1(t,e,n=!1){for(let r=0;r<e.length;r++)if(G1(t,e[r],n))return!0;return!1}function Q1(t){for(let e=0;e<t.length;e++){let n=t[e];if(FC(n))return e}return t.length}function Y1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function aC(t,e){return t?":not("+e.trim()+")":e}function J1(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!fn(s)&&(e+=aC(o,i),i=""),r=s,o=o||!fn(r);n++}return i!==""&&(e+=aC(o,i)),e}function Z1(t){return t.map(J1).join(",")}function X1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!fn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var It={};function eF(t,e){return t.createText(e)}function tF(t,e,n){t.setValue(e,n)}function mS(t,e,n){return t.createElement(e,n)}function Zd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function yS(t,e,n){t.appendChild(e,n)}function cC(t,e,n,r,i){r!==null?Zd(t,e,n,r,i):yS(t,e,n)}function vS(t,e,n){t.removeChild(null,e,n)}function nF(t,e,n){t.setAttribute(e,"style",n)}function rF(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function _S(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&ZO(t,e,r),i!==null&&rF(t,e,i),o!==null&&nF(t,e,o)}function dv(t,e,n,r,i,o,s,a,c,l,h){let p=je+r,g=p+i,y=iF(p,g),w=typeof l=="function"?l():l;return y[G]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:h}}function iF(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:It);return n}function oF(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=dv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function hv(t,e,n,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[Xt]=i,p[te]=r|4|128|8|64|1024,(l!==null||t&&t[te]&2048)&&(p[te]|=2048),km(p),p[Je]=p[to]=t,p[xe]=n,p[On]=s||t&&t[On],p[Se]=a||t&&t[Se],p[eo]=c||t&&t[eo]||null,p[tn]=o,p[mc]=f1(),p[vs]=h,p[Cm]=l,p[Lt]=e.type==2?t[Lt]:p,p}function sF(t,e,n){let r=hn(e,t),i=oF(n),o=t[On].rendererFactory,s=fv(t,hv(t,i,null,ES(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function ES(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function IS(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function fv(t,e){return t[Es]?t[bm][en]=e:t[Es]=e,t[bm]=e,e}function aF(t=1){wS(Ue(),Z(),jn()+t,!1)}function wS(t,e,n,r){if(!r)if((e[te]&3)===3){let o=t.preOrderCheckHooks;o!==null&&$d(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Hd(e,o,0,n)}ri(n)}var yh=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(yh||{});function Ay(t,e,n,r){let i=ee(null);try{let[o,s,a]=t.inputs[n],c=null;(s&yh.SignalBased)!==0&&(c=e[o][_t]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,c,r,n,o):PC(e,c,o,r)}finally{ee(i)}}var gn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(gn||{}),cF;function pv(t,e){return cF(t,e)}function Ds(t,e,n,r,i){if(r!=null){let o,s=!1;ln(r)?o=r:Ln(r)&&(s=!0,r=r[Xt]);let a=nn(r);t===0&&n!==null?i==null?yS(e,n,a):Zd(e,n,a,i||null,!0):t===1&&n!==null?Zd(e,n,a,i||null,!0):t===2?vS(e,a,s):t===3&&e.destroyNode(a),o!=null&&EF(e,t,o,n,i)}}function uF(t,e){TS(t,e),e[Xt]=null,e[tn]=null}function lF(t,e,n,r,i,o){r[Xt]=i,r[tn]=e,_h(t,r,n,1,i,o)}function TS(t,e){e[On].changeDetectionScheduler?.notify(9),_h(t,e,e[Se],2,null,null)}function dF(t){let e=t[Es];if(!e)return iy(t[G],t);for(;e;){let n=null;if(Ln(e))n=e[Es];else{let r=e[tt];r&&(n=r)}if(!n){for(;e&&!e[en]&&e!==t;)Ln(e)&&iy(e[G],e),e=e[Je];e===null&&(e=t),Ln(e)&&iy(e[G],e),n=e&&e[en]}e=n}}function gv(t,e){let n=t[ro],r=n.indexOf(e);n.splice(r,1)}function vh(t,e){if(io(e))return;let n=e[Se];n.destroyNode&&_h(t,e,n,3,null,null),dF(e)}function iy(t,e){if(io(e))return;let n=ee(null);try{e[te]&=-129,e[te]|=256,e[zt]&&cd(e[zt]),fF(t,e),hF(t,e),e[G].type===1&&e[Se].destroy();let r=e[ei];if(r!==null&&ln(e[Je])){r!==e[Je]&&gv(r,e);let i=e[Fn];i!==null&&i.detachView(t)}yy(e)}finally{ee(n)}}function hF(t,e){let n=t.cleanup,r=e[_s];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[_s]=null);let i=e[dr];if(i!==null){e[dr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[yc];if(o!==null){e[yc]=null;for(let s of o)s.destroy()}}function fF(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ao)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];De(4,a,c);try{c.call(a)}finally{De(5,a,c)}}else{De(4,i,o);try{o.call(i)}finally{De(5,i,o)}}}}}function pF(t,e,n){return gF(t,e.parent,n)}function gF(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Xt];if(ni(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===mr.None||i===mr.Emulated)return null}return hn(r,n)}function mF(t,e,n){return vF(t,e,n)}function yF(t,e,n){return t.type&40?hn(t,n):null}var vF=yF,uC;function mv(t,e,n,r){let i=pF(t,r,e),o=e[Se],s=r.parent||e[tn],a=mF(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)cC(o,i,n[c],a,!1);else cC(o,i,n,a,!1);uC!==void 0&&uC(o,r,e,n,i)}function Sc(t,e){if(e!==null){let n=e.type;if(n&3)return hn(e,t);if(n&4)return Ry(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Sc(t,r);{let i=t[e.index];return ln(i)?Ry(-1,i):nn(i)}}else{if(n&128)return Sc(t,e.next);if(n&32)return pv(e,t)()||nn(t[e.index]);{let r=DS(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Kr(t[Lt]);return Sc(i,r)}else return Sc(t,e.next)}}}return null}function DS(t,e){if(e!==null){let r=t[Lt][tn],i=e.projection;return r.projection[i]}return null}function Ry(t,e){let n=tt+t+1;if(n<e.length){let r=e[n],i=r[G].firstChild;if(i!==null)return Sc(r,i)}return e[ti]}function yv(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Ss(nn(a),r),n.flags|=2),!nv(n))if(c&8)yv(t,e,n.child,r,i,o,!1),Ds(e,t,i,a,o);else if(c&32){let l=pv(n,r),h;for(;h=l();)Ds(e,t,i,h,o);Ds(e,t,i,a,o)}else c&16?_F(t,e,r,n,i,o):Ds(e,t,i,a,o);n=s?n.projectionNext:n.next}}function _h(t,e,n,r,i,o){yv(n,r,t.firstChild,e,i,o,!1)}function _F(t,e,n,r,i,o){let s=n[Lt],c=s[tn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];Ds(e,t,i,h,o)}else{let l=c,h=s[Je];GC(r)&&(l.flags|=128),yv(t,e,l,h,i,o,!0)}}function EF(t,e,n,r,i){let o=n[ti],s=nn(n);o!==s&&Ds(e,t,r,o,i);for(let a=tt;a<n.length;a++){let c=n[a];_h(c[G],c,t,e,r,o)}}function IF(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:gn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=gn.Important),t.setStyle(n,r,i,o))}}function bS(t,e,n,r,i){let o=jn(),s=r&2;try{ri(-1),s&&e.length>je&&wS(t,e,je,!1),De(s?2:0,i,n),n(r,i)}finally{ri(o),De(s?3:1,i,n)}}function CS(t,e,n){SF(t,e,n),(n.flags&64)===64&&AF(t,e,n)}function vv(t,e,n=hn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function wF(t,e,n,r){let o=r.get(tS,eS)||n===mr.ShadowDom,s=t.selectRootElement(e,o);return TF(s),s}function TF(t){DF(t)}var DF=()=>null;function bF(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function SS(t,e,n,r,i,o){let s=e[G];if(_v(t,s,e,n,r)){ni(t)&&CF(e,t.index);return}t.type&3&&(n=bF(n)),AS(t,e,n,r,i,o)}function AS(t,e,n,r,i,o){if(t.type&3){let s=hn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function CF(t,e){let n=rn(e,t);n[te]&16||(n[te]|=64)}function SF(t,e,n){let r=n.directiveStart,i=n.directiveEnd;ni(n)&&sF(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Yd(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],c=Rc(e,t,s,n);if(Ss(c,e),o!==null&&kF(e,s-r,c,a,n,o),dn(a)){let l=rn(n.index,e);l[xe]=Rc(e,t,s,n)}}}function AF(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Bb();try{ri(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Pd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&RF(c,l)}}finally{ri(-1),Pd(s)}}function RF(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function NF(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];K1(e,o.selectors,!1)&&(r??=[],dn(o)?r.unshift(o):r.push(o))}return r}function PF(t,e,n,r,i,o){let s=hn(t,e);MF(e[Se],s,o,t.value,n,r,i)}function MF(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Jr(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function kF(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];Ay(r,n,c,l)}}function RS(t,e,n,r,i){let o=je+n,s=e[G],a=i(s,e,t,r,n);e[o]=a,ws(t,!0);let c=t.type===2;return c?(_S(e[Se],a,t),(Ab()===0||Cd(t))&&Ss(a,e),Rb()):Ss(a,e),Od()&&(!c||!nv(t))&&mv(s,e,a,t),t}function NS(t){let e=t;return $m()?Ob():(e=e.parent,ws(e,!1)),e}function xF(t,e,n){return(t===null||dn(t))&&(n=Nm(n[e.index])),n[Se]}function OF(t,e){let n=t[eo];if(!n)return;n.get(Nt,null)?.(e)}function _v(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],h=s[c+1],p=e.data[l];Ay(p,n[l],h,i),a=!0}if(o)for(let c of o){let l=n[c],h=e.data[c];Ay(h,l,r,i),a=!0}return a}function FF(t,e){let n=rn(e,t),r=n[G];LF(r,n);let i=n[Xt];i!==null&&n[vs]===null&&(n[vs]=nS(i,n[eo])),De(18),Ev(r,n,n[xe]),De(19,n[xe])}function LF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Ev(t,e,n){kd(e);try{let r=t.viewQuery;r!==null&&_y(1,r,n);let i=t.template;i!==null&&bS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Fn]?.finishViewCreation(t),t.staticContentQueries&&rS(t,e),t.staticViewQueries&&_y(2,t.viewQuery,n);let o=t.components;o!==null&&VF(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[te]&=-5,xd()}}function VF(t,e){for(let n=0;n<e.length;n++)FF(t,e[n])}function Eh(t,e,n,r){let i=ee(null);try{let o=e.tView,a=t[te]&4096?4096:16,c=hv(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[ei]=l;let h=t[Fn];return h!==null&&(c[Fn]=h.createEmbeddedView(o)),Ev(o,c,n),c}finally{ee(i)}}function Nc(t,e){return!e||e.firstChild===null||GC(t)}var lC=!1,jF=new U("");function Pc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(nn(o)),ln(o)&&PS(o,r);let s=n.type;if(s&8)Pc(t,e,n.child,r);else if(s&32){let a=pv(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=DS(e,n);if(Array.isArray(a))r.push(...a);else{let c=Kr(e[Lt]);Pc(c[G],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function PS(t,e){for(let n=tt;n<t.length;n++){let r=t[n],i=r[G].firstChild;i!==null&&Pc(r[G],r,i,e)}t[ti]!==t[Xt]&&e.push(t[ti])}function MS(t){if(t[bd]!==null){for(let e of t[bd])e.impl.addSequence(e);t[bd].length=0}}var kS=[];function UF(t){return t[zt]??BF(t)}function BF(t){let e=kS.pop()??Object.create(HF);return e.lView=t,e}function $F(t){t.lView[zt]!==t&&(t.lView=null,kS.push(t))}var HF=ye(V({},Gi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Ic(t.lView)},consumerOnSignalRead(){this.lView[zt]=this}});function zF(t){let e=t[zt]??Object.create(qF);return e.lView=t,e}var qF=ye(V({},Gi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Kr(t.lView);for(;e&&!xS(e[G]);)e=Kr(e);e&&xm(e)},consumerOnSignalRead(){this.lView[zt]=this}});function xS(t){return t.type!==2}function OS(t){if(t[yc]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[yc])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[te]&8192)}}var GF=100;function Iv(t,e=0){let r=t[On].rendererFactory,i=!1;i||r.begin?.();try{WF(t,e)}finally{i||r.end?.()}}function WF(t,e){let n=zm();try{qm(!0),Ny(t,e);let r=0;for(;Ec(t);){if(r===GF)throw new F(103,!1);r++,Ny(t,1)}}finally{qm(n)}}function FS(t,e){Hm(e?wc.Exhaustive:wc.OnlyDirtyViews);try{Iv(t)}finally{Hm(wc.Off)}}function KF(t,e,n,r){if(io(e))return;let i=e[te],o=!1,s=!1;kd(e);let a=!0,c=null,l=null;o||(xS(t)?(l=UF(e),c=Wi(l)):sd()===null?(a=!1,l=zF(e),c=Wi(l)):e[zt]&&(cd(e[zt]),e[zt]=null));try{km(e),Vb(t.bindingStartIndex),n!==null&&bS(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&$d(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Hd(e,y,0,null),ny(e,0)}if(s||QF(e),OS(e),LS(e,0),t.contentQueries!==null&&rS(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&$d(e,y)}else{let y=t.contentHooks;y!==null&&Hd(e,y,1),ny(e,1)}JF(t,e);let p=t.components;p!==null&&jS(e,p,0);let g=t.viewQuery;if(g!==null&&_y(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&$d(e,y)}else{let y=t.viewHooks;y!==null&&Hd(e,y,2),ny(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Dd]){for(let y of e[Dd])y();e[Dd]=null}o||(MS(e),e[te]&=-73)}catch(h){throw o||Ic(e),h}finally{l!==null&&(fs(l,c),a&&$F(l)),xd()}}function LS(t,e){for(let n=KC(t);n!==null;n=QC(n))for(let r=tt;r<n.length;r++){let i=n[r];VS(i,e)}}function QF(t){for(let e=KC(t);e!==null;e=QC(e)){if(!(e[te]&2))continue;let n=e[ro];for(let r=0;r<n.length;r++){let i=n[r];xm(i)}}}function YF(t,e,n){De(18);let r=rn(e,t);VS(r,n),De(19,r[xe])}function VS(t,e){Ad(t)&&Ny(t,e)}function Ny(t,e){let r=t[G],i=t[te],o=t[zt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ac(o)),s||=!1,o&&(o.dirty=!1),t[te]&=-9217,s)KF(r,t,r.template,t[xe]);else if(i&8192){let a=ee(null);try{OS(t),LS(t,1);let c=r.components;c!==null&&jS(t,c,1),MS(t)}finally{ee(a)}}}function jS(t,e,n){for(let r=0;r<e.length;r++)YF(t,e[r],n)}function JF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ri(~i);else{let o=i,s=n[++r],a=n[++r];Ub(s,o);let c=e[o];De(24,c),a(2,c),De(25,c)}}}finally{ri(-1)}}function wv(t,e){let n=zm()?64:1088;for(t[On].changeDetectionScheduler?.notify(e);t;){t[te]|=n;let r=Kr(t);if(Is(t)&&!r)return t;t=r}return null}function US(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function BS(t,e){let n=tt+e;if(n<t.length)return t[n]}function Ih(t,e,n,r=!0){let i=e[G];if(ZF(i,e,t,n),r){let s=Ry(n,t),a=e[Se],c=a.parentNode(t[ti]);c!==null&&lF(i,t[tn],a,e,c,s)}let o=e[vs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function $S(t,e){let n=Mc(t,e);return n!==void 0&&vh(n[G],n),n}function Mc(t,e){if(t.length<=tt)return;let n=tt+e,r=t[n];if(r){let i=r[ei];i!==null&&i!==t&&gv(i,r),e>0&&(t[n-1][en]=r[en]);let o=fc(t,tt+e);uF(r[G],r);let s=o[Fn];s!==null&&s.detachView(o[G]),r[Je]=null,r[en]=null,r[te]&=-129}return r}function ZF(t,e,n,r){let i=tt+r,o=n.length;r>0&&(n[i-1][en]=e),r<o-tt?(e[en]=n[i],ym(n,tt+r,e)):(n.push(e),e[en]=null),e[Je]=n;let s=e[ei];s!==null&&n!==s&&HS(s,e);let a=e[Fn];a!==null&&a.insertView(t),Rd(e),e[te]|=128}function HS(t,e){let n=t[ro],r=e[Je];if(Ln(r))t[te]|=2;else{let i=r[Je][Lt];e[Lt]!==i&&(t[te]|=2)}n===null?t[ro]=[e]:n.push(e)}var oi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[G];return Pc(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[xe]}set context(e){this._lView[xe]=e}get destroyed(){return io(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Je];if(ln(e)){let n=e[vc],r=n?n.indexOf(this):-1;r>-1&&(Mc(e,r),fc(n,r))}this._attachedToViewContainer=!1}vh(this._lView[G],this._lView)}onDestroy(e){Om(this._lView,e)}markForCheck(){wv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[te]&=-129}reattach(){Rd(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,Iv(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[eo].get(jF,lC)}catch{this.exhaustive=lC}}attachToViewContainerRef(){if(this._appRef)throw new F(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Is(this._lView),n=this._lView[ei];n!==null&&!e&&gv(n,this._lView),TS(this._lView[G],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new F(902,!1);this._appRef=e;let n=Is(this._lView),r=this._lView[ei];r!==null&&!n&&HS(r,this._lView),Rd(this._lView)}};var As=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=XF;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Eh(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new oi(o)}}return t})();function XF(){return Tv(ht(),Z())}function Tv(t,e){return t.type&4?new As(e,t,Ms(t,e)):null}function wh(t,e,n,r,i){let o=t.data[e];if(o===null)o=eL(t,e,n,r,i),jb()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=xb();o.injectorIndex=s===null?-1:s.injectorIndex}return ws(o,!0),o}function eL(t,e,n,r,i){let o=Bm(),s=$m(),a=s?o:o&&o.parent,c=t.data[e]=nL(t,a,n,e,r,i);return tL(t,c,o,s),c}function tL(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function nL(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Pb()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var HQ=new RegExp(`^(\\d+)*(${v1}|${y1})*(.*)`);function rL(t){let e=t[Am]??[],r=t[Je][Se],i=[];for(let o of e)o.data[XC]!==void 0?i.push(o):iL(o,r);t[Am]=i}function iL(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[ZC];for(;n<i;){let o=r.nextSibling;vS(e,r,!1),r=o,n++}}}var oL=()=>null,sL=()=>null;function Py(t,e){return oL(t,e)}function zS(t,e,n){return sL(t,e,n)}var qS=class{},Th=class{},My=class{resolveComponentFactory(e){throw new F(917,!1)}},Vc=class{static NULL=new My},co=class{},fo=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>aL()}return t})();function aL(){let t=Z(),e=ht(),n=rn(e.index,t);return(Ln(n)?n:t)[Se]}var GS=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:()=>null})}return t})();var qd={},ky=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,qd,r);return i!==qd||n===qd?i:this.parentInjector.get(e,n,r)}};function Xd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=yd(i,a);else if(o==2){let c=a,l=e[++s];r=yd(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Ee(t,e=0){let n=Z();if(n===null)return q(t,e);let r=ht();return HC(r,n,dt(t),e)}function cL(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,c=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,c,l]=h.resolveHostDirectives(s);break}dL(t,e,n,a,o,c,l)}o!==null&&r!==null&&uL(n,r,o)}function uL(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new F(-301,!1);r.push(e[i],o)}}function lL(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function dL(t,e,n,r,i,o,s){let a=r.length,c=!1;for(let g=0;g<a;g++){let y=r[g];!c&&dn(y)&&(c=!0,lL(t,n,g)),gy(Yd(n,e),t,y.type)}yL(n,t.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=IS(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=Cs(n.mergedAttrs,y.hostAttrs),fL(t,n,e,p,y),mL(p,y,i),s!==null&&s.has(y)){let[N,S]=s.get(y);n.directiveToIndex.set(y.type,[p,N+n.directiveStart,S+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let w=y.type.prototype;!l&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(w.ngOnChanges||w.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}hL(t,n,o)}function hL(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))dC(0,e,i,r),dC(1,e,i,r),fC(e,r,!1);else{let o=n.get(i);hC(0,e,o,r),hC(1,e,o,r),fC(e,r,!0)}}}function dC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),WS(e,o)}}function hC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),WS(e,s)}}function WS(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function fC(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||lv(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let h of l)if(h===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function fL(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Wr(i.type,!0)),s=new ao(o,dn(i),Ee,null);t.blueprint[r]=s,n[r]=s,pL(t,e,r,IS(t,n,i.hostVars,It),i)}function pL(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;gL(s)!=a&&s.push(a),s.push(n,r,o)}}function gL(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function mL(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;dn(e)&&(n[""]=t)}}function yL(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function KS(t,e,n,r,i,o,s,a){let c=e[G],l=c.consts,h=Vn(l,s),p=wh(c,t,n,r,h);return o&&cL(c,e,p,Vn(l,a),i),p.mergedAttrs=Cs(p.mergedAttrs,p.attrs),p.attrs!==null&&Xd(p,p.attrs,!1),p.mergedAttrs!==null&&Xd(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function QS(t,e){KO(t,e),Rm(e)&&t.queries.elementEnd(e)}function vL(t,e,n,r,i,o){let s=e.consts,a=Vn(s,i),c=wh(e,t,n,r,a);if(c.mergedAttrs=Cs(c.mergedAttrs,c.attrs),o!=null){let l=Vn(s,o);c.localNames=[];for(let h=0;h<l.length;h+=2)c.localNames.push(l[h],-1)}return c.attrs!==null&&Xd(c,c.attrs,!1),c.mergedAttrs!==null&&Xd(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Dv(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function bv(t,e,n){return t[e]=n}function _L(t,e){return t[e]}function qt(t,e,n){if(n===It)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function YS(t,e,n,r){let i=qt(t,e,n);return qt(t,e+1,r)||i}function oy(t,e,n){return function r(i){let o=ni(t)?rn(t.index,e):e;wv(o,5);let s=e[xe],a=pC(e,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=pC(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function pC(t,e,n,r){let i=ee(null);try{return De(6,e,n),n(r)!==!1}catch(o){return OF(t,o),!1}finally{De(7,e,n),ee(i)}}function EL(t,e,n,r,i,o,s,a){let c=Cd(t),l=!1,h=null;if(!r&&c&&(h=IL(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=hn(t,n),g=r?r(p):p;E1(n,g,o,a);let y=i.listen(g,o,a),w=r?N=>r(nn(N[t.index])):t.index;JS(w,e,n,o,a,y,!1)}return l}function IL(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[_s],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function JS(t,e,n,r,i,o,s){let a=e.firstCreatePass?Lm(e):null,c=Fm(n),l=c.length;c.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function gC(t,e,n,r,i,o){let s=e[n],a=e[G],l=a.data[n].outputs[r],p=s[l].subscribe(o);JS(t.index,a,e,i,o,p,!0)}var xy=Symbol("BINDING");var eh=class extends Vc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Xr(e);return new Rs(n,this.ngModule)}};function wL(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&yh.SignalBased)!==0};return i&&(o.transform=i),o})}function TL(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function DL(t,e,n){let r=e instanceof ke?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new ky(n,r):n}function bL(t){let e=t.get(co,null);if(e===null)throw new F(407,!1);let n=t.get(GS,null),r=t.get(Qr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function CL(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return mS(e,n,n==="svg"?Ib:n==="math"?wb:null)}var Rs=class extends Th{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=wL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=TL(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Z1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){De(22);let a=ee(null);try{let c=this.componentDef,l=SL(r,c,s,o),h=DL(c,i||this.ngModule,e),p=bL(h),g=p.rendererFactory.createRenderer(null,c),y=r?wF(g,r,c.encapsulation,h):CL(c,g),w=s?.some(mC)||o?.some(P=>typeof P!="function"&&P.bindings.some(mC)),N=hv(null,l,null,512|ES(c),null,null,p,g,h,null,nS(y,h,!0));N[je]=y,kd(N);let S=null;try{let P=KS(je,N,2,"#host",()=>l.directiveRegistry,!0,0);y&&(_S(g,y,P),Ss(y,N)),CS(l,N,P),iS(l,P,N),QS(l,P),n!==void 0&&RL(P,this.ngContentSelectors,n),S=rn(P.index,N),N[xe]=S[xe],Ev(l,N,null)}catch(P){throw S!==null&&yy(S),yy(N),P}finally{De(23),xd()}return new th(this.componentType,N,!!w)}finally{ee(a)}}};function SL(t,e,n,r){let i=t?["ng-version","20.1.4"]:X1(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[xy].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[xy].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let c=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=Im(p);c.push(g)}return dv(0,null,AL(o,s),1,a,c,null,null,null,[i],null)}function AL(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function mC(t){let e=t[xy].kind;return e==="input"||e==="twoWay"}var th=class extends qS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=_c(n[G],je),this.location=Ms(this._tNode,n),this.instance=rn(this._tNode.index,n)[xe],this.hostView=this.changeDetectorRef=new oi(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=_v(r,i[G],i,e,n);this.previousInputValues.set(e,n);let s=rn(r.index,i);wv(s,1)}get injector(){return new so(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function RL(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var po=(()=>{class t{static __NG_ELEMENT_ID__=NL}return t})();function NL(){let t=ht();return XS(t,Z())}var PL=po,ZS=class extends PL{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ms(this._hostTNode,this._hostLView)}get injector(){return new so(this._hostTNode,this._hostLView)}get parentInjector(){let e=Xy(this._hostTNode,this._hostLView);if(LC(e)){let n=Kd(e,this._hostLView),r=Wd(e),i=n[G].data[r+8];return new so(i,n)}else return new so(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=yC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-tt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Py(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Nc(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let c=e&&!HO(e),l;if(c)l=n;else{let S=n||{};l=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef,s=S.directives,a=S.bindings}let h=c?e:new Rs(Xr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let P=(c?p:this.parentInjector).get(ke,null);P&&(o=P)}let g=Xr(h.componentType??{}),y=Py(this._lContainer,g?.id??null),w=y?.firstChild??null,N=h.create(p,i,w,o,s,a);return this.insertImpl(N.hostView,l,Nc(this._hostTNode,y)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Db(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Je],l=new ZS(c,c[tn],c[Je]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Ih(s,i,o,r),e.attachToViewContainerRef(),ym(sy(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=yC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Mc(this._lContainer,n);r&&(fc(sy(this._lContainer),n),vh(r[G],r))}detach(e){let n=this._adjustIndex(e,-1),r=Mc(this._lContainer,n);return r&&fc(sy(this._lContainer),n)!=null?new oi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function yC(t){return t[vc]}function sy(t){return t[vc]||(t[vc]=[])}function XS(t,e){let n,r=e[t.index];return ln(r)?n=r:(n=US(r,e,null,t),e[t.index]=n,fv(e,n)),kL(n,e,t,r),new ZS(n,t,e)}function ML(t,e){let n=t[Se],r=n.createComment(""),i=hn(e,t),o=n.parentNode(i);return Zd(n,o,r,n.nextSibling(i),!1),r}var kL=FL,xL=()=>!1;function OL(t,e,n){return xL(t,e,n)}function FL(t,e,n,r){if(t[ti])return;let i;n.type&8?i=nn(r):i=ML(e,n),t[ti]=i}var Oy=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Fy=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Cv(e,n).matches!==null&&this.queries[n].setDirty()}},nh=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=zL(e):this.predicate=e}},Ly=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Vy=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,LL(n,o)),this.matchTNodeWithReadOption(e,n,zd(n,e,o,!1,!1))}else r===As?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,zd(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Gt||i===po||i===As&&n.type&4)this.addMatch(n.index,-2);else{let o=zd(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function LL(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function VL(t,e){return t.type&11?Ms(t,e):t.type&4?Tv(t,e):null}function jL(t,e,n,r){return n===-1?VL(e,t):n===-2?UL(t,e,r):Rc(t,t[G],n,e)}function UL(t,e,n){if(n===Gt)return Ms(e,t);if(n===As)return Tv(e,t);if(n===po)return XS(e,t)}function eA(t,e,n,r){let i=e[Fn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let h=o[l];a.push(jL(e,h,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function jy(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=eA(t,e,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-c];for(let p=tt;p<h.length;p++){let g=h[p];g[ei]===g[Je]&&jy(g[G],g,l,r)}if(h[ro]!==null){let p=h[ro];for(let g=0;g<p.length;g++){let y=p[g];jy(y[G],y,l,r)}}}}}return r}function BL(t,e){return t[Fn].queries[e].queryList}function tA(t,e,n){let r=new Jd((n&4)===4);return Sb(t,e,r,r.destroy),(e[Fn]??=new Fy).queries.push(new Oy(r))-1}function $L(t,e,n){let r=Ue();return r.firstCreatePass&&(nA(r,new nh(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),tA(r,Z(),e)}function HL(t,e,n,r){let i=Ue();if(i.firstCreatePass){let o=ht();nA(i,new nh(e,n,r),o.index),qL(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return tA(i,Z(),n)}function zL(t){return t.split(",").map(e=>e.trim())}function nA(t,e,n){t.queries===null&&(t.queries=new Ly),t.queries.track(new Vy(e,n))}function qL(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Cv(t,e){return t.queries.getByIndex(e)}function GL(t,e){let n=t[G],r=Cv(n,e);return r.crossesNgTemplate?jy(n,t,e,[]):eA(n,t,r,e)}var vC=new Set;function ai(t){vC.has(t)||(vC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var uo=class{},Dh=class{};var rh=class extends uo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new eh(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Em(e);this._bootstrapComponents=pS(o.bootstrap),this._r3Injector=Ym(e,n,[{provide:uo,useValue:this},{provide:Vc,useValue:this.componentFactoryResolver},...r],hr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ih=class extends Dh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new rh(this.moduleType,e,[])}};var kc=class extends uo{injector;componentFactoryResolver=new eh(this);instance=null;constructor(e){super();let n=new Ji([...e.providers,{provide:uo,useValue:this},{provide:Vc,useValue:this.componentFactoryResolver}],e.parent||gc(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function jc(t,e,n=null){return new kc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var WL=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=wm(!1,n.type),i=r.length>0?jc([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=$({token:t,providedIn:"environment",factory:()=>new t(q(ke))})}return t})();function Sv(t){return Ps(()=>{let e=rA(t),n=ye(V({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ev.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(WL).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||mr.Emulated,styles:t.styles||Rt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&ai("NgStandalone"),iA(n);let r=t.dependencies;return n.directiveDefs=_C(r,KL),n.pipeDefs=_C(r,gb),n.id=JL(n),n})}function KL(t){return Xr(t)||Im(t)}function go(t){return Ps(()=>({type:t.type,bootstrap:t.bootstrap||Rt,declarations:t.declarations||Rt,imports:t.imports||Rt,exports:t.exports||Rt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function QL(t,e){if(t==null)return Zr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=yh.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function YL(t){if(t==null)return Zr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function vn(t){return Ps(()=>{let e=rA(t);return iA(e),e})}function ks(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function rA(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Zr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Rt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:QL(t.inputs,e),outputs:YL(t.outputs),debugInfo:null}}function iA(t){t.features?.forEach(e=>e(t))}function _C(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function JL(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ZL(t){return Object.getPrototypeOf(t.prototype).constructor}function oA(t){let e=ZL(t.type),n=!0,r=[t];for(;e;){let i;if(dn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new F(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=ay(t.inputs),s.declaredInputs=ay(t.declaredInputs),s.outputs=ay(t.outputs);let a=i.hostBindings;a&&rV(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&tV(t,c),l&&nV(t,l),XL(t,i),ab(t.outputs,i.outputs),dn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===oA&&(n=!1)}}e=Object.getPrototypeOf(e)}eV(r)}function XL(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function eV(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Cs(i.hostAttrs,n=Cs(n,i.hostAttrs))}}function ay(t){return t===Zr?{}:t===Rt?[]:t}function tV(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function nV(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function rV(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function iV(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Cs(t.mergedAttrs,t.attrs);let h=t.tView=dv(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),ws(t,!1);let c=oV(n,e,t,r);Od()&&mv(n,e,c,t),Ss(c,e);let l=US(c,e,c,t);e[r+je]=l,fv(e,l),OL(l,t,e)}function oh(t,e,n,r,i,o,s,a,c,l,h){let p=n+je,g;if(e.firstCreatePass){if(g=wh(e,p,4,s||null,a||null),l!=null){let y=Vn(e.consts,l);g.localNames=[];for(let w=0;w<y.length;w+=2)g.localNames.push(y[w],-1)}}else g=e.data[p];return iV(g,t,e,n,r,i,o,c),l!=null&&vv(t,g,h),g}var oV=sV;function sV(t,e,n,r){return Fd(!0),e[Se].createComment("")}var Av=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(Av||{}),Uc=new U(""),sA=!1,Uy=class extends Ye{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Eb()&&(this.destroyRef=M(gr,{optional:!0})??void 0,this.pendingTasks=M(Un,{optional:!0})??void 0)}emit(e){let n=ee(null);try{super.next(e)}finally{ee(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Me&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Et=Uy;function aA(t){let e,n;function r(){t=Cc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function EC(t){return queueMicrotask(()=>t()),()=>{t=Cc}}var Rv="isAngularZone",sh=Rv+"_ID",aV=0,ge=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Et(!1);onMicrotaskEmpty=new Et(!1);onStable=new Et(!1);onError=new Et(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=sA}=e;if(typeof Zone>"u")throw new F(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,lV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Rv)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new F(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new F(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,cV,Cc,Cc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},cV={};function Nv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function uV(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){aA(()=>{t.callbackScheduled=!1,By(t),t.isCheckStableRunning=!0,Nv(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),By(t)}function lV(t){let e=()=>{uV(t)},n=aV++;t._inner=t._inner.fork({name:"angular",properties:{[Rv]:!0,[sh]:n,[sh+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(dV(c))return r.invokeTask(o,s,a,c);try{return IC(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),wC(t)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return IC(t),r.invoke(o,s,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!hV(c)&&e(),wC(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,By(t),Nv(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function By(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function IC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function wC(t){t._nesting--,Nv(t)}var ah=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Et;onMicrotaskEmpty=new Et;onStable=new Et;onError=new Et;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function dV(t){return cA(t,"__ignore_ng_zone__")}function hV(t){return cA(t,"__scheduler_tick__")}function cA(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var uA=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})();var bh=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Pv=new U("");function mo(t){return!!t&&typeof t.then=="function"}function Ch(t){return!!t&&typeof t.subscribe=="function"}var lA=new U("");var Mv=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=M(lA,{optional:!0})??[];injector=M(Ze);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Ve(this.injector,i);if(mo(o))n.push(o);else if(Ch(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Sh=new U("");function dA(){zg(()=>{let t="";throw new F(600,t)})}function hA(t){return t.isBoundToModule}var fV=10;var ci=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(Nt);afterRenderManager=M(uA);zonelessEnabled=M(Ts);rootEffectScheduler=M(ty);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ye;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(Un);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(X(n=>!n))}constructor(){M(Uc,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=M(ke);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Ze.NULL){return this._injector.get(ge).run(()=>{De(10);let s=n instanceof Th;if(!this._injector.get(Mv).done){let w="";throw new F(405,w)}let c;s?c=n:c=this._injector.get(Vc).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=hA(c)?void 0:this._injector.get(uo),h=r||c.selector,p=c.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(Pv,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),Ac(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),De(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){De(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Av.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new F(101,!1);let n=ee(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ee(n),this.afterTick.next(),De(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(co,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<fV;)De(14),this.synchronizeOnce(),De(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ec(i))continue;let o=r&&!this.zonelessEnabled?0:1;Iv(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ec(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Ac(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Sh,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Ac(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new F(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ac(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Ah(t,e,n,r){let i=Z(),o=pr();if(qt(i,o,e)){let s=Ue(),a=Dc();PF(a,i,t,e,n,r)}return Ah}function pV(){return Z()[Lt][xe]}var $y=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function cy(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function gV(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let l=t.at(o),h=e[o],p=cy(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let g=t.at(s),y=e[c],w=cy(s,g,c,y,n);if(w!==0){w<0&&t.updateValue(s,y),s--,c--;continue}let N=n(o,l),S=n(s,g),P=n(o,h);if(Object.is(P,S)){let L=n(c,y);Object.is(L,N)?(t.swap(o,s),t.updateValue(s,y),c--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new ch,i??=DC(t,o,s,n),Hy(t,r,o,P))t.updateValue(o,h),o++,s++;else if(i.has(P))r.set(N,t.detach(o)),s--;else{let L=t.create(o,e[o]);t.attach(o,L),o++,s++}}for(;o<=c;)TC(t,r,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,g=cy(o,h,o,p,n);if(g!==0)g<0&&t.updateValue(o,p),o++,l=c.next();else{r??=new ch,i??=DC(t,o,s,n);let y=n(o,p);if(Hy(t,r,o,y))t.updateValue(o,p),o++,s++,l=c.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=c.next();else{let w=n(o,h);r.set(w,t.detach(o)),s--}}}for(;!l.done;)TC(t,r,n,t.length,l.value),l=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}function Hy(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function TC(t,e,n,r,i){if(Hy(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function DC(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var ch=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function mV(t,e,n,r,i,o,s,a){ai("NgControlFlow");let c=Z(),l=Ue(),h=Vn(l.consts,o);return oh(c,l,t,e,n,r,i,h,256,s,a),kv}function kv(t,e,n,r,i,o,s,a){ai("NgControlFlow");let c=Z(),l=Ue(),h=Vn(l.consts,o);return oh(c,l,t,e,n,r,i,h,512,s,a),kv}function yV(t,e){ai("NgControlFlow");let n=Z(),r=pr(),i=n[r]!==It?n[r]:-1,o=i!==-1?uh(n,je+i):void 0,s=0;if(qt(n,r,t)){let a=ee(null);try{if(o!==void 0&&$S(o,s),t!==-1){let c=je+t,l=uh(n,c),h=Wy(n[G],c),p=zS(l,h,n),g=Eh(n,h,e,{dehydratedView:p});Ih(l,g,s,Nc(h,p))}}finally{ee(a)}}else if(o!==void 0){let a=BS(o,s);a!==void 0&&(a[xe]=e)}}var zy=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-tt}};function vV(t){return t}function _V(t,e){return e}var qy=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function EV(t,e,n,r,i,o,s,a,c,l,h,p,g){ai("NgControlFlow");let y=Z(),w=Ue(),N=c!==void 0,S=Z(),P=a?s.bind(S[Lt][xe]):s,L=new qy(N,P);S[je+t]=L,oh(y,w,t+1,e,n,r,i,Vn(w.consts,o),256),N&&oh(y,w,t+2,c,l,h,p,Vn(w.consts,g),512)}var Gy=class extends $y{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-tt}at(e){return this.getLView(e)[xe].$implicit}attach(e,n){let r=n[vs];this.needsIndexUpdate||=e!==this.length,Ih(this.lContainer,n,e,Nc(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,wV(this.lContainer,e)}create(e,n){let r=Py(this.lContainer,this.templateTNode.tView.ssrId),i=Eh(this.hostLView,this.templateTNode,new zy(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){vh(e[G],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[xe].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[xe].$index=e}getLView(e){return TV(this.lContainer,e)}};function IV(t){let e=ee(null),n=jn();try{let r=Z(),i=r[G],o=r[n],s=n+1,a=uh(r,s);if(o.liveCollection===void 0){let l=Wy(i,s);o.liveCollection=new Gy(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(gV(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let l=pr(),h=c.length===0;if(qt(r,l,h)){let p=n+2,g=uh(r,p);if(h){let y=Wy(i,p),w=zS(g,y,r),N=Eh(r,y,void 0,{dehydratedView:w});Ih(g,N,0,Nc(y,w))}else i.firstUpdatePass&&rL(g),$S(g,0)}}}finally{ee(e)}}function uh(t,e){return t[e]}function wV(t,e){return Mc(t,e)}function TV(t,e){return BS(t,e)}function Wy(t,e){return _c(t,e)}function fA(t,e,n){let r=Z(),i=pr();if(qt(r,i,e)){let o=Ue(),s=Dc();SS(s,r,t,e,r[Se],n)}return fA}function Ky(t,e,n,r,i){_v(e,t,n,i?"class":"style",r)}function xv(t,e,n,r){let i=Z(),o=i[G],s=t+je,a=o.firstCreatePass?KS(s,i,2,e,NF,Nb(),n,r):o.data[s];if(RS(a,i,t,e,mA),Cd(a)){let c=i[G];CS(c,i,a),iS(c,a,i)}return r!=null&&vv(i,a),xv}function Ov(){let t=Ue(),e=ht(),n=NS(e);return t.firstCreatePass&&QS(t,n),jm(n)&&Um(),Vm(),n.classesWithoutHost!=null&&YO(n)&&Ky(t,n,Z(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&JO(n)&&Ky(t,n,Z(),n.stylesWithoutHost,!1),Ov}function Rh(t,e,n,r){return xv(t,e,n,r),Ov(),Rh}function pA(t,e,n,r){let i=Z(),o=i[G],s=t+je,a=o.firstCreatePass?vL(s,o,2,e,n,r):o.data[s];return RS(a,i,t,e,mA),r!=null&&vv(i,a),pA}function gA(){let t=ht(),e=NS(t);return jm(e)&&Um(),Vm(),gA}var mA=(t,e,n,r,i)=>(Fd(!0),mS(e[Se],r,Gb()));function DV(){return Z()}function Nh(t,e,n){let r=Z(),i=pr();if(qt(r,i,e)){let o=Ue(),s=Dc(),a=Gm(o.data),c=xF(a,s,r);AS(s,r,t,e,c,n)}return Nh}var oo=void 0;function bV(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var CV=["en",[["a","p"],["AM","PM"],oo],[["AM","PM"],oo,oo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],oo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],oo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",oo,"{1} 'at' {0}",oo],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",bV],uy={};function Vt(t){let e=SV(t),n=bC(e);if(n)return n;let r=e.split("-")[0];if(n=bC(r),n)return n;if(r==="en")return CV;throw new F(701,!1)}function bC(t){return t in uy||(uy[t]=Zt.ng&&Zt.ng.common&&Zt.ng.common.locales&&Zt.ng.common.locales[t]),uy[t]}var Oe=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Oe||{});function SV(t){return t.toLowerCase().replace(/_/g,"-")}var Bc="en-US";var AV=Bc;function yA(t){typeof t=="string"&&(AV=t.toLowerCase().replace(/_/g,"-"))}function Ph(t,e,n){let r=Z(),i=Ue(),o=ht();return vA(i,r,r[Se],o,t,e,n),Ph}function vA(t,e,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=oy(r,e,o),EL(r,t,e,s,n,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];c??=oy(r,e,o),gC(r,e,g,y,i,c)}if(l&&l.length)for(let p of l)c??=oy(r,e,o),gC(r,e,p,i,i,c)}}function RV(t=1){return qb(t)}function Fv(t,e,n,r){HL(t,e,n,r)}function NV(t,e,n){$L(t,e,n)}function Lv(t){let e=Z(),n=Ue(),r=Wm();Md(r+1);let i=Cv(n,r);if(t.dirty&&Tb(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=GL(e,r);t.reset(o,l1),t.notifyOnChanges()}return!0}return!1}function Vv(){return BL(Z(),Wm())}function PV(t){let e=Fb();return Sd(e,je+t)}function Bd(t,e){return t<<17|e<<2}function lo(t){return t>>17&32767}function MV(t){return(t&2)==2}function kV(t,e){return t&131071|e<<17}function Qy(t){return t|2}function Ns(t){return(t&131068)>>2}function ly(t,e){return t&-131069|e<<2}function xV(t){return(t&1)===1}function Yy(t){return t|1}function OV(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=lo(s),c=Ns(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||ys(p,h)>0)&&(l=!0)}else h=n;if(i)if(c!==0){let g=lo(t[a+1]);t[r+1]=Bd(g,a),g!==0&&(t[g+1]=ly(t[g+1],r)),t[a+1]=kV(t[a+1],r)}else t[r+1]=Bd(a,0),a!==0&&(t[a+1]=ly(t[a+1],r)),a=r;else t[r+1]=Bd(c,0),a===0?a=r:t[c+1]=ly(t[c+1],r),c=r;l&&(t[r+1]=Qy(t[r+1])),CC(t,h,r,!0),CC(t,h,r,!1),FV(e,h,t,r,o),s=Bd(a,c),o?e.classBindings=s:e.styleBindings=s}function FV(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ys(o,e)>=0&&(n[r+1]=Yy(n[r+1]))}function CC(t,e,n,r){let i=t[n+1],o=e===null,s=r?lo(i):Ns(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];LV(c,e)&&(a=!0,t[s+1]=r?Yy(l):Qy(l)),s=r?lo(l):Ns(l)}a&&(t[n+1]=r?Qy(i):Yy(i))}function LV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ys(t,e)>=0:!1}var pn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function VV(t){return t.substring(pn.key,pn.keyEnd)}function jV(t){return UV(t),_A(t,EA(t,0,pn.textEnd))}function _A(t,e){let n=pn.textEnd;return n===e?-1:(e=pn.keyEnd=BV(t,pn.key=e,n),EA(t,e,n))}function UV(t){pn.key=0,pn.keyEnd=0,pn.value=0,pn.valueEnd=0,pn.textEnd=t.length}function EA(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function BV(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function IA(t,e){return zV(t,e,null,!0),IA}function $V(t){qV(JV,HV,t,!0)}function HV(t,e){for(let n=jV(e);n>=0;n=_A(e,n))wd(t,VV(e),!0)}function zV(t,e,n,r){let i=Z(),o=Ue(),s=Nd(2);if(o.firstUpdatePass&&TA(o,t,s,r),e!==It&&qt(i,s,e)){let a=o.data[jn()];DA(o,a,i,i[Se],t,i[s+1]=XV(e,n),r,s)}}function qV(t,e,n,r){let i=Ue(),o=Nd(2);i.firstUpdatePass&&TA(i,null,o,r);let s=Z();if(n!==It&&qt(s,o,n)){let a=i.data[jn()];if(bA(a,r)&&!wA(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=yd(c,n||"")),Ky(i,a,s,n,r)}else ZV(i,a,s,s[Se],s[o+1],s[o+1]=YV(t,e,n),r,o)}}function wA(t,e){return e>=t.expandoStartIndex}function TA(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[jn()],s=wA(t,n);bA(o,r)&&e===null&&!s&&(e=!1),e=GV(i,o,e,r),OV(i,o,e,n,s,r)}}function GV(t,e,n,r){let i=Gm(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=dy(null,t,e,n,r),n=xc(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=dy(i,t,e,n,r),o===null){let c=WV(t,e,r);c!==void 0&&Array.isArray(c)&&(c=dy(null,t,e,c[1],r),c=xc(c,e.attrs,r),KV(t,e,r,c))}else o=QV(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function WV(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ns(r)!==0)return t[lo(r)]}function KV(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[lo(i)]=r}function QV(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=xc(r,s,n)}return xc(r,e.attrs,n)}function dy(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=xc(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function xc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),wd(t,s,n?!0:e[++o]))}return t===void 0?null:t}function YV(t,e,n){if(n==null||n==="")return Rt;let r=[],i=mn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function JV(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&wd(t,r,n)}function ZV(t,e,n,r,i,o,s,a){i===It&&(i=Rt);let c=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let g=c<i.length?i[c+1]:void 0,y=l<o.length?o[l+1]:void 0,w=null,N;h===p?(c+=2,l+=2,g!==y&&(w=p,N=y)):p===null||h!==null&&h<p?(c+=2,w=h):(l+=2,w=p,N=y),w!==null&&DA(t,e,n,r,w,N,s,a),h=c<i.length?i[c]:null,p=l<o.length?o[l]:null}}function DA(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],h=xV(l)?SC(c,e,n,i,Ns(l),s):void 0;if(!lh(h)){lh(o)||MV(l)&&(o=SC(c,null,n,i,a,s));let p=Pm(jn(),n);IF(r,s,p,i,o)}}function SC(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,g=n[i+1];g===It&&(g=p?Rt:void 0);let y=p?Td(g,r):h===r?g:void 0;if(l&&!lh(y)&&(y=Td(c,r)),lh(y)&&(a=y,s))return a;let w=t[i+1];i=s?lo(w):Ns(w)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Td(c,r))}return a}function lh(t){return t!==void 0}function XV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=hr(mn(t)))),t}function bA(t,e){return(t.flags&(e?8:16))!==0}function ej(t,e=""){let n=Z(),r=Ue(),i=t+je,o=r.firstCreatePass?wh(r,i,1,e,null):r.data[i],s=tj(r,n,o,e,t);n[i]=s,Od()&&mv(r,n,s,o),ws(o,!1)}var tj=(t,e,n,r,i)=>(Fd(!0),eF(e[Se],r));function CA(t,e,n,r=""){return qt(t,pr(),n)?e+Jr(n)+r:It}function nj(t,e,n,r,i,o=""){let s=Lb(),a=YS(t,s,n,i);return Nd(2),a?e+Jr(n)+r+Jr(i)+o:It}function SA(t){return jv("",t),SA}function jv(t,e,n){let r=Z(),i=CA(r,t,e,n);return i!==It&&RA(r,jn(),i),jv}function AA(t,e,n,r,i){let o=Z(),s=nj(o,t,e,n,r,i);return s!==It&&RA(o,jn(),s),AA}function RA(t,e,n){let r=Pm(e,t);tF(t[Se],r,n)}function NA(t,e,n){Zm(e)&&(e=e());let r=Z(),i=pr();if(qt(r,i,e)){let o=Ue(),s=Dc();SS(s,r,t,e,r[Se],n)}return NA}function rj(t,e){let n=Zm(t);return n&&t.set(e),n}function PA(t,e){let n=Z(),r=Ue(),i=ht();return vA(r,n,n[Se],i,t,e),PA}function ij(t){return qt(Z(),pr(),t)?Jr(t):It}function oj(t,e,n=""){return CA(Z(),t,e,n)}function sj(t,e,n){let r=Ue();if(r.firstCreatePass){let i=dn(t);Jy(n,r.data,r.blueprint,i,!0),Jy(e,r.data,r.blueprint,i,!1)}}function Jy(t,e,n,r,i){if(t=dt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Jy(t[o],e,n,r,i);else{let o=Ue(),s=Z(),a=ht(),c=Yi(t)?t:dt(t.provide),l=Dm(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Yi(t)||!t.multi){let y=new ao(l,i,Ee,null),w=fy(c,e,i?h:h+g,p);w===-1?(gy(Yd(a,s),o,c),hy(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[w]=y,s[w]=y)}else{let y=fy(c,e,h+g,p),w=fy(c,e,h,h+g),N=y>=0&&n[y],S=w>=0&&n[w];if(i&&!S||!i&&!N){gy(Yd(a,s),o,c);let P=uj(i?cj:aj,n.length,i,r,l,t);!i&&S&&(n[w].providerFactory=P),hy(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(P),s.push(P)}else{let P=MA(n[i?w:y],l,!i&&r);hy(o,t,y>-1?y:w,P)}!i&&r&&S&&n[w].componentProviders++}}}function hy(t,e,n,r){let i=Yi(e),o=_b(e);if(i||o){let c=(o?dt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,c]):l[h+1].push(r,c)}else l.push(n,c)}}}function MA(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function fy(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function aj(t,e,n,r,i){return Zy(this.multi,[])}function cj(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Rc(r,r[G],this.providerFactory.index,i);s=c.slice(0,a),Zy(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Zy(o,s);return s}function Zy(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function uj(t,e,n,r,i,o){let s=new ao(t,n,Ee,null);return s.multi=[],s.index=e,s.componentProviders=0,MA(s,i,r&&!n),s}function lj(t,e=[]){return n=>{n.providersResolver=(r,i)=>sj(r,i?i(t):t,e)}}function dj(t,e,n){let r=Tc()+t,i=Z();return i[r]===It?bv(i,r,n?e.call(n):e()):_L(i,r)}function hj(t,e,n,r){return xA(Z(),Tc(),t,e,n,r)}function kA(t,e){let n=t[e];return n===It?void 0:n}function xA(t,e,n,r,i,o){let s=e+n;return qt(t,s,i)?bv(t,s+1,o?r.call(o,i):r(i)):kA(t,s+1)}function fj(t,e,n,r,i,o,s){let a=e+n;return YS(t,a,i,o)?bv(t,a+2,s?r.call(s,i,o):r(i,o)):kA(t,a+2)}function pj(t,e){let n=Ue(),r,i=t+je;n.firstCreatePass?(r=gj(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Wr(r.type,!0)),s,a=At(Ee);try{let c=Qd(!1),l=o();return Qd(c),Mm(n,Z(),i,l),l}finally{At(a)}}function gj(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function mj(t,e,n){let r=t+je,i=Z(),o=Sd(i,r);return OA(i,r)?xA(i,Tc(),e,o.transform,n,o):o.transform(n)}function yj(t,e,n,r){let i=t+je,o=Z(),s=Sd(o,i);return OA(o,i)?fj(o,Tc(),e,s.transform,n,r,s):s.transform(n,r)}function OA(t,e){return t[G].data[e].pure}var dh=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Uv=(()=>{class t{compileModuleSync(n){return new ih(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Em(n),o=pS(i.declarations).reduce((s,a)=>{let c=Xr(a);return c&&s.push(new Rs(c)),s},[]);return new dh(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var vj=(()=>{class t{zone=M(ge);changeDetectionScheduler=M(Qr);applicationRef=M(ci);applicationErrorHandler=M(Nt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),FA=new U("",{factory:()=>!1});function Bv({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ge(ye(V({},$v()),{scheduleInRootZone:n})),[{provide:ge,useFactory:t},{provide:fr,multi:!0,useFactory:()=>{let r=M(vj,{optional:!0});return()=>r.initialize()}},{provide:fr,multi:!0,useFactory:()=>{let r=M(Ej);return()=>{r.initialize()}}},e===!0?{provide:Xm,useValue:!0}:[],{provide:ey,useValue:n??sA},{provide:Nt,useFactory:()=>{let r=M(ge),i=M(ke),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(xn),o.handleError(s))})}}}]}function _j(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=Bv({ngZoneFactory:()=>{let i=$v(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&ai("NgZone_CoalesceEvent"),new ge(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Ft([{provide:FA,useValue:!0},{provide:Ts,useValue:!1},r])}function $v(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Ej=(()=>{class t{subscription=new Me;initialized=!1;zone=M(ge);pendingTasks=M(Un);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ge.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var LA=(()=>{class t{applicationErrorHandler=M(Nt);appRef=M(ci);taskService=M(Un);ngZone=M(ge);zonelessEnabled=M(Ts);tracing=M(Uc,{optional:!0});disableScheduling=M(Xm,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Me;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(sh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(ey,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ah||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?EC:aA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(sh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,EC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ij(){return typeof $localize<"u"&&$localize.locale||Bc}var xs=new U("",{providedIn:"root",factory:()=>M(xs,{optional:!0,skipSelf:!0})||Ij()});function Os(t){return ib(t)}function wj(t,e){return ld(t,e?.equal)}var VA=class{[_t];constructor(e){this[_t]=e}destroy(){this[_t].destroy()}};var BA=Symbol("InputSignalNode#UNSET"),Fj=ye(V({},dd),{transformFn:void 0,applyValueToInputSignal(t,e){gs(t,e)}});function $A(t,e){let n=Object.create(Fj);n.value=t,n.transformFn=e?.transform;function r(){if(hs(n),n.value===BA){let i=null;throw new F(-950,i)}return n.value}return r[_t]=n,r}var kh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Oc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},Lj=new U("");Lj.__NG_ELEMENT_ID__=t=>{let e=ht();if(e===null)throw new F(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new F(204,!1)};function jA(t,e){return $A(t,e)}function Vj(t){return $A(BA,t)}var HA=(jA.required=Vj,jA);var Fs=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},zA=new Fs("20.1.4");var Hv=new U(""),jj=new U("");function $c(t){return!t.moduleRef}function Uj(t){let e=$c(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ge);return n.run(()=>{$c(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Nt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),$c(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Hv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Hv);s.add(o),t.moduleRef.onDestroy(()=>{Ac(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return $j(r,n,()=>{let o=e.get(Un),s=o.add(),a=e.get(Mv);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(xs,Bc);if(yA(c||Bc),!e.get(jj,!0))return $c(t)?e.get(ci):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if($c(t)){let h=e.get(ci);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return Bj?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var Bj;function $j(t,e,n){try{let r=n();return mo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Mh=null;function Hj(t=[],e){return Ze.create({name:e,providers:[{provide:pc,useValue:"platform"},{provide:Hv,useValue:new Set([()=>Mh=null])},...t]})}function zj(t=[]){if(Mh)return Mh;let e=Hj(t);return Mh=e,dA(),qj(e),e}function qj(t){let e=t.get(ph,null);Ve(t,()=>{e?.forEach(n=>n())})}function Wv(){return!1}var Ls=(()=>{class t{static __NG_ELEMENT_ID__=Gj}return t})();function Gj(t){return Wj(ht(),Z(),(t&16)===16)}function Wj(t,e,n){if(ni(t)&&!n){let r=rn(t.index,e);return new oi(r,r)}else if(t.type&175){let r=e[Lt];return new oi(r,e)}return null}var zv=class{constructor(){}supports(e){return e instanceof Map||Dv(e)}create(){return new qv}},qv=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Dv(e)))throw new F(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new Gv(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},Gv=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function UA(){return new Kv([new zv])}var Kv=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:UA});factories;constructor(n){this.factories=n}static create(n,r){if(r){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||UA()),deps:[[t,new NC,new Pt]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r)return r;throw new F(901,!1)}}return t})();function qA(t){De(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=zj(r),o=[Bv({}),{provide:Qr,useExisting:LA},Kb,...n||[]],s=new kc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return Uj({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{De(9)}}function xh(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var KA=null;function Er(){return KA}function Qv(t){KA??=t}var Hc=class{},Yv=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M(QA),providedIn:"platform"})}return t})();var QA=(()=>{class t extends Yv{_location;_history;_doc=M(ze);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Er().getBaseHref(this._doc)}onPopState(n){let r=Er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function YA(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function GA(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function ui(t){return t&&t[0]!=="?"?`?${t}`:t}var Vs=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M(ZA),providedIn:"root"})}return t})(),JA=new U(""),ZA=(()=>{class t extends Vs{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(ze).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return YA(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ui(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+ui(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+ui(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(q(Yv),q(JA,8))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),js=(()=>{class t{_subject=new Ye;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Yj(GA(WA(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ui(r))}normalize(n){return t.stripTrailingSlash(Qj(this._basePath,WA(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ui(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ui(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ui;static joinWithSlash=YA;static stripTrailingSlash=GA;static \u0275fac=function(r){return new(r||t)(q(Vs))};static \u0275prov=$({token:t,factory:()=>Kj(),providedIn:"root"})}return t})();function Kj(){return new js(q(Vs))}function Qj(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function WA(t){return t.replace(/\/index.html$/,"")}function Yj(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var o_=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(o_||{});var wt=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(wt||{}),we=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(we||{}),jt=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(jt||{}),Ut={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function n0(t){return Vt(t)[Oe.LocaleId]}function r0(t,e,n){let r=Vt(t),i=[r[Oe.DayPeriodsFormat],r[Oe.DayPeriodsStandalone]],o=on(i,e);return on(o,n)}function i0(t,e,n){let r=Vt(t),i=[r[Oe.DaysFormat],r[Oe.DaysStandalone]],o=on(i,e);return on(o,n)}function o0(t,e,n){let r=Vt(t),i=[r[Oe.MonthsFormat],r[Oe.MonthsStandalone]],o=on(i,e);return on(o,n)}function s0(t,e){let r=Vt(t)[Oe.Eras];return on(r,e)}function zc(t,e){let n=Vt(t);return on(n[Oe.DateFormat],e)}function qc(t,e){let n=Vt(t);return on(n[Oe.TimeFormat],e)}function Gc(t,e){let r=Vt(t)[Oe.DateTimeFormat];return on(r,e)}function $n(t,e){let n=Vt(t),r=n[Oe.NumberSymbols][e];if(typeof r>"u"){if(e===Ut.CurrencyDecimal)return n[Oe.NumberSymbols][Ut.Decimal];if(e===Ut.CurrencyGroup)return n[Oe.NumberSymbols][Ut.Group]}return r}function a0(t,e){return Vt(t)[Oe.NumberFormats][e]}function c0(t){if(!t[Oe.ExtraData])throw new F(2303,!1)}function u0(t){let e=Vt(t);return c0(e),(e[Oe.ExtraData][2]||[]).map(r=>typeof r=="string"?Jv(r):[Jv(r[0]),Jv(r[1])])}function l0(t,e,n){let r=Vt(t);c0(r);let i=[r[Oe.ExtraData][0],r[Oe.ExtraData][1]],o=on(i,e)||[];return on(o,n)||[]}function on(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new F(2304,!1)}function Jv(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var Jj=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Oh={},Zj=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function d0(t,e,n,r){let i=a2(t);e=Ir(n,e)||e;let s=[],a;for(;e;)if(a=Zj.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=f0(r,c),i=s2(i,r));let l="";return s.forEach(h=>{let p=i2(h);l+=p?p(i,n,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Uh(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Ir(t,e){let n=n0(t);if(Oh[n]??={},Oh[n][e])return Oh[n][e];let r="";switch(e){case"shortDate":r=zc(t,jt.Short);break;case"mediumDate":r=zc(t,jt.Medium);break;case"longDate":r=zc(t,jt.Long);break;case"fullDate":r=zc(t,jt.Full);break;case"shortTime":r=qc(t,jt.Short);break;case"mediumTime":r=qc(t,jt.Medium);break;case"longTime":r=qc(t,jt.Long);break;case"fullTime":r=qc(t,jt.Full);break;case"short":let i=Ir(t,"shortTime"),o=Ir(t,"shortDate");r=Fh(Gc(t,jt.Short),[i,o]);break;case"medium":let s=Ir(t,"mediumTime"),a=Ir(t,"mediumDate");r=Fh(Gc(t,jt.Medium),[s,a]);break;case"long":let c=Ir(t,"longTime"),l=Ir(t,"longDate");r=Fh(Gc(t,jt.Long),[c,l]);break;case"full":let h=Ir(t,"fullTime"),p=Ir(t,"fullDate");r=Fh(Gc(t,jt.Full),[h,p]);break}return r&&(Oh[n][e]=r),r}function Fh(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function En(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function Xj(t,e){return En(t,3).substring(0,e)}function qe(t,e,n=0,r=!1,i=!1){return function(o,s){let a=e2(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return Xj(a,e);let c=$n(s,Ut.MinusSign);return En(a,e,c,r,i)}}function e2(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new F(2301,!1)}}function be(t,e,n=wt.Format,r=!1){return function(i,o){return t2(i,o,t,e,n,r)}}function t2(t,e,n,r,i,o){switch(n){case 2:return o0(e,i,r)[t.getMonth()];case 1:return i0(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=u0(e),h=l0(e,i,r),p=l.findIndex(g=>{if(Array.isArray(g)){let[y,w]=g,N=s>=y.hours&&a>=y.minutes,S=s<w.hours||s===w.hours&&a<w.minutes;if(y.hours<w.hours){if(N&&S)return!0}else if(N||S)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return r0(e,i,r)[s<12?0:1];case 3:return s0(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new F(2302,!1)}}function Lh(t){return function(e,n,r){let i=-1*r,o=$n(n,Ut.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+En(s,2,o)+En(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+En(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+En(s,2,o)+":"+En(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+En(s,2,o)+":"+En(Math.abs(i%60),2,o);default:throw new F(2302,!1)}}}var n2=0,jh=4;function r2(t){let e=Uh(t,n2,1).getDay();return Uh(t,0,1+(e<=jh?jh:jh+7)-e)}function h0(t){let e=t.getDay(),n=e===0?-3:jh-e;return Uh(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Zv(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=h0(n),s=r2(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return En(i,t,$n(r,Ut.MinusSign))}}function Vh(t,e=!1){return function(n,r){let o=h0(n).getFullYear();return En(o,t,$n(r,Ut.MinusSign),e)}}var Xv={};function i2(t){if(Xv[t])return Xv[t];let e;switch(t){case"G":case"GG":case"GGG":e=be(3,we.Abbreviated);break;case"GGGG":e=be(3,we.Wide);break;case"GGGGG":e=be(3,we.Narrow);break;case"y":e=qe(0,1,0,!1,!0);break;case"yy":e=qe(0,2,0,!0,!0);break;case"yyy":e=qe(0,3,0,!1,!0);break;case"yyyy":e=qe(0,4,0,!1,!0);break;case"Y":e=Vh(1);break;case"YY":e=Vh(2,!0);break;case"YYY":e=Vh(3);break;case"YYYY":e=Vh(4);break;case"M":case"L":e=qe(1,1,1);break;case"MM":case"LL":e=qe(1,2,1);break;case"MMM":e=be(2,we.Abbreviated);break;case"MMMM":e=be(2,we.Wide);break;case"MMMMM":e=be(2,we.Narrow);break;case"LLL":e=be(2,we.Abbreviated,wt.Standalone);break;case"LLLL":e=be(2,we.Wide,wt.Standalone);break;case"LLLLL":e=be(2,we.Narrow,wt.Standalone);break;case"w":e=Zv(1);break;case"ww":e=Zv(2);break;case"W":e=Zv(1,!0);break;case"d":e=qe(2,1);break;case"dd":e=qe(2,2);break;case"c":case"cc":e=qe(7,1);break;case"ccc":e=be(1,we.Abbreviated,wt.Standalone);break;case"cccc":e=be(1,we.Wide,wt.Standalone);break;case"ccccc":e=be(1,we.Narrow,wt.Standalone);break;case"cccccc":e=be(1,we.Short,wt.Standalone);break;case"E":case"EE":case"EEE":e=be(1,we.Abbreviated);break;case"EEEE":e=be(1,we.Wide);break;case"EEEEE":e=be(1,we.Narrow);break;case"EEEEEE":e=be(1,we.Short);break;case"a":case"aa":case"aaa":e=be(0,we.Abbreviated);break;case"aaaa":e=be(0,we.Wide);break;case"aaaaa":e=be(0,we.Narrow);break;case"b":case"bb":case"bbb":e=be(0,we.Abbreviated,wt.Standalone,!0);break;case"bbbb":e=be(0,we.Wide,wt.Standalone,!0);break;case"bbbbb":e=be(0,we.Narrow,wt.Standalone,!0);break;case"B":case"BB":case"BBB":e=be(0,we.Abbreviated,wt.Format,!0);break;case"BBBB":e=be(0,we.Wide,wt.Format,!0);break;case"BBBBB":e=be(0,we.Narrow,wt.Format,!0);break;case"h":e=qe(3,1,-12);break;case"hh":e=qe(3,2,-12);break;case"H":e=qe(3,1);break;case"HH":e=qe(3,2);break;case"m":e=qe(4,1);break;case"mm":e=qe(4,2);break;case"s":e=qe(5,1);break;case"ss":e=qe(5,2);break;case"S":e=qe(6,1);break;case"SS":e=qe(6,2);break;case"SSS":e=qe(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Lh(0);break;case"ZZZZZ":e=Lh(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Lh(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Lh(2);break;default:return null}return Xv[t]=e,e}function f0(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function o2(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function s2(t,e,n){let i=t.getTimezoneOffset(),o=f0(e,i);return o2(t,-1*(o-i))}function a2(t){if(XA(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return Uh(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(Jj))return c2(r)}let e=new Date(t);if(!XA(e))throw new F(2302,!1);return e}function c2(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,c,l),e}function XA(t){return t instanceof Date&&!isNaN(t.valueOf())}var u2=/^(\d+)?\.((\d+)(-(\d+))?)?$/,e0=22,Bh=".",Wc="0",l2=";",d2=",",e_="#";function h2(t,e,n,r,i,o,s=!1){let a="",c=!1;if(!isFinite(t))a=$n(n,Ut.Infinity);else{let l=g2(t);s&&(l=p2(l));let h=e.minInt,p=e.minFrac,g=e.maxFrac;if(o){let L=o.match(u2);if(L===null)throw new F(2306,!1);let H=L[1],z=L[3],Ne=L[5];H!=null&&(h=t_(H)),z!=null&&(p=t_(z)),Ne!=null?g=t_(Ne):z!=null&&p>g&&(g=p)}m2(l,p,g);let y=l.digits,w=l.integerLen,N=l.exponent,S=[];for(c=y.every(L=>!L);w<h;w++)y.unshift(0);for(;w<0;w++)y.unshift(0);w>0?S=y.splice(w,y.length):(S=y,y=[0]);let P=[];for(y.length>=e.lgSize&&P.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)P.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&P.unshift(y.join("")),a=P.join($n(n,r)),S.length&&(a+=$n(n,i)+S.join("")),N&&(a+=$n(n,Ut.Exponential)+"+"+N)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function p0(t,e,n){let r=a0(e,o_.Decimal),i=f2(r,$n(e,Ut.MinusSign));return h2(t,i,e,Ut.Group,Ut.Decimal,n)}function f2(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(l2),i=r[0],o=r[1],s=i.indexOf(Bh)!==-1?i.split(Bh):[i.substring(0,i.lastIndexOf(Wc)+1),i.substring(i.lastIndexOf(Wc)+1)],a=s[0],c=s[1]||"";n.posPre=a.substring(0,a.indexOf(e_));for(let h=0;h<c.length;h++){let p=c.charAt(h);p===Wc?n.minFrac=n.maxFrac=h+1:p===e_?n.maxFrac=h+1:n.posSuf+=p}let l=a.split(d2);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let h=i.length-n.posPre.length-n.posSuf.length,p=o.indexOf(e_);n.negPre=o.substring(0,p).replace(/'/g,""),n.negSuf=o.slice(p+h).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function p2(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function g2(t){let e=Math.abs(t)+"",n=0,r,i,o,s,a;for((i=e.indexOf(Bh))>-1&&(e=e.replace(Bh,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Wc;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Wc;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>e0&&(r=r.splice(0,e0-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function m2(t,e,n){if(e>n)throw new F(2307,!1);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+t.integerLen,h=r.reduceRight(function(p,g,y,w){return g=g+p,w[y]=g<10?g:g-10,c&&(w[y]===0&&y>=l?w.pop():c=!1),g>=10?1:0},0);h&&(r.unshift(h),t.integerLen++)}function t_(t){let e=parseInt(t);if(isNaN(e))throw new F(2305,!1);return e}var n_=/\s+/,t0=[],y2=(()=>{class t{_ngEl;_renderer;initialClasses=t0;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(n_):t0}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(n_):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(n_).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(Ee(Gt),Ee(fo))};static \u0275dir=vn({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var v2=(()=>{class t{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(n,r,i){this._ngEl=n,this._differs=r,this._renderer=i}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){let n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,r){let[i,o]=n.split("."),s=i.indexOf("-")===-1?void 0:gn.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(n){n.forEachRemovedItem(r=>this._setStyle(r.key,null)),n.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),n.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||t)(Ee(Gt),Ee(Kv),Ee(fo))};static \u0275dir=vn({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return t})();function $h(t,e){return new F(2100,!1)}var r_=class{createSubscription(e,n,r){return Os(()=>e.subscribe({next:n,error:r}))}dispose(e){Os(()=>e.unsubscribe())}},i_=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},_2=new i_,E2=new r_,I2=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=M(Nt);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(mo(n))return _2;if(Ch(n))return E2;throw $h(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(Ee(Ls,16))};static \u0275pipe=ks({name:"async",type:t,pure:!1})}return t})();var w2=(()=>{class t{transform(n){if(n==null)return null;if(typeof n!="string")throw $h(t,n);return n.toUpperCase()}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=ks({name:"uppercase",type:t,pure:!0})}return t})(),T2="mediumDate",g0=new U(""),m0=new U(""),D2=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??T2,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return d0(n,s,o||this.locale,a)}catch(s){throw $h(t,s.message)}}static \u0275fac=function(r){return new(r||t)(Ee(xs,16),Ee(g0,24),Ee(m0,24))};static \u0275pipe=ks({name:"date",type:t,pure:!0})}return t})();var b2=(()=>{class t{_locale;constructor(n){this._locale=n}transform(n,r,i){if(!C2(n))return null;i||=this._locale;try{let o=S2(n);return p0(o,i,r)}catch(o){throw $h(t,o.message)}}static \u0275fac=function(r){return new(r||t)(Ee(xs,16))};static \u0275pipe=ks({name:"number",type:t,pure:!0})}return t})();function C2(t){return!(t==null||t===""||t!==t)}function S2(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new F(2309,!1);return t}var y0=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=go({type:t});static \u0275inj=Yr({})}return t})();function Kc(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var yo=class{};var v0="browser";var zh=new U(""),l_=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new F(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(q(zh),q(ge))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),Qc=class{_doc;constructor(e){this._doc=e}manager},s_="ng-app-id";function _0(t){for(let e of t)e.remove()}function E0(t,e){let n=e.createElement("style");return n.textContent=t,n}function N2(t,e,n,r){let i=t.head?.querySelectorAll(`style[${s_}="${e}"],link[${s_}="${e}"]`);if(i)for(let o of i)o.removeAttribute(s_),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function c_(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var d_=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,N2(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,E0);r?.forEach(i=>this.addUsage(i,this.external,c_))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(_0(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])_0(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,E0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,c_(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(q(ze),q(fh),q(gh,8),q(si))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),a_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},h_=/%COMP%/g;var w0="%COMP%",P2=`_nghost-${w0}`,M2=`_ngcontent-${w0}`,k2=!0,x2=new U("",{providedIn:"root",factory:()=>k2});function O2(t){return M2.replace(h_,t)}function F2(t){return P2.replace(h_,t)}function T0(t,e){return e.map(n=>n.replace(h_,t))}var f_=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new Yc(n,s,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Hh?i.applyToHost(n):i instanceof Jc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case mr.Emulated:o=new Hh(c,l,r,this.appId,h,s,a,p,g);break;case mr.ShadowDom:return new u_(c,l,n,r,s,a,this.nonce,p,g);default:o=new Jc(c,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(q(l_),q(d_),q(fh),q(x2),q(ze),q(si),q(ge),q(gh),q(Uc,8))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),Yc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(a_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(I0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(I0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new F(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=a_[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=a_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(gn.DashCase|gn.Important)?e.style.setProperty(n,r,i&gn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&gn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Er().getGlobalEventTarget(this.doc,e),!e))throw new F(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function I0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var u_=class extends Yc{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=T0(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=c_(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Jc=class extends Yc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?T0(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Hh=class extends Jc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,c,l,h),this.contentAttr=O2(h),this.hostAttr=F2(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var qh=class t extends Hc{supportsDOMEvents=!0;static makeCurrent(){Qv(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=L2();return n==null?null:V2(n)}resetBaseElement(){Zc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Kc(document.cookie,e)}},Zc=null;function L2(){return Zc=Zc||document.head.querySelector("base"),Zc?Zc.getAttribute("href"):null}function V2(t){return new URL(t,document.baseURI).pathname}var j2=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),b0=(()=>{class t extends Qc{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(q(ze))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),D0=["alt","control","meta","shift"],U2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},B2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},C0=(()=>{class t extends Qc{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Er().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),D0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=U2[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),D0.forEach(s=>{if(s!==i){let a=B2[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(q(ze))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();function $2(t,e){let n=V({rootComponent:t},H2(e));return qA(n)}function H2(t){return{appProviders:[...K2,...t?.providers??[]],platformProviders:W2}}function z2(){qh.makeCurrent()}function q2(){return new xn}function G2(){return tv(document),document}var W2=[{provide:si,useValue:v0},{provide:ph,useValue:z2,multi:!0},{provide:ze,useFactory:G2}];var K2=[{provide:pc,useValue:"root"},{provide:xn,useFactory:q2},{provide:zh,useClass:b0,multi:!0,deps:[ze]},{provide:zh,useClass:C0,multi:!0,deps:[ze]},f_,d_,l_,{provide:co,useExisting:f_},{provide:yo,useClass:j2},[]];var $s=class{},Xc=class{},li=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Wh=class{encodeKey(e){return S0(e)}encodeValue(e){return S0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Q2(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var Y2=/%(\d[a-f0-9])/gi,J2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function S0(t){return encodeURIComponent(t).replace(Y2,(e,n)=>J2[n]??e)}function Gh(t){return`${t}`}var wr=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Wh,e.fromString){if(e.fromObject)throw new F(2805,!1);this.map=Q2(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Gh):[Gh(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Gh(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Gh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Kh=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Z2(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function A0(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function R0(t){return typeof Blob<"u"&&t instanceof Blob}function N0(t){return typeof FormData<"u"&&t instanceof FormData}function X2(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var P0="Content-Type",M0="Accept",k0="X-Request-URL",x0="text/plain",O0="application/json",eU=`${O0}, ${x0}, */*`,Us=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,n,r,i){this.url=n,this.method=e.toUpperCase();let o;if(Z2(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new Error("");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),this.transferCache=o.transferCache}if(this.headers??=new li,this.context??=new Kh,!this.params)this.params=new wr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||A0(this.body)||R0(this.body)||N0(this.body)||X2(this.body)?this.body:this.body instanceof wr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||N0(this.body)?null:R0(this.body)?this.body.type||null:A0(this.body)?null:typeof this.body=="string"?x0:this.body instanceof wr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?O0:null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,l=e.redirect||this.redirect,h=e.credentials||this.credentials,p=e.transferCache??this.transferCache,g=e.timeout??this.timeout,y=e.body!==void 0?e.body:this.body,w=e.withCredentials??this.withCredentials,N=e.reportProgress??this.reportProgress,S=e.headers||this.headers,P=e.params||this.params,L=e.context??this.context;return e.setHeaders!==void 0&&(S=Object.keys(e.setHeaders).reduce((H,z)=>H.set(z,e.setHeaders[z]),S)),e.setParams&&(P=Object.keys(e.setParams).reduce((H,z)=>H.set(z,e.setParams[z]),P)),new t(n,r,y,{params:P,headers:S,context:L,reportProgress:N,responseType:i,withCredentials:w,transferCache:p,keepalive:o,cache:a,priority:s,timeout:g,mode:c,redirect:l,credentials:h})}},vo=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(vo||{}),Hs=class{headers;status;statusText;url;ok;type;constructor(e,n=200,r="OK"){this.headers=e.headers||new li,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Qh=class t extends Hs{constructor(e={}){super(e)}type=vo.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},eu=class t extends Hs{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=vo.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Bs=class extends Hs{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},tU=200,nU=204;function p_(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect}}var F0=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Us)o=n;else{let c;i.headers instanceof li?c=i.headers:c=new li(i.headers);let l;i.params&&(i.params instanceof wr?l=i.params:l=new wr({fromObject:i.params})),o=new Us(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials})}let s=K(o).pipe(ur(c=>this.handler.handle(c)));if(n instanceof Us||i.observe==="events")return s;let a=s.pipe(ut(c=>c instanceof eu));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(X(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new F(2806,!1);return c.body}));case"blob":return a.pipe(X(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new F(2807,!1);return c.body}));case"text":return a.pipe(X(c=>{if(c.body!==null&&typeof c.body!="string")throw new F(2808,!1);return c.body}));case"json":default:return a.pipe(X(c=>c.body))}case"response":return a;default:throw new F(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new wr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,p_(i,r))}post(n,r,i={}){return this.request("POST",n,p_(i,r))}put(n,r,i={}){return this.request("PUT",n,p_(i,r))}static \u0275fac=function(r){return new(r||t)(q($s))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();var rU=new U("");function iU(t,e){return e(t)}function oU(t,e,n){return(r,i)=>Ve(n,()=>e(r,o=>t(o,i)))}var L0=new U(""),V0=new U(""),j0=new U("",{providedIn:"root",factory:()=>!0});var Yh=(()=>{class t extends $s{backend;injector;chain=null;pendingTasks=M(ii);contributeToStability=M(j0);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(L0),...this.injector.get(V0,[])]));this.chain=r.reduceRight((i,o)=>oU(i,o,this.injector),iU)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(zi(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(q(Xc),q(ke))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();var sU=/^\)\]\}',?\n/,aU=RegExp(`^${k0}:`,"m");function cU(t){return"responseURL"in t&&t.responseURL?t.responseURL:aU.test(t.getAllResponseHeaders())?t.getResponseHeader(k0):null}var g_=(()=>{class t{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new F(-2800,!1);let r=this.xhrFactory;return K(null).pipe(lt(()=>new J(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((S,P)=>s.setRequestHeader(S,P.join(","))),n.headers.has(M0)||s.setRequestHeader(M0,eU),!n.headers.has(P0)){let S=n.detectContentTypeHeader();S!==null&&s.setRequestHeader(P0,S)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let S=n.responseType.toLowerCase();s.responseType=S!=="json"?S:"text"}let a=n.serializeBody(),c=null,l=()=>{if(c!==null)return c;let S=s.statusText||"OK",P=new li(s.getAllResponseHeaders()),L=cU(s)||n.url;return c=new Qh({headers:P,status:s.status,statusText:S,url:L}),c},h=()=>{let{headers:S,status:P,statusText:L,url:H}=l(),z=null;P!==nU&&(z=typeof s.response>"u"?s.responseText:s.response),P===0&&(P=z?tU:0);let Ne=P>=200&&P<300;if(n.responseType==="json"&&typeof z=="string"){let pe=z;z=z.replace(sU,"");try{z=z!==""?JSON.parse(z):null}catch(D){z=pe,Ne&&(Ne=!1,z={error:D,text:z})}}Ne?(o.next(new eu({body:z,headers:S,status:P,statusText:L,url:H||void 0})),o.complete()):o.error(new Bs({error:z,headers:S,status:P,statusText:L,url:H||void 0}))},p=S=>{let{url:P}=l(),L=new Bs({error:S,status:s.status||0,statusText:s.statusText||"Unknown Error",url:P||void 0});o.error(L)},g=p;n.timeout&&(g=S=>{let{url:P}=l(),L=new Bs({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:P||void 0});o.error(L)});let y=!1,w=S=>{y||(o.next(l()),y=!0);let P={type:vo.DownloadProgress,loaded:S.loaded};S.lengthComputable&&(P.total=S.total),n.responseType==="text"&&s.responseText&&(P.partialText=s.responseText),o.next(P)},N=S=>{let P={type:vo.UploadProgress,loaded:S.loaded};S.lengthComputable&&(P.total=S.total),o.next(P)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",g),s.addEventListener("abort",p),n.reportProgress&&(s.addEventListener("progress",w),a!==null&&s.upload&&s.upload.addEventListener("progress",N)),s.send(a),o.next({type:vo.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",g),n.reportProgress&&(s.removeEventListener("progress",w),a!==null&&s.upload&&s.upload.removeEventListener("progress",N)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(q(yo))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),U0=new U(""),uU="XSRF-TOKEN",lU=new U("",{providedIn:"root",factory:()=>uU}),dU="X-XSRF-TOKEN",hU=new U("",{providedIn:"root",factory:()=>dU}),tu=class{},fU=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Kc(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)(q(ze),q(lU))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();function pU(t,e){let n=t.url.toLowerCase();if(!M(U0)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=M(tu).getToken(),i=M(hU);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function gU(...t){let e=[F0,g_,Yh,{provide:$s,useExisting:Yh},{provide:Xc,useFactory:()=>M(rU,{optional:!0})??M(g_)},{provide:L0,useValue:pU,multi:!0},{provide:U0,useValue:!0},{provide:tu,useClass:fU}];for(let n of t)e.push(...n.\u0275providers);return Ft(e)}var B0=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(q(ze))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var mU=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=q(yU),i},providedIn:"root"})}return t})(),yU=(()=>{class t extends mU{_doc;constructor(n){super(),this._doc=n}sanitize(n,r){if(r==null)return null;switch(n){case yn.NONE:return r;case yn.HTML:return vr(r,"HTML")?mn(r):cv(this._doc,String(r)).toString();case yn.STYLE:return vr(r,"Style")?mn(r):r;case yn.SCRIPT:if(vr(r,"Script"))return mn(r);throw new F(5200,!1);case yn.URL:return vr(r,"URL")?mn(r):Fc(String(r));case yn.RESOURCE_URL:if(vr(r,"ResourceURL"))return mn(r);throw new F(5201,!1);default:throw new F(5202,!1)}}bypassSecurityTrustHtml(n){return rv(n)}bypassSecurityTrustStyle(n){return iv(n)}bypassSecurityTrustScript(n){return ov(n)}bypassSecurityTrustUrl(n){return sv(n)}bypassSecurityTrustResourceUrl(n){return av(n)}static \u0275fac=function(r){return new(r||t)(q(ze))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var oe="primary",mu=Symbol("RouteTitle"),E_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Io(t){return new E_(t)}function Q0(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function _U(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Hn(t[n],e[n]))return!1;return!0}function Hn(t,e){let n=t?I_(t):void 0,r=e?I_(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Y0(t[i],e[i]))return!1;return!0}function I_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Y0(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function J0(t){return t.length>0?t[t.length-1]:null}function br(t){return Fg(t)?t:mo(t)?Ie(Promise.resolve(t)):K(t)}var EU={exact:X0,subset:eR},Z0={exact:IU,subset:wU,ignored:()=>!0};function $0(t,e,n){return EU[n.paths](t.root,e.root,n.matrixParams)&&Z0[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function IU(t,e){return Hn(t,e)}function X0(t,e,n){if(!_o(t.segments,e.segments)||!Xh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!X0(t.children[r],e.children[r],n))return!1;return!0}function wU(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Y0(t[n],e[n]))}function eR(t,e,n){return tR(t,e,e.segments,n)}function tR(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!_o(i,n)||e.hasChildren()||!Xh(i,n,r))}else if(t.segments.length===n.length){if(!_o(t.segments,n)||!Xh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!eR(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!_o(t.segments,i)||!Xh(t.segments,i,r)||!t.children[oe]?!1:tR(t.children[oe],e,o,r)}}function Xh(t,e,n){return e.every((r,i)=>Z0[n](t[i].parameters,r.parameters))}var qn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Io(this.queryParams),this._queryParamMap}toString(){return bU.serialize(this)}},me=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ef(this)}},di=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Io(this.parameters),this._parameterMap}toString(){return rR(this)}};function TU(t,e){return _o(t,e)&&t.every((n,r)=>Hn(n.parameters,e[r].parameters))}function _o(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function DU(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===oe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==oe&&(n=n.concat(e(i,r)))}),n}var yu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>new wo,providedIn:"root"})}return t})(),wo=class{parse(e){let n=new T_(e);return new qn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${nu(e.root,!0)}`,r=AU(e.queryParams),i=typeof e.fragment=="string"?`#${CU(e.fragment)}`:"";return`${n}${r}${i}`}},bU=new wo;function ef(t){return t.segments.map(e=>rR(e)).join("/")}function nu(t,e){if(!t.hasChildren())return ef(t);if(e){let n=t.children[oe]?nu(t.children[oe],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${nu(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=DU(t,(r,i)=>i===oe?[nu(t.children[oe],!1)]:[`${i}:${nu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[oe]!=null?`${ef(t)}/${n[0]}`:`${ef(t)}/(${n.join("//")})`}}function nR(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jh(t){return nR(t).replace(/%3B/gi,";")}function CU(t){return encodeURI(t)}function w_(t){return nR(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tf(t){return decodeURIComponent(t)}function H0(t){return tf(t.replace(/\+/g,"%20"))}function rR(t){return`${w_(t.path)}${SU(t.parameters)}`}function SU(t){return Object.entries(t).map(([e,n])=>`;${w_(e)}=${w_(n)}`).join("")}function AU(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Jh(n)}=${Jh(i)}`).join("&"):`${Jh(n)}=${Jh(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var RU=/^[^\/()?;#]+/;function m_(t){let e=t.match(RU);return e?e[0]:""}var NU=/^[^\/()?;=#]+/;function PU(t){let e=t.match(NU);return e?e[0]:""}var MU=/^[^=?&#]+/;function kU(t){let e=t.match(MU);return e?e[0]:""}var xU=/^[^&#]+/;function OU(t){let e=t.match(xU);return e?e[0]:""}var T_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[oe]=new me(e,n)),r}parseSegment(){let e=m_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new F(4009,!1);return this.capture(e),new di(tf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=PU(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=m_(this.remaining);i&&(r=i,this.capture(r))}e[tf(n)]=tf(r)}parseQueryParam(e){let n=kU(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=OU(this.remaining);s&&(r=s,this.capture(r))}let i=H0(n),o=H0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=m_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new F(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[oe]:new me([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new F(4011,!1)}};function iR(t){return t.segments.length>0?new me([],{[oe]:t}):t}function oR(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=oR(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new me(t.segments,e);return FU(n)}function FU(t){if(t.numberOfChildren===1&&t.children[oe]){let e=t.children[oe];return new me(t.segments.concat(e.segments),e.children)}return t}function hi(t){return t instanceof qn}function sR(t,e,n=null,r=null){let i=aR(t);return cR(i,e,n,r)}function aR(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new me(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=iR(r);return e??i}function cR(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return y_(i,i,i,n,r);let o=LU(e);if(o.toRoot())return y_(i,i,new me([],{}),n,r);let s=VU(o,i,t),a=s.processChildren?iu(s.segmentGroup,s.index,o.commands):lR(s.segmentGroup,s.index,o.commands);return y_(i,s.segmentGroup,a,n,r)}function nf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function au(t){return typeof t=="object"&&t!=null&&t.outlets}function y_(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=uR(t,e,n);let a=iR(oR(s));return new qn(a,o,i)}function uR(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=uR(o,e,n)}),new me(t.segments,r)}var rf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&nf(r[0]))throw new F(4003,!1);let i=r.find(au);if(i&&i!==J0(r))throw new F(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function LU(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new rf(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new rf(n,e,r)}var Gs=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function VU(t,e,n){if(t.isAbsolute)return new Gs(e,!0,0);if(!n)return new Gs(e,!1,NaN);if(n.parent===null)return new Gs(n,!0,0);let r=nf(t.commands[0])?0:1,i=n.segments.length-1+r;return jU(n,i,t.numberOfDoubleDots)}function jU(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new F(4005,!1);i=r.segments.length}return new Gs(r,!1,i-o)}function UU(t){return au(t[0])?t[0].outlets:{[oe]:t}}function lR(t,e,n){if(t??=new me([],{}),t.segments.length===0&&t.hasChildren())return iu(t,e,n);let r=BU(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new me(t.segments.slice(0,r.pathIndex),{});return o.children[oe]=new me(t.segments.slice(r.pathIndex),t.children),iu(o,0,i)}else return r.match&&i.length===0?new me(t.segments,{}):r.match&&!t.hasChildren()?D_(t,e,n):r.match?iu(t,0,i):D_(t,e,n)}function iu(t,e,n){if(n.length===0)return new me(t.segments,{});{let r=UU(n),i={};if(Object.keys(r).some(o=>o!==oe)&&t.children[oe]&&t.numberOfChildren===1&&t.children[oe].segments.length===0){let o=iu(t.children[oe],e,n);return new me(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=lR(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new me(t.segments,i)}}function BU(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(au(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!q0(c,l,s))return o;r+=2}else{if(!q0(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function D_(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(au(o)){let c=$U(o.outlets);return new me(r,c)}if(i===0&&nf(n[0])){let c=t.segments[e];r.push(new di(c.path,z0(n[0]))),i++;continue}let s=au(o)?o.outlets[oe]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&nf(a)?(r.push(new di(s,z0(a))),i+=2):(r.push(new di(s,{})),i++)}return new me(r,{})}function $U(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=D_(new me([],{}),0,r))}),e}function z0(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function q0(t,e,n){return t==n.path&&Hn(e,n.parameters)}var ou="imperative",nt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(nt||{}),Kt=class{id;url;constructor(e,n){this.id=e,this.url=n}},To=class extends Kt{type=nt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},wn=class extends Kt{urlAfterRedirects;type=nt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(Mt||{}),cu=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(cu||{}),zn=class extends Kt{reason;code;type=nt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Tr=class extends Kt{reason;code;type=nt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Ks=class extends Kt{error;target;type=nt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},uu=class extends Kt{urlAfterRedirects;state;type=nt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},of=class extends Kt{urlAfterRedirects;state;type=nt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sf=class extends Kt{urlAfterRedirects;state;shouldActivate;type=nt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},af=class extends Kt{urlAfterRedirects;state;type=nt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cf=class extends Kt{urlAfterRedirects;state;type=nt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uf=class{route;type=nt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},lf=class{route;type=nt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},df=class{snapshot;type=nt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hf=class{snapshot;type=nt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ff=class{snapshot;type=nt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pf=class{snapshot;type=nt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var lu=class{},Qs=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function HU(t){return!(t instanceof lu)&&!(t instanceof Qs)}function zU(t,e){return t.providers&&!t._injector&&(t._injector=jc(t.providers,e,`Route: ${t.path}`)),t._injector??e}function In(t){return t.outlet||oe}function qU(t,e){let n=t.filter(r=>In(r)===e);return n.push(...t.filter(r=>In(r)!==e)),n}function Zs(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var gf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Zs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Xs(this.rootInjector)}},Xs=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new gf(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(q(ke))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=b_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=b_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=C_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return C_(e,this._root).map(n=>n.value)}};function b_(t,e){if(t===e.value)return e;for(let n of e.children){let r=b_(t,n);if(r)return r}return null}function C_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=C_(t,n);if(r.length)return r.unshift(e),r}return[]}var Wt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function qs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var du=class extends mf{snapshot;constructor(e,n){super(e),this.snapshot=n,x_(this,e)}toString(){return this.snapshot.toString()}};function dR(t){let e=GU(t),n=new ct([new di("",{})]),r=new ct({}),i=new ct({}),o=new ct({}),s=new ct(""),a=new Dr(n,r,o,s,i,oe,t,e.root);return a.snapshot=e.root,new du(new Wt(a,[]),e)}function GU(t){let e={},n={},r={},i="",o=new Eo([],e,r,i,n,oe,t,null,{});return new hu("",new Wt(o,[]))}var Dr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(X(l=>l[mu]))??K(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(X(e=>Io(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(X(e=>Io(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function yf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),t.params),data:V(V({},e.data),t.data),resolve:V(V(V(V({},t.data),e.data),i?.data),t._resolvedData)}:r={params:V({},t.params),data:V({},t.data),resolve:V(V({},t.data),t._resolvedData??{})},i&&fR(i)&&(r.resolve[mu]=i.title),r}var Eo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[mu]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Io(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Io(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},hu=class extends mf{url;constructor(e,n){super(n),this.url=e,x_(this,n)}toString(){return hR(this._root)}};function x_(t,e){e.value._routerState=t,e.children.forEach(n=>x_(t,n))}function hR(t){let e=t.children.length>0?` { ${t.children.map(hR).join(", ")} } `:"";return`${t.value}${e}`}function v_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Hn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Hn(e.params,n.params)||t.paramsSubject.next(n.params),_U(e.url,n.url)||t.urlSubject.next(n.url),Hn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function S_(t,e){let n=Hn(t.params,e.params)&&TU(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||S_(t.parent,e.parent))}function fR(t){return typeof t.title=="string"||t.title===null}var pR=new U(""),O_=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=oe;activateEvents=new Et;deactivateEvents=new Et;attachEvents=new Et;detachEvents=new Et;routerOutletData=HA(void 0);parentContexts=M(Xs);location=M(po);changeDetector=M(Ls);inputBinder=M(If,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new F(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new A_(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=vn({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ho]})}return t})(),A_=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Dr?this.route:e===Xs?this.childContexts:e===pR?this.outletData:this.parent.get(e,n)}},If=new U("");var F_=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Sv({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Rh(0,"router-outlet")},dependencies:[O_],encapsulation:2})}return t})();function L_(t){let e=t.children&&t.children.map(L_),n=e?ye(V({},t),{children:e}):V({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==oe&&(n.component=F_),n}function WU(t,e,n){let r=fu(t,e._root,n?n._root:void 0);return new du(r,e)}function fu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=KU(t,e,n);return new Wt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>fu(t,a)),s}}let r=QU(e.value),i=e.children.map(o=>fu(t,o));return new Wt(r,i)}}function KU(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return fu(t,r,i);return fu(t,r)})}function QU(t){return new Dr(new ct(t.url),new ct(t.params),new ct(t.queryParams),new ct(t.fragment),new ct(t.data),t.outlet,t.component,t)}var Ys=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},gR="ngNavigationCancelingError";function vf(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=hi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mR(!1,Mt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function mR(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[gR]=!0,n.cancellationCode=e,n}function YU(t){return yR(t)&&hi(t.url)}function yR(t){return!!t&&t[gR]}var JU=(t,e,n,r)=>X(i=>(new R_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),R_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),v_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=qs(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=qs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=qs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=qs(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new pf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new hf(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(v_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),v_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},_f=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ws=class{component;route;constructor(e,n){this.component=e,this.route=n}};function ZU(t,e,n){let r=t._root,i=e?e._root:null;return ru(r,i,n,[r.value])}function XU(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ea(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!am(t)?t:e.get(t):r}function ru(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=qs(e);return t.children.forEach(s=>{eB(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>su(a,n.getContext(s),i)),i}function eB(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=tB(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new _f(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ru(t,e,a?a.children:null,r,i):ru(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ws(a.outlet.component,s))}else s&&su(e,a,i),i.canActivateChecks.push(new _f(r)),o.component?ru(t,null,a?a.children:null,r,i):ru(t,null,n,r,i);return i}function tB(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!_o(t.url,e.url);case"pathParamsOrQueryParamsChange":return!_o(t.url,e.url)||!Hn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!S_(t,e)||!Hn(t.queryParams,e.queryParams);case"paramsChange":default:return!S_(t,e)}}function su(t,e,n){let r=qs(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?su(s,e.children.getContext(o),n):su(s,null,n):su(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ws(e.outlet.component,i)):n.canDeactivateChecks.push(new Ws(null,i)):n.canDeactivateChecks.push(new Ws(null,i))}function vu(t){return typeof t=="function"}function nB(t){return typeof t=="boolean"}function rB(t){return t&&vu(t.canLoad)}function iB(t){return t&&vu(t.canActivate)}function oB(t){return t&&vu(t.canActivateChild)}function sB(t){return t&&vu(t.canDeactivate)}function aB(t){return t&&vu(t.canMatch)}function vR(t){return t instanceof ar||t?.name==="EmptyError"}var Zh=Symbol("INITIAL_VALUE");function Js(){return lt(t=>Yl(t.map(e=>e.pipe(Mn(1),Xl(Zh)))).pipe(X(e=>{for(let n of e)if(n!==!0){if(n===Zh)return Zh;if(n===!1||cB(n))return n}return!0}),ut(e=>e!==Zh),Mn(1)))}function cB(t){return hi(t)||t instanceof Ys}function uB(t,e){return He(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?K(ye(V({},n),{guardsResult:!0})):lB(s,r,i,t).pipe(He(a=>a&&nB(a)?dB(r,o,t,e):K(a)),X(a=>ye(V({},n),{guardsResult:a})))})}function lB(t,e,n,r){return Ie(t).pipe(He(i=>mB(i.component,i.route,n,e,r)),lr(i=>i!==!0,!0))}function dB(t,e,n,r){return Ie(e).pipe(ur(i=>us(fB(i.route.parent,r),hB(i.route,r),gB(t,i.path,n),pB(t,i.route,n))),lr(i=>i!==!0,!0))}function hB(t,e){return t!==null&&e&&e(new ff(t)),K(!0)}function fB(t,e){return t!==null&&e&&e(new df(t)),K(!0)}function pB(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return K(!0);let i=r.map(o=>oc(()=>{let s=Zs(e)??n,a=ea(o,s),c=iB(a)?a.canActivate(e,t):Ve(s,()=>a(e,t));return br(c).pipe(lr())}));return K(i).pipe(Js())}function gB(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>XU(s)).filter(s=>s!==null).map(s=>oc(()=>{let a=s.guards.map(c=>{let l=Zs(s.node)??n,h=ea(c,l),p=oB(h)?h.canActivateChild(r,t):Ve(l,()=>h(r,t));return br(p).pipe(lr())});return K(a).pipe(Js())}));return K(o).pipe(Js())}function mB(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return K(!0);let s=o.map(a=>{let c=Zs(e)??i,l=ea(a,c),h=sB(l)?l.canDeactivate(t,e,n,r):Ve(c,()=>l(t,e,n,r));return br(h).pipe(lr())});return K(s).pipe(Js())}function yB(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return K(!0);let o=i.map(s=>{let a=ea(s,t),c=rB(a)?a.canLoad(e,n):Ve(t,()=>a(e,n));return br(c)});return K(o).pipe(Js(),_R(r))}function _R(t){return Pl(et(e=>{if(typeof e!="boolean")throw vf(t,e)}),X(e=>e===!0))}function vB(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return K(!0);let o=i.map(s=>{let a=ea(s,t),c=aB(a)?a.canMatch(e,n):Ve(t,()=>a(e,n));return br(c)});return K(o).pipe(Js(),_R(r))}var pu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},gu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function zs(t){return as(new pu(t))}function _B(t){return as(new F(4e3,!1))}function EB(t){return as(mR(!1,Mt.GuardRejected))}var N_=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return K(r);if(i.numberOfChildren>1||!i.children[oe])return _B(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,n,r,i,o){return IB(n,i,o).pipe(X(s=>{if(s instanceof qn)throw new gu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new gu(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new qn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new me(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new F(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function IB(t,e,n){if(typeof t=="string")return K(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:h,title:p}=e;return br(Ve(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:p})))}var P_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wB(t,e,n,r,i){let o=ER(t,e,n);return o.matched?(r=zU(e,r),vB(r,e,n,i).pipe(X(s=>s===!0?o:V({},P_)))):K(o)}function ER(t,e,n){if(e.path==="**")return TB(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?V({},P_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Q0)(n,t,e);if(!i)return V({},P_);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function TB(t){return{matched:!0,parameters:t.length>0?J0(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function G0(t,e,n,r){return n.length>0&&CB(t,n,r)?{segmentGroup:new me(e,bB(r,new me(n,t.children))),slicedSegments:[]}:n.length===0&&SB(t,n,r)?{segmentGroup:new me(t.segments,DB(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new me(t.segments,t.children),slicedSegments:n}}function DB(t,e,n,r){let i={};for(let o of n)if(wf(t,e,o)&&!r[In(o)]){let s=new me([],{});i[In(o)]=s}return V(V({},r),i)}function bB(t,e){let n={};n[oe]=e;for(let r of t)if(r.path===""&&In(r)!==oe){let i=new me([],{});n[In(r)]=i}return n}function CB(t,e,n){return n.some(r=>wf(t,e,r)&&In(r)!==oe)}function SB(t,e,n){return n.some(r=>wf(t,e,r))}function wf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function AB(t,e,n){return e.length===0&&!t.children[n]}var M_=class{};function RB(t,e,n,r,i,o,s="emptyOnly"){return new k_(t,e,n,r,i,s,o).recognize()}var NB=31,k_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new N_(this.urlSerializer,this.urlTree)}noMatchError(e){return new F(4002,`'${e.segmentGroup}'`)}recognize(){let e=G0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(X(({children:n,rootSnapshot:r})=>{let i=new Wt(r,n),o=new hu("",i),s=sR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Eo([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,n).pipe(X(r=>({children:r,rootSnapshot:n})),cr(r=>{if(r instanceof gu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof pu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(X(s=>s instanceof Wt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ie(o).pipe(ur(s=>{let a=r.children[s],c=qU(n,s);return this.processSegmentGroup(e,c,a,s,i)}),Zl((s,a)=>(s.push(...a),s)),Gr(null),Vg(),He(s=>{if(s===null)return zs(r);let a=IR(s);return PB(a),K(a)}))}processSegment(e,n,r,i,o,s,a){return Ie(n).pipe(ur(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(cr(l=>{if(l instanceof pu)return K(null);throw l}))),lr(c=>!!c),cr(c=>{if(vR(c))return AB(r,i,o)?K(new M_):zs(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return In(r)!==s&&(s===oe||!wf(i,o,r))?zs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):zs(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=ER(n,i,o);if(!c)return zs(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>NB&&(this.allowRedirects=!1));let y=new Eo(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,W0(i),In(i),i.component??i._loadedComponent??null,i,K0(i)),w=yf(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(w.params),y.data=Object.freeze(w.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(lt(S=>this.applyRedirects.lineralizeSegments(i,S)),He(S=>this.processSegment(e,r,n,S.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=wB(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(lt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(lt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=c,w=new Eo(g,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,W0(r),In(r),r.component??r._loadedComponent??null,r,K0(r)),N=yf(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(N.params),w.data=Object.freeze(N.data);let{segmentGroup:S,slicedSegments:P}=G0(n,g,y,l);if(P.length===0&&S.hasChildren())return this.processChildren(h,l,S,w).pipe(X(H=>new Wt(w,H)));if(l.length===0&&P.length===0)return K(new Wt(w,[]));let L=In(r)===o;return this.processSegment(h,l,S,P,L?oe:o,!0,w).pipe(X(H=>new Wt(w,H instanceof Wt?[H]:[])))}))):zs(n)))}getChildConfig(e,n,r){return n.children?K({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?K({routes:n._loadedRoutes,injector:n._loadedInjector}):yB(e,n,r,this.urlSerializer).pipe(He(i=>i?this.configLoader.loadChildren(e,n).pipe(et(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):EB(n))):K({routes:[],injector:e})}};function PB(t){t.sort((e,n)=>e.value.outlet===oe?-1:n.value.outlet===oe?1:e.value.outlet.localeCompare(n.value.outlet))}function MB(t){let e=t.value.routeConfig;return e&&e.path===""}function IR(t){let e=[],n=new Set;for(let r of t){if(!MB(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=IR(r.children);e.push(new Wt(r.value,i))}return e.filter(r=>!n.has(r))}function W0(t){return t.data||{}}function K0(t){return t.resolve||{}}function kB(t,e,n,r,i,o){return He(s=>RB(t,e,n,r,s.extractedUrl,i,o).pipe(X(({state:a,tree:c})=>ye(V({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function xB(t,e){return He(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return K(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of wR(c))s.add(l);let a=0;return Ie(s).pipe(ur(c=>o.has(c)?OB(c,r,t,e):(c.data=yf(c,c.parent,t).resolve,K(void 0))),et(()=>a++),ls(1),He(c=>a===s.size?K(n):xt))})}function wR(t){let e=t.children.map(n=>wR(n)).flat();return[t,...e]}function OB(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!fR(i)&&(o[mu]=i.title),oc(()=>(t.data=yf(t,t.parent,n).resolve,FB(o,t,e,r).pipe(X(s=>(t._resolvedData=s,t.data=V(V({},t.data),s),null)))))}function FB(t,e,n,r){let i=I_(t);if(i.length===0)return K({});let o={};return Ie(i).pipe(He(s=>LB(t[s],e,n,r).pipe(lr(),et(a=>{if(a instanceof Ys)throw vf(new wo,a);o[s]=a}))),ls(1),X(()=>o),cr(s=>vR(s)?xt:as(s)))}function LB(t,e,n,r){let i=Zs(e)??r,o=ea(t,i),s=o.resolve?o.resolve(e,n):Ve(i,()=>o(e,n));return br(s)}function __(t){return lt(e=>{let n=t(e);return n?Ie(n).pipe(X(()=>e)):K(e)})}var V_=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(n){return n.data[mu]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M(TR),providedIn:"root"})}return t})(),TR=(()=>{class t extends V_{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(q(B0))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ta=new U("",{providedIn:"root",factory:()=>({})}),_u=new U(""),DR=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(Uv);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return K(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=br(Ve(n,()=>r.loadComponent())).pipe(X(CR),et(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),zi(()=>{this.componentLoaders.delete(r)})),o=new rs(i,()=>new Ye).pipe(ns());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return K({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=bR(r,this.compiler,n,this.onLoadEndListener).pipe(zi(()=>{this.childrenLoaders.delete(r)})),s=new rs(o,()=>new Ye).pipe(ns());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bR(t,e,n,r){return br(Ve(n,()=>t.loadChildren())).pipe(X(CR),He(i=>i instanceof Dh||Array.isArray(i)?K(i):Ie(e.compileModuleAsync(i))),X(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(_u,[],{optional:!0,self:!0}).flat()),{routes:s.map(L_),injector:o}}))}function VB(t){return t&&typeof t=="object"&&"default"in t}function CR(t){return VB(t)?t.default:t}var Tf=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M(jB),providedIn:"root"})}return t})(),jB=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),SR=new U("");var AR=new U(""),RR=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ye;transitionAbortWithErrorSubject=new Ye;configLoader=M(DR);environmentInjector=M(ke);destroyRef=M(gr);urlSerializer=M(yu);rootContexts=M(Xs);location=M(js);inputBindingEnabled=M(If,{optional:!0})!==null;titleStrategy=M(V_);options=M(ta,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(Tf);createViewTransition=M(SR,{optional:!0});navigationErrorHandler=M(AR,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>K(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new uf(i)),r=i=>this.events.next(new lf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ye(V({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(n){return this.transitions=new ct(null),this.transitions.pipe(ut(r=>r!==null),lt(r=>{let i=!1;return K(r).pipe(lt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Mt.SupersededByNewNavigation),xt;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ye(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload"){let c="";return this.events.next(new Tr(o.id,this.urlSerializer.serialize(o.rawUrl),c,cu.IgnoredSameUrlNavigation)),o.resolve(!1),xt}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return K(o).pipe(lt(c=>(this.events.next(new To(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?xt:Promise.resolve(c))),kB(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),et(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=ye(V({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let l=new uu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new To(c,this.urlSerializer.serialize(l),h,p);this.events.next(y);let w=dR(this.rootComponentType).snapshot;return this.currentTransition=r=ye(V({},o),{targetSnapshot:w,urlAfterRedirects:l,extras:ye(V({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,K(r)}else{let c="";return this.events.next(new Tr(o.id,this.urlSerializer.serialize(o.extractedUrl),c,cu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),xt}}),et(o=>{let s=new of(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),X(o=>(this.currentTransition=r=ye(V({},o),{guards:ZU(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),uB(this.environmentInjector,o=>this.events.next(o)),et(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw vf(this.urlSerializer,o.guardsResult);let s=new sf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),ut(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Mt.GuardRejected),!1)),__(o=>{if(o.guards.canActivateChecks.length!==0)return K(o).pipe(et(s=>{let a=new af(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),lt(s=>{let a=!1;return K(s).pipe(xB(this.paramsInheritanceStrategy,this.environmentInjector),et({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Mt.NoDataFromResolver)}}))}),et(s=>{let a=new cf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),__(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent){let l=Zs(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(et(h=>{a.component=h}),X(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return Yl(s(o.targetSnapshot.root)).pipe(Gr(null),Mn(1))}),__(()=>this.afterPreactivation()),lt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Ie(a).pipe(X(()=>r)):K(r)}),X(o=>{let s=WU(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ye(V({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),et(()=>{this.events.next(new lu)}),JU(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Mn(1),qi(new J(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(ut(()=>!i&&!r.targetRouterState),et(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Mt.Aborted)}))),et({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new wn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),qi(this.transitionAbortWithErrorSubject.pipe(et(o=>{throw o}))),zi(()=>{i||this.cancelNavigationTransition(r,"",Mt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),cr(o=>{if(this.destroyed)return r.resolve(!1),xt;if(i=!0,yR(o))this.events.next(new zn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),YU(o)?this.events.next(new Qs(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Ks(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=Ve(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Ys){let{message:c,cancellationCode:l}=vf(this.urlSerializer,a);this.events.next(new zn(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new Qs(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return xt}))}))}cancelNavigationTransition(n,r,i){let o=new zn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function UB(t){return t!==ou}var NR=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M(BB),providedIn:"root"})}return t})(),Ef=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},BB=(()=>{class t extends Ef{static \u0275fac=(()=>{let n;return function(i){return(n||(n=hh(t)))(i||t)}})();static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),PR=(()=>{class t{urlSerializer=M(yu);options=M(ta,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(js);urlHandlingStrategy=M(Tf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new qn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof qn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=dR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M($B),providedIn:"root"})}return t})(),$B=(()=>{class t extends PR{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof To?this.updateStateMemento():n instanceof Tr?this.commitTransition(r):n instanceof uu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof lu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof zn&&n.code!==Mt.SupersededByNewNavigation&&n.code!==Mt.Redirect?this.restoreHistory(r):n instanceof Ks?this.restoreHistory(r,!0):n instanceof wn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=V(V({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=V(V({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=hh(t)))(i||t)}})();static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function j_(t,e){t.events.pipe(ut(n=>n instanceof wn||n instanceof zn||n instanceof Ks||n instanceof Tr),X(n=>n instanceof wn||n instanceof Tr?0:(n instanceof zn?n.code===Mt.Redirect||n.code===Mt.SupersededByNewNavigation:!1)?2:1),ut(n=>n!==2),Mn(1)).subscribe(()=>{e()})}var HB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},na=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(bh);stateManager=M(PR);options=M(ta,{optional:!0})||{};pendingTasks=M(Un);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(RR);urlSerializer=M(yu);location=M(js);urlHandlingStrategy=M(Tf);injector=M(ke);_events=new Ye;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(NR);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(_u,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(If,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Me;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof zn&&r.code!==Mt.Redirect&&r.code!==Mt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof wn)this.navigated=!0;else if(r instanceof Qs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||UB(i.source)},s);this.scheduleNavigation(a,ou,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}HU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ou,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=V({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Nt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(L_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=aR(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return cR(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=hi(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ou,null,r)}navigate(n,r={skipLocationChange:!1}){return qB(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=V({},HB):r===!1?i=V({},zB):i=r,hi(n))return $0(this.currentUrlTree,n,i);let o=this.parseUrl(n);return $0(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,c=g});let h=this.pendingTasks.add();return j_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qB(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new F(4008,!1)}var Df=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=bc(null);get href(){return Os(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ye;applicationErrorHandler=M(Nt);options=M(ta,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(M(new kh("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof wn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(hi(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:hi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(Ee(na),Ee(Dr),Oc("tabindex"),Ee(fo),Ee(Gt),Ee(Vs))};static \u0275dir=vn({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Ph("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ah("href",i.reactiveHref(),uv)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",xh],skipLocationChange:[2,"skipLocationChange","skipLocationChange",xh],replaceUrl:[2,"replaceUrl","replaceUrl",xh],routerLink:"routerLink"},features:[ho]})}return t})(),WB=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Et;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof wn&&this.update()})}ngAfterContentInit(){K(this.links.changes,K(null)).pipe(cs()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ie(n).pipe(cs()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=KB(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?n.isActive(o,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(Ee(na),Ee(Gt),Ee(fo),Ee(Ls),Ee(Df,8))};static \u0275dir=vn({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Fv(o,Df,5),r&2){let s;Lv(s=Vv())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[ho]})}return t})();function KB(t){return!!t.paths}var QB=new U("");function YB(t,...e){return Ft([{provide:_u,multi:!0,useValue:t},[],{provide:Dr,useFactory:JB,deps:[na]},{provide:Sh,multi:!0,useFactory:ZB},e.map(n=>n.\u0275providers)])}function JB(t){return t.routerState.root}function ZB(){let t=M(Ze);return e=>{let n=t.get(ci);if(e!==n.components[0])return;let r=t.get(na),i=t.get(XB);t.get(e$)===1&&r.initialNavigation(),t.get(t$,null,{optional:!0})?.setUpPreloading(),t.get(QB,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var XB=new U("",{factory:()=>new Ye}),e$=new U("",{providedIn:"root",factory:()=>1});var t$=new U("");var fi=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(fi||{}),n$="*";function pi(t,e){return{type:fi.Trigger,name:t,definitions:e,options:{}}}function Tn(t,e=null){return{type:fi.Animate,styles:e,timings:t}}function goe(t,e=null){return{type:fi.Sequence,steps:t,options:e}}function ft(t){return{type:fi.Style,styles:t,offset:null}}function gi(t,e,n){return{type:fi.State,name:t,styles:e,options:n}}function Dn(t,e,n=null){return{type:fi.Transition,expr:t,animation:e,options:n}}var U_=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,n=0){this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},B_=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let n=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++n==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((n,r)=>n===null||r.totalTime>n.totalTime?r:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},r$="!";var Soe=pi("slideInOut",[Dn(":enter",[ft({transform:"translateX(-100%)"}),Tn("600ms ease-in",ft({transform:"translateX(0)"}))]),Dn(":leave",[Tn("600ms ease-out",ft({transform:"translateX(-100%)"}))])]),Aoe=pi("slideOutIn",[Dn(":enter",[ft({transform:"translateX(100%)"}),Tn("600ms ease-in",ft({transform:"translateX(0)"}))]),Dn(":leave",[Tn("600ms ease-out",ft({transform:"translateX(100%)"}))])]),Roe=pi("zoomIn",[gi("hidden",ft({transform:"scale(0)",opacity:0})),gi("enter",ft({transform:"scale(1)",opacity:1})),Dn("hidden => enter",[Tn("1000ms ease")])]),Noe=pi("slideDown",[gi("hidden",ft({transform:"translateY(-100%)",opacity:0})),gi("enter",ft({transform:"translateY(0)",opacity:1})),Dn("hidden => enter",[Tn("1000ms ease")])]),Poe=pi("slideUp",[gi("hidden",ft({transform:"translateY(100%)",opacity:0})),gi("enter",ft({transform:"translateY(0)",opacity:1})),Dn("hidden => enter",[Tn("1000ms ease")])]),Moe=pi("slideDownUp",[Dn(":enter",[ft({transform:"translateY(100%)"}),Tn("300ms ease-in",ft({transform:"translateY(0)"}))]),Dn(":leave",[Tn("300ms ease-out",ft({transform:"translateY(100%)"}))])]);var MR=class t{constructor(e){this.el=e}animationTriggerName;zoomInState="hidden";slideDownState="hidden";slideUpState="hidden";observer;ngOnInit(){this.observer=new IntersectionObserver(e=>{e.forEach(n=>{if(n.isIntersecting){switch(this.animationTriggerName){case"zoomIn":this.zoomInState="enter";break;case"slideDown":this.slideDownState="enter";break;case"slideUp":this.slideUpState="enter";break}this.observer.disconnect()}})},{threshold:.1}),this.observer.observe(this.el.nativeElement)}ngOnDestroy(){this.observer&&this.observer.disconnect()}static \u0275fac=function(n){return new(n||t)(Ee(Gt))};static \u0275dir=vn({type:t,selectors:[["","appAnimateOnScroll",""]],hostVars:3,hostBindings:function(n,r){n&2&&Nh("@zoomIn",r.zoomInState)("@slideDown",r.slideDownState)("@slideUp",r.slideUpState)},inputs:{animationTriggerName:[0,"appAnimateOnScroll","animationTriggerName"]}})};var kR=()=>{};var FR=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},i$=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},bf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;c||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(FR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):i$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new H_;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let w=l<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},H_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},o$=function(t){let e=FR(t);return bf.encodeByteArray(e,!0)},Iu=function(t){return o$(t).replace(/\./g,"")},Cf=function(t){try{return bf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function q_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var s$=()=>q_().__FIREBASE_DEFAULTS__,a$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},c$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Cf(t[1]);return e&&JSON.parse(e)},Sf=()=>{try{return kR()||s$()||a$()||c$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},G_=t=>{var e,n;return(n=(e=Sf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},LR=t=>{let e=G_(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},W_=()=>{var t;return(t=Sf())===null||t===void 0?void 0:t.config},K_=t=>{var e;return(e=Sf())===null||e===void 0?void 0:e[`_${t}`]};var Do=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function mi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function Af(t){return _(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function VR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Iu(JSON.stringify(n)),Iu(JSON.stringify(s)),""].join(".")}var Eu={};function u$(){let t={prod:[],emulator:[]};for(let e of Object.keys(Eu))Eu[e]?t.emulator.push(e):t.prod.push(e);return t}function l$(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var xR=!1;function Rf(t,e){if(typeof window>"u"||typeof document>"u"||!mi(window.location.host)||Eu[t]===e||Eu[t]||xR)return;Eu[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=u$().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{xR=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=l$(r),y=n("text"),w=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),S=document.getElementById(N)||document.createElement("a"),P=n("preprendIcon"),L=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let H=g.element;a(H),h(S,N);let z=l();c(L,P),H.append(L,w,S,z),document.body.appendChild(H)}o?(w.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function d$(){var t;let e=(t=Sf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BR(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $R(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HR(){let t=rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zR(){return!d$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wu(){try{return typeof indexedDB=="object"}catch{return!1}}function qR(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var h$="FirebaseError",Qt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=h$,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bn.prototype.create)}},bn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?f$(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Qt(i,a,r)}};function f$(t,e){return t.replace(p$,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var p$=/\{\$([^}]+)}/g;function GR(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(OR(o)&&OR(s)){if(!Gn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function OR(t){return t!==null&&typeof t=="object"}function Tu(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ra(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ia(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function WR(t,e){let n=new z_(t,e);return n.subscribe.bind(n)}var z_=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");g$(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=$_),i.error===void 0&&(i.error=$_),i.complete===void 0&&(i.complete=$_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function g$(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $_(){}var Loe=4*60*60*1e3;function Be(t){return t&&t._delegate?t._delegate:t}var kt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var bo="[DEFAULT]";var Q_=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Do;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y$(e))try{this.getOrInitializeService({instanceIdentifier:bo})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=bo){return this.instances.has(e)}getOptions(e=bo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:m$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bo){return this.component?this.component.multipleInstances?e:bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function m$(t){return t===bo?void 0:t}function y$(t){return t.instantiationMode==="EAGER"}var Nf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Q_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var v$=[],le=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(le||{}),_$={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},E$=le.INFO,I$={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},w$=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=I$[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Wn=class{constructor(e){this.name=e,this._logLevel=E$,this._logHandler=w$,this._userLogHandler=null,v$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var T$=(t,e)=>e.some(n=>t instanceof n),KR,QR;function D$(){return KR||(KR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function b$(){return QR||(QR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var YR=new WeakMap,J_=new WeakMap,JR=new WeakMap,Y_=new WeakMap,X_=new WeakMap;function C$(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Kn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&YR.set(n,t)}).catch(()=>{}),X_.set(e,t),e}function S$(t){if(J_.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});J_.set(t,e)}var Z_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return J_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ZR(t){Z_=t(Z_)}function A$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Pf(this),e,...n);return JR.set(r,e.sort?e.sort():[e]),Kn(r)}:b$().includes(t)?function(...e){return t.apply(Pf(this),e),Kn(YR.get(this))}:function(...e){return Kn(t.apply(Pf(this),e))}}function R$(t){return typeof t=="function"?A$(t):(t instanceof IDBTransaction&&S$(t),T$(t,D$())?new Proxy(t,Z_):t)}function Kn(t){if(t instanceof IDBRequest)return C$(t);if(Y_.has(t))return Y_.get(t);let e=R$(t);return e!==t&&(Y_.set(t,e),X_.set(e,t)),e}var Pf=t=>X_.get(t);function eN(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Kn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Kn(s.result),c.oldVersion,c.newVersion,Kn(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var N$=["get","getKey","getAll","getAllKeys","count"],P$=["put","add","delete","clear"],eE=new Map;function XR(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(eE.get(e))return eE.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=P$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||N$.includes(n)))return;let o=function(s,...a){return _(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return eE.set(e,o),o}ZR(t=>ye(V({},t),{get:(e,n,r)=>XR(e,n)||t.get(e,n,r),has:(e,n)=>!!XR(e,n)||t.has(e,n)}));var nE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(M$(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function M$(t){let e=t.getComponent();return e?.type==="VERSION"}var rE="@firebase/app",tN="0.13.2";var Cr=new Wn("@firebase/app"),k$="@firebase/app-compat",x$="@firebase/analytics-compat",O$="@firebase/analytics",F$="@firebase/app-check-compat",L$="@firebase/app-check",V$="@firebase/auth",j$="@firebase/auth-compat",U$="@firebase/database",B$="@firebase/data-connect",$$="@firebase/database-compat",H$="@firebase/functions",z$="@firebase/functions-compat",q$="@firebase/installations",G$="@firebase/installations-compat",W$="@firebase/messaging",K$="@firebase/messaging-compat",Q$="@firebase/performance",Y$="@firebase/performance-compat",J$="@firebase/remote-config",Z$="@firebase/remote-config-compat",X$="@firebase/storage",eH="@firebase/storage-compat",tH="@firebase/firestore",nH="@firebase/ai",rH="@firebase/firestore-compat",iH="firebase",oH="11.10.0";var iE="[DEFAULT]",sH={[rE]:"fire-core",[k$]:"fire-core-compat",[O$]:"fire-analytics",[x$]:"fire-analytics-compat",[L$]:"fire-app-check",[F$]:"fire-app-check-compat",[V$]:"fire-auth",[j$]:"fire-auth-compat",[U$]:"fire-rtdb",[B$]:"fire-data-connect",[$$]:"fire-rtdb-compat",[H$]:"fire-fn",[z$]:"fire-fn-compat",[q$]:"fire-iid",[G$]:"fire-iid-compat",[W$]:"fire-fcm",[K$]:"fire-fcm-compat",[Q$]:"fire-perf",[Y$]:"fire-perf-compat",[J$]:"fire-rc",[Z$]:"fire-rc-compat",[X$]:"fire-gcs",[eH]:"fire-gcs-compat",[tH]:"fire-fst",[rH]:"fire-fst-compat",[nH]:"fire-vertex","fire-js":"fire-js",[iH]:"fire-js-all"};var Du=new Map,aH=new Map,oE=new Map;function nN(t,e){try{t.container.addComponent(e)}catch(n){Cr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Cn(t){let e=t.name;if(oE.has(e))return Cr.debug(`There were multiple attempts to register component ${e}.`),!1;oE.set(e,t);for(let n of Du.values())nN(n,t);for(let n of aH.values())nN(n,t);return!0}function oa(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Bt(t){return t==null?!1:t.settings!==void 0}var cH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new bn("app","Firebase",cH);var sE=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}};var vi=oH;function sN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:iE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw yi.create("bad-app-name",{appName:String(i)});if(n||(n=W_()),!n)throw yi.create("no-options");let o=Du.get(i);if(o){if(Gn(n,o.options)&&Gn(r,o.config))return o;throw yi.create("duplicate-app",{appName:i})}let s=new Nf(i);for(let c of oE.values())s.addComponent(c);let a=new sE(n,r,s);return Du.set(i,a),a}function Co(t=iE){let e=Du.get(t);if(!e&&t===iE&&W_())return sN();if(!e)throw yi.create("no-app",{appName:t});return e}function Mf(){return Array.from(Du.values())}function Fe(t,e,n){var r;let i=(r=sH[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cr.warn(a.join(" "));return}Cn(new kt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var uH="firebase-heartbeat-database",lH=1,bu="firebase-heartbeat-store",tE=null;function aN(){return tE||(tE=eN(uH,lH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bu)}catch(n){console.warn(n)}}}}).catch(t=>{throw yi.create("idb-open",{originalErrorMessage:t.message})})),tE}function dH(t){return _(this,null,function*(){try{let n=(yield aN()).transaction(bu),r=yield n.objectStore(bu).get(cN(t));return yield n.done,r}catch(e){if(e instanceof Qt)Cr.warn(e.message);else{let n=yi.create("idb-get",{originalErrorMessage:e?.message});Cr.warn(n.message)}}})}function rN(t,e){return _(this,null,function*(){try{let r=(yield aN()).transaction(bu,"readwrite");yield r.objectStore(bu).put(e,cN(t)),yield r.done}catch(n){if(n instanceof Qt)Cr.warn(n.message);else{let r=yi.create("idb-set",{originalErrorMessage:n?.message});Cr.warn(r.message)}}})}function cN(t){return`${t.name}!${t.options.appId}`}var hH=1024,fH=30,aE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new cE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=iN();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>fH){let s=gH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Cr.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=iN(),{heartbeatsToSend:r,unsentEntries:i}=pH(this._heartbeatsCache.heartbeats),o=Iu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Cr.warn(n),""}})}};function iN(){return new Date().toISOString().substring(0,10)}function pH(t,e=hH){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),oN(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),oN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var cE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return wu()?qR().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield dH(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return rN(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return rN(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function oN(t){return Iu(JSON.stringify({version:2,heartbeats:t})).length}function gH(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function mH(t){Cn(new kt("platform-logger",e=>new nE(e),"PRIVATE")),Cn(new kt("heartbeat",e=>new aE(e),"PRIVATE")),Fe(rE,tN,t),Fe(rE,tN,"esm2017"),Fe("fire-js","")}mH("");var yH="firebase",vH="11.10.0";Fe(yH,vH,"app");function gse(t){t||(t=M(gr));let e=new J(n=>{if(t.destroyed){n.next();return}return t.onDestroy(n.next.bind(n))});return n=>n.pipe(qi(e))}function uN(t){t===void 0&&(t=M(Ze));let e=t.get(ii);return n=>new J(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var _i=new Fs("ANGULARFIRE2_VERSION");function Cu(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var aa=(t,e)=>{let n=e?[e]:Mf(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},sa=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(sa||{}),lN=Wv()&&typeof Zone<"u"?sa.WARN:sa.SILENT;var kf=class{zone;delegate;constructor(e,n=Og){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Ei=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=M(ge);this.outsideAngular=n.runOutsideAngular(()=>new kf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new kf(typeof Zone>"u"?void 0:Zone.current,ic))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),dN=!1;function _H(t,e){!dN&&(lN>sa.SILENT||Wv())&&(dN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),lN>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function EH(t){let e=M(ge,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function So(t){let e=M(ge,{optional:!0});return e?e.run(()=>t()):t()}var IH=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Ve(n,()=>So(()=>t.apply(void 0,r)))),Sn=(t,e,n)=>(n||=e?sa.WARN:sa.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=M(Ei),s=M(ii),a=M(ke)}catch{return _H(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=So(()=>s.add())),i[l]=IH(i[l],r,a));let c=EH(()=>t.apply(this,i));return e?c instanceof J?c.pipe(qr(o.outsideAngular),zr(o.insideAngular),uN(a)):c instanceof Promise?So(()=>{let l=s.add();return new Promise((h,p)=>{c.then(g=>Ve(a,()=>So(()=>h(g))),g=>Ve(a,()=>So(()=>p(g)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:So(()=>c):c instanceof J?c.pipe(qr(o.outsideAngular),zr(o.insideAngular)):So(()=>c)});var Sr=class{constructor(e){return e}},Ao=class{constructor(){return Mf()}};function wH(t){return t&&t.length===1?t[0]:new Sr(Co())}var uE=new U("angularfire2._apps"),TH={provide:Sr,useFactory:wH,deps:[[new Pt,uE]]},DH={provide:Ao,deps:[[new Pt,uE]]};function bH(t){return(e,n)=>{let r=n.get(si);Fe("angularfire",_i.full,"core"),Fe("angularfire",_i.full,"app"),Fe("angular",zA.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Sr(i)}}function xse(t,...e){return Ft([TH,DH,{provide:uE,useFactory:bH(t),multi:!0,deps:[ge,Ze,Ei,...e]}])}var CH=new Map,SH={activated:!1,tokenObservers:[]},AH={initialized:!1,enabled:!1};function An(t){return CH.get(t)||Object.assign({},SH)}function gN(){return AH}var RH="https://content-firebaseappcheck.googleapis.com/v1";var NH="exchangeDebugToken",hN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Hse=24*60*60*1e3;var hE=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new Do,this.pending.promise.catch(n=>{}),yield PH(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Do,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function PH(t){return new Promise(e=>{setTimeout(e,t)})}var MH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ii=new bn("appCheck","AppCheck",MH);function mN(t){if(!An(t).activated)throw Ii.create("use-before-activation",{appName:t.name})}function yN(r,i){return _(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(y){throw Ii.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw Ii.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(y){throw Ii.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Ii.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function vN(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${RH}/projects/${n}/apps/${r}:${NH}?key=${i}`,body:{debug_token:e}}}var kH="firebase-app-check-database",xH=1,fE="firebase-app-check-store";var xf=null;function OH(){return xf||(xf=new Promise((t,e)=>{try{let n=indexedDB.open(kH,xH);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Ii.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(fE,{keyPath:"compositeKey"})}}}catch(n){e(Ii.create("storage-open",{originalErrorMessage:n?.message}))}}),xf)}function FH(t,e){return LH(VH(t),e)}function LH(t,e){return _(this,null,function*(){let r=(yield OH()).transaction(fE,"readwrite"),o=r.objectStore(fE).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Ii.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function VH(t){return`${t.options.appId}-${t.name}`}var Su=new Wn("@firebase/app-check");function lE(t,e){return wu()?FH(t,e).catch(n=>{Su.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function _N(){return gN().enabled}function EN(){return _(this,null,function*(){let t=gN();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var jH={error:"UNKNOWN_ERROR"};function UH(t){return bf.encodeString(JSON.stringify(t),!1)}function pE(t,e=!1,n=!1){return _(this,null,function*(){let r=t.app;mN(r);let i=An(r),o=i.token,s;if(o&&!Au(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Au(l)?o=l:yield lE(r,void 0))}if(!e&&o&&Au(o))return{token:o.token};let a=!1;if(_N())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=yN(vN(r,yield EN()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield lE(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Su.warn(l.message):n&&Su.error(l),dE(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield An(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Su.warn(l.message):n&&Su.error(l),s=l}let c;return o?s?Au(o)?c={token:o.token,internalError:s}:c=dE(s):(c={token:o.token},i.token=o,yield lE(r,o)):c=dE(s),a&&zH(r,c),c})}function BH(t){return _(this,null,function*(){let e=t.app;mN(e);let{provider:n}=An(e);if(_N()){let r=yield EN(),{token:i}=yield yN(vN(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function $H(t,e,n,r){let{app:i}=t,o=An(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Au(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),fN(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>fN(t))}function IN(t,e){let n=An(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function fN(t){let{app:e}=t,n=An(e),r=n.tokenRefresher;r||(r=HH(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function HH(t){let{app:e}=t;return new hE(()=>_(null,null,function*(){let n=An(e),r;if(n.token?r=yield pE(t,!0):r=yield pE(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=An(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},hN.RETRIAL_MIN_WAIT,hN.RETRIAL_MAX_WAIT)}function zH(t,e){let n=An(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Au(t){return t.expireTimeMillis-Date.now()>0}function dE(t){return{token:UH(jH),error:t}}var gE=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=An(this.app);for(let n of e)IN(this.app,n.next);return Promise.resolve()}};function qH(t,e){return new gE(t,e)}function GH(t){return{getToken:e=>pE(t,e),getLimitedUseToken:()=>BH(t),addTokenListener:e=>$H(t,"INTERNAL",e),removeTokenListener:e=>IN(t.app,e)}}var WH="@firebase/app-check",KH="0.10.1";var QH="app-check",pN="app-check-internal";function YH(){Cn(new kt(QH,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return qH(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(pN).initialize()})),Cn(new kt(pN,t=>{let e=t.getProvider("app-check").getImmediate();return GH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Fe(WH,KH)}YH();var JH="app-check";var ca=class{constructor(){return aa(JH)}};var ZH=["localhost","0.0.0.0","127.0.0.1"],nae=typeof window<"u"&&ZH.includes(window.location.hostname);function LN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var VN=LN,jN=new bn("auth","Firebase",LN());var Uf=new Wn("@firebase/auth");function XH(t,...e){Uf.logLevel<=le.WARN&&Uf.warn(`Auth (${vi}): ${t}`,...e)}function Ff(t,...e){Uf.logLevel<=le.ERROR&&Uf.error(`Auth (${vi}): ${t}`,...e)}function Yn(t,...e){throw UE(t,...e)}function Ro(t,...e){return UE(t,...e)}function UN(t,e,n){let r=Object.assign(Object.assign({},VN()),{[e]:n});return new bn("auth","Firebase",r).create(e,{appName:t.name})}function Nr(t){return UN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function UE(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return jN.create(t,...e)}function Y(t,e,...n){if(!t)throw UE(e,...n)}function Ar(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ff(e),new Error(e)}function Di(t,e){t||Ar(e)}function _E(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function e4(){return wN()==="http:"||wN()==="https:"}function wN(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function t4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(e4()||BR()||"connection"in navigator)?navigator.onLine:!0}function n4(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var No=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Di(n>e,"Short delay should be less than long delay!"),this.isMobile=jR()||$R()}get(){return t4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function BE(t,e){Di(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Bf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var r4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var i4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],o4=new No(3e4,6e4);function bi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Ci(o,s,a,c){return _(this,arguments,function*(t,e,n,r,i={}){return BN(t,i,()=>_(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Tu(Object.assign({key:t.config.apiKey},h)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:g},l);return UR()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&mi(t.emulatorConfig.host)&&(y.credentials="include"),Bf.fetch()(yield $N(t,t.config.apiHost,n,p),y)}))})}function BN(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},r4),e);try{let i=new EE(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Of(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Of(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Of(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Of(t,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw UN(t,h,l);Yn(t,h)}}catch(i){if(i instanceof Qt)throw i;Yn(t,"network-request-failed",{message:String(i)})}})}function Lu(o,s,a,c){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield Ci(t,e,n,r,i);return"mfaPendingCredential"in l&&Yn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function $N(t,e,n,r){return _(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?BE(t.config,i):`${t.config.apiScheme}://${i}`;return i4.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function s4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var EE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ro(this.auth,"network-request-failed")),o4.get())})}};function Of(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Ro(t,e,r);return i.customData._tokenResponse=n,i}function TN(t){return t!==void 0&&t.enterprise!==void 0}var IE=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return s4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function a4(t,e){return _(this,null,function*(){return Ci(t,"GET","/v2/recaptchaConfig",bi(t,e))})}function c4(t,e){return _(this,null,function*(){return Ci(t,"POST","/v1/accounts:delete",e)})}function $f(t,e){return _(this,null,function*(){return Ci(t,"POST","/v1/accounts:lookup",e)})}function Nu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function $E(t,e=!1){return _(this,null,function*(){let n=Be(t),r=yield n.getIdToken(e),i=HE(r);Y(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Nu(mE(i.auth_time)),issuedAtTime:Nu(mE(i.iat)),expirationTime:Nu(mE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function mE(t){return Number(t)*1e3}function HE(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ff("JWT malformed, contained fewer than 3 sections"),null;try{let i=Cf(n);return i?JSON.parse(i):(Ff("Failed to decode base64 JWT payload"),null)}catch(i){return Ff("Caught error parsing JWT payload as JSON",i?.toString()),null}}function DN(t){let e=HE(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Mu(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Qt&&u4(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function u4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var wE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ku=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nu(this.lastLoginAt),this.creationTime=Nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Hf(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Mu(t,$f(n,{idToken:r}));Y(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?HN(o.providerUserInfo):[],a=l4(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=c?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new ku(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function zE(t){return _(this,null,function*(){let e=Be(t);yield Hf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function l4(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function HN(t){return t.map(e=>{var{providerId:n}=e,r=Pg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function d4(t,e){return _(this,null,function*(){let n=yield BN(t,{},()=>_(null,null,function*(){let r=Tu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield $N(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return t.emulatorConfig&&mi(t.emulatorConfig.host)&&(c.credentials="include"),Bf.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function h4(t,e){return _(this,null,function*(){return Ci(t,"POST","/v2/accounts:revokeToken",bi(t,e))})}var Pu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let n=DN(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield d4(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(Y(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Y(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Ar("not implemented")}};function wi(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ti=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Pg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ku(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield Mu(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return $E(this,e)}reload(){return zE(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Hf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Bt(this.auth.app))return Promise.reject(Nr(this.auth));let e=yield this.getIdToken();return yield Mu(this,c4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,P=(l=n.createdAt)!==null&&l!==void 0?l:void 0,L=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:H,emailVerified:z,isAnonymous:Ne,providerData:pe,stsTokenManager:D}=n;Y(H&&D,e,"internal-error");let v=Pu.fromJSON(this.name,D);Y(typeof H=="string",e,"internal-error"),wi(p,e.name),wi(g,e.name),Y(typeof z=="boolean",e,"internal-error"),Y(typeof Ne=="boolean",e,"internal-error"),wi(y,e.name),wi(w,e.name),wi(N,e.name),wi(S,e.name),wi(P,e.name),wi(L,e.name);let I=new t({uid:H,auth:e,email:g,emailVerified:z,displayName:p,isAnonymous:Ne,photoURL:w,phoneNumber:y,tenantId:N,stsTokenManager:v,createdAt:P,lastLoginAt:L});return pe&&Array.isArray(pe)&&(I.providerData=pe.map(T=>Object.assign({},T))),S&&(I._redirectEventId=S),I}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new Pu;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Hf(o),o})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];Y(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?HN(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Pu;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ku(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var bN=new Map;function Rr(t){Di(t instanceof Function,"Expected a class definition");let e=bN.get(t);return e?(Di(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,bN.set(t,e),e)}var f4=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),TE=f4;function Lf(t,e,n){return`firebase:${t}:${e}:${n}`}var zf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Lf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Lf("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield $f(this.auth,{idToken:e}).catch(()=>{});return n?Ti._fromGetAccountInfoResponse(this.auth,n,e):null}return Ti._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(Rr(TE),e,r);let i=(yield Promise.all(n.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Rr(TE),s=Lf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let g=yield $f(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield Ti._fromGetAccountInfoResponse(e,g,h)}else p=Ti._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function CN(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QN(e))return"Blackberry";if(YN(e))return"Webos";if(qN(e))return"Safari";if((e.includes("chrome/")||GN(e))&&!e.includes("edge/"))return"Chrome";if(KN(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function zN(t=rt()){return/firefox\//i.test(t)}function qN(t=rt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GN(t=rt()){return/crios\//i.test(t)}function WN(t=rt()){return/iemobile/i.test(t)}function KN(t=rt()){return/android/i.test(t)}function QN(t=rt()){return/blackberry/i.test(t)}function YN(t=rt()){return/webos/i.test(t)}function qE(t=rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function p4(t=rt()){var e;return qE(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function g4(){return HR()&&document.documentMode===10}function JN(t=rt()){return qE(t)||KN(t)||YN(t)||QN(t)||/windows phone/i.test(t)||WN(t)}function ZN(t,e=[]){let n;switch(t){case"Browser":n=CN(rt());break;case"Worker":n=`${CN(rt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vi}/${r}`}var DE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function m4(n){return _(this,arguments,function*(t,e={}){return Ci(t,"GET","/v2/passwordPolicy",bi(t,e))})}var y4=6,bE=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:y4,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var CE=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qf(this),this.idTokenSubscription=new qf(this),this.beforeStateQueue=new DE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rr(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield zf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield $f(this,{idToken:e}),r=yield Ti._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(Bt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Hf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=n4()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Bt(this.app))return Promise.reject(Nr(this));let n=e?Be(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Bt(this.app)?Promise.reject(Nr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Bt(this.app)?Promise.reject(Nr(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Rr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield m4(this),n=new bE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield h4(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Rr(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=yield zf.create(this,[Rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;if(Bt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&XH(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Mo(t){return Be(t)}var qf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=WR(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Zf={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function v4(t){Zf=t}function XN(t){return Zf.loadJS(t)}function _4(){return Zf.recaptchaEnterpriseScript}function E4(){return Zf.gapiScript}function eP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var SE=class{constructor(){this.enterprise=new AE}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},AE=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var I4="recaptcha-enterprise",tP="NO_RECAPTCHA",RE=class{constructor(e){this.type=I4,this.auth=Mo(e)}verify(e="verify",n=!1){return _(this,null,function*(){function r(o){return _(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>_(null,null,function*(){a4(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new IE(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;TN(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(tP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new SE().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&TN(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=_4();c.length!==0&&(c+=a),XN(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Ru(t,e,n,r=!1,i=!1){return _(this,null,function*(){let o=new RE(t),s;if(i)s=tP;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function NE(t,e,n,r,i){return _(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Ru(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(a=>_(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Ru(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Ru(t,e,n);return r(t,a).catch(c=>_(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=yield Ru(t,e,n,!1,!0);return r(t,h)}return Promise.reject(c)}))}else{let a=yield Ru(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")})}function GE(t,e){let n=oa(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Gn(o,e??{}))return i;Yn(i,"already-initialized")}return n.initialize({options:e})}function w4(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Rr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function WE(t,e,n){let r=Mo(t);Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=nP(e),{host:s,port:a}=T4(e),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Y(Gn(l,r.config.emulator)&&Gn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,mi(s)?(Af(`${o}//${s}${c}`),Rf("Auth",!0)):i||D4()}function nP(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function T4(t){let e=nP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:SN(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:SN(s)}}}function SN(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function D4(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var xu=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,n){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}};function b4(t,e){return _(this,null,function*(){return Ci(t,"POST","/v1/accounts:signUp",e)})}function C4(t,e){return _(this,null,function*(){return Lu(t,"POST","/v1/accounts:signInWithPassword",bi(t,e))})}function S4(t,e){return _(this,null,function*(){return Lu(t,"POST","/v1/accounts:signInWithEmailLink",bi(t,e))})}function A4(t,e){return _(this,null,function*(){return Lu(t,"POST","/v1/accounts:signInWithEmailLink",bi(t,e))})}var Ou=class t extends xu{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return NE(e,n,"signInWithPassword",C4,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return S4(e,{email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}})}_linkToIdToken(e,n){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return NE(e,r,"signUpPassword",b4,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return A4(e,{idToken:n,email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function yE(t,e){return _(this,null,function*(){return Lu(t,"POST","/v1/accounts:signInWithIdp",bi(t,e))})}function R4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function N4(t){let e=ra(ia(t)).link,n=e?ra(ia(e)).deep_link_id:null,r=ra(ia(t)).deep_link_id;return(r?ra(ia(r)).link:null)||r||n||e||t}var Gf=class t{constructor(e){var n,r,i,o,s,a;let c=ra(ia(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,p=R4((i=c.mode)!==null&&i!==void 0?i:null);Y(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=N4(e);try{return new t(n)}catch{return null}}};var rP=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Ou._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Gf.parseLink(r);return Y(i,"argument-error"),Ou._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Wf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var PE=class extends Wf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function P4(t,e){return _(this,null,function*(){return Lu(t,"POST","/v1/accounts:signUp",bi(t,e))})}var ua=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let o=yield Ti._fromIdTokenResponse(e,r,i),s=AN(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=AN(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function AN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var ME=class t extends Qt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function iP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ME._fromErrorAndOperation(t,o,e,r):o})}function M4(t,e,n=!1){return _(this,null,function*(){let r=yield Mu(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return ua._forOperation(t,"link",r)})}function k4(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(Bt(r.app))return Promise.reject(Nr(r));let i="reauthenticate";try{let o=yield Mu(t,iP(r,i,e,t),n);Y(o.idToken,r,"internal-error");let s=HE(o.idToken);Y(s,r,"internal-error");let{sub:a}=s;return Y(t.uid===a,r,"user-mismatch"),ua._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Yn(r,"user-mismatch"),o}})}function oP(t,e,n=!1){return _(this,null,function*(){if(Bt(t.app))return Promise.reject(Nr(t));let r="signIn",i=yield iP(t,r,e),o=yield ua._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function KE(t,e){return _(this,null,function*(){return oP(Mo(t),e)})}function sP(t){return _(this,null,function*(){let e=Mo(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function QE(t,e,n){return _(this,null,function*(){if(Bt(t.app))return Promise.reject(Nr(t));let r=Mo(t),s=yield NE(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",P4,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&sP(t),c}),a=yield ua._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function YE(t,e,n){return Bt(t.app)?Promise.reject(Nr(t)):KE(Be(t),rP.credential(e,n)).catch(r=>_(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&sP(t),r}))}function Xf(t,e,n,r){return Be(t).onIdTokenChanged(e,n,r)}function JE(t,e,n){return Be(t).beforeAuthStateChanged(e,n)}function ep(t,e,n,r){return Be(t).onAuthStateChanged(e,n,r)}function ZE(t){return Be(t).signOut()}var Kf="__sak";var Qf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kf,"1"),this.storage.removeItem(Kf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var x4=1e3,O4=10,F4=(()=>{class t extends Qf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JN(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);g4()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,O4):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},x4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield $r(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield $r(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield $r(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),aP=F4;var L4=(()=>{class t extends Qf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),XE=L4;function V4(t){return Promise.all(t.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var j4=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield V4(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function cP(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var kE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=cP("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Qn(){return window}function U4(t){Qn().location.href=t}function uP(){return typeof Qn().WorkerGlobalScope<"u"&&typeof Qn().importScripts=="function"}function B4(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function $4(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function H4(){return uP()?self:null}var lP="firebaseLocalStorageDb",z4=1,Yf="firebaseLocalStorage",dP="fbase_key",Po=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function tp(t,e){return t.transaction([Yf],e?"readwrite":"readonly").objectStore(Yf)}function q4(){let t=indexedDB.deleteDatabase(lP);return new Po(t).toPromise()}function xE(){let t=indexedDB.open(lP,z4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Yf,{keyPath:dP})}catch(i){n(i)}}),t.addEventListener("success",()=>_(null,null,function*(){let r=t.result;r.objectStoreNames.contains(Yf)?e(r):(r.close(),yield q4(),e(yield xE()))}))})}function RN(t,e,n){return _(this,null,function*(){let r=tp(t,!0).put({[dP]:e,value:n});return new Po(r).toPromise()})}function G4(t,e){return _(this,null,function*(){let n=tp(t,!1).get(e),r=yield new Po(n).toPromise();return r===void 0?null:r.value})}function NN(t,e){let n=tp(t,!0).delete(e);return new Po(n).toPromise()}var W4=800,K4=3,Q4=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield xE(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>K4)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return uP()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=j4._getInstance(H4()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield B4(),!this.activeServiceWorker)return;this.sender=new kE(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||$4()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield xE();return yield RN(n,Kf,"1"),yield NN(n,Kf),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>RN(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>G4(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>NN(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(o=>{let s=tp(o,!1).getAll();return new Po(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),W4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),hP=Q4;var lae=eP("rcb"),dae=new No(3e4,6e4);function Y4(t,e){return e?Rr(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Fu=class extends xu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yE(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yE(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yE(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function J4(t){return oP(t.auth,new Fu(t),t.bypassAuthState)}function Z4(t){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),k4(n,new Fu(t),t.bypassAuthState)}function X4(t){return _(this,null,function*(){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),M4(n,new Fu(t),t.bypassAuthState)})}var OE=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return J4;case"linkViaPopup":case"linkViaRedirect":return X4;case"reauthViaPopup":case"reauthViaRedirect":return Z4;default:Yn(this.auth,"internal-error")}}resolve(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var hae=new No(2e3,1e4);var ez="pendingRedirect",Vf=new Map,FE=class t extends OE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=Vf.get(this.auth._key());if(!e){try{let r=(yield tz(this.resolver,this.auth))?yield $r(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vf.set(this.auth._key(),e)}return this.bypassAuthState||Vf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return $r(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,$r(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function tz(t,e){return _(this,null,function*(){let n=iz(e),r=rz(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function nz(t,e){Vf.set(t._key(),e)}function rz(t){return Rr(t._redirectPersistence)}function iz(t){return Lf(ez,t.config.apiKey,t.name)}function oz(t,e,n=!1){return _(this,null,function*(){if(Bt(t.app))return Promise.reject(Nr(t));let r=Mo(t),i=Y4(r,e),s=yield new FE(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var sz=10*60*1e3,LE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!az(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fP(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ro(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sz&&this.cachedEventUids.clear(),this.cachedEventUids.has(PN(e))}saveEventToCache(e){this.cachedEventUids.add(PN(e)),this.lastProcessedEventTime=Date.now()}};function PN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fP({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function az(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fP(t);default:return!1}}function cz(n){return _(this,arguments,function*(t,e={}){return Ci(t,"GET","/v1/projects",e)})}var uz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lz=/^https?/;function dz(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield cz(t);for(let n of e)try{if(hz(n))return}catch{}Yn(t,"unauthorized-domain")})}function hz(t){let e=_E(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!lz.test(n))return!1;if(uz.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var fz=new No(3e4,6e4);function MN(){let t=Qn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function pz(t){return new Promise((e,n)=>{var r,i,o;function s(){MN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{MN(),n(Ro(t,"network-request-failed"))},timeout:fz.get()})}if(!((i=(r=Qn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Qn().gapi)===null||o===void 0)&&o.load)s();else{let a=eP("iframefcb");return Qn()[a]=()=>{gapi.load?s():n(Ro(t,"network-request-failed"))},XN(`${E4()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw jf=null,e})}var jf=null;function gz(t){return jf=jf||pz(t),jf}var mz=new No(5e3,15e3),yz="__/auth/iframe",vz="emulator/auth/iframe",_z={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ez=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Iz(t){let e=t.config;Y(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?BE(e,vz):`https://${t.config.authDomain}/${yz}`,r={apiKey:e.apiKey,appName:t.name,v:vi},i=Ez.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Tu(r).slice(1)}`}function wz(t){return _(this,null,function*(){let e=yield gz(t),n=Qn().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:Iz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_z,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Ro(t,"network-request-failed"),a=Qn().setTimeout(()=>{o(s)},mz.get());function c(){Qn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var Tz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Dz=500,bz=600,Cz="_blank",Sz="http://localhost",Jf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Az(t,e,n,r=Dz,i=bz){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},Tz),{width:r.toString(),height:i.toString(),top:o,left:s}),l=rt().toLowerCase();n&&(a=GN(l)?Cz:n),zN(l)&&(e=e||Sz,c.scrollbars="yes");let h=Object.entries(c).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(p4(l)&&a!=="_self")return Rz(e||"",a),new Jf(null);let p=window.open(e||"",a,h);Y(p,t,"popup-blocked");try{p.focus()}catch{}return new Jf(p)}function Rz(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Nz="__/auth/handler",Pz="emulator/auth/handler",Mz=encodeURIComponent("fac");function kN(t,e,n,r,i,o){return _(this,null,function*(){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:vi,eventId:i};if(e instanceof Wf){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",GR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof PE){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield t._getAppCheckToken(),l=c?`#${Mz}=${encodeURIComponent(c)}`:"";return`${kz(t)}?${Tu(a).slice(1)}${l}`})}function kz({config:t}){return t.emulator?BE(t,Pz):`https://${t.authDomain}/${Nz}`}var vE="webStorageSupport",VE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=XE,this._completeRedirectFn=oz,this._overrideRedirectResult=nz}_openPopup(e,n,r,i){return _(this,null,function*(){var o;Di((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield kN(e,n,r,_E(),i);return Az(e,s,cP())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield kN(e,n,r,_E(),i);return U4(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Di(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield wz(e),r=new LE(e);return n.register("authEvent",i=>(Y(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vE,{type:vE},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[vE];s!==void 0&&n(!!s),Yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dz(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return JN()||qN()||qE()}},pP=VE;var xN="@firebase/auth",ON="1.10.8";var jE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function xz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Oz(t){Cn(new kt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Y(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZN(t)},l=new CE(r,i,o,c);return w4(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Cn(new kt("auth-internal",e=>{let n=Mo(e.getProvider("auth").getImmediate());return(r=>new jE(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fe(xN,ON,xz(t)),Fe(xN,ON,"esm2017")}var Fz=5*60,Lz=K_("authIdTokenMaxAge")||Fz,FN=null,Vz=t=>e=>_(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Lz)return;let i=n?.token;FN!==i&&(FN=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function eI(t=Co()){let e=oa(t,"auth");if(e.isInitialized())return e.getImmediate();let n=GE(t,{popupRedirectResolver:pP,persistence:[hP,aP,XE]}),r=K_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=Vz(o.toString());JE(n,s,()=>s(n.currentUser)),Xf(n,a=>s(a))}}let i=G_("auth");return i&&WE(n,`http://${i}`),n}function jz(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}v4({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Ro("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",jz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Oz("Browser");function mP(t){return new J(function(e){var n=ep(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var yP="auth",ko=class{constructor(e){return e}},Vu=class{constructor(){return aa(yP)}};var tI=new U("angularfire2.auth-instances");function Cq(t,e){let n=Cu(yP,t,e);return n&&new ko(n)}function Sq(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ko(r)}}var Aq={provide:Vu,deps:[[new Pt,tI]]},Rq={provide:ko,useFactory:Cq,deps:[[new Pt,tI],Sr]};function ice(t,...e){return Fe("angularfire",_i.full,"auth"),Ft([Rq,Aq,{provide:tI,useFactory:Sq(t),multi:!0,deps:[ge,Ze,Ei,Ao,[new Pt,ca],...e]}])}var vP=Sn(mP,!0);var _P=Sn(QE,!0,2);var oce=Sn(eI,!0);var EP=Sn(YE,!0,2);var IP=Sn(ZE,!0,2);var wP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},TP={};var Pr,nI;(function(){var t;function e(D,v){function I(){}I.prototype=v.prototype,D.D=v.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(T,b,A){for(var E=Array(arguments.length-2),ir=2;ir<arguments.length;ir++)E[ir-2]=arguments[ir];return v.prototype[b].apply(T,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,I){I||(I=0);var T=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)T[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)T[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=D.g[0],I=D.g[1],b=D.g[2];var A=D.g[3],E=v+(A^I&(b^A))+T[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=A+(b^v&(I^b))+T[1]+3905402710&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(I^A&(v^I))+T[2]+606105819&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(v^b&(A^v))+T[3]+3250441966&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(A^I&(b^A))+T[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(b^v&(I^b))+T[5]+1200080426&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(I^A&(v^I))+T[6]+2821735955&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(v^b&(A^v))+T[7]+4249261313&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(A^I&(b^A))+T[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(b^v&(I^b))+T[9]+2336552879&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(I^A&(v^I))+T[10]+4294925233&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(v^b&(A^v))+T[11]+2304563134&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(A^I&(b^A))+T[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(b^v&(I^b))+T[13]+4254626195&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(I^A&(v^I))+T[14]+2792965006&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(v^b&(A^v))+T[15]+1236535329&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(b^A&(I^b))+T[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(v^I))+T[6]+3225465664&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(A^v))+T[11]+643717713&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(b^A))+T[0]+3921069994&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(I^b))+T[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(v^I))+T[10]+38016083&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(A^v))+T[15]+3634488961&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(b^A))+T[4]+3889429448&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(I^b))+T[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(v^I))+T[14]+3275163606&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(A^v))+T[3]+4107603335&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(b^A))+T[8]+1163531501&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(I^b))+T[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(v^I))+T[2]+4243563512&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(A^v))+T[7]+1735328473&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(b^A))+T[12]+2368359562&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(I^b^A)+T[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^b)+T[8]+2272392833&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^I)+T[11]+1839030562&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^v)+T[14]+4259657740&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^A)+T[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^b)+T[4]+1272893353&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^I)+T[7]+4139469664&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^v)+T[10]+3200236656&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^A)+T[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^b)+T[0]+3936430074&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^I)+T[3]+3572445317&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^v)+T[6]+76029189&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^A)+T[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^b)+T[12]+3873151461&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^I)+T[15]+530742520&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^v)+T[2]+3299628645&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(b^(I|~A))+T[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~b))+T[7]+1126891415&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~I))+T[14]+2878612391&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~v))+T[5]+4237533241&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~A))+T[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~b))+T[3]+2399980690&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~I))+T[10]+4293915773&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~v))+T[1]+2240044497&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~A))+T[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~b))+T[15]+4264355552&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~I))+T[6]+2734768916&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~v))+T[13]+1309151649&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~A))+T[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~b))+T[11]+3174756917&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~I))+T[2]+718787259&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~v))+T[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,D.g[2]=D.g[2]+b&4294967295,D.g[3]=D.g[3]+A&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var I=v-this.blockSize,T=this.B,b=this.h,A=0;A<v;){if(b==0)for(;A<=I;)i(this,D,A),A+=this.blockSize;if(typeof D=="string"){for(;A<v;)if(T[b++]=D.charCodeAt(A++),b==this.blockSize){i(this,T),b=0;break}}else for(;A<v;)if(T[b++]=D[A++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var I=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=I&255,I/=256;for(this.u(D),D=Array(16),v=I=0;4>v;++v)for(var T=0;32>T;T+=8)D[I++]=this.g[v]>>>T&255;return D};function o(D,v){var I=a;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=v(D)}function s(D,v){this.h=v;for(var I=[],T=!0,b=D.length-1;0<=b;b--){var A=D[b]|0;T&&A==v||(I[b]=A,T=!1)}this.g=I}var a={};function c(D){return-128<=D&&128>D?o(D,function(v){return new s([v|0],0>v?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return S(l(-D));for(var v=[],I=1,T=0;D>=I;T++)v[T]=D/I|0,I*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return S(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),T=p,b=0;b<D.length;b+=8){var A=Math.min(8,D.length-b),E=parseInt(D.substring(b,b+A),v);8>A?(A=l(Math.pow(v,A)),T=T.j(A).add(l(E))):(T=T.j(I),T=T.add(l(E)))}return T}var p=c(0),g=c(1),y=c(16777216);t=s.prototype,t.m=function(){if(N(this))return-S(this).m();for(var D=0,v=1,I=0;I<this.g.length;I++){var T=this.i(I);D+=(0<=T?T:4294967296+T)*v,v*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(w(this))return"0";if(N(this))return"-"+S(this).toString(D);for(var v=l(Math.pow(D,6)),I=this,T="";;){var b=z(I,v).g;I=P(I,b.j(v));var A=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=b,w(I))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function w(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function N(D){return D.h==-1}t.l=function(D){return D=P(this,D),N(D)?-1:w(D)?0:1};function S(D){for(var v=D.g.length,I=[],T=0;T<v;T++)I[T]=~D.g[T];return new s(I,~D.h).add(g)}t.abs=function(){return N(this)?S(this):this},t.add=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0,b=0;b<=v;b++){var A=T+(this.i(b)&65535)+(D.i(b)&65535),E=(A>>>16)+(this.i(b)>>>16)+(D.i(b)>>>16);T=E>>>16,A&=65535,E&=65535,I[b]=E<<16|A}return new s(I,I[I.length-1]&-2147483648?-1:0)};function P(D,v){return D.add(S(v))}t.j=function(D){if(w(this)||w(D))return p;if(N(this))return N(D)?S(this).j(S(D)):S(S(this).j(D));if(N(D))return S(this.j(S(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,I=[],T=0;T<2*v;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<D.g.length;b++){var A=this.i(T)>>>16,E=this.i(T)&65535,ir=D.i(b)>>>16,La=D.i(b)&65535;I[2*T+2*b]+=E*La,L(I,2*T+2*b),I[2*T+2*b+1]+=A*La,L(I,2*T+2*b+1),I[2*T+2*b+1]+=E*ir,L(I,2*T+2*b+1),I[2*T+2*b+2]+=A*ir,L(I,2*T+2*b+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new s(I,0)};function L(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function H(D,v){this.g=D,this.h=v}function z(D,v){if(w(v))throw Error("division by zero");if(w(D))return new H(p,p);if(N(D))return v=z(S(D),v),new H(S(v.g),S(v.h));if(N(v))return v=z(D,S(v)),new H(S(v.g),v.h);if(30<D.g.length){if(N(D)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,T=v;0>=T.l(D);)I=Ne(I),T=Ne(T);var b=pe(I,1),A=pe(T,1);for(T=pe(T,2),I=pe(I,2);!w(T);){var E=A.add(T);0>=E.l(D)&&(b=b.add(I),A=E),T=pe(T,1),I=pe(I,1)}return v=P(D,b.j(v)),new H(b,v)}for(b=p;0<=D.l(v);){for(I=Math.max(1,Math.floor(D.m()/v.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=l(I),E=A.j(v);N(E)||0<E.l(D);)I-=T,A=l(I),E=A.j(v);w(A)&&(A=g),b=b.add(A),D=P(D,E)}return new H(b,D)}t.A=function(D){return z(this,D).h},t.and=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)&D.i(T);return new s(I,this.h&D.h)},t.or=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)|D.i(T);return new s(I,this.h|D.h)},t.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)^D.i(T);return new s(I,this.h^D.h)};function Ne(D){for(var v=D.g.length+1,I=[],T=0;T<v;T++)I[T]=D.i(T)<<1|D.i(T-1)>>>31;return new s(I,D.h)}function pe(D,v){var I=v>>5;v%=32;for(var T=D.g.length-I,b=[],A=0;A<T;A++)b[A]=0<v?D.i(A+I)>>>v|D.i(A+I+1)<<32-v:D.i(A+I);return new s(b,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nI=TP.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Pr=TP.Integer=s}).apply(typeof wP<"u"?wP:typeof self<"u"?self:typeof window<"u"?window:{});var np=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mr={};var rI,Nq,la,iI,ju,rp,oI,sI,aI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof np=="object"&&np];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var C=u[m];if(!(C in f))break e;f=f[C]}u=u[u.length-1],m=f[u],d=d(m),d!=m&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,m=!1,C={next:function(){if(!m&&f<u.length){var R=f++;return{value:d(R,u[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),u.apply(d,C)}}return function(){return u.apply(d,arguments)}}function g(u,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function w(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(m,C,R){for(var O=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)O[Te-2]=arguments[Te];return d.prototype[C].apply(m,O)}}function N(u){let d=u.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=u[m];return f}return[]}function S(u,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(c(m)){let C=u.length||0,R=m.length||0;u.length=C+R;for(let O=0;O<R;O++)u[C+O]=m[O]}else u.push(m)}}class P{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function L(u){return/^[\s\xa0]*$/.test(u)}function H(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function z(u){return z[" "](u),u}z[" "]=function(){};var Ne=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function pe(u,d,f){for(let m in u)d.call(f,u[m],m,u)}function D(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function v(u){let d={};for(let f in u)d[f]=u[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,d){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)u[f]=m[f];for(let R=0;R<I.length;R++)f=I[R],Object.prototype.hasOwnProperty.call(m,f)&&(u[f]=m[f])}}function b(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function A(u){a.setTimeout(()=>{throw u},0)}function E(){var u=eg;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class ir{constructor(){this.h=this.g=null}add(d,f){let m=La.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var La=new P(()=>new Kk,u=>u.reset());class Kk{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Va,ja=!1,eg=new ir,DT=()=>{let u=a.Promise.resolve(void 0);Va=()=>{u.then(Qk)}};var Qk=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(f){A(f)}var d=La;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}ja=!1};function Vr(){this.s=this.s,this.C=this.C}Vr.prototype.s=!1,Vr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Vr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pt(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}pt.prototype.h=function(){this.defaultPrevented=!0};var Yk=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function Ua(u,d){if(pt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(Ne){e:{try{z(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Jk[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ua.aa.h.call(this)}}w(Ua,pt);var Jk={2:"touch",3:"pen",4:"mouse"};Ua.prototype.h=function(){Ua.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ba="closure_listenable_"+(1e6*Math.random()|0),Zk=0;function Xk(u,d,f,m,C){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=C,this.key=++Zk,this.da=this.fa=!1}function ul(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ll(u){this.src=u,this.g={},this.h=0}ll.prototype.add=function(u,d,f,m,C){var R=u.toString();u=this.g[R],u||(u=this.g[R]=[],this.h++);var O=ng(u,d,m,C);return-1<O?(d=u[O],f||(d.fa=!1)):(d=new Xk(d,this.src,R,!!m,C),d.fa=f,u.push(d)),d};function tg(u,d){var f=d.type;if(f in u.g){var m=u.g[f],C=Array.prototype.indexOf.call(m,d,void 0),R;(R=0<=C)&&Array.prototype.splice.call(m,C,1),R&&(ul(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function ng(u,d,f,m){for(var C=0;C<u.length;++C){var R=u[C];if(!R.da&&R.listener==d&&R.capture==!!f&&R.ha==m)return C}return-1}var rg="closure_lm_"+(1e6*Math.random()|0),ig={};function bT(u,d,f,m,C){if(m&&m.once)return ST(u,d,f,m,C);if(Array.isArray(d)){for(var R=0;R<d.length;R++)bT(u,d[R],f,m,C);return null}return f=cg(f),u&&u[Ba]?u.K(d,f,l(m)?!!m.capture:!!m,C):CT(u,d,f,!1,m,C)}function CT(u,d,f,m,C,R){if(!d)throw Error("Invalid event type");var O=l(C)?!!C.capture:!!C,Te=sg(u);if(Te||(u[rg]=Te=new ll(u)),f=Te.add(d,f,m,O,R),f.proxy)return f;if(m=ex(),f.proxy=m,m.src=u,m.listener=f,u.addEventListener)Yk||(C=O),C===void 0&&(C=!1),u.addEventListener(d.toString(),m,C);else if(u.attachEvent)u.attachEvent(RT(d.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ex(){function u(f){return d.call(u.src,u.listener,f)}let d=tx;return u}function ST(u,d,f,m,C){if(Array.isArray(d)){for(var R=0;R<d.length;R++)ST(u,d[R],f,m,C);return null}return f=cg(f),u&&u[Ba]?u.L(d,f,l(m)?!!m.capture:!!m,C):CT(u,d,f,!0,m,C)}function AT(u,d,f,m,C){if(Array.isArray(d))for(var R=0;R<d.length;R++)AT(u,d[R],f,m,C);else m=l(m)?!!m.capture:!!m,f=cg(f),u&&u[Ba]?(u=u.i,d=String(d).toString(),d in u.g&&(R=u.g[d],f=ng(R,f,m,C),-1<f&&(ul(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete u.g[d],u.h--)))):u&&(u=sg(u))&&(d=u.g[d.toString()],u=-1,d&&(u=ng(d,f,m,C)),(f=-1<u?d[u]:null)&&og(f))}function og(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Ba])tg(d.i,u);else{var f=u.type,m=u.proxy;d.removeEventListener?d.removeEventListener(f,m,u.capture):d.detachEvent?d.detachEvent(RT(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=sg(d))?(tg(f,u),f.h==0&&(f.src=null,d[rg]=null)):ul(u)}}}function RT(u){return u in ig?ig[u]:ig[u]="on"+u}function tx(u,d){if(u.da)u=!0;else{d=new Ua(d,this);var f=u.listener,m=u.ha||u.src;u.fa&&og(u),u=f.call(m,d)}return u}function sg(u){return u=u[rg],u instanceof ll?u:null}var ag="__closure_events_fn_"+(1e9*Math.random()>>>0);function cg(u){return typeof u=="function"?u:(u[ag]||(u[ag]=function(d){return u.handleEvent(d)}),u[ag])}function gt(){Vr.call(this),this.i=new ll(this),this.M=this,this.F=null}w(gt,Vr),gt.prototype[Ba]=!0,gt.prototype.removeEventListener=function(u,d,f,m){AT(this,u,d,f,m)};function bt(u,d){var f,m=u.F;if(m)for(f=[];m;m=m.F)f.push(m);if(u=u.M,m=d.type||d,typeof d=="string")d=new pt(d,u);else if(d instanceof pt)d.target=d.target||u;else{var C=d;d=new pt(m,u),T(d,C)}if(C=!0,f)for(var R=f.length-1;0<=R;R--){var O=d.g=f[R];C=dl(O,m,!0,d)&&C}if(O=d.g=u,C=dl(O,m,!0,d)&&C,C=dl(O,m,!1,d)&&C,f)for(R=0;R<f.length;R++)O=d.g=f[R],C=dl(O,m,!1,d)&&C}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],m=0;m<f.length;m++)ul(f[m]);delete u.g[d],u.h--}}this.F=null},gt.prototype.K=function(u,d,f,m){return this.i.add(String(u),d,!1,f,m)},gt.prototype.L=function(u,d,f,m){return this.i.add(String(u),d,!0,f,m)};function dl(u,d,f,m){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,R=0;R<d.length;++R){var O=d[R];if(O&&!O.da&&O.capture==f){var Te=O.listener,at=O.ha||O.src;O.fa&&tg(u.i,O),C=Te.call(at,m)!==!1&&C}}return C&&!m.defaultPrevented}function NT(u,d,f){if(typeof u=="function")f&&(u=g(u,f));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function PT(u){u.g=NT(()=>{u.g=null,u.i&&(u.i=!1,PT(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class nx extends Vr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:PT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $a(u){Vr.call(this),this.h=u,this.g={}}w($a,Vr);var MT=[];function kT(u){pe(u.g,function(d,f){this.g.hasOwnProperty(f)&&og(d)},u),u.g={}}$a.prototype.N=function(){$a.aa.N.call(this),kT(this)},$a.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ug=a.JSON.stringify,rx=a.JSON.parse,ix=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function lg(){}lg.prototype.h=null;function xT(u){return u.h||(u.h=u.i())}function OT(){}var Ha={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dg(){pt.call(this,"d")}w(dg,pt);function hg(){pt.call(this,"c")}w(hg,pt);var Fi={},FT=null;function hl(){return FT=FT||new gt}Fi.La="serverreachability";function LT(u){pt.call(this,Fi.La,u)}w(LT,pt);function za(u){let d=hl();bt(d,new LT(d))}Fi.STAT_EVENT="statevent";function VT(u,d){pt.call(this,Fi.STAT_EVENT,u),this.stat=d}w(VT,pt);function Ct(u){let d=hl();bt(d,new VT(d,u))}Fi.Ma="timingevent";function jT(u,d){pt.call(this,Fi.Ma,u),this.size=d}w(jT,pt);function qa(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Ga(){this.g=!0}Ga.prototype.xa=function(){this.g=!1};function ox(u,d,f,m,C,R){u.info(function(){if(u.g)if(R)for(var O="",Te=R.split("&"),at=0;at<Te.length;at++){var fe=Te[at].split("=");if(1<fe.length){var mt=fe[0];fe=fe[1];var yt=mt.split("_");O=2<=yt.length&&yt[1]=="type"?O+(mt+"="+fe+"&"):O+(mt+"=redacted&")}}else O=null;else O=R;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+d+`
`+f+`
`+O})}function sx(u,d,f,m,C,R,O){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+d+`
`+f+`
`+R+" "+O})}function Wo(u,d,f,m){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+cx(u,f)+(m?" "+m:"")})}function ax(u,d){u.info(function(){return"TIMEOUT: "+d})}Ga.prototype.info=function(){};function cx(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var m=f[u];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var R=C[0];if(R!="noop"&&R!="stop"&&R!="close")for(var O=1;O<C.length;O++)C[O]=""}}}}return ug(f)}catch{return d}}var fl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},UT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fg;function pl(){}w(pl,lg),pl.prototype.g=function(){return new XMLHttpRequest},pl.prototype.i=function(){return{}},fg=new pl;function jr(u,d,f,m){this.j=u,this.i=d,this.l=f,this.R=m||1,this.U=new $a(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new BT}function BT(){this.i=null,this.g="",this.h=!1}var $T={},pg={};function gg(u,d,f){u.L=1,u.v=vl(or(d)),u.m=f,u.P=!0,HT(u,null)}function HT(u,d){u.F=Date.now(),gl(u),u.A=or(u.v);var f=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),rD(f.i,"t",m),u.C=0,f=u.j.J,u.h=new BT,u.g=ID(u.j,f?d:null,!u.m),0<u.O&&(u.M=new nx(g(u.Y,u,u.g),u.O)),d=u.U,f=u.g,m=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(MT[0]=C.toString()),C=MT);for(var R=0;R<C.length;R++){var O=bT(f,C[R],m||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),za(),ox(u.i,u.u,u.A,u.l,u.R,u.m)}jr.prototype.ca=function(u){u=u.target;let d=this.M;d&&sr(u)==3?d.j():this.Y(u)},jr.prototype.Y=function(u){try{if(u==this.g)e:{let yt=sr(this.g);var d=this.g.Ba();let Yo=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||lD(this.g)))){this.J||yt!=4||d==7||(d==8||0>=Yo?za(3):za(2)),mg(this);var f=this.g.Z();this.X=f;t:if(zT(this)){var m=lD(this.g);u="";var C=m.length,R=sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),Wa(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,u+=this.h.i.decode(m[d],{stream:!(R&&d==C-1)});m.length=0,this.h.g+=u,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,sx(this.i,this.u,this.A,this.l,this.R,yt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,at=this.g;if((Te=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Te)){var fe=Te;break t}}fe=null}if(f=fe)Wo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yg(this,f);else{this.o=!1,this.s=3,Ct(12),Li(this),Wa(this);break e}}if(this.P){f=!0;let cn;for(;!this.J&&this.C<O.length;)if(cn=ux(this,O),cn==pg){yt==4&&(this.s=4,Ct(14),f=!1),Wo(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==$T){this.s=4,Ct(15),Wo(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else Wo(this.i,this.l,cn,null),yg(this,cn);if(zT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||O.length!=0||this.h.h||(this.s=1,Ct(16),f=!1),this.o=this.o&&f,!f)Wo(this.i,this.l,O,"[Invalid Chunked Response]"),Li(this),Wa(this);else if(0<O.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Tg(mt),mt.M=!0,Ct(11))}}else Wo(this.i,this.l,O,null),yg(this,O);yt==4&&Li(this),this.o&&!this.J&&(yt==4?yD(this.j,this):(this.o=!1,gl(this)))}else Cx(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),Li(this),Wa(this)}}}catch{}finally{}};function zT(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ux(u,d){var f=u.C,m=d.indexOf(`
`,f);return m==-1?pg:(f=Number(d.substring(f,m)),isNaN(f)?$T:(m+=1,m+f>d.length?pg:(d=d.slice(m,m+f),u.C=m+f,d)))}jr.prototype.cancel=function(){this.J=!0,Li(this)};function gl(u){u.S=Date.now()+u.I,qT(u,u.I)}function qT(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=qa(g(u.ba,u),d)}function mg(u){u.B&&(a.clearTimeout(u.B),u.B=null)}jr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(ax(this.i,this.A),this.L!=2&&(za(),Ct(17)),Li(this),this.s=2,Wa(this)):qT(this,this.S-u)};function Wa(u){u.j.G==0||u.J||yD(u.j,u)}function Li(u){mg(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,kT(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function yg(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||vg(f.h,u))){if(!u.K&&vg(f.h,u)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)Tl(f),Il(f);else break e;wg(f),Ct(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=qa(g(f.Za,f),6e3));if(1>=KT(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ji(f,11)}else if((u.K||f.g==u)&&Tl(f),!L(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let fe=C[d];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];let mt=fe[3];mt!=null&&(f.la=mt,f.j.info("VER="+f.la));let yt=fe[4];yt!=null&&(f.Aa=yt,f.j.info("SVER="+f.Aa));let Yo=fe[5];Yo!=null&&typeof Yo=="number"&&0<Yo&&(m=1.5*Yo,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let cn=u.g;if(cn){let bl=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bl){var R=m.h;R.g||bl.indexOf("spdy")==-1&&bl.indexOf("quic")==-1&&bl.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(_g(R,R.h),R.h=null))}if(m.D){let Dg=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Dg&&(m.ya=Dg,Ce(m.I,m.D,Dg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var O=u;if(m.qa=ED(m,m.J?m.ia:null,m.W),O.K){QT(m.h,O);var Te=O,at=m.L;at&&(Te.I=at),Te.B&&(mg(Te),gl(Te)),m.g=O}else gD(m);0<f.i.length&&wl(f)}else fe[0]!="stop"&&fe[0]!="close"||ji(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?ji(f,7):Ig(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}za(4)}catch{}}var lx=class{constructor(u,d){this.g=u,this.map=d}};function GT(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function WT(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function KT(u){return u.h?1:u.g?u.g.size:0}function vg(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function _g(u,d){u.g?u.g.add(d):u.h=d}function QT(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}GT.prototype.cancel=function(){if(this.i=YT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function YT(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return N(u.i)}function dx(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,m=0;m<f;m++)d.push(u[m]);return d}d=[],f=0;for(m in u)d[f++]=u[m];return d}function hx(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let m in u)d[f++]=m;return d}}}function JT(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=hx(u),m=dx(u),C=m.length,R=0;R<C;R++)d.call(void 0,m[R],f&&f[R],u)}var ZT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fx(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var m=u[f].indexOf("="),C=null;if(0<=m){var R=u[f].substring(0,m);C=u[f].substring(m+1)}else R=u[f];d(R,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Vi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Vi){this.h=u.h,ml(this,u.j),this.o=u.o,this.g=u.g,yl(this,u.s),this.l=u.l;var d=u.i,f=new Ya;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),XT(this,f),this.m=u.m}else u&&(d=String(u).match(ZT))?(this.h=!1,ml(this,d[1]||"",!0),this.o=Ka(d[2]||""),this.g=Ka(d[3]||"",!0),yl(this,d[4]),this.l=Ka(d[5]||"",!0),XT(this,d[6]||"",!0),this.m=Ka(d[7]||"")):(this.h=!1,this.i=new Ya(null,this.h))}Vi.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Qa(d,eD,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Qa(d,eD,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Qa(f,f.charAt(0)=="/"?mx:gx,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Qa(f,vx)),u.join("")};function or(u){return new Vi(u)}function ml(u,d,f){u.j=f?Ka(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function yl(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function XT(u,d,f){d instanceof Ya?(u.i=d,_x(u.i,u.h)):(f||(d=Qa(d,yx)),u.i=new Ya(d,u.h))}function Ce(u,d,f){u.i.set(d,f)}function vl(u){return Ce(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ka(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qa(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,px),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function px(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var eD=/[#\/\?@]/g,gx=/[#\?:]/g,mx=/[#\?]/g,yx=/[#\?@]/g,vx=/#/g;function Ya(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Ur(u){u.g||(u.g=new Map,u.h=0,u.i&&fx(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ya.prototype,t.add=function(u,d){Ur(this),this.i=null,u=Ko(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function tD(u,d){Ur(u),d=Ko(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function nD(u,d){return Ur(u),d=Ko(u,d),u.g.has(d)}t.forEach=function(u,d){Ur(this),this.g.forEach(function(f,m){f.forEach(function(C){u.call(d,C,m,this)},this)},this)},t.na=function(){Ur(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let C=u[m];for(let R=0;R<C.length;R++)f.push(d[m])}return f},t.V=function(u){Ur(this);let d=[];if(typeof u=="string")nD(this,u)&&(d=d.concat(this.g.get(Ko(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},t.set=function(u,d){return Ur(this),this.i=null,u=Ko(this,u),nD(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function rD(u,d,f){tD(u,d),0<f.length&&(u.i=null,u.g.set(Ko(u,d),N(f)),u.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let R=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var C=R;O[m]!==""&&(C+="="+encodeURIComponent(String(O[m]))),u.push(C)}}return this.i=u.join("&")};function Ko(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function _x(u,d){d&&!u.j&&(Ur(u),u.i=null,u.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(tD(this,m),rD(this,C,f))},u)),u.j=d}function Ex(u,d){let f=new Ga;if(a.Image){let m=new Image;m.onload=y(Br,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Br,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Br,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Br,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else d(!1)}function Ix(u,d){let f=new Ga,m=new AbortController,C=setTimeout(()=>{m.abort(),Br(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:m.signal}).then(R=>{clearTimeout(C),R.ok?Br(f,"TestPingServer: ok",!0,d):Br(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Br(f,"TestPingServer: error",!1,d)})}function Br(u,d,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function wx(){this.g=new ix}function Tx(u,d,f){let m=f||"";try{JT(u,function(C,R){let O=C;l(C)&&(O=ug(C)),d.push(m+R+"="+encodeURIComponent(O))})}catch(C){throw d.push(m+"type="+encodeURIComponent("_badmap")),C}}function Ja(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Ja,lg),Ja.prototype.g=function(){return new _l(this.l,this.j)},Ja.prototype.i=function(u){return function(){return u}}({});function _l(u,d){gt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(_l,gt),t=_l.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Xa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Za(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Xa(this)),this.g&&(this.readyState=3,Xa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;iD(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function iD(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Za(this):Xa(this),this.readyState==3&&iD(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Za(this))},t.Qa=function(u){this.g&&(this.response=u,Za(this))},t.ga=function(){this.g&&Za(this)};function Za(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Xa(u)}t.setRequestHeader=function(u,d){this.u.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function Xa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(_l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function oD(u){let d="";return pe(u,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Eg(u,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=oD(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Ce(u,d,f))}function Pe(u){gt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Pe,gt);var Dx=/^https?$/i,bx=["POST","PUT"];t=Pe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fg.g(),this.v=this.o?xT(this.o):xT(fg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(R){sD(this,R);return}if(u=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())f.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(bx,d,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,O]of f)this.g.setRequestHeader(R,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uD(this),this.u=!0,this.g.send(u),this.u=!1}catch(R){sD(this,R)}};function sD(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,aD(u),El(u)}function aD(u){u.A||(u.A=!0,bt(u,"complete"),bt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,bt(this,"complete"),bt(this,"abort"),El(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),El(this,!0)),Pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?cD(this):this.bb())},t.bb=function(){cD(this)};function cD(u){if(u.h&&typeof s<"u"&&(!u.v[1]||sr(u)!=4||u.Z()!=2)){if(u.u&&sr(u)==4)NT(u.Ea,0,u);else if(bt(u,"readystatechange"),sr(u)==4){u.h=!1;try{let O=u.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=O===0){var C=String(u.D).match(ZT)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!Dx.test(C?C.toLowerCase():"")}f=m}if(f)bt(u,"complete"),bt(u,"success");else{u.m=6;try{var R=2<sr(u)?u.g.statusText:""}catch{R=""}u.l=R+" ["+u.Z()+"]",aD(u)}}finally{El(u)}}}}function El(u,d){if(u.g){uD(u);let f=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||bt(u,"ready");try{f.onreadystatechange=m}catch{}}}function uD(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function sr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<sr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),rx(d)}};function lD(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Cx(u){let d={};u=(u.g&&2<=sr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(L(u[m]))continue;var f=b(u[m]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let R=d[C]||[];d[C]=R,R.push(f)}D(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ec(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function dD(u){this.Aa=0,this.i=[],this.j=new Ga,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ec("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ec("baseRetryDelayMs",5e3,u),this.cb=ec("retryDelaySeedMs",1e4,u),this.Wa=ec("forwardChannelMaxRetries",2,u),this.wa=ec("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new GT(u&&u.concurrentRequestLimit),this.Da=new wx,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=dD.prototype,t.la=8,t.G=1,t.connect=function(u,d,f,m){Ct(0),this.W=u,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=ED(this,null,this.W),wl(this)};function Ig(u){if(hD(u),u.G==3){var d=u.U++,f=or(u.I);if(Ce(f,"SID",u.K),Ce(f,"RID",d),Ce(f,"TYPE","terminate"),tc(u,f),d=new jr(u,u.j,d),d.L=2,d.v=vl(or(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=ID(d.j,null),d.g.ea(d.v)),d.F=Date.now(),gl(d)}_D(u)}function Il(u){u.g&&(Tg(u),u.g.cancel(),u.g=null)}function hD(u){Il(u),u.u&&(a.clearTimeout(u.u),u.u=null),Tl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function wl(u){if(!WT(u.h)&&!u.s){u.s=!0;var d=u.Ga;Va||DT(),ja||(Va(),ja=!0),eg.add(d,u),u.B=0}}function Sx(u,d){return KT(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=qa(g(u.Ga,u,d),vD(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new jr(this,this.j,u),R=this.o;if(this.S&&(R?(R=v(R),T(R,this.S)):R=this.S),this.m!==null||this.O||(C.H=R,R=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=pD(this,C,d),f=or(this.I),Ce(f,"RID",u),Ce(f,"CVER",22),this.D&&Ce(f,"X-HTTP-Session-Id",this.D),tc(this,f),R&&(this.O?d="headers="+encodeURIComponent(String(oD(R)))+"&"+d:this.m&&Eg(f,this.m,R)),_g(this.h,C),this.Ua&&Ce(f,"TYPE","init"),this.P?(Ce(f,"$req",d),Ce(f,"SID","null"),C.T=!0,gg(C,f,null)):gg(C,f,d),this.G=2}}else this.G==3&&(u?fD(this,u):this.i.length==0||WT(this.h)||fD(this))};function fD(u,d){var f;d?f=d.l:f=u.U++;let m=or(u.I);Ce(m,"SID",u.K),Ce(m,"RID",f),Ce(m,"AID",u.T),tc(u,m),u.m&&u.o&&Eg(m,u.m,u.o),f=new jr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=pD(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),_g(u.h,f),gg(f,m,d)}function tc(u,d){u.H&&pe(u.H,function(f,m){Ce(d,m,f)}),u.l&&JT({},function(f,m){Ce(d,m,f)})}function pD(u,d,f){f=Math.min(u.i.length,f);var m=u.l?g(u.l.Na,u.l,u):null;e:{var C=u.i;let R=-1;for(;;){let O=["count="+f];R==-1?0<f?(R=C[0].g,O.push("ofs="+R)):R=0:O.push("ofs="+R);let Te=!0;for(let at=0;at<f;at++){let fe=C[at].g,mt=C[at].map;if(fe-=R,0>fe)R=Math.max(0,C[at].g-100),Te=!1;else try{Tx(mt,O,"req"+fe+"_")}catch{m&&m(mt)}}if(Te){m=O.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,m}function gD(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Va||DT(),ja||(Va(),ja=!0),eg.add(d,u),u.v=0}}function wg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=qa(g(u.Fa,u),vD(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,mD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=qa(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),Il(this),mD(this))};function Tg(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function mD(u){u.g=new jr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=or(u.qa);Ce(d,"RID","rpc"),Ce(d,"SID",u.K),Ce(d,"AID",u.T),Ce(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ce(d,"TO",u.ja),Ce(d,"TYPE","xmlhttp"),tc(u,d),u.m&&u.o&&Eg(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=vl(or(d)),f.m=null,f.P=!0,HT(f,u)}t.Za=function(){this.C!=null&&(this.C=null,Il(this),wg(this),Ct(19))};function Tl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function yD(u,d){var f=null;if(u.g==d){Tl(u),Tg(u),u.g=null;var m=2}else if(vg(u.h,d))f=d.D,QT(u.h,d),m=1;else return;if(u.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=u.B;m=hl(),bt(m,new jT(m,f)),wl(u)}else gD(u);else if(C=d.s,C==3||C==0&&0<d.X||!(m==1&&Sx(u,d)||m==2&&wg(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),C){case 1:ji(u,5);break;case 4:ji(u,10);break;case 3:ji(u,6);break;default:ji(u,2)}}}function vD(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function ji(u,d){if(u.j.info("Error code "+d),d==2){var f=g(u.fb,u),m=u.Xa;let C=!m;m=new Vi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ml(m,"https"),vl(m),C?Ex(m.toString(),f):Ix(m.toString(),f)}else Ct(2);u.G=0,u.l&&u.l.sa(d),_D(u),hD(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function _D(u){if(u.G=0,u.ka=[],u.l){let d=YT(u.h);(d.length!=0||u.i.length!=0)&&(S(u.ka,d),S(u.ka,u.i),u.h.i.length=0,N(u.i),u.i.length=0),u.l.ra()}}function ED(u,d,f){var m=f instanceof Vi?or(f):new Vi(f);if(m.g!="")d&&(m.g=d+"."+m.g),yl(m,m.s);else{var C=a.location;m=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var R=new Vi(null);m&&ml(R,m),d&&(R.g=d),C&&yl(R,C),f&&(R.l=f),m=R}return f=u.D,d=u.ya,f&&d&&Ce(m,f,d),Ce(m,"VER",u.la),tc(u,m),m}function ID(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Pe(new Ja({eb:f})):new Pe(u.pa),d.Ha(u.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wD(){}t=wD.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Dl(){}Dl.prototype.g=function(u,d){return new Ht(u,d)};function Ht(u,d){gt.call(this),this.g=new dD(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!L(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!L(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new Qo(this)}w(Ht,gt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Ig(this.g)},Ht.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=ug(u),u=f);d.i.push(new lx(d.Ya++,u)),d.G==3&&wl(d)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Ig(this.g),delete this.g,Ht.aa.N.call(this)};function TD(u){dg.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}w(TD,dg);function DD(){hg.call(this),this.status=1}w(DD,hg);function Qo(u){this.g=u}w(Qo,wD),Qo.prototype.ua=function(){bt(this.g,"a")},Qo.prototype.ta=function(u){bt(this.g,new TD(u))},Qo.prototype.sa=function(u){bt(this.g,new DD)},Qo.prototype.ra=function(){bt(this.g,"b")},Dl.prototype.createWebChannel=Dl.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,aI=Mr.createWebChannelTransport=function(){return new Dl},sI=Mr.getStatEventTarget=function(){return hl()},oI=Mr.Event=Fi,rp=Mr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fl.NO_ERROR=0,fl.TIMEOUT=8,fl.HTTP_ERROR=6,ju=Mr.ErrorCode=fl,UT.COMPLETE="complete",iI=Mr.EventType=UT,OT.EventType=Ha,Ha.OPEN="a",Ha.CLOSE="b",Ha.ERROR="c",Ha.MESSAGE="d",gt.prototype.listen=gt.prototype.K,la=Mr.WebChannel=OT,Nq=Mr.FetchXmlHttpFactory=Ja,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,rI=Mr.XhrIo=Pe}).apply(typeof np<"u"?np:typeof self<"u"?self:typeof window<"u"?window:{});var DP="@firebase/firestore",bP="4.8.0";var it=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");var Ma="11.10.0";var jo=new Wn("@firebase/firestore");function da(){return jo.logLevel}function j(t,...e){if(jo.logLevel<=le.DEBUG){let n=e.map(Gw);jo.debug(`Firestore (${Ma}): ${t}`,...n)}}function kr(t,...e){if(jo.logLevel<=le.ERROR){let n=e.map(Gw);jo.error(`Firestore (${Ma}): ${t}`,...n)}}function Pi(t,...e){if(jo.logLevel<=le.WARN){let n=e.map(Gw);jo.warn(`Firestore (${Ma}): ${t}`,...n)}}function Gw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function Q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,pM(t,r,n)}function pM(t,e,n){let r=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw kr(r),new Error(r)}function _e(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||pM(e,i,r)}function ne(t,e){return t}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends Qt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Rn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var lp=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},hI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(it.UNAUTHENTICATED))}shutdown(){}},fI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},pI=class{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new Rn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Rn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>_(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Rn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string",31837,{l:r}),new lp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new it(e)}},gI=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},mI=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new gI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}},dp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},yI=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_e(this.o===void 0,3512);let r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new dp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Pq(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function gM(){return new TextEncoder}var qu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Pq(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ce(t,e){return t<e?-1:t>e?1:0}function vI(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ce(r,i);{let o=gM(),s=Mq(o.encode(CP(t,n)),o.encode(CP(e,n)));return s!==0?s:ce(r,i)}}n+=r>65535?2:1}return ce(t.length,e.length)}function CP(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Mq(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ce(t[n],e[n]);return ce(t.length,e.length)}function va(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var SP="__name__",hp=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ce(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):vI(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pr.fromString(e.substring(4,e.length-2))}},Re=class t extends hp{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},kq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Jt=class t extends hp{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return kq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===SP}static keyField(){return new t([SP])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new B(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new B(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var W=class t{constructor(e){this.path=e}static fromPath(e){return new t(Re.fromString(e))}static fromName(e){return new t(Re.fromString(e).popFirst(5))}static empty(){return new t(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Re(e.slice()))}};function mM(t,e,n){if(!n)throw new B(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xq(t,e,n,r){if(e===!0&&r===!0)throw new B(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function AP(t){if(!W.isDocumentKey(t))throw new B(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function RP(t){if(W.isDocumentKey(t))throw new B(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yM(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ww(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q(12329,{type:typeof t})}function $t(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Ww(t);throw new B(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ke(t,e){let n={typeString:t};return e&&(n.value=e),n}function sl(t,e){if(!yM(t))throw new B(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new B(k.INVALID_ARGUMENT,n);return!0}var NP=-62135596800,PP=1e6,Qe=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*PP);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<NP)throw new B(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/PP}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sl(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-NP;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:Ke("string",Qe._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};var ie=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Qe(0,0))}static max(){return new t(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Gu=-1,_I=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};_I.UNKNOWN_ID=-1;function Oq(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new Uo(i,W.empty(),e)}function Fq(t){return new Uo(t.readTime,t.key,Gu)}var Uo=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ie.min(),W.empty(),Gu)}static max(){return new t(ie.max(),W.empty(),Gu)}};function Lq(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}var Vq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",EI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ka(t){return _(this,null,function*(){if(t.code!==k.FAILED_PRECONDITION||t.message!==Vq)throw t;j("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function jq(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xa(t){return t.name==="IndexedDbTransactionError"}var Kw=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),Qw=-1;function $p(t){return t==null}function Wu(t){return t===0&&1/t==-1/0}function Uq(t){return typeof t=="number"&&Number.isInteger(t)&&!Wu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var vM="";function Bq(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=MP(e)),e=$q(t.get(n),e);return MP(e)}function $q(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case vM:n+="";break;default:n+=o}}return n}function MP(t){return t+vM+""}var Hq="remoteDocuments",_M="owner";var EM="mutationQueues";var IM="mutations";var wM="documentMutations",zq="remoteDocumentsV14";var TM="remoteDocumentGlobal";var DM="targets";var bM="targetDocuments";var CM="targetGlobal",SM="collectionParents";var AM="clientMetadata";var RM="bundles";var NM="namedQueries";var qq="indexConfiguration";var Gq="indexState";var Wq="indexEntries";var PM="documentOverlays";var Kq="globals";var Qq=[EM,IM,wM,Hq,DM,_M,CM,bM,AM,TM,SM,RM,NM],Ece=[...Qq,PM],Yq=[EM,IM,wM,zq,DM,_M,CM,bM,AM,TM,SM,RM,NM,PM],Jq=Yq,Zq=[...Jq,qq,Gq,Wq];var Ice=[...Zq,Kq];function kP(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Oi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function MM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Le=class t{constructor(e,n){this.comparator=e,this.root=n||Jn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ga(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ga(this.root,e,this.comparator,!1)}getReverseIterator(){return new ga(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ga(this.root,e,this.comparator,!0)}},ga=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Jn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}};Jn.EMPTY=null,Jn.RED=!0,Jn.BLACK=!1;Jn.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Jn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ot=class t{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fp(this.data.getIterator())}getIteratorFrom(e){return new fp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},fp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var an=class t{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new t([])}unionWith(e){let n=new ot(Jt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return va(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var pp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Dt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new pp("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Dt.EMPTY_BYTE_STRING=new Dt("");var Xq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(t){if(_e(!!t,39018),typeof t=="string"){let e=0,n=Xq.exec(t);if(_e(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?Dt.fromBase64String(t):Dt.fromUint8Array(t)}var kM="server_timestamp",xM="__type__",OM="__previous_value__",FM="__local_write_time__";function Yw(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[xM])===null||n===void 0?void 0:n.stringValue)===kM}function Hp(t){let e=t.mapValue.fields[OM];return Yw(e)?Hp(e):e}function Ku(t){let e=xr(t.mapValue.fields[FM].timestampValue);return new Qe(e.seconds,e.nanos)}var II=class{constructor(e,n,r,i,o,s,a,c,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=h}},gp="(default)",mp=class t{constructor(e,n){this.projectId=e,this.database=n||gp}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===gp}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Jw="__type__",LM="__max__",ip={mapValue:{fields:{__type__:{stringValue:LM}}}},Zw="__vector__",_a="value";function Mi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yw(t)?4:jM(t)?9007199254740991:VM(t)?10:11:Q(28295,{value:t})}function tr(t,e){if(t===e)return!0;let n=Mi(t);if(n!==Mi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ku(t).isEqual(Ku(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=xr(i.timestampValue),a=xr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Or(i.bytesValue).isEqual(Or(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ae(i.geoPointValue.latitude)===Ae(o.geoPointValue.latitude)&&Ae(i.geoPointValue.longitude)===Ae(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ae(i.integerValue)===Ae(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ae(i.doubleValue),a=Ae(o.doubleValue);return s===a?Wu(s)===Wu(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return va(t.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(kP(s)!==kP(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!tr(s[c],a[c])))return!1;return!0}(t,e);default:return Q(52216,{left:t})}}function Qu(t,e){return(t.values||[]).find(n=>tr(n,e))!==void 0}function Ea(t,e){if(t===e)return 0;let n=Mi(t),r=Mi(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ae(o.integerValue||o.doubleValue),c=Ae(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return xP(t.timestampValue,e.timestampValue);case 4:return xP(Ku(t),Ku(e));case 5:return vI(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Or(o),c=Or(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=ce(a[l],c[l]);if(h!==0)return h}return ce(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ce(Ae(o.latitude),Ae(s.latitude));return a!==0?a:ce(Ae(o.longitude),Ae(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return OP(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[_a])===null||a===void 0?void 0:a.arrayValue,w=(c=g[_a])===null||c===void 0?void 0:c.arrayValue,N=ce(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=w?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:OP(y,w)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===ip.mapValue&&s===ip.mapValue)return 0;if(o===ip.mapValue)return 1;if(s===ip.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let g=vI(c[p],h[p]);if(g!==0)return g;let y=Ea(a[c[p]],l[h[p]]);if(y!==0)return y}return ce(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Q(23264,{le:n})}}function xP(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);let n=xr(t),r=xr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function OP(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Ea(n[i],r[i]);if(o)return o}return ce(n.length,r.length)}function Ia(t){return wI(t)}function wI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=xr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Or(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=wI(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${wI(n.fields[s])}`;return i+"}"}(t.mapValue):Q(61005,{value:t})}function ap(t){switch(Mi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Hp(t);return e?16+ap(e):16;case 5:return 2*t.stringValue.length;case 6:return Or(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+ap(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Oi(r.fields,(o,s)=>{i+=o.length+ap(s)}),i}(t.mapValue);default:throw Q(13486,{value:t})}}function TI(t){return!!t&&"integerValue"in t}function Xw(t){return!!t&&"arrayValue"in t}function FP(t){return!!t&&"nullValue"in t}function LP(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cp(t){return!!t&&"mapValue"in t}function VM(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Jw])===null||n===void 0?void 0:n.stringValue)===Zw}function Bu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Oi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function jM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===LM}var Tce={mapValue:{fields:{[Jw]:{stringValue:Zw},[_a]:{arrayValue:{}}}}};var Yt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bu(n)}setAll(e){let n=Jt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Bu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());cp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];cp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Oi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Bu(this.value))}};function UM(t){let e=[];return Oi(t.fields,(n,r)=>{let i=new Jt([n]);if(cp(r)){let o=UM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new an(e)}var Nn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ie.min(),ie.min(),ie.min(),Yt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ie.min(),ie.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ie.min(),ie.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var wa=class{constructor(e,n){this.position=e,this.inclusive=n}};function VP(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=W.comparator(W.fromName(s.referenceValue),n.key):r=Ea(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function jP(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tr(t.position[n],e.position[n]))return!1;return!0}var Ta=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function e3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var yp=class{},Xe=class t extends yp{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new bI(e,n,r):n==="array-contains"?new AI(e,r):n==="in"?new RI(e,r):n==="not-in"?new NI(e,r):n==="array-contains-any"?new PI(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new CI(e,r):new SI(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ea(n,this.value)):n!==null&&Mi(this.value)===Mi(n)&&this.matchesComparison(Ea(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},nr=class t extends yp{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return BM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function BM(t){return t.op==="and"}function $M(t){return t3(t)&&BM(t)}function t3(t){for(let e of t.filters)if(e instanceof nr)return!1;return!0}function DI(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+Ia(t.value);if($M(t))return t.filters.map(e=>DI(e)).join(",");{let e=t.filters.map(n=>DI(n)).join(",");return`${t.op}(${e})`}}function HM(t,e){return t instanceof Xe?function(r,i){return i instanceof Xe&&r.op===i.op&&r.field.isEqual(i.field)&&tr(r.value,i.value)}(t,e):t instanceof nr?function(r,i){return i instanceof nr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&HM(s,i.filters[a]),!0):!1}(t,e):void Q(19439)}function zM(t){return t instanceof Xe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ia(n.value)}`}(t):t instanceof nr?function(n){return n.op.toString()+" {"+n.getFilters().map(zM).join(" ,")+"}"}(t):"Filter"}var bI=class extends Xe{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){let n=W.comparator(e.key,this.key);return this.matchesComparison(n)}},CI=class extends Xe{constructor(e,n){super(e,"in",n),this.keys=qM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},SI=class extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=qM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function qM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}var AI=class extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Xw(n)&&Qu(n.arrayValue,this.value)}},RI=class extends Xe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Qu(this.value.arrayValue,n)}},NI=class extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qu(this.value.arrayValue,n)}},PI=class extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Xw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qu(this.value.arrayValue,r))}};var MI=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function UP(t,e=null,n=[],r=[],i=null,o=null,s=null){return new MI(t,e,n,r,i,o,s)}function eT(t){let e=ne(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>DI(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),$p(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ia(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ia(r)).join(",")),e.Pe=n}return e.Pe}function tT(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!e3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jP(t.startAt,e.startAt)&&jP(t.endAt,e.endAt)}function kI(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Da=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function n3(t,e,n,r,i,o,s,a){return new Da(t,e,n,r,i,o,s,a)}function zp(t){return new Da(t)}function BP(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function r3(t){return t.collectionGroup!==null}function $u(t){let e=ne(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ot(Jt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Ta(o,r))}),n.has(Jt.keyField().canonicalString())||e.Te.push(new Ta(Jt.keyField(),r))}return e.Te}function Zn(t){let e=ne(t);return e.Ie||(e.Ie=i3(e,$u(t))),e.Ie}function i3(t,e){if(t.limitType==="F")return UP(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ta(i.field,o)});let n=t.endAt?new wa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wa(t.startAt.position,t.startAt.inclusive):null;return UP(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xI(t,e,n){return new Da(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qp(t,e){return tT(Zn(t),Zn(e))&&t.limitType===e.limitType}function GM(t){return`${eT(Zn(t))}|lt:${t.limitType}`}function ha(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>zM(i)).join(", ")}]`),$p(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ia(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ia(i)).join(",")),`Target(${r})`}(Zn(t))}; limitType=${t.limitType})`}function Gp(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):W.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of $u(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=VP(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,$u(r),i)||r.endAt&&!function(s,a,c){let l=VP(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,$u(r),i))}(t,e)}function o3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function WM(t){return(e,n)=>{let r=!1;for(let i of $u(t)){let o=s3(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function s3(t,e,n){let r=t.field.isKeyField()?W.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Ea(c,l):Q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:t.dir})}}var Fr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Oi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return MM(this.inner)}size(){return this.innerSize}};var a3=new Le(W.comparator);function Lr(){return a3}var KM=new Le(W.comparator);function Uu(...t){let e=KM;for(let n of t)e=e.insert(n.key,n);return e}function QM(t){let e=KM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xo(){return Hu()}function YM(){return Hu()}function Hu(){return new Fr(t=>t.toString(),(t,e)=>t.isEqual(e))}var c3=new Le(W.comparator),u3=new ot(W.comparator);function de(...t){let e=u3;for(let n of t)e=e.add(n);return e}var l3=new ot(ce);function d3(){return l3}function nT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(e)?"-0":e}}function JM(t){return{integerValue:""+t}}function h3(t,e){return Uq(e)?JM(e):nT(t,e)}var ba=class{constructor(){this._=void 0}};function f3(t,e,n){return t instanceof Ca?function(i,o){let s={fields:{[xM]:{stringValue:kM},[FM]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Yw(o)&&(o=Hp(o)),o&&(s.fields[OM]=o),{mapValue:s}}(n,e):t instanceof Bo?XM(t,e):t instanceof $o?ek(t,e):function(i,o){let s=ZM(i,o),a=$P(s)+$P(i.Ee);return TI(s)&&TI(i.Ee)?JM(a):nT(i.serializer,a)}(t,e)}function p3(t,e,n){return t instanceof Bo?XM(t,e):t instanceof $o?ek(t,e):n}function ZM(t,e){return t instanceof Sa?function(r){return TI(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ca=class extends ba{},Bo=class extends ba{constructor(e){super(),this.elements=e}};function XM(t,e){let n=tk(e);for(let r of t.elements)n.some(i=>tr(i,r))||n.push(r);return{arrayValue:{values:n}}}var $o=class extends ba{constructor(e){super(),this.elements=e}};function ek(t,e){let n=tk(e);for(let r of t.elements)n=n.filter(i=>!tr(i,r));return{arrayValue:{values:n}}}var Sa=class extends ba{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function $P(t){return Ae(t.integerValue||t.doubleValue)}function tk(t){return Xw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function g3(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Bo&&i instanceof Bo||r instanceof $o&&i instanceof $o?va(r.elements,i.elements,tr):r instanceof Sa&&i instanceof Sa?tr(r.Ee,i.Ee):r instanceof Ca&&i instanceof Ca}(t.transform,e.transform)}var OI=class{constructor(e,n){this.version=e,this.transformResults=n}},Xn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function up(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Aa=class{};function nk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Yu(t.key,Xn.none()):new Ho(t.key,t.data,Xn.none());{let n=t.data,r=Yt.empty(),i=new ot(Jt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new rr(t.key,r,new an(i.toArray()),Xn.none())}}function m3(t,e,n){t instanceof Ho?function(i,o,s){let a=i.value.clone(),c=zP(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof rr?function(i,o,s){if(!up(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=zP(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(rk(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function zu(t,e,n,r){return t instanceof Ho?function(o,s,a,c){if(!up(o.precondition,s))return a;let l=o.value.clone(),h=qP(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof rr?function(o,s,a,c){if(!up(o.precondition,s))return a;let l=qP(o.fieldTransforms,c,s),h=s.data;return h.setAll(rk(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return up(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function y3(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=ZM(r.transform,i||null);o!=null&&(n===null&&(n=Yt.empty()),n.set(r.field,o))}return n||null}function HP(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&va(r,i,(o,s)=>g3(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ho=class extends Aa{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},rr=class extends Aa{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function rk(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function zP(t,e,n){let r=new Map;_e(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,p3(s,a,n[i]))}return r}function qP(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,f3(o,s,e))}return r}var Yu=class extends Aa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},FI=class extends Aa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var LI=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&m3(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=zu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=zu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=YM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=nk(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&va(this.mutations,e.mutations,(n,r)=>HP(n,r))&&va(this.baseMutations,e.baseMutations,(n,r)=>HP(n,r))}},VI=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){_e(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return c3}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var jI=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var UI=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ge,he;function v3(t){switch(t){case k.OK:return Q(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return Q(15467,{code:t})}}function ik(t){if(t===void 0)return kr("GRPC error has no .code"),k.UNKNOWN;switch(t){case Ge.OK:return k.OK;case Ge.CANCELLED:return k.CANCELLED;case Ge.UNKNOWN:return k.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return k.INTERNAL;case Ge.UNAVAILABLE:return k.UNAVAILABLE;case Ge.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Ge.NOT_FOUND:return k.NOT_FOUND;case Ge.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Ge.ABORTED:return k.ABORTED;case Ge.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Ge.DATA_LOSS:return k.DATA_LOSS;default:return Q(39323,{code:t})}}(he=Ge||(Ge={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var GP=null;var _3=new Pr([4294967295,4294967295],0);function WP(t){let e=gM().encode(t),n=new nI;return n.update(e),new Uint8Array(n.digest())}function KP(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Pr([n,r],0),new Pr([i,o],0)]}var BI=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oo(`Invalid padding: ${n}`);if(r<0)throw new Oo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Pr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Pr.fromNumber(r)));return i.compare(_3)===1&&(i=new Pr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=WP(e),[r,i]=KP(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=WP(e),[r,i]=KP(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Oo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var vp=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ju.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ie.min(),i,new Le(ce),Lr(),de())}},Ju=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,de(),de(),de())}};var ma=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},_p=class{constructor(e,n){this.targetId=e,this.De=n}},Ep=class{constructor(e,n,r=Dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Ip=class{constructor(){this.ve=0,this.Ce=QP(),this.Fe=Dt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=de(),n=de(),r=de();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q(38017,{changeType:o})}}),new Ju(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=QP()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},$I=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Lr(),this.je=op(),this.Je=op(),this.He=new Le(ce)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(kI(o))if(r===0){let s=new W(o.path);this.Xe(n,s,Nn.newNoDocument(s,ie.min()))}else _e(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}GP?.ct(function(h,p,g,y,w){var N,S,P,L,H,z;let Ne={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},pe=p.unchangedNames;return pe&&(Ne.bloomFilter={applied:w===0,hashCount:(N=pe?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(L=(P=(S=pe?.bits)===null||S===void 0?void 0:S.bitmap)===null||P===void 0?void 0:P.length)!==null&&L!==void 0?L:0,padding:(z=(H=pe?.bits)===null||H===void 0?void 0:H.padding)!==null&&z!==void 0?z:0,mightContain:D=>{var v;return(v=y?.mightContain(D))!==null&&v!==void 0&&v}}),Ne}(s,e.De,this.We.lt(),a,c))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Or(r).toUint8Array()}catch(c){if(c instanceof pp)return Pi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new BI(s,i,o)}catch(c){return Pi(c instanceof Oo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&kI(a.target)){let c=new W(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,Nn.newNoDocument(c,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=de();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new vp(e,n,this.He,this.ze,r);return this.ze=Lr(),this.je=op(),this.Je=op(),this.He=new Le(ce),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Ip,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new ot(ce),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new ot(ce),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ip),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function op(){return new Le(W.comparator)}function QP(){return new Le(W.comparator)}var E3={asc:"ASCENDING",desc:"DESCENDING"},I3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},w3={and:"AND",or:"OR"},HI=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function zI(t,e){return t.useProto3Json||$p(e)?e:{value:e}}function wp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ok(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function T3(t,e){return wp(t,e.toTimestamp())}function er(t){return _e(!!t,49232),ie.fromTimestamp(function(n){let r=xr(n);return new Qe(r.seconds,r.nanos)}(t))}function rT(t,e){return qI(t,e).canonicalString()}function qI(t,e){let n=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function sk(t){let e=Re.fromString(t);return _e(dk(e),10190,{key:e.toString()}),e}function GI(t,e){return rT(t.databaseId,e.path)}function cI(t,e){let n=sk(e);if(n.get(1)!==t.databaseId.projectId)throw new B(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(ck(n))}function ak(t,e){return rT(t.databaseId,e)}function D3(t){let e=sk(t);return e.length===4?Re.emptyPath():ck(e)}function WI(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ck(t){return _e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function YP(t,e,n){return{name:GI(t,e),fields:n.value.mapValue.fields}}function b3(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(_e(h===void 0||typeof h=="string",58123),Dt.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Dt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?k.UNKNOWN:ik(l.code);return new B(h,l.message||"")}(s);n=new Ep(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=cI(t,r.document.name),o=er(r.document.updateTime),s=r.document.createTime?er(r.document.createTime):ie.min(),a=new Yt({mapValue:{fields:r.document.fields}}),c=Nn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ma(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=cI(t,r.document),o=r.readTime?er(r.readTime):ie.min(),s=Nn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ma([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=cI(t,r.document),o=r.removedTargetIds||[];n=new ma([],o,i,null)}else{if(!("filter"in e))return Q(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new UI(i,o),a=r.targetId;n=new _p(a,s)}}return n}function C3(t,e){let n;if(e instanceof Ho)n={update:YP(t,e.key,e.value)};else if(e instanceof Yu)n={delete:GI(t,e.key)};else if(e instanceof rr)n={update:YP(t,e.key,e.data),updateMask:O3(e.fieldMask)};else{if(!(e instanceof FI))return Q(16599,{Rt:e.type});n={verify:GI(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Ca)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Bo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof $o)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Sa)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw Q(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:T3(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Q(27497)}(t,e.precondition)),n}function S3(t,e){return t&&t.length>0?(_e(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?er(i.updateTime):er(o);return s.isEqual(ie.min())&&(s=er(o)),new OI(s,i.transformResults||[])}(n,e))):[]}function A3(t,e){return{documents:[ak(t,e.path)]}}function R3(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ak(t,i);let o=function(l){if(l.length!==0)return lk(nr.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:fa(g.field),direction:M3(g.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=zI(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:n,parent:i}}function N3(t){let e=D3(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_e(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let g=uk(p);return g instanceof nr&&$M(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(g=>function(w){return new Ta(pa(w.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,$p(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){let g=!!p.before,y=p.values||[];return new wa(y,g)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new wa(y,g)}(n.endAt)),n3(e,i,s,o,a,"F",c,l)}function P3(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=pa(n.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=pa(n.unaryFilter.field);return Xe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=pa(n.unaryFilter.field);return Xe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=pa(n.unaryFilter.field);return Xe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(t):t.fieldFilter!==void 0?function(n){return Xe.create(pa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nr.create(n.compositeFilter.filters.map(r=>uk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(t):Q(30097,{filter:t})}function M3(t){return E3[t]}function k3(t){return I3[t]}function x3(t){return w3[t]}function fa(t){return{fieldPath:t.canonicalString()}}function pa(t){return Jt.fromServerFormat(t.fieldPath)}function lk(t){return t instanceof Xe?function(n){if(n.op==="=="){if(LP(n.value))return{unaryFilter:{field:fa(n.field),op:"IS_NAN"}};if(FP(n.value))return{unaryFilter:{field:fa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(LP(n.value))return{unaryFilter:{field:fa(n.field),op:"IS_NOT_NAN"}};if(FP(n.value))return{unaryFilter:{field:fa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fa(n.field),op:k3(n.op),value:n.value}}}(t):t instanceof nr?function(n){let r=n.getFilters().map(i=>lk(i));return r.length===1?r[0]:{compositeFilter:{op:x3(n.op),filters:r}}}(t):Q(54877,{filter:t})}function O3(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function dk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Zu=class t{constructor(e,n,r,i,o=ie.min(),s=ie.min(),a=Dt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var KI=class{constructor(e){this.gt=e}};function F3(t){let e=N3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xI(e,e.limit,"L"):e}var Tp=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Ae(e.integerValue));else if("doubleValue"in e){let r=Ae(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Wu(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=xr(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Or(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?jM(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):VM(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):Q(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=_a,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Ae(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),W.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};Tp.Ut=new Tp;var QI=class{constructor(){this.Dn=new YI}addToCollectionParentIndex(e,n){return this.Dn.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(Uo.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(Uo.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},YI=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ot(Re.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ot(Re.comparator)).toArray()}};var Dce=new Uint8Array(0);var JP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hk=41943040,sn=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(hk,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);var Xu=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var ZP="LruGarbageCollector",L3=1048576;function XP([t,e],[n,r]){let i=ce(t,n);return i===0?ce(e,r):i}var JI=class{constructor(e){this.Tr=e,this.buffer=new ot(XP),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();XP(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},ZI=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){j(ZP,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){xa(n)?j(ZP,"Ignoring IndexedDB error during garbage collection: ",n):yield ka(n)}yield this.Rr(3e5)}))}},XI=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return x.resolve(Kw.ue);let r=new JI(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(JP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JP):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),da()<=le.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function V3(t,e){return new XI(t,e)}var ew=class{constructor(){this.changes=new Fr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var tw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var nw=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&zu(r.mutation,i,an.empty(),Qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){let i=xo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Uu();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=xo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Lr(),s=Hu(),a=function(){return Hu()}();return n.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof rr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),zu(h.mutation,l,h.mutation.getFieldMask(),Qe.now())):s.set(l.key,an.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new tw(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Hu(),i=new Le((s,a)=>s-a),o=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let h=r.get(c)||an.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||de()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=YM();h.forEach(g=>{if(!o.has(g)){let y=nk(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return W.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):r3(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):x.resolve(xo()),a=Gu,c=o;return s.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,de())).next(h=>({batchId:a,changes:QM(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let i=Uu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Uu();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,c=>{let l=function(p,g){return new Da(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Nn.newInvalidDocument(h)))});let a=Uu();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&zu(h.mutation,l,an.empty(),Qe.now()),Gp(n,l)&&(a=a.insert(c,l))}),a})}};var rw=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return x.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:er(i.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:F3(i.bundledQuery),readTime:er(i.readTime)}}(n)),x.resolve()}};var iw=class{constructor(){this.overlays=new Le(W.comparator),this.kr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=xo();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=xo(),o=n.length+1,s=new W(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Le((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=xo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=xo(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new jI(n,r));let o=this.kr.get(n);o===void 0&&(o=de(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var ow=class{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var el=class{constructor(){this.qr=new ot(We.Qr),this.$r=new ot(We.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new We(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new We(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new W(new Re([])),r=new We(n,e),i=new We(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new W(new Re([])),r=new We(n,e),i=new We(n,e+1),o=de();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new We(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},We=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return W.comparator(e.key,n.key)||ce(e.Hr,n.Hr)}static Ur(e,n){return ce(e.Hr,n.Hr)||W.comparator(e.key,n.key)}};var sw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new ot(We.Qr)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new LI(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new We(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,n){return x.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?Qw:this.er-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new We(n,0),i=new We(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ot(ce);return n.forEach(i=>{let o=new We(i,0),s=new We(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),x.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;W.isDocumentKey(o)||(o=o.child(""));let s=new We(new W(o),0),a=new ot(ce);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},s),x.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_e(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return x.forEach(n.mutations,i=>{let o=new We(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new We(n,0),i=this.Yr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var aw=class{constructor(e){this.ni=e,this.docs=function(){return new Le(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(n))}getEntries(e,n){let r=Lr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Nn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Lr(),s=n.path,a=new W(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Lq(Fq(h),r)<=0||(i.has(h.key)||Gp(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Q(9500)}ri(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new cw(this)}getSize(e){return x.resolve(this.size)}},cw=class extends ew{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var uw=class{constructor(e){this.persistence=e,this.ii=new Fr(n=>eT(n),tT),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.si=0,this.oi=new el,this.targetCount=0,this._i=Xu.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),x.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new Xu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.hr(n),x.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.oi.containsKey(n))}};var Dp=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new Kw(0),this.ci=!1,this.ci=!0,this.li=new ow,this.referenceDelegate=e(this),this.hi=new uw(this),this.indexManager=new QI,this.remoteDocumentCache=function(i){return new aw(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new KI(n),this.Ti=new rw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new iw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new sw(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);let i=new lw(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return x.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},lw=class extends EI{constructor(e){super(),this.currentSequenceNumber=e}},dw=class t{constructor(e){this.persistence=e,this.Ai=new el,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw Q(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),x.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.mi,r=>{let i=W.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,ie.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return x.or([()=>x.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},bp=class t{constructor(e,n){this.persistence=e,this.gi=new Fr(r=>Bq(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=V3(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return x.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return x.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?x.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ie.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),x.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),x.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ap(e.data.value)),n}Sr(e,n,r){return x.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var hw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=de(),i=de();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var fw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var pw=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return zR()?8:jq(rt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new fw;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(da()<=le.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",ha(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(da()<=le.DEBUG&&j("QueryEngine","Query:",ha(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(da()<=le.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",ha(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zn(n))):x.resolve())}ps(e,n){if(BP(n))return x.resolve(null);let r=Zn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=xI(n,null,"F"),r=Zn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=de(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(n,a);return this.Ds(n,l,s,c.readTime)?this.ps(e,xI(n,null,"F")):this.vs(e,l,n,c)}))})))}ys(e,n,r,i){return BP(n)||i.isEqual(ie.min())?x.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?x.resolve(null):(da()<=le.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ha(n)),this.vs(e,s,n,Oq(i,Gu)).next(a=>a))})}bs(e,n){let r=new ot(WM(e));return n.forEach((i,o)=>{Gp(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return da()<=le.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",ha(n)),this.gs.getDocumentsMatchingQuery(e,n,Uo.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var iT="LocalStore",j3=3e8,gw=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Le(ce),this.Ms=new Fr(o=>eT(o),tT),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nw(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function U3(t,e,n,r){return new gw(t,e,n,r)}function fk(t,e){return _(this,null,function*(){let n=ne(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=de();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function B3(t,e){let n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,g=p.keys(),y=x.resolve();return g.forEach(w=>{y=y.next(()=>h.getEntry(c,w)).next(N=>{let S=l.docVersions.get(w);_e(S!==null,48541),N.version.compareTo(S)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function pk(t){let e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function $3(t,e){let n=ne(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Dt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(N,S,P){return N.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=j3?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,y,h)&&a.push(n.hi.updateTargetData(o,y))});let c=Lr(),l=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(H3(o,s,e.documentUpdates).next(h=>{c=h.Ls,l=h.ks})),!r.isEqual(ie.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(n.Fs=i,o))}function H3(t,e,n){let r=de(),i=de();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Lr();return n.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ie.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):j(iT,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function z3(t,e){let n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Qw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function q3(t,e){let n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Zu(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function mw(t,e,n){return _(this,null,function*(){let r=ne(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!xa(s))throw s;j(iT,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function eM(t,e,n){let r=ne(t),i=ie.min(),o=de();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=ne(c),g=p.Ms.get(h);return g!==void 0?x.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)}(r,s,Zn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:ie.min(),n?o:de())).next(a=>(G3(r,o3(e),a),{documents:a,qs:o})))}function G3(t,e,n){let r=t.xs.get(e)||ie.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var Cp=class{constructor(){this.activeTargetIds=d3()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var yw=class{constructor(){this.Fo=new Cp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Cp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var vw=class{xo(e){}shutdown(){}};var tM="ConnectivityMonitor",Sp=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){j(tM,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){j(tM,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var sp=null;function _w(){return sp===null?sp=function(){return 268435456+Math.round(2147483648*Math.random())}():sp++,"0x"+sp.toString(16)}var uI="RestConnection",W3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Ew=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===gp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=_w(),a=this.Go(e,n.toUriEncodedString());j(uI,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:l}=new URL(a),h=mi(l);return this.jo(e,a,c,r,h).then(p=>(j(uI,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Pi(uI,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ma}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=W3[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var Iw=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Tt="WebChannelConnection",ww=class extends Ew{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=_w();return new Promise((a,c)=>{let l=new rI;l.setWithCredentials(!0),l.listenOnce(iI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ju.NO_ERROR:let p=l.getResponseJson();j(Tt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case ju.TIMEOUT:j(Tt,`RPC '${e}' ${s} timed out`),c(new B(k.DEADLINE_EXCEEDED,"Request time out"));break;case ju.HTTP_ERROR:let g=l.getStatus();if(j(Tt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let w=y?.error;if(w&&w.status&&w.message){let N=function(P){let L=P.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(L)>=0?L:k.UNKNOWN}(w.status);c(new B(N,w.message))}else c(new B(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new B(k.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{j(Tt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);j(Tt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=_w(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=aI(),a=sI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let h=o.join("");j(Tt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c);this.T_(p);let g=!1,y=!1,w=new Iw({Ho:S=>{y?j(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(g||(j(Tt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),j(Tt,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},Yo:()=>p.close()}),N=(S,P,L)=>{S.listen(P,H=>{try{L(H)}catch(z){setTimeout(()=>{throw z},0)}})};return N(p,la.EventType.OPEN,()=>{y||(j(Tt,`RPC '${e}' stream ${i} transport opened.`),w.s_())}),N(p,la.EventType.CLOSE,()=>{y||(y=!0,j(Tt,`RPC '${e}' stream ${i} transport closed`),w.__(),this.I_(p))}),N(p,la.EventType.ERROR,S=>{y||(y=!0,Pi(Tt,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),w.__(new B(k.UNAVAILABLE,"The operation could not be completed")))}),N(p,la.EventType.MESSAGE,S=>{var P;if(!y){let L=S.data[0];_e(!!L,16349);let H=L,z=H?.error||((P=H[0])===null||P===void 0?void 0:P.error);if(z){j(Tt,`RPC '${e}' stream ${i} received error:`,z);let Ne=z.status,pe=function(I){let T=Ge[I];if(T!==void 0)return ik(T)}(Ne),D=z.message;pe===void 0&&(pe=k.INTERNAL,D="Unknown error status: "+Ne+" with message "+z.message),y=!0,w.__(new B(pe,D)),p.close()}else j(Tt,`RPC '${e}' stream ${i} received:`,L),w.a_(L)}}),N(a,oI.STAT_EVENT,S=>{S.stat===rp.PROXY?j(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===rp.NOPROXY&&j(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function lI(){return typeof document<"u"?document:null}function Wp(t){return new HI(t,!0)}var Ap=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var nM="PersistentStream",Rp=class{constructor(e,n,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Ap(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return _(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return _(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return _(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(kr(n.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new B(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>_(this,null,function*(){this.state=0,this.start()}))}G_(e){return j(nM,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(j(nM,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Tw=class extends Rp{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=b3(this.serializer,e),r=function(o){if(!("targetChange"in o))return ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?er(s.readTime):ie.min()}(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=WI(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=kI(c)?{documents:A3(o,c)}:{query:R3(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=ok(o,s.resumeToken);let l=zI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ie.min())>0){a.readTime=wp(o,s.snapshotVersion.toTimestamp());let l=zI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=P3(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=WI(this.serializer),n.removeTarget=e,this.k_(n)}},Dw=class extends Rp{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=S3(e.writeResults,e.commitTime),r=er(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=WI(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>C3(this.serializer,r))};this.k_(n)}};var bw=class{},Cw=class extends bw{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new B(k.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,qI(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(k.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,qI(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(k.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},Sw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(kr(n),this._a=!1):j("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var zo="RemoteStore",Aw=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>_(this,null,function*(){qo(this)&&(j(zo,"Restarting streams for network reachability change."),yield function(c){return _(this,null,function*(){let l=ne(c);l.Ia.add(4),yield al(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Kp(l)})}(this))}))}),this.Aa=new Sw(r,i)}};function Kp(t){return _(this,null,function*(){if(qo(t))for(let e of t.da)yield e(!0)})}function al(t){return _(this,null,function*(){for(let e of t.da)yield e(!1)})}function gk(t,e){let n=ne(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),cT(n)?aT(n):Oa(n).x_()&&sT(n,e))}function oT(t,e){let n=ne(t),r=Oa(n);n.Ta.delete(e),r.x_()&&mk(n,e),n.Ta.size===0&&(r.x_()?r.B_():qo(n)&&n.Aa.set("Unknown"))}function sT(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oa(t).H_(e)}function mk(t,e){t.Ra.$e(e),Oa(t).Y_(e)}function aT(t){t.Ra=new $I({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Oa(t).start(),t.Aa.aa()}function cT(t){return qo(t)&&!Oa(t).M_()&&t.Ta.size>0}function qo(t){return ne(t).Ia.size===0}function yk(t){t.Ra=void 0}function K3(t){return _(this,null,function*(){t.Aa.set("Online")})}function Q3(t){return _(this,null,function*(){t.Ta.forEach((e,n)=>{sT(t,e)})})}function Y3(t,e){return _(this,null,function*(){yk(t),cT(t)?(t.Aa.la(e),aT(t)):t.Aa.set("Unknown")})}function J3(t,e,n){return _(this,null,function*(){if(t.Aa.set("Online"),e instanceof Ep&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})}(t,e)}catch(r){j(zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Np(t,r)}else if(e instanceof ma?t.Ra.Ye(e):e instanceof _p?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ie.min()))try{let r=yield pk(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.Ta.get(c);if(!h)return;o.Ta.set(c,h.withResumeToken(Dt.EMPTY_BYTE_STRING,h.snapshotVersion)),mk(o,c);let p=new Zu(h.target,c,l,h.sequenceNumber);sT(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){j(zo,"Failed to raise snapshot:",r),yield Np(t,r)}})}function Np(t,e,n){return _(this,null,function*(){if(!xa(e))throw e;t.Ia.add(1),yield al(t),t.Aa.set("Offline"),n||(n=()=>pk(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){j(zo,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield Kp(t)}))})}function vk(t,e){return e().catch(n=>Np(t,n,e))}function Qp(t){return _(this,null,function*(){let e=ne(t),n=ki(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Qw;for(;Z3(e);)try{let i=yield z3(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,X3(e,i)}catch(i){yield Np(e,i)}_k(e)&&Ek(e)})}function Z3(t){return qo(t)&&t.Pa.length<10}function X3(t,e){t.Pa.push(e);let n=ki(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function _k(t){return qo(t)&&!ki(t).M_()&&t.Pa.length>0}function Ek(t){ki(t).start()}function e6(t){return _(this,null,function*(){ki(t).na()})}function t6(t){return _(this,null,function*(){let e=ki(t);for(let n of t.Pa)e.X_(n.mutations)})}function n6(t,e,n){return _(this,null,function*(){let r=t.Pa.shift(),i=VI.from(r,e,n);yield vk(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Qp(t)})}function r6(t,e){return _(this,null,function*(){e&&ki(t).Z_&&(yield function(r,i){return _(this,null,function*(){if(function(s){return v3(s)&&s!==k.ABORTED}(i.code)){let o=r.Pa.shift();ki(r).N_(),yield vk(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Qp(r)}})}(t,e)),_k(t)&&Ek(t)})}function rM(t,e){return _(this,null,function*(){let n=ne(t);n.asyncQueue.verifyOperationInProgress(),j(zo,"RemoteStore received new credentials");let r=qo(n);n.Ia.add(3),yield al(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield Kp(n)})}function i6(t,e){return _(this,null,function*(){let n=ne(t);e?(n.Ia.delete(2),yield Kp(n)):e||(n.Ia.add(2),yield al(n),n.Aa.set("Unknown"))})}function Oa(t){return t.Va||(t.Va=function(n,r,i){let o=ne(n);return o.ia(),new Tw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:K3.bind(null,t),e_:Q3.bind(null,t),n_:Y3.bind(null,t),J_:J3.bind(null,t)}),t.da.push(e=>_(null,null,function*(){e?(t.Va.N_(),cT(t)?aT(t):t.Aa.set("Unknown")):(yield t.Va.stop(),yk(t))}))),t.Va}function ki(t){return t.ma||(t.ma=function(n,r,i){let o=ne(n);return o.ia(),new Dw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:e6.bind(null,t),n_:r6.bind(null,t),ea:t6.bind(null,t),ta:n6.bind(null,t)}),t.da.push(e=>_(null,null,function*(){e?(t.ma.N_(),yield Qp(t)):(yield t.ma.stop(),t.Pa.length>0&&(j(zo,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var Rw=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function uT(t,e){if(kr("AsyncQueue",`${e}: ${t}`),xa(t))return new B(k.UNAVAILABLE,`${e}: ${t}`);throw t}var Pp=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=Uu(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Mp=class{constructor(){this.fa=new Le(W.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Q(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Ra=class t{constructor(e,n,r,i,o,s,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Pp.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Nw=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},Pw=class{constructor(){this.queries=iM(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=ne(n),o=i.queries;i.queries=iM(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new B(k.ABORTED,"Firestore shutting down"))}};function iM(){return new Fr(t=>GM(t),qp)}function lT(t,e){return _(this,null,function*(){let n=ne(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new Nw,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=uT(s,`Initialization of query '${ha(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&hT(n)})}function dT(t,e){return _(this,null,function*(){let n=ne(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function o6(t,e){let n=ne(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&hT(n)}function s6(t,e,n){let r=ne(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function hT(t){t.Da.forEach(e=>{e.next()})}var Mw,oM;(oM=Mw||(Mw={})).Fa="default",oM.Cache="cache";var tl=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ra(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Mw.Cache}};var kp=class{constructor(e){this.key=e}},xp=class{constructor(e){this.key=e}},kw=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=de(),this.mutatedKeys=de(),this.Xa=WM(e),this.eu=new Pp(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new Mp,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=Gp(this.query,p)?p:null,w=!!g&&this.mutatedKeys.has(g.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),S=!1;g&&y?g.data.isEqual(y.data)?w!==N&&(r.track({type:3,doc:y}),S=!0):this.iu(g,y)||(r.track({type:2,doc:y}),S=!0,(c&&this.Xa(y,c)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),S=!0):g&&!y&&(r.track({type:1,doc:g}),S=!0,(c||l)&&(a=!0)),S&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,w){let N=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{At:S})}};return N(y)-N(w)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,s.length!==0||l?{snapshot:new Ra(this.query,e.eu,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Mp,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=de(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new xp(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new kp(r))}),n}uu(e){this.Ha=e.qs,this.Za=de();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ra.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},fT="SyncEngine",xw=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Ow=class{constructor(e){this.key=e,this.lu=!1}},Fw=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Fr(a=>GM(a),qp),this.Tu=new Map,this.Iu=new Set,this.du=new Le(W.comparator),this.Eu=new Map,this.Au=new el,this.Ru={},this.Vu=new Map,this.mu=Xu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function a6(t,e,n=!0){return _(this,null,function*(){let r=Ck(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield Ik(r,e,n,!0),i})}function c6(t,e){return _(this,null,function*(){let n=Ck(t);yield Ik(n,e,!0,!1)})}function Ik(t,e,n,r){return _(this,null,function*(){let i=yield q3(t.localStore,Zn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield u6(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&gk(t.remoteStore,i),a})}function u6(t,e,n,r,i){return _(this,null,function*(){t.gu=(p,g,y)=>function(N,S,P,L){return _(this,null,function*(){let H=S.view.nu(P);H.Ds&&(H=yield eM(N.localStore,S.query,!1).then(({documents:D})=>S.view.nu(D,H)));let z=L&&L.targetChanges.get(S.targetId),Ne=L&&L.targetMismatches.get(S.targetId)!=null,pe=S.view.applyChanges(H,N.isPrimaryClient,z,Ne);return aM(N,S.targetId,pe._u),pe.snapshot})}(t,p,g,y);let o=yield eM(t.localStore,e,!0),s=new kw(e,o.qs),a=s.nu(o.documents),c=Ju.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,c);aM(t,n,l._u);let h=new xw(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function l6(t,e,n){return _(this,null,function*(){let r=ne(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!qp(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield mw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&oT(r.remoteStore,i.targetId),Lw(r,i.targetId)}).catch(ka))):(Lw(r,i.targetId),yield mw(r.localStore,i.targetId,!0))})}function d6(t,e){return _(this,null,function*(){let n=ne(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),oT(n.remoteStore,r.targetId))})}function h6(t,e,n){return _(this,null,function*(){let r=_6(t);try{let i=yield function(s,a){let c=ne(s),l=Qe.now(),h=a.reduce((y,w)=>y.add(w.key),de()),p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Lr(),N=de();return c.Os.getEntries(y,h).next(S=>{w=S,w.forEach((P,L)=>{L.isValidDocument()||(N=N.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,w)).next(S=>{p=S;let P=[];for(let L of a){let H=y3(L,p.get(L.key).overlayedDocument);H!=null&&P.push(new rr(L.key,H,UM(H.value.mapValue),Xn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,P,a)}).next(S=>{g=S;let P=S.applyToLocalDocumentSet(p,N);return c.documentOverlayCache.saveOverlays(y,S.batchId,P)})}).then(()=>({batchId:g.batchId,changes:QM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ru[s.currentUser.toKey()];l||(l=new Le(ce)),l=l.insert(a,c),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,n),yield cl(r,i.changes),yield Qp(r.remoteStore)}catch(i){let o=uT(i,"Failed to persist write");n.reject(o)}})}function wk(t,e){return _(this,null,function*(){let n=ne(t);try{let r=yield $3(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?_e(s.lu,14607):i.removedDocuments.size>0&&(_e(s.lu,42227),s.lu=!1))}),yield cl(n,r,e)}catch(r){yield ka(r)}})}function sM(t,e,n){let r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=ne(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&hT(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function f6(t,e,n){return _(this,null,function*(){let r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Le(W.comparator);s=s.insert(o,Nn.newNoDocument(o,ie.min()));let a=de().add(o),c=new vp(ie.min(),new Map,new Le(ce),s,a);yield wk(r,c),r.du=r.du.remove(o),r.Eu.delete(e),pT(r)}else yield mw(r.localStore,e,!1).then(()=>Lw(r,e,n)).catch(ka)})}function p6(t,e){return _(this,null,function*(){let n=ne(t),r=e.batch.batchId;try{let i=yield B3(n.localStore,e);Dk(n,r,null),Tk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield cl(n,i)}catch(i){yield ka(i)}})}function g6(t,e,n){return _(this,null,function*(){let r=ne(t);try{let i=yield function(s,a){let c=ne(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(_e(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);Dk(r,e,n),Tk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield cl(r,i)}catch(i){yield ka(i)}})}function Tk(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function Dk(t,e,n){let r=ne(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Lw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||bk(t,r)})}function bk(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(oT(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),pT(t))}function aM(t,e,n){for(let r of n)r instanceof kp?(t.Au.addReference(r.key,e),m6(t,r)):r instanceof xp?(j(fT,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||bk(t,r.key)):Q(19791,{yu:r})}function m6(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(j(fT,"New document in limbo: "+n),t.Iu.add(r),pT(t))}function pT(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new W(Re.fromString(e)),r=t.mu.next();t.Eu.set(r,new Ow(n)),t.du=t.du.insert(n,r),gk(t.remoteStore,new Zu(Zn(zp(n.path)),r,"TargetPurposeLimboResolution",Kw.ue))}}function cl(t,e,n){return _(this,null,function*(){let r=ne(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=hw.Es(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(c,l){return _(this,null,function*(){let h=ne(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,g=>x.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>x.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!xa(p))throw p;j(iT,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),w=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(w);h.Fs=h.Fs.insert(g,N)}}})}(r.localStore,o))})}function y6(t,e){return _(this,null,function*(){let n=ne(t);if(!n.currentUser.isEqual(e)){j(fT,"User change. New user:",e.toKey());let r=yield fk(n.localStore,e);n.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new B(k.CANCELLED,s))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield cl(n,r.Bs)}})}function v6(t,e){let n=ne(t),r=n.Eu.get(e);if(r&&r.lu)return de().add(r.key);{let i=de(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function Ck(t){let e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=v6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=f6.bind(null,e),e.hu.J_=o6.bind(null,e.eventManager),e.hu.pu=s6.bind(null,e.eventManager),e}function _6(t){let e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=p6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=g6.bind(null,e),e}var Sk=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=Wp(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return U3(this.persistence,new pw,n.initialUser,this.serializer)}Du(n){return new Dp(dw.Vi,this.serializer)}bu(n){return new yw}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),Vw=class extends Sk{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){_e(this.persistence.referenceDelegate instanceof bp,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new ZI(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new Dp(r=>bp.Vi(r,n),this.serializer)}};var E6=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>sM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=y6.bind(null,this.syncEngine),yield i6(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new Pw}()}createDatastore(n){let r=Wp(n.databaseInfo.databaseId),i=function(s){return new ww(s)}(n.databaseInfo);return function(s,a,c,l){return new Cw(s,a,c,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,a,c){return new Aw(i,o,s,a,c)}(this.localStore,this.datastore,n.asyncQueue,r=>sM(this.syncEngine,r,0),function(){return Sp.C()?new Sp:new vw}())}createSyncEngine(n,r){return function(o,s,a,c,l,h,p){let g=new Fw(o,s,a,c,l,h);return p&&(g.fu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield function(o){return _(this,null,function*(){let s=ne(o);j(zo,"RemoteStore shutting down."),s.Ia.add(5),yield al(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var nl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var xi="FirestoreClient",jw=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=it.UNAUTHENTICATED,this.clientId=qu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){j(xi,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(j(xi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=uT(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function dI(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),j(xi,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield fk(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Pi("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{j("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Pi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function cM(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield I6(t);j(xi,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>rM(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>rM(e.remoteStore,i)),t._onlineComponents=e})}function I6(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j(xi,"Using user provided OfflineComponentProvider");try{yield dI(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===k.FAILED_PRECONDITION||i.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Pi("Error using user provided cache. Falling back to memory cache: "+n),yield dI(t,new Sk)}}else j(xi,"Using default OfflineComponentProvider"),yield dI(t,new Vw(void 0));return t._offlineComponents})}function Ak(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(j(xi,"Using user provided OnlineComponentProvider"),yield cM(t,t._uninitializedComponentsProvider._online)):(j(xi,"Using default OnlineComponentProvider"),yield cM(t,new E6))),t._onlineComponents})}function w6(t){return Ak(t).then(e=>e.syncEngine)}function Op(t){return _(this,null,function*(){let e=yield Ak(t),n=e.eventManager;return n.onListen=a6.bind(null,e.syncEngine),n.onUnlisten=l6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=c6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=d6.bind(null,e.syncEngine),n})}function T6(t,e,n={}){let r=new Rn;return t.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(o,s,a,c,l){let h=new nl({next:g=>{h.Ou(),s.enqueueAndForget(()=>dT(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new B(k.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?l.reject(new B(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new tl(zp(a.path),h,{includeMetadataChanges:!0,ka:!0});return lT(o,p)}(yield Op(t),t.asyncQueue,e,n,r)})),r.promise}function D6(t,e,n={}){let r=new Rn;return t.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(o,s,a,c,l){let h=new nl({next:g=>{h.Ou(),s.enqueueAndForget(()=>dT(o,p)),g.fromCache&&c.source==="server"?l.reject(new B(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new tl(a,h,{includeMetadataChanges:!0,ka:!0});return lT(o,p)}(yield Op(t),t.asyncQueue,e,n,r)})),r.promise}function Rk(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var uM=new Map;var Nk="firestore.googleapis.com",lM=!0,Fp=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Nk,this.ssl=lM}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:lM;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L3)throw new B(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Na=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hI;switch(r.type){case"firstParty":return new mI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=uM.get(n);r&&(j("ComponentProvider","Removing Datastore"),uM.delete(n),r.terminate())}(this),Promise.resolve()}};function Pk(t,e,n,r={}){var i;t=$t(t,Na);let o=mi(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;o&&(Af(`https://${c}`),Rf("Firestore",!0)),s.host!==Nk&&s.host!==c&&Pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Gn(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=it.MOCK_USER;else{h=VR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new B(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new it(g)}t._authCredentials=new fI(new lp(h,p))}}var rl=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},st=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Si(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(sl(n,t._jsonSchema))return new t(e,r||null,new W(Re.fromString(n.referencePath)))}};st._jsonSchemaVersion="firestore/documentReference/1.0",st._jsonSchema={type:Ke("string",st._jsonSchemaVersion),referencePath:Ke("string")};var Si=class t extends rl{constructor(e,n,r){super(e,n,zp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new W(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function b6(t,e,...n){if(t=Be(t),mM("collection","path",e),t instanceof Na){let r=Re.fromString(e,...n);return RP(r),new Si(t,null,r)}{if(!(t instanceof st||t instanceof Si))throw new B(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Re.fromString(e,...n));return RP(r),new Si(t.firestore,null,r)}}function Fa(t,e,...n){if(t=Be(t),arguments.length===1&&(e=qu.newId()),mM("doc","path",e),t instanceof Na){let r=Re.fromString(e,...n);return AP(r),new st(t,null,new W(r))}{if(!(t instanceof st||t instanceof Si))throw new B(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Re.fromString(e,...n));return AP(r),new st(t.firestore,t instanceof Si?t.converter:null,new W(r))}}var dM="AsyncQueue",Lp=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Ap(this,"async_queue_retry"),this.oc=()=>{let r=lI();r&&j(dM,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=lI();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=lI();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new Rn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return _(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!xa(e))throw e;j(dM,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,kr("INTERNAL UNHANDLED ERROR: ",hM(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=Rw.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Q(47125,{hc:hM(this.tc)})}verifyOperationInProgress(){}Pc(){return _(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function hM(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function fM(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var Pn=class extends Na{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Lp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Lp(e),this._firestoreClient=void 0,yield e}})}};function Mk(t,e){let n=typeof t=="object"?t:Co(),r=typeof t=="string"?t:e||gp,i=oa(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=LR("firestore");o&&Pk(i,...o)}return i}function Yp(t){if(t._terminated)throw new B(k.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||C6(t),t._firestoreClient}function C6(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,l,h){return new II(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Rk(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new jw(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}var Ai=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Dt.fromBase64String(e))}catch(n){throw new B(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sl(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Ai._jsonSchemaVersion="firestore/bytes/1.0",Ai._jsonSchema={type:Ke("string",Ai._jsonSchemaVersion),bytes:Ke("string")};var Pa=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var il=class{constructor(e){this._methodName=e}};var Ri=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(sl(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Ri._jsonSchemaVersion="firestore/geoPoint/1.0",Ri._jsonSchema={type:Ke("string",Ri._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};var Ni=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sl(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new B(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ni._jsonSchemaVersion="firestore/vectorValue/1.0",Ni._jsonSchema={type:Ke("string",Ni._jsonSchemaVersion),vectorValues:Ke("object")};var S6=/^__.*__$/,Uw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ho(e,this.data,n,this.fieldTransforms)}},Vp=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new rr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function kk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ec:t})}}var Bw=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Up(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(kk(this.Ec)&&S6.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},$w=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Wp(e)}Dc(e,n,r,i=!1){return new Bw({Ec:e,methodName:n,bc:r,path:Jt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function gT(t){let e=t._freezeSettings(),n=Wp(t._databaseId);return new $w(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xk(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);mT("Data must be an object, but it was:",s,r);let a=Ok(r,s),c,l;if(o.merge)c=new an(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=Hw(e,p,n);if(!s.contains(g))throw new B(k.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Lk(h,g)||h.push(g)}c=new an(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new Uw(new Yt(a),c,l)}var jp=class t extends il{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function A6(t,e,n,r){let i=t.Dc(1,e,n);mT("Data must be an object, but it was:",i,r);let o=[],s=Yt.empty();Oi(r,(c,l)=>{let h=yT(e,c,n);l=Be(l);let p=i.gc(h);if(l instanceof jp)o.push(h);else{let g=Jp(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new an(o);return new Vp(s,a,i.fieldTransforms)}function R6(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[Hw(e,r,n)],c=[i];if(o.length%2!=0)throw new B(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(Hw(e,o[g])),c.push(o[g+1]);let l=[],h=Yt.empty();for(let g=a.length-1;g>=0;--g)if(!Lk(l,a[g])){let y=a[g],w=c[g];w=Be(w);let N=s.gc(y);if(w instanceof jp)l.push(y);else{let S=Jp(w,N);S!=null&&(l.push(y),h.set(y,S))}}let p=new an(l);return new Vp(h,p,s.fieldTransforms)}function Jp(t,e){if(Fk(t=Be(t)))return mT("Unsupported field value:",e,t),Ok(t,e);if(t instanceof il)return function(r,i){if(!kk(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Jp(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Be(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return h3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Qe.fromDate(r);return{timestampValue:wp(i.serializer,o)}}if(r instanceof Qe){let o=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wp(i.serializer,o)}}if(r instanceof Ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ai)return{bytesValue:ok(i.serializer,r._byteString)};if(r instanceof st){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:rT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ni)return function(s,a){return{mapValue:{fields:{[Jw]:{stringValue:Zw},[_a]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return nT(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Ww(r)}`)}(t,e)}function Ok(t,e){let n={};return MM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oi(t,(r,i)=>{let o=Jp(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function Fk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof Ri||t instanceof Ai||t instanceof st||t instanceof il||t instanceof Ni)}function mT(t,e,n){if(!Fk(n)||!yM(n)){let r=Ww(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Hw(t,e,n){if((e=Be(e))instanceof Pa)return e._internalPath;if(typeof e=="string")return yT(t,e);throw Up("Field path arguments must be of type string or ",t,!1,void 0,n)}var N6=new RegExp("[~\\*/\\[\\]]");function yT(t,e,n){if(e.search(N6)>=0)throw Up(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pa(...e.split("."))._internalPath}catch{throw Up(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Up(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new B(k.INVALID_ARGUMENT,a+t+c)}function Lk(t,e){return t.some(n=>n.isEqual(e))}var Bp=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new zw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Vk("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},zw=class extends Bp{data(){return super.data()}};function Vk(t,e){return typeof e=="string"?yT(t,e):e instanceof Pa?e._internalPath:e._delegate._internalPath}function jk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var qw=class{convertValue(e,n="none"){switch(Mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Oi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[_a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ae(s.doubleValue));return new Ni(o)}convertGeoPoint(e){return new Ri(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Hp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ku(e));default:return null}}convertTimestamp(e){let n=xr(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Re.fromString(e);_e(dk(r),9688,{name:e});let i=new mp(r.get(1),r.get(3)),o=new W(r.popFirst(5));return i.isEqual(n)||kr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Uk(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Fo=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Lo=class t extends Bp{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ya(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Vk("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lo._jsonSchema={type:Ke("string",Lo._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};var ya=class extends Lo{data(e={}){return super.data(e)}},Vo=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ya(this._firestore,this._userDataWriter,r.key,r,new Fo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new ya(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new ya(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:P6(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function P6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}function vT(t){t=$t(t,st);let e=$t(t.firestore,Pn);return T6(Yp(e),t._key).then(n=>Bk(e,t,n))}Vo._jsonSchemaVersion="firestore/querySnapshot/1.0",Vo._jsonSchema={type:Ke("string",Vo._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};var ol=class extends qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ai(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}};function M6(t){t=$t(t,rl);let e=$t(t.firestore,Pn),n=Yp(e),r=new ol(e);return jk(t._query),D6(n,t._query).then(i=>new Vo(e,r,t,i))}function _T(t,e,n){t=$t(t,st);let r=$t(t.firestore,Pn),i=Uk(t.converter,e,n);return Zp(r,[xk(gT(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Xn.none())])}function ET(t,e,n,...r){t=$t(t,st);let i=$t(t.firestore,Pn),o=gT(i),s;return s=typeof(e=Be(e))=="string"||e instanceof Pa?R6(o,"updateDoc",t._key,e,n,r):A6(o,"updateDoc",t._key,e),Zp(i,[s.toMutation(t._key,Xn.exists(!0))])}function k6(t){return Zp($t(t.firestore,Pn),[new Yu(t._key,Xn.none())])}function x6(t,e){let n=$t(t.firestore,Pn),r=Fa(t),i=Uk(t.converter,e);return Zp(n,[xk(gT(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Xn.exists(!1))]).then(()=>r)}function IT(t,...e){var n,r,i;t=Be(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||fM(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(fM(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(t instanceof st)l=$t(t.firestore,Pn),h=zp(t._key.path),c={next:p=>{e[s]&&e[s](Bk(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=$t(t,rl);l=$t(p.firestore,Pn),h=p._query;let g=new ol(l);c={next:y=>{e[s]&&e[s](new Vo(l,g,p,y))},error:e[s+1],complete:e[s+2]},jk(t._query)}return function(g,y,w,N){let S=new nl(N),P=new tl(y,S,w);return g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return lT(yield Op(g),P)})),()=>{S.Ou(),g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return dT(yield Op(g),P)}))}}(Yp(l),h,a,c)}function Zp(t,e){return function(r,i){let o=new Rn;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return h6(yield w6(r),i,o)})),o.promise}(Yp(t),e)}function Bk(t,e,n){let r=n.docs.get(e._key),i=new ol(t);return new Lo(t,i,e._key,r,new Fo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ma=i})(vi),Cn(new kt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Pn(new pI(r.getProvider("auth-internal")),new yI(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mp(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Fe(DP,bP,e),Fe(DP,bP,"esm2017")})();var Xp=function(){return Xp=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Xp.apply(this,arguments)};var L6={includeMetadataChanges:!1};function $k(t,e){return e===void 0&&(e=L6),new J(function(n){var r=IT(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function Hk(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Xp(Xp({},r),(n={},n[e.idField]=t.id,n))}function zk(t){return $k(t,{includeMetadataChanges:!0}).pipe(X(function(e){return e.docs}))}function qk(t,e){return e===void 0&&(e={}),zk(t).pipe(X(function(n){return n.map(function(r){return Hk(r,e)})}))}var Go=class{constructor(e){return e}},Gk="firestore",wT=class{constructor(){return aa(Gk)}};var TT=new U("angularfire2.firestore-instances");function V6(t,e){let n=Cu(Gk,t,e);return n&&new Go(n)}function j6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Go(r)}}var U6={provide:wT,deps:[[new Pt,TT]]},B6={provide:Go,useFactory:V6,deps:[[new Pt,TT],Sr]};function Bue(t,...e){return Fe("angularfire",_i.full,"fst"),Ft([B6,U6,{provide:TT,useFactory:j6(t),multi:!0,deps:[ge,Ze,Ei,Ao,[new Pt,Vu],[new Pt,ca],...e]}])}var $ue=Sn(qk,!0);var Hue=Sn(Mk,!0);var Wk=class t{auth=M(ko);db=M(Go);user$;constructor(){this.user$=vP(this.auth)}get currentUser$(){return this.user$}isLoggedIn(){return this.currentUser$.pipe(X(e=>!!e))}signUp(e){return Ie(_P(this.auth,e.email,e.password)).pipe(lt(n=>{let r={uid:n.user.uid,email:e.email,name:e.name,age:e.age,imageUrl:e.imageUrl};return _T(Fa(this.db,"users",n.user.uid),r)}))}signIn(e,n){return Ie(EP(this.auth,e,n))}logout(){return Ie(IP(this.auth))}getUserData(e){return Ie(vT(Fa(this.db,"users",e)))}updateProfileImage(e,n){return new Promise((r,i)=>{let o=new FileReader;o.onload=()=>_(this,null,function*(){try{let s=o.result,a=Fa(this.db,"users",n);yield ET(a,{imageUrl:s}),r(s)}catch(s){i(s)}}),o.onerror=s=>i(s),o.readAsDataURL(e)})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})};export{V as a,ye as b,kx as c,Me as d,Ye as e,ct as f,Ie as g,K as h,X as i,Xx as j,ut as k,tO as l,Mn as m,Lg as n,lt as o,qi as p,F as q,vd as r,$ as s,Yr as t,U as u,q as v,M as w,Mb as x,kb as y,ze as z,bc as A,ho as B,hh as C,Gt as D,m1 as E,dS as F,hS as G,B1 as H,$1 as I,aF as J,co as K,fo as L,Ee as M,ai as N,Sv as O,go as P,vn as Q,ks as R,oA as S,Et as T,ge as U,mo as V,pV as W,mV as X,yV as Y,vV as Z,_V as _,EV as $,IV as aa,fA as ba,xv as ca,Ov as da,Rh as ea,pA as fa,gA as ga,DV as ha,Ph as ia,RV as ja,NV as ka,Lv as la,Vv as ma,PV as na,IA as oa,$V as pa,ej as qa,SA as ra,jv as sa,AA as ta,NA as ua,rj as va,PA as wa,ij as xa,oj as ya,lj as za,dj as Aa,hj as Ba,pj as Ca,mj as Da,yj as Ea,_j as Fa,Os as Ga,wj as Ha,Ls as Ia,xh as Ja,Er as Ka,y2 as La,v2 as Ma,I2 as Na,w2 as Oa,D2 as Pa,b2 as Qa,y0 as Ra,f_ as Sa,$2 as Ta,li as Ua,F0 as Va,gU as Wa,mU as Xa,wn as Ya,Dr as Za,O_ as _a,na as $a,Df as ab,WB as bb,YB as cb,fi as db,n$ as eb,goe as fb,ft as gb,U_ as hb,B_ as ib,r$ as jb,Soe as kb,Aoe as lb,Roe as mb,Noe as nb,Poe as ob,Moe as pb,MR as qb,sN as rb,gse as sb,xse as tb,ice as ub,oce as vb,b6 as wb,Fa as xb,M6 as yb,k6 as zb,x6 as Ab,Go as Bb,Bue as Cb,$ue as Db,Hue as Eb,Wk as Fb};
