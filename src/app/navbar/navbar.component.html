<!-- Navbar container with animation on visibility and scroll styling -->
<div appAnimateOnScroll="slideDown"
  [ngClass]="{ 'scrolled': isScrolled }"
  class="navigation-bar px-3 py-2">

  <div class="">
    <!-- Navbar layout container -->
    <div id="navigation-bar-links">

      <!-- Logo with routing to home page -->
      <div routerLink="home-page" class="logo">
        <i class="fa-solid fa-clapperboard"></i>
        <span class="px-1">Media</span>
      </div>

      <!-- Show search input only if showSearch is true -->
      <div [ngStyle]="{display:(showSearch)?'block':'none'}" class="input-search">
        <div class="position-relative search-box">
          <input type="text" class="w-100" placeholder="Search Your Videos"
            (input)="onSearchInput($event)">
            @if (searchResults.length > 0) {
            <div @slideDown class="search-result-item w-100 p-2 
              rounded-4 position-absolute top-100 start-0">
                @for(item of searchResults;track item.id){
                  @if (item.poster_path|| item.profile_path) {
                    <div
                      (click)="goToMediaDetails(item.media_type,item.id)"
                      class="bg-black my-3 p-3 rounded-4">
                      @if (item.poster_path) {
                        <img class="img-search rounded-4"
                          [src]="'https://image.tmdb.org/t/p/w500' + item.poster_path"
                          alt="{{item.title || item.name}}" />
                      }
                      @if (item.profile_path) {
                        <img class="img-search rounded-4"
                          [src]="'https://image.tmdb.org/t/p/w500' + item.profile_path"
                          alt="{{item.title || item.name}}" />
                      }
                      <span class="p-3">{{item.title || item.name}}</span>
                    </div>
                  }
                }
              </div>
            }
            <!-- Icon inside the search box -->
            <div class="position-absolute top-0 end-0 py-2 px-3">
              <i class="fa-solid fa-magnifying-glass"></i>
            </div>
          </div>
        </div>

        <!-- Buttons section in the navbar -->
        <div class="navbar-button d-flex align-items-center gap-3">
          <!-- Search button triggers toggleSearch() -->
          <button #searchBtn (click)="toggleSearch()" class="button-search btn btn-dark">
            <i class="fa-solid fa-magnifying-glass"></i>
            <span class="responsive-icon"> Search</span>
          </button>

          <!-- Notification button -->
          <button class="btn btn-dark">
            <i class="fa-solid fa-bell"></i>
          </button>

          <!-- Upload button -->
          <button routerLink="dashboard" class="btn btn-dark dashboard-button">
           <i class="fa-solid fa-grip fa-1x"></i> Dashboard
          </button>
          <!-- sign in button -->
           @if(!(isLoggedIn$ | async)){
              <button routerLink="signIn" class="btn btn-dark button-mix-color">
            <i class="fa-solid fa-user responsive-icon"></i> Sign In
          </button>
           }
          @if((isLoggedIn$ | async) && profileImageUrl){
             <div class="profile-avatar" routerLink="profile">
                <img [src]="profileImageUrl" alt="Profile" />
              </div>
          }

          <!-- Sidebar toggle button -->
          <button (click)="onButtonOpenSideBar()" #sidebarToggleBtn class="btn btn-dark button-list-side-bar">
            <i class="fa-solid fa-bars"></i>
          </button>
        </div>

      </div>
    </div>
  </div>
