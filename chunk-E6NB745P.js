var Sx=Object.defineProperty,Ax=Object.defineProperties;var Rx=Object.getOwnPropertyDescriptors;var wl=Object.getOwnPropertySymbols,Nx=Object.getPrototypeOf,DD=Object.prototype.hasOwnProperty,bD=Object.prototype.propertyIsEnumerable,Px=Reflect.get;var TD=(t,e,n)=>e in t?Sx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V=(t,e)=>{for(var n in e||={})DD.call(e,n)&&TD(t,n,e[n]);if(wl)for(var n of wl(e))bD.call(e,n)&&TD(t,n,e[n]);return t},ye=(t,e)=>Ax(t,Rx(e));var Mx=(t,e)=>{var n={};for(var r in t)DD.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&wl)for(var r of wl(t))e.indexOf(r)<0&&bD.call(t,r)&&(n[r]=t[r]);return n};var $r=(t,e,n)=>Px(Nx(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});function re(t){return typeof t=="function"}function Yo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Tl=Yo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ui(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Me=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof Tl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{CD(o)}catch(s){e=e??[],s instanceof Tl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Tl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)CD(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ui(n,e)}remove(e){let{_finalizers:n}=this;n&&Ui(n,e),e instanceof t&&e._removeParent(this)}};Me.EMPTY=(()=>{let t=new Me;return t.closed=!0,t})();var Tg=Me.EMPTY;function Dl(t){return t instanceof Me||t&&"closed"in t&&re(t.remove)&&re(t.add)&&re(t.unsubscribe)}function CD(t){re(t)?t():t.unsubscribe()}var un={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Jo={setTimeout(t,e,...n){let{delegate:r}=Jo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Jo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function bl(t){Jo.setTimeout(()=>{let{onUnhandledError:e}=un;if(e)e(t);else throw t})}function nc(){}var SD=Dg("C",void 0,void 0);function AD(t){return Dg("E",void 0,t)}function RD(t){return Dg("N",t,void 0)}function Dg(t,e,n){return{kind:t,value:e,error:n}}var Bi=null;function Zo(t){if(un.useDeprecatedSynchronousErrorHandling){let e=!Bi;if(e&&(Bi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Bi;if(Bi=null,n)throw r}}else t()}function ND(t){un.useDeprecatedSynchronousErrorHandling&&Bi&&(Bi.errorThrown=!0,Bi.error=t)}var $i=class extends Me{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Dl(e)&&e.add(this)):this.destination=Ox}static create(e,n,r){return new Xo(e,n,r)}next(e){this.isStopped?Cg(RD(e),this):this._next(e)}error(e){this.isStopped?Cg(AD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Cg(SD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},kx=Function.prototype.bind;function bg(t,e){return kx.call(t,e)}var Sg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Cl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Cl(r)}else Cl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Cl(n)}}},Xo=class extends $i{constructor(e,n,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&un.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&bg(e.next,o),error:e.error&&bg(e.error,o),complete:e.complete&&bg(e.complete,o)}):i=e}this.destination=new Sg(i)}};function Cl(t){un.useDeprecatedSynchronousErrorHandling?ND(t):bl(t)}function xx(t){throw t}function Cg(t,e){let{onStoppedNotification:n}=un;n&&Jo.setTimeout(()=>n(t,e))}var Ox={closed:!0,next:nc,error:xx,complete:nc};var es=typeof Symbol=="function"&&Symbol.observable||"@@observable";function St(t){return t}function Sl(...t){return Ag(t)}function Ag(t){return t.length===0?St:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var J=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Lx(n)?n:new Xo(n,r,i);return Zo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=PD(r),new r((i,o)=>{let s=new Xo({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[es](){return this}pipe(...n){return Ag(n)(this)}toPromise(n){return n=PD(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function PD(t){var e;return(e=t??un.Promise)!==null&&e!==void 0?e:Promise}function Fx(t){return t&&re(t.next)&&re(t.error)&&re(t.complete)}function Lx(t){return t&&t instanceof $i||Fx(t)&&Dl(t)}var{isArray:Vx}=Array,{getPrototypeOf:jx,prototype:Ux,keys:Bx}=Object;function Al(t){if(t.length===1){let e=t[0];if(Vx(e))return{args:e,keys:null};if($x(e)){let n=Bx(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function $x(t){return t&&typeof t=="object"&&jx(t)===Ux}function Rg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function kD(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function c(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function MD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hi(t){return this instanceof Hi?(this.v=t,this):new Hi(t)}function xD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(w){return Promise.resolve(w).then(y,p)}}function a(y,w){r[y]&&(i[y]=function(N){return new Promise(function(S,P){o.push([y,N,S,P])>1||c(y,N)})},w&&(i[y]=w(i[y])))}function c(y,w){try{l(r[y](w))}catch(N){g(o[0][3],N)}}function l(y){y.value instanceof Hi?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){c("next",y)}function p(y){c("throw",y)}function g(y,w){y(w),o.shift(),o.length&&c(o[0][0],o[0][1])}}function OD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof MD=="function"?MD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Rl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Nl(t){return re(t?.then)}function Pl(t){return re(t[es])}function Ml(t){return Symbol.asyncIterator&&re(t?.[Symbol.asyncIterator])}function kl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Hx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xl=Hx();function Ol(t){return re(t?.[xl])}function Fl(t){return xD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Hi(n.read());if(i)return yield Hi(void 0);yield yield Hi(r)}}finally{n.releaseLock()}})}function Ll(t){return re(t?.getReader)}function $e(t){if(t instanceof J)return t;if(t!=null){if(Pl(t))return zx(t);if(Rl(t))return qx(t);if(Nl(t))return Gx(t);if(Ml(t))return FD(t);if(Ol(t))return Wx(t);if(Ll(t))return Kx(t)}throw kl(t)}function zx(t){return new J(e=>{let n=t[es]();if(re(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function qx(t){return new J(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Gx(t){return new J(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,bl)})}function Wx(t){return new J(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function FD(t){return new J(e=>{Qx(t,e).catch(n=>e.error(n))})}function Kx(t){return FD(Fl(t))}function Qx(t,e){var n,r,i,o;return kD(this,void 0,void 0,function*(){try{for(n=OD(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function LD(t){return t&&re(t.schedule)}function VD(t){return t[t.length-1]}function Vl(t){return re(VD(t))?t.pop():void 0}function Hr(t){return LD(VD(t))?t.pop():void 0}function se(t,e,n,r,i){return new Ng(t,e,n,r,i)}var Ng=class extends $i{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Pg(t){return re(t?.lift)}function ue(t){return e=>{if(Pg(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function X(t,e){return ue((n,r)=>{let i=0;n.subscribe(se(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:Yx}=Array;function Jx(t,e){return Yx(e)?t(...e):t(e)}function jl(t){return X(e=>Jx(t,e))}function Ul(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Zx(...t){let e=Vl(t),{args:n,keys:r}=Al(t),i=new J(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let h=0;h<s;h++){let p=!1;$e(n[h]).subscribe(se(o,g=>{p||(p=!0,l--),a[h]=g},()=>c--,void 0,()=>{(!c||!p)&&(l||o.next(r?Ul(r,a):a),o.complete())}))}});return e?i.pipe(jl(e)):i}var xt=new J(t=>t.complete());function Nn(t){return t<=0?()=>xt:ue((e,n)=>{let r=0;e.subscribe(se(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function ts(){return ue((t,e)=>{let n=null;t._refCount++;let r=se(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ns=class extends J{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Pg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Me;let n=this.getSubject();e.add(this.source.subscribe(se(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Me.EMPTY)}return e}refCount(){return ts()(this)}};var jD=Yo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ye=(()=>{class t extends J{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Bl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new jD}next(n){Zo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Zo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Zo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Tg:(this.currentObservers=null,o.push(n),new Me(()=>{this.currentObservers=null,Ui(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new J;return n.source=this,n}}return t.create=(e,n)=>new Bl(e,n),t})(),Bl=class extends Ye{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Tg}};var ct=class extends Ye{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Mg={now(){return(Mg.delegate||Date).now()},delegate:void 0};var $l=class extends Me{constructor(e,n){super()}schedule(e,n=0){return this}};var rc={setInterval(t,e,...n){let{delegate:r}=rc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=rc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var rs=class extends $l{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return rc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&rc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ui(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var is=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};is.now=Mg.now;var os=class extends is{constructor(e,n=is.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var ic=new os(rs);var Hl=class extends rs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var zl=class extends os{};var kg=new zl(Hl);function Ot(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function zr(t,e=0){return ue((n,r)=>{n.subscribe(se(r,i=>Ot(r,t,()=>r.next(i),e),()=>Ot(r,t,()=>r.complete(),e),i=>Ot(r,t,()=>r.error(i),e)))})}function qr(t,e=0){return ue((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function UD(t,e){return $e(t).pipe(qr(e),zr(e))}function BD(t,e){return $e(t).pipe(qr(e),zr(e))}function $D(t,e){return new J(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function HD(t,e){return new J(n=>{let r;return Ot(n,e,()=>{r=t[xl](),Ot(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function ql(t,e){if(!t)throw new Error("Iterable cannot be null");return new J(n=>{Ot(n,e,()=>{let r=t[Symbol.asyncIterator]();Ot(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function zD(t,e){return ql(Fl(t),e)}function qD(t,e){if(t!=null){if(Pl(t))return UD(t,e);if(Rl(t))return $D(t,e);if(Nl(t))return BD(t,e);if(Ml(t))return ql(t,e);if(Ol(t))return HD(t,e);if(Ll(t))return zD(t,e)}throw kl(t)}function Ie(t,e){return e?qD(t,e):$e(t)}function K(...t){let e=Hr(t);return Ie(t,e)}function ss(t,e){let n=re(t)?t:()=>t,r=i=>i.error(n());return new J(e?i=>e.schedule(r,0,i):r)}function xg(t){return!!t&&(t instanceof J||re(t.lift)&&re(t.subscribe))}var ar=Yo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Gl(...t){let e=Hr(t),n=Vl(t),{args:r,keys:i}=Al(t);if(r.length===0)return Ie([],e);let o=new J(Xx(r,e,i?s=>Ul(i,s):St));return n?o.pipe(jl(n)):o}function Xx(t,e,n=St){return r=>{GD(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)GD(e,()=>{let l=Ie(t[c],e),h=!1;l.subscribe(se(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function GD(t,e,n){t?Ot(n,t,e):e()}function WD(t,e,n,r,i,o,s,a){let c=[],l=0,h=0,p=!1,g=()=>{p&&!c.length&&!l&&e.complete()},y=N=>l<r?w(N):c.push(N),w=N=>{o&&e.next(N),l++;let S=!1;$e(n(N,h++)).subscribe(se(e,P=>{i?.(P),o?y(P):e.next(P)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<r;){let P=c.shift();s?Ot(e,s,()=>w(P)):w(P)}g()}catch(P){e.error(P)}}))};return t.subscribe(se(e,y,()=>{p=!0,g()})),()=>{a?.()}}function He(t,e,n=1/0){return re(e)?He((r,i)=>X((o,s)=>e(r,o,i,s))($e(t(r,i))),n):(typeof e=="number"&&(n=e),ue((r,i)=>WD(r,i,t,n)))}function as(t=1/0){return He(St,t)}function KD(){return as(1)}function cs(...t){return KD()(Ie(t,Hr(t)))}function oc(t){return new J(e=>{$e(t()).subscribe(e)})}function ut(t,e){return ue((n,r)=>{let i=0;n.subscribe(se(r,o=>t.call(e,o,i++)&&r.next(o)))})}function cr(t){return ue((e,n)=>{let r=null,i=!1,o;r=e.subscribe(se(n,void 0,void 0,s=>{o=$e(t(s,cr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function QD(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(se(s,h=>{let p=l++;c=a?t(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ur(t,e){return re(e)?He(t,e,1):He(t,1)}function eO(t,e=ic){return ue((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+t,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}n.subscribe(se(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Gr(t){return ue((e,n)=>{let r=!1;e.subscribe(se(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Og(t,e=St){return t=t??tO,ue((n,r)=>{let i,o=!0;n.subscribe(se(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function tO(t,e){return t===e}function Wl(t=nO){return ue((e,n)=>{let r=!1;e.subscribe(se(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function nO(){return new ar}function zi(t){return ue((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function lr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ut((i,o)=>t(i,o,r)):St,Nn(1),n?Gr(e):Wl(()=>new ar))}function us(t){return t<=0?()=>xt:ue((e,n)=>{let r=[];e.subscribe(se(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Fg(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ut((i,o)=>t(i,o,r)):St,us(1),n?Gr(e):Wl(()=>new ar))}function Kl(t,e){return ue(QD(t,e,arguments.length>=2,!0))}function Ql(...t){let e=Hr(t);return ue((n,r)=>{(e?cs(t,n,e):cs(t,n)).subscribe(r)})}function lt(t,e){return ue((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(se(r,c=>{i?.unsubscribe();let l=0,h=o++;$e(t(c,h)).subscribe(i=se(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function qi(t){return ue((e,n)=>{$e(t).subscribe(se(n,()=>n.complete(),nc)),!n.closed&&e.subscribe(n)})}function et(t,e,n){let r=re(t)||e||n?{next:t,error:e,complete:n}:t;return r?ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(se(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):St}var Lg;function Yl(){return Lg}function Pn(t){let e=Lg;return Lg=t,e}var YD=Symbol("NotFound");function ls(t){return t===YD||t?.name==="\u0275NotFound"}function td(t,e){return Object.is(t,e)}var vt=null,Jl=!1,Vg=1,rO=null,_t=Symbol("SIGNAL");function ee(t){let e=vt;return vt=t,e}function nd(){return vt}var Gi={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ds(t){if(Jl)throw new Error("");if(vt===null)return;vt.consumerOnSignalRead(t);let e=vt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=vt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:vt.producers,n!==void 0&&n.producer===t)){vt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===vt&&(!r||oO(i,vt)))return;let o=fs(vt),s={producer:t,consumer:vt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};vt.producersTail=s,e!==void 0?e.nextProducer=s:vt.producers=s,o&&ZD(t,s)}function JD(){Vg++}function rd(t){if(!(fs(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Vg)){if(!t.producerMustRecompute(t)&&!ac(t)){ed(t);return}t.producerRecomputeValue(t),ed(t)}}function jg(t){if(t.consumers===void 0)return;let e=Jl;Jl=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||iO(r)}}finally{Jl=e}}function Ug(){return vt?.consumerAllowSignalWrites!==!1}function iO(t){t.dirty=!0,jg(t),t.consumerMarkedDirty?.(t)}function ed(t){t.dirty=!1,t.lastCleanEpoch=Vg}function Wi(t){return t&&(t.producersTail=void 0,t.recomputing=!0),ee(t)}function hs(t,e){if(ee(e),!t)return;t.recomputing=!1;let n=t.producersTail,r=n!==void 0?n.nextProducer:t.producers;if(r!==void 0){if(fs(t))do r=Bg(r);while(r!==void 0);n!==void 0?n.nextProducer=void 0:t.producers=void 0}}function ac(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(rd(n),r!==n.version))return!0}return!1}function id(t){if(fs(t)){let e=t.producers;for(;e!==void 0;)e=Bg(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function ZD(t,e){let n=t.consumersTail,r=fs(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)ZD(i.producer,i)}function Bg(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!fs(e)){let o=e.producers;for(;o!==void 0;)o=Bg(o)}return n}function fs(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function od(t){rO?.(t)}function oO(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function sd(t,e){let n=Object.create(sO);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(rd(n),ds(n),n.value===sc)throw n.error;return n.value};return r[_t]=n,od(n),r}var Zl=Symbol("UNSET"),Xl=Symbol("COMPUTING"),sc=Symbol("ERRORED"),sO=ye(V({},Gi),{value:Zl,dirty:!0,error:null,equal:td,kind:"computed",producerMustRecompute(t){return t.value===Zl||t.value===Xl},producerRecomputeValue(t){if(t.value===Xl)throw new Error("");let e=t.value;t.value=Xl;let n=Wi(t),r,i=!1;try{r=t.computation(),ee(null),i=e!==Zl&&e!==sc&&r!==sc&&t.equal(e,r)}catch(o){r=sc,t.error=o}finally{hs(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function aO(){throw new Error}var XD=aO;function eb(t){XD(t)}function $g(t){XD=t}var cO=null;function Hg(t,e){let n=Object.create(ad);n.value=t,e!==void 0&&(n.equal=e);let r=()=>tb(n);return r[_t]=n,od(n),[r,s=>ps(n,s),s=>zg(n,s)]}function tb(t){return ds(t),t.value}function ps(t,e){Ug()||eb(t),t.equal(t.value,e)||(t.value=e,uO(t))}function zg(t,e){Ug()||eb(t),ps(t,e(t.value))}var ad=ye(V({},Gi),{equal:td,value:void 0,kind:"signal"});function uO(t){t.version++,JD(),jg(t),cO?.(t)}function nb(t){let e=ee(null);try{return t()}finally{ee(e)}}var hd="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",F=class extends Error{code;constructor(e,n){super(Zi(e,n)),this.code=e}};function lO(t){return`NG0${Math.abs(t)}`}function Zi(t,e){return`${lO(t)}${e?": "+e:""}`}var Jt=globalThis;function ve(t){for(let e in t)if(t[e]===ve)return e;throw Error("")}function ob(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function hr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(hr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function fd(t,e){return t?e?`${t} ${e}`:t:e||""}var dO=ve({__forward_ref__:ve});function pd(t){return t.__forward_ref__=pd,t.toString=function(){return hr(this())},t}function dt(t){return rm(t)?t():t}function rm(t){return typeof t=="function"&&t.hasOwnProperty(dO)&&t.__forward_ref__===pd}function sb(t,e){t==null&&im(e,t,null,"!=")}function im(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function $(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Yr(t){return{providers:t.providers||[],imports:t.imports||[]}}function hc(t){return hO(t,gd)}function om(t){return hc(t)!==null}function hO(t,e){return t.hasOwnProperty(e)&&t[e]||null}function fO(t){let e=t?.[gd]??null;return e||null}function Gg(t){return t&&t.hasOwnProperty(ud)?t[ud]:null}var gd=ve({\u0275prov:ve}),ud=ve({\u0275inj:ve}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=$({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function sm(t){return t&&!!t.\u0275providers}var am=ve({\u0275cmp:ve}),cm=ve({\u0275dir:ve}),um=ve({\u0275pipe:ve}),lm=ve({\u0275mod:ve}),lc=ve({\u0275fac:ve}),Xi=ve({__NG_ELEMENT_ID__:ve}),rb=ve({__NG_ENV_ID__:ve});function Jr(t){return typeof t=="string"?t:t==null?"":String(t)}function ld(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Jr(t)}var dm=ve({ngErrorCode:ve}),ab=ve({ngErrorMessage:ve}),uc=ve({ngTokenPath:ve});function hm(t,e){return cb("",-200,e)}function md(t,e){throw new F(-201,!1)}function pO(t,e){t[uc]??=[];let n=t[uc],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(sb(e.provide,"Token with multi: true should have a provide property"),r=ld(e.provide)):r=ld(e),n[0]!==r&&t[uc].unshift(r)}function gO(t,e){let n=t[uc],r=t[dm],i=t[ab]||t.message;return t.message=yO(i,r,n,e),t}function cb(t,e,n){let r=new F(e,t);return r[dm]=e,r[ab]=t,n&&(r[uc]=n),r}function mO(t){return t[dm]}function yO(t,e,n=[],r=null){let i="";n&&n.length>1&&(i=` Path: ${n.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return Zi(e,`${t}${o}${i}`)}var Wg;function ub(){return Wg}function At(t){let e=Wg;return Wg=t,e}function fm(t,e,n){let r=hc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;md(t,"Injector")}var vO={},Ki=vO,Kg="__NG_DI_FLAG__",Qg=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Qi(n)||0;try{return this.injector.get(e,r&8?null:Ki,r)}catch(i){if(ls(i))return i;throw i}}};function _O(t,e=0){let n=Yl();if(n===void 0)throw new F(-203,!1);if(n===null)return fm(t,void 0,e);{let r=EO(e),i=n.retrieve(t,r);if(ls(i)){if(r.optional)return null;throw i}return i}}function q(t,e=0){return(ub()||_O)(dt(t),e)}function M(t,e){return q(t,Qi(e))}function Qi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function EO(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Yg(t){let e=[];for(let n=0;n<t.length;n++){let r=dt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new F(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=IO(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(q(i,o))}else e.push(q(r))}return e}function pm(t,e){return t[Kg]=e,t.prototype[Kg]=e,t}function IO(t){return t[Kg]}function Wr(t,e){let n=t.hasOwnProperty(lc);return n?t[lc]:null}function lb(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function db(t){return t.flat(Number.POSITIVE_INFINITY)}function yd(t,e){t.forEach(n=>Array.isArray(n)?yd(n,e):e(n))}function gm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function fc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function hb(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function vd(t,e,n){let r=ms(t,e);return r>=0?t[r|1]=n:(r=~r,hb(t,r,e,n)),r}function _d(t,e){let n=ms(t,e);if(n>=0)return t[n|1]}function ms(t,e){return wO(t,e,1)}function wO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Zr={},Rt=[],fr=new U(""),mm=new U("",-1),ym=new U(""),dc=class{get(e,n=Ki){if(n===Ki){let i=cb("",-201);throw i.name="\u0275NotFound",i}return n}};function vm(t){return t[lm]||null}function Xr(t){return t[am]||null}function _m(t){return t[cm]||null}function fb(t){return t[um]||null}function Ft(t){return{\u0275providers:t}}function pb(...t){return{\u0275providers:Em(!0,t),\u0275fromNgModule:!0}}function Em(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return yd(e,s=>{let a=s;dd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&gb(i,o),n}function gb(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Im(i,o=>{e(o,r)})}}function dd(t,e,n,r){if(t=dt(t),!t)return!1;let i=null,o=Gg(t),s=!o&&Xr(t);if(!o&&!s){let c=t.ngModule;if(o=Gg(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)dd(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{yd(o.imports,h=>{dd(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&gb(l,e)}if(!a){let l=Wr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Rt},i),e({provide:ym,useValue:i,multi:!0},i),e({provide:fr,useValue:()=>q(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;Im(c,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Im(t,e){for(let n of t)sm(n)&&(n=n.\u0275providers),Array.isArray(n)?Im(n,e):e(n)}var TO=ve({provide:String,useValue:ve});function mb(t){return t!==null&&typeof t=="object"&&TO in t}function DO(t){return!!(t&&t.useExisting)}function bO(t){return!!(t&&t.useFactory)}function Yi(t){return typeof t=="function"}function yb(t){return!!t.useClass}var pc=new U(""),cd={},ib={},qg;function gc(){return qg===void 0&&(qg=new dc),qg}var ke=class{},Ji=class extends ke{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Zg(e,s=>this.processProvider(s)),this.records.set(mm,gs(void 0,this)),i.has("environment")&&this.records.set(ke,gs(void 0,this));let o=this.records.get(pc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ym,Rt,{self:!0}))}retrieve(e,n){let r=Qi(n)||0;try{return this.get(e,Ki,r)}catch(i){if(ls(i))return i;throw i}}destroy(){cc(this),this._destroyed=!0;let e=ee(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ee(e)}}onDestroy(e){return cc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){cc(this);let n=Pn(this),r=At(void 0),i;try{return e()}finally{Pn(n),At(r)}}get(e,n=Ki,r){if(cc(this),e.hasOwnProperty(rb))return e[rb](this);let i=Qi(r),o,s=Pn(this),a=At(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=NO(e)&&hc(e);h&&this.injectableDefInScope(h)?l=gs(Jg(e),cd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?gc():this.parent;return n=i&8&&n===Ki?null:n,c.get(e,n)}catch(c){let l=mO(c);throw l===-200||l===-201?new F(l,null):c}finally{At(a),Pn(s)}}resolveInjectorInitializers(){let e=ee(null),n=Pn(this),r=At(void 0),i;try{let o=this.get(fr,Rt,{self:!0});for(let s of o)s()}finally{Pn(n),At(r),ee(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(hr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=dt(e);let n=Yi(e)?e:dt(e&&e.provide),r=SO(e);if(!Yi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=gs(void 0,cd,!0),i.factory=()=>Yg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=ee(null);try{if(n.value===ib)throw hm(hr(e));return n.value===cd&&(n.value=ib,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&RO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ee(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=dt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Jg(t){let e=hc(t),n=e!==null?e.factory:Wr(t);if(n!==null)return n;if(t instanceof U)throw new F(204,!1);if(t instanceof Function)return CO(t);throw new F(204,!1)}function CO(t){if(t.length>0)throw new F(204,!1);let n=fO(t);return n!==null?()=>n.factory(t):()=>new t}function SO(t){if(mb(t))return gs(void 0,t.useValue);{let e=wm(t);return gs(e,cd)}}function wm(t,e,n){let r;if(Yi(t)){let i=dt(t);return Wr(i)||Jg(i)}else if(mb(t))r=()=>dt(t.useValue);else if(bO(t))r=()=>t.useFactory(...Yg(t.deps||[]));else if(DO(t))r=(i,o)=>q(dt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=dt(t&&(t.useClass||t.provide));if(AO(t))r=()=>new i(...Yg(t.deps));else return Wr(i)||Jg(i)}return r}function cc(t){if(t.destroyed)throw new F(205,!1)}function gs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function AO(t){return!!t.deps}function RO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function NO(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Zg(t,e){for(let n of t)Array.isArray(n)?Zg(n,e):n&&sm(n)?Zg(n.\u0275providers,e):e(n)}function Ve(t,e){let n;t instanceof Ji?(cc(t),n=t):n=new Qg(t);let r,i=Pn(n),o=At(void 0);try{return e()}finally{Pn(i),At(o)}}function vb(){return ub()!==void 0||Yl()!=null}var Zt=0,G=1,te=2,Je=3,Xt=4,en=5,ys=6,vs=7,xe=8,eo=9,kn=10,Se=11,_s=12,Tm=13,to=14,Lt=15,ei=16,no=17,xn=18,mc=19,Dm=20,dr=21,Ed=22,yc=23,Ht=24,Id=25,je=26,bm=1,Cm=6,ti=7,vc=8,ro=9,tt=10;function On(t){return Array.isArray(t)&&typeof t[bm]=="object"}function ln(t){return Array.isArray(t)&&t[bm]===!0}function Sm(t){return(t.flags&4)!==0}function ni(t){return t.componentOffset>-1}function wd(t){return(t.flags&1)===1}function dn(t){return!!t.template}function Es(t){return(t[te]&512)!==0}function io(t){return(t[te]&256)===256}var _b="svg",Eb="math";function tn(t){for(;Array.isArray(t);)t=t[Zt];return t}function Am(t){for(;Array.isArray(t);){if(typeof t[bm]=="object")return t;t=t[Zt]}return null}function Rm(t,e){return tn(e[t])}function hn(t,e){return tn(e[t.index])}function _c(t,e){return t.data[e]}function Td(t,e){return t[e]}function Nm(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function nn(t,e){let n=e[t];return On(n)?n:n[Zt]}function Ib(t){return(t[te]&4)===4}function Dd(t){return(t[te]&128)===128}function wb(t){return ln(t[Je])}function Fn(t,e){return e==null?null:t[e]}function Pm(t){t[no]=0}function Mm(t){t[te]&1024||(t[te]|=1024,Dd(t)&&Ic(t))}function Tb(t,e){for(;t>0;)e=e[to],t--;return e}function Ec(t){return!!(t[te]&9216||t[Ht]?.dirty)}function bd(t){t[kn].changeDetectionScheduler?.notify(8),t[te]&64&&(t[te]|=1024),Ec(t)&&Ic(t)}function Ic(t){t[kn].changeDetectionScheduler?.notify(0);let e=Kr(t);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!Dd(e)));)e=Kr(e)}function km(t,e){if(io(t))throw new F(911,!1);t[dr]===null&&(t[dr]=[]),t[dr].push(e)}function Db(t,e){if(t[dr]===null)return;let n=t[dr].indexOf(e);n!==-1&&t[dr].splice(n,1)}function Kr(t){let e=t[Je];return ln(e)?e[Je]:e}function xm(t){return t[vs]??=[]}function Om(t){return t.cleanup??=[]}function bb(t,e,n,r){let i=xm(e);i.push(n),t.firstCreatePass&&Om(t).push(r,i.length-1)}var ae={lFrame:Bb(null),bindingsEnabled:!0,skipHydrationRootTNode:null},wc=function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t}(wc||{}),PO=0,Xg=!1;function Cb(){return ae.lFrame.elementDepthCount}function Sb(){ae.lFrame.elementDepthCount++}function Fm(){ae.lFrame.elementDepthCount--}function Ab(){return ae.bindingsEnabled}function Rb(){return ae.skipHydrationRootTNode!==null}function Lm(t){return ae.skipHydrationRootTNode===t}function Vm(){ae.skipHydrationRootTNode=null}function Z(){return ae.lFrame.lView}function Ue(){return ae.lFrame.tView}function Nb(t){return ae.lFrame.contextLView=t,t[xe]}function Pb(t){return ae.lFrame.contextLView=null,t}function ht(){let t=jm();for(;t!==null&&t.type===64;)t=t.parent;return t}function jm(){return ae.lFrame.currentTNode}function Mb(){let t=ae.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Is(t,e){let n=ae.lFrame;n.currentTNode=t,n.isParent=e}function Um(){return ae.lFrame.isParent}function kb(){ae.lFrame.isParent=!1}function xb(){return ae.lFrame.contextLView}function Bm(t){im("Must never be called in production mode"),PO=t}function $m(){return Xg}function Hm(t){let e=Xg;return Xg=t,e}function Tc(){let t=ae.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Ob(){return ae.lFrame.bindingIndex}function Fb(t){return ae.lFrame.bindingIndex=t}function pr(){return ae.lFrame.bindingIndex++}function Cd(t){let e=ae.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Lb(){return ae.lFrame.inI18n}function Vb(t,e){let n=ae.lFrame;n.bindingIndex=n.bindingRootIndex=t,Sd(e)}function jb(){return ae.lFrame.currentDirectiveIndex}function Sd(t){ae.lFrame.currentDirectiveIndex=t}function zm(t){let e=ae.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function qm(){return ae.lFrame.currentQueryIndex}function Ad(t){ae.lFrame.currentQueryIndex=t}function MO(t){let e=t[G];return e.type===2?e.declTNode:e.type===1?t[en]:null}function Gm(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=MO(o),i===null||(o=o[to],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ae.lFrame=Ub();return r.currentTNode=e,r.lView=t,!0}function Rd(t){let e=Ub(),n=t[G];ae.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Ub(){let t=ae.lFrame,e=t===null?null:t.child;return e===null?Bb(t):e}function Bb(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function $b(){let t=ae.lFrame;return ae.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Wm=$b;function Nd(){let t=$b();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Hb(t){return(ae.lFrame.contextLView=Tb(t,ae.lFrame.contextLView))[xe]}function Ln(){return ae.lFrame.selectedIndex}function ri(t){ae.lFrame.selectedIndex=t}function Dc(){let t=ae.lFrame;return _c(t.tView,t.selectedIndex)}function zb(){return ae.lFrame.currentNamespace}var qb=!0;function Pd(){return qb}function Md(t){qb=t}function em(t,e=null,n=null,r){let i=Km(t,e,n,r);return i.resolveInjectorInitializers(),i}function Km(t,e=null,n=null,r,i=new Set){let o=[n||Rt,pb(t)];return r=r||(typeof t=="object"?void 0:hr(t)),new Ji(o,e||gc(),r||null,i)}var Ze=class t{static THROW_IF_NOT_FOUND=Ki;static NULL=new dc;static create(e,n){if(Array.isArray(e))return em({name:""},n,e,"");{let r=e.name??"";return em({name:r},e.parent,e.providers,r)}}static \u0275prov=$({token:t,providedIn:"any",factory:()=>q(mm)});static __NG_ELEMENT_ID__=-1},ze=new U(""),gr=(()=>{class t{static __NG_ELEMENT_ID__=kO;static __NG_ENV_ID__=n=>n}return t})(),tm=class extends gr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return io(this._lView)}onDestroy(e){let n=this._lView;return km(n,e),()=>Db(n,e)}};function kO(){return new tm(Z())}var Mn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Nt=new U("",{providedIn:"root",factory:()=>{let t=M(ke),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Mn),e.handleError(n))}}}),Gb={provide:fr,useValue:()=>void M(Mn),multi:!0};function Qm(t){return typeof t=="function"&&t[_t]!==void 0}function bc(t,e){let[n,r,i]=Hg(t,e?.equal),o=n,s=o[_t];return o.set=r,o.update=i,o.asReadonly=Wb.bind(o),o}function Wb(){let t=this[_t];if(t.readonlyFn===void 0){let e=()=>this();e[_t]=t,t.readonlyFn=e}return t.readonlyFn}function Ym(t){return Qm(t)&&typeof t.set=="function"}var Qr=class{},ws=new U("",{providedIn:"root",factory:()=>!1});var Jm=new U(""),Zm=new U("");var Vn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ct(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new J(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})(),ii=(()=>{class t{internalPendingTasks=M(Vn);scheduler=M(Qr);errorHandler=M(Nt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})();function Cc(...t){}var Xm=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:()=>new nm})}return t})(),nm=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Ns(t){return{toString:t}.toString()}var kd="__parameters__";function BO(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function SC(t,e,n){return Ns(()=>{let r=BO(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(kd)?c[kd]:Object.defineProperty(c,kd,{value:[]})[kd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Pt=pm(SC("Optional"),8);var AC=pm(SC("SkipSelf"),4);function $O(t){return typeof t=="function"}var $d=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function RC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var ho=(()=>{let t=()=>NC;return t.ngInherit=!0,t})();function NC(t){return t.type.prototype.ngOnChanges&&(t.setInput=zO),HO}function HO(){let t=MC(this),e=t?.current;if(e){let n=t.previous;if(n===Zr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function zO(t,e,n,r,i){let o=this.declaredInputs[r],s=MC(t)||qO(t,{previous:Zr,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new $d(l&&l.currentValue,n,c===Zr),RC(t,e,i,n)}var PC="__ngSimpleChanges__";function MC(t){return t[PC]||null}function qO(t,e){return t[PC]=e}var Kb=[];var De=function(t,e=null,n){for(let r=0;r<Kb.length;r++){let i=Kb[r];i(t,e,n)}};function GO(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=NC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function WO(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Vd(t,e,n){kC(t,e,3,n)}function jd(t,e,n,r){(t[te]&3)===n&&kC(t,e,n,r)}function ey(t,e){let n=t[te];(n&3)===e&&(n&=16383,n+=1,t[te]=n)}function kC(t,e,n,r){let i=r!==void 0?t[no]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[no]+=65536),(a<o||o==-1)&&(KO(t,n,e,c),t[no]=(t[no]&4294901760)+c+2),c++}function Qb(t,e){De(4,t,e);let n=ee(null);try{e.call(t)}finally{ee(n),De(5,t,e)}}function KO(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[te]>>14<t[no]>>16&&(t[te]&3)===e&&(t[te]+=16384,Qb(a,o)):Qb(a,o)}var Ds=-1,ao=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function QO(t){return(t.flags&8)!==0}function YO(t){return(t.flags&16)!==0}function JO(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];ZO(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function xC(t){return t===3||t===4||t===6}function ZO(t){return t.charCodeAt(0)===64}function bs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Yb(t,n,i,null,e[++r]):Yb(t,n,i,null,null))}}return t}function Yb(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function OC(t){return t!==Ds}function Hd(t){return t&32767}function XO(t){return t>>16}function zd(t,e){let n=XO(t),r=e;for(;n>0;)r=r[to],n--;return r}var hy=!0;function qd(t){let e=hy;return hy=t,e}var e1=256,FC=e1-1,LC=5,t1=0,jn={};function n1(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Xi)&&(r=n[Xi]),r==null&&(r=n[Xi]=t1++);let i=r&FC,o=1<<i;e.data[t+(i>>LC)]|=o}function Gd(t,e){let n=VC(t,e);if(n!==-1)return n;let r=e[G];r.firstCreatePass&&(t.injectorIndex=e.length,ty(r.data,t),ty(e,null),ty(r.blueprint,null));let i=Jy(t,e),o=t.injectorIndex;if(OC(i)){let s=Hd(i),a=zd(i,e),c=a[G].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function ty(t,e){t.push(0,0,0,0,0,0,0,0,e)}function VC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Jy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=HC(i),r===null)return Ds;if(n++,i=i[to],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ds}function fy(t,e,n){n1(t,e,n)}function r1(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(xC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function jC(t,e,n){if(n&8||t!==void 0)return t;md(e,"NodeInjector")}function UC(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[eo],o=At(void 0);try{return i?i.get(e,r,n&8):fm(e,r,n&8)}finally{At(o)}}return jC(r,e,n)}function BC(t,e,n,r=0,i){if(t!==null){if(e[te]&2048&&!(r&2)){let s=a1(t,e,n,r,jn);if(s!==jn)return s}let o=$C(t,e,n,r,jn);if(o!==jn)return o}return UC(e,n,r,i)}function $C(t,e,n,r,i){let o=o1(n);if(typeof o=="function"){if(!Gm(e,t,r))return r&1?jC(i,n,r):UC(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))md(n);else return s}finally{Wm()}}else if(typeof o=="number"){let s=null,a=VC(t,e),c=Ds,l=r&1?e[Lt][en]:null;for((a===-1||r&4)&&(c=a===-1?Jy(t,e):e[a+8],c===Ds||!Zb(r,!1)?a=-1:(s=e[G],a=Hd(c),e=zd(c,e)));a!==-1;){let h=e[G];if(Jb(o,a,h.data)){let p=i1(a,e,n,s,r,l);if(p!==jn)return p}c=e[a+8],c!==Ds&&Zb(r,e[G].data[a+8]===l)&&Jb(o,a,e)?(s=h,a=Hd(c),e=zd(c,e)):a=-1}}return i}function i1(t,e,n,r,i,o){let s=e[G],a=s.data[t+8],c=r==null?ni(a)&&hy:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Ud(a,s,n,c,l);return h!==null?Rc(e,s,h,a,i):jn}function Ud(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let w=s[y];if(y<c&&n===w||y>=c&&w.type===n)return y}if(i){let y=s[c];if(y&&dn(y)&&y.type===n)return c}return null}function Rc(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof ao){let a=o;if(a.resolving){let y=ld(s[n]);throw hm(y)}let c=qd(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?At(a.injectImpl):null,g=Gm(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&GO(n,s[n],e)}finally{p!==null&&At(p),qd(c),a.resolving=!1,Wm()}}return o}function o1(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Xi)?t[Xi]:void 0;return typeof e=="number"?e>=0?e&FC:s1:e}function Jb(t,e,n){let r=1<<t;return!!(n[e+(t>>LC)]&r)}function Zb(t,e){return!(t&2)&&!(t&1&&e)}var so=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return BC(this._tNode,this._lView,e,Qi(r),n)}};function s1(){return new so(ht(),Z())}function ch(t){return Ns(()=>{let e=t.prototype.constructor,n=e[lc]||py(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[lc]||py(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function py(t){return rm(t)?()=>{let e=py(dt(t));return e&&e()}:Wr(t)}function a1(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[te]&2048&&!Es(s);){let a=$C(o,s,n,r|2,jn);if(a!==jn)return a;let c=o.parent;if(!c){let l=s[Dm];if(l){let h=l.get(n,jn,r);if(h!==jn)return h}c=HC(s),s=s[to]}o=c}return i}function HC(t){let e=t[G],n=e.type;return n===2?e.declTNode:n===1?t[en]:null}function Oc(t){return r1(ht(),t)}function c1(){return Ps(ht(),Z())}function Ps(t,e){return new qt(hn(t,e))}var qt=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=c1}return t})();function u1(t){return t instanceof qt?t.nativeElement:t}function l1(){return this._results[Symbol.iterator]()}var Wd=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ye}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=db(e);(this._changesDetected=!lb(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=l1};function zC(t){return(t.flags&128)===128}var Zy=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Zy||{}),qC=new Map,d1=0;function h1(){return d1++}function f1(t){qC.set(t[mc],t)}function gy(t){qC.delete(t[mc])}var Xb="__ngContext__";function Cs(t,e){On(e)?(t[Xb]=e[mc],f1(e)):t[Xb]=e}function GC(t){return KC(t[_s])}function WC(t){return KC(t[Xt])}function KC(t){for(;t!==null&&!ln(t);)t=t[Xt];return t}var my;function Xy(t){my=t}function QC(){if(my!==void 0)return my;if(typeof document<"u")return document;throw new F(210,!1)}var uh=new U("",{providedIn:"root",factory:()=>p1}),p1="ng",lh=new U(""),si=new U("",{providedIn:"platform",factory:()=>"unknown"});var g1=new U(""),dh=new U("",{providedIn:"root",factory:()=>QC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var m1="h",y1="b";var YC="r";var JC="di";var ZC=!1,XC=new U("",{providedIn:"root",factory:()=>ZC});var v1=(t,e,n,r)=>{};function _1(t,e,n,r){v1(t,e,n,r)}function ev(t){return(t.flags&32)===32}var E1=()=>null;function eS(t,e,n=!1){return E1(t,e,n)}function tS(t,e){let n=t.contentQueries;if(n!==null){let r=ee(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Ad(o),a.contentQueries(2,e[s],s)}}}finally{ee(r)}}}function yy(t,e,n){Ad(0);let r=ee(null);try{e(t,n)}finally{ee(r)}}function nS(t,e,n){if(Sm(e)){let r=ee(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{ee(r)}}}var mr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(mr||{}),xd;function I1(){if(xd===void 0&&(xd=null,Jt.trustedTypes))try{xd=Jt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return xd}function hh(t){return I1()?.createHTML(t)||t}var Od;function w1(){if(Od===void 0&&(Od=null,Jt.trustedTypes))try{Od=Jt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Od}function eC(t){return w1()?.createScriptURL(t)||t}var yr=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hd})`}},vy=class extends yr{getTypeName(){return"HTML"}},_y=class extends yr{getTypeName(){return"Style"}},Ey=class extends yr{getTypeName(){return"Script"}},Iy=class extends yr{getTypeName(){return"URL"}},wy=class extends yr{getTypeName(){return"ResourceURL"}};function mn(t){return t instanceof yr?t.changingThisBreaksApplicationSecurity:t}function vr(t,e){let n=rS(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${hd})`)}return n===e}function rS(t){return t instanceof yr&&t.getTypeName()||null}function tv(t){return new vy(t)}function nv(t){return new _y(t)}function rv(t){return new Ey(t)}function iv(t){return new Iy(t)}function ov(t){return new wy(t)}function T1(t){let e=new Dy(t);return D1()?new Ty(e):e}var Ty=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(hh(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.firstChild?.remove(),n)}catch{return null}}},Dy=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=hh(e),n}};function D1(){try{return!!new window.DOMParser().parseFromString(hh(""),"text/html")}catch{return!1}}var b1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Fc(t){return t=String(t),t.match(b1)?t:"unsafe:"+t}function _r(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function Lc(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var iS=_r("area,br,col,hr,img,wbr"),oS=_r("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),sS=_r("rp,rt"),C1=Lc(sS,oS),S1=Lc(oS,_r("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),A1=Lc(sS,_r("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tC=Lc(iS,S1,A1,C1),aS=_r("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),R1=_r("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),N1=_r("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),P1=Lc(aS,R1,N1),M1=_r("script,style,template"),by=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=O1(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=x1(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=nC(e).toLowerCase();if(!tC.hasOwnProperty(n))return this.sanitizedSomething=!0,!M1.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!P1.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;aS[a]&&(c=Fc(c)),this.buf.push(" ",s,'="',rC(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=nC(e).toLowerCase();tC.hasOwnProperty(n)&&!iS.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(rC(e))}};function k1(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function x1(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw cS(e);return e}function O1(t){let e=t.firstChild;if(e&&k1(t,e))throw cS(e);return e}function nC(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function cS(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var F1=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,L1=/([^\#-~ |!])/g;function rC(t){return t.replace(/&/g,"&amp;").replace(F1,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(L1,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Fd;function sv(t,e){let n=null;try{Fd=Fd||T1(t);let r=e?String(e):"";n=Fd.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Fd.getInertBodyElement(r)}while(r!==o);let a=new by().sanitizeChildren(iC(n)||n);return hh(a)}finally{if(n){let r=iC(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}function iC(t){return"content"in t&&V1(t)?t.content:null}function V1(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var yn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(yn||{});function uS(t){let e=dS();return e?e.sanitize(yn.URL,t)||"":vr(t,"URL")?mn(t):Fc(Jr(t))}function lS(t){let e=dS();if(e)return eC(e.sanitize(yn.RESOURCE_URL,t)||"");if(vr(t,"ResourceURL"))return eC(mn(t));throw new F(904,!1)}function j1(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?lS:uS}function av(t,e,n){return j1(e,n)(t)}function dS(){let t=Z();return t&&t[kn].sanitizer}function U1(t){return t.ownerDocument.defaultView}function B1(t){return t.ownerDocument}function hS(t){return t instanceof Function?t():t}function $1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var fS="ng-template";function H1(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&$1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(cv(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function cv(t){return t.type===4&&t.value!==fS}function z1(t,e,n){let r=t.type===4&&!n?fS:t.value;return e===r}function q1(t,e,n){let r=4,i=t.attrs,o=i!==null?K1(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!fn(r)&&!fn(c))return!1;if(s&&fn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!z1(t,c,n)||c===""&&e.length===1){if(fn(r))return!1;s=!0}}else if(r&8){if(i===null||!H1(t,i,c,n)){if(fn(r))return!1;s=!0}}else{let l=e[++a],h=G1(c,i,cv(t),n);if(h===-1){if(fn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(fn(r))return!1;s=!0}}}}return fn(r)||s}function fn(t){return(t&1)===0}function G1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Q1(e,t)}function W1(t,e,n=!1){for(let r=0;r<e.length;r++)if(q1(t,e[r],n))return!0;return!1}function K1(t){for(let e=0;e<t.length;e++){let n=t[e];if(xC(n))return e}return t.length}function Q1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function oC(t,e){return t?":not("+e.trim()+")":e}function Y1(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!fn(s)&&(e+=oC(o,i),i=""),r=s,o=o||!fn(r);n++}return i!==""&&(e+=oC(o,i)),e}function J1(t){return t.map(Y1).join(",")}function Z1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!fn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var It={};function X1(t,e){return t.createText(e)}function eF(t,e,n){t.setValue(e,n)}function pS(t,e,n){return t.createElement(e,n)}function Kd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function gS(t,e,n){t.appendChild(e,n)}function sC(t,e,n,r,i){r!==null?Kd(t,e,n,r,i):gS(t,e,n)}function mS(t,e,n){t.removeChild(null,e,n)}function tF(t,e,n){t.setAttribute(e,"style",n)}function nF(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function yS(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&JO(t,e,r),i!==null&&nF(t,e,i),o!==null&&tF(t,e,o)}function uv(t,e,n,r,i,o,s,a,c,l,h){let p=je+r,g=p+i,y=rF(p,g),w=typeof l=="function"?l():l;return y[G]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:h}}function rF(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:It);return n}function iF(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=uv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function lv(t,e,n,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[Zt]=i,p[te]=r|4|128|8|64|1024,(l!==null||t&&t[te]&2048)&&(p[te]|=2048),Pm(p),p[Je]=p[to]=t,p[xe]=n,p[kn]=s||t&&t[kn],p[Se]=a||t&&t[Se],p[eo]=c||t&&t[eo]||null,p[en]=o,p[mc]=h1(),p[ys]=h,p[Dm]=l,p[Lt]=e.type==2?t[Lt]:p,p}function oF(t,e,n){let r=hn(e,t),i=iF(n),o=t[kn].rendererFactory,s=dv(t,lv(t,i,null,vS(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function vS(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function _S(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function dv(t,e){return t[_s]?t[Tm][Xt]=e:t[_s]=e,t[Tm]=e,e}function sF(t=1){ES(Ue(),Z(),Ln()+t,!1)}function ES(t,e,n,r){if(!r)if((e[te]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Vd(e,o,n)}else{let o=t.preOrderHooks;o!==null&&jd(e,o,0,n)}ri(n)}var fh=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(fh||{});function Cy(t,e,n,r){let i=ee(null);try{let[o,s,a]=t.inputs[n],c=null;(s&fh.SignalBased)!==0&&(c=e[o][_t]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,c,r,n,o):RC(e,c,o,r)}finally{ee(i)}}var gn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(gn||{}),aF;function hv(t,e){return aF(t,e)}function Ts(t,e,n,r,i){if(r!=null){let o,s=!1;ln(r)?o=r:On(r)&&(s=!0,r=r[Zt]);let a=tn(r);t===0&&n!==null?i==null?gS(e,n,a):Kd(e,n,a,i||null,!0):t===1&&n!==null?Kd(e,n,a,i||null,!0):t===2?mS(e,a,s):t===3&&e.destroyNode(a),o!=null&&_F(e,t,o,n,i)}}function cF(t,e){IS(t,e),e[Zt]=null,e[en]=null}function uF(t,e,n,r,i,o){r[Zt]=i,r[en]=e,gh(t,r,n,1,i,o)}function IS(t,e){e[kn].changeDetectionScheduler?.notify(9),gh(t,e,e[Se],2,null,null)}function lF(t){let e=t[_s];if(!e)return ny(t[G],t);for(;e;){let n=null;if(On(e))n=e[_s];else{let r=e[tt];r&&(n=r)}if(!n){for(;e&&!e[Xt]&&e!==t;)On(e)&&ny(e[G],e),e=e[Je];e===null&&(e=t),On(e)&&ny(e[G],e),n=e&&e[Xt]}e=n}}function fv(t,e){let n=t[ro],r=n.indexOf(e);n.splice(r,1)}function ph(t,e){if(io(e))return;let n=e[Se];n.destroyNode&&gh(t,e,n,3,null,null),lF(e)}function ny(t,e){if(io(e))return;let n=ee(null);try{e[te]&=-129,e[te]|=256,e[Ht]&&id(e[Ht]),hF(t,e),dF(t,e),e[G].type===1&&e[Se].destroy();let r=e[ei];if(r!==null&&ln(e[Je])){r!==e[Je]&&fv(r,e);let i=e[xn];i!==null&&i.detachView(t)}gy(e)}finally{ee(n)}}function dF(t,e){let n=t.cleanup,r=e[vs];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[vs]=null);let i=e[dr];if(i!==null){e[dr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[yc];if(o!==null){e[yc]=null;for(let s of o)s.destroy()}}function hF(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ao)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];De(4,a,c);try{c.call(a)}finally{De(5,a,c)}}else{De(4,i,o);try{o.call(i)}finally{De(5,i,o)}}}}}function fF(t,e,n){return pF(t,e.parent,n)}function pF(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Zt];if(ni(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===mr.None||i===mr.Emulated)return null}return hn(r,n)}function gF(t,e,n){return yF(t,e,n)}function mF(t,e,n){return t.type&40?hn(t,n):null}var yF=mF,aC;function pv(t,e,n,r){let i=fF(t,r,e),o=e[Se],s=r.parent||e[en],a=gF(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)sC(o,i,n[c],a,!1);else sC(o,i,n,a,!1);aC!==void 0&&aC(o,r,e,n,i)}function Sc(t,e){if(e!==null){let n=e.type;if(n&3)return hn(e,t);if(n&4)return Sy(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Sc(t,r);{let i=t[e.index];return ln(i)?Sy(-1,i):tn(i)}}else{if(n&128)return Sc(t,e.next);if(n&32)return hv(e,t)()||tn(t[e.index]);{let r=wS(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Kr(t[Lt]);return Sc(i,r)}else return Sc(t,e.next)}}}return null}function wS(t,e){if(e!==null){let r=t[Lt][en],i=e.projection;return r.projection[i]}return null}function Sy(t,e){let n=tt+t+1;if(n<e.length){let r=e[n],i=r[G].firstChild;if(i!==null)return Sc(r,i)}return e[ti]}function gv(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Cs(tn(a),r),n.flags|=2),!ev(n))if(c&8)gv(t,e,n.child,r,i,o,!1),Ts(e,t,i,a,o);else if(c&32){let l=hv(n,r),h;for(;h=l();)Ts(e,t,i,h,o);Ts(e,t,i,a,o)}else c&16?vF(t,e,r,n,i,o):Ts(e,t,i,a,o);n=s?n.projectionNext:n.next}}function gh(t,e,n,r,i,o){gv(n,r,t.firstChild,e,i,o,!1)}function vF(t,e,n,r,i,o){let s=n[Lt],c=s[en].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];Ts(e,t,i,h,o)}else{let l=c,h=s[Je];zC(r)&&(l.flags|=128),gv(t,e,l,h,i,o,!0)}}function _F(t,e,n,r,i){let o=n[ti],s=tn(n);o!==s&&Ts(e,t,r,o,i);for(let a=tt;a<n.length;a++){let c=n[a];gh(c[G],c,t,e,r,o)}}function EF(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:gn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=gn.Important),t.setStyle(n,r,i,o))}}function TS(t,e,n,r,i){let o=Ln(),s=r&2;try{ri(-1),s&&e.length>je&&ES(t,e,je,!1),De(s?2:0,i,n),n(r,i)}finally{ri(o),De(s?3:1,i,n)}}function DS(t,e,n){CF(t,e,n),(n.flags&64)===64&&SF(t,e,n)}function mv(t,e,n=hn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function IF(t,e,n,r){let o=r.get(XC,ZC)||n===mr.ShadowDom,s=t.selectRootElement(e,o);return wF(s),s}function wF(t){TF(t)}var TF=()=>null;function DF(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function bS(t,e,n,r,i,o){let s=e[G];if(yv(t,s,e,n,r)){ni(t)&&bF(e,t.index);return}t.type&3&&(n=DF(n)),CS(t,e,n,r,i,o)}function CS(t,e,n,r,i,o){if(t.type&3){let s=hn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function bF(t,e){let n=nn(e,t);n[te]&16||(n[te]|=64)}function CF(t,e,n){let r=n.directiveStart,i=n.directiveEnd;ni(n)&&oF(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Gd(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],c=Rc(e,t,s,n);if(Cs(c,e),o!==null&&MF(e,s-r,c,a,n,o),dn(a)){let l=nn(n.index,e);l[xe]=Rc(e,t,s,n)}}}function SF(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=jb();try{ri(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Sd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&AF(c,l)}}finally{ri(-1),Sd(s)}}function AF(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function RF(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];W1(e,o.selectors,!1)&&(r??=[],dn(o)?r.unshift(o):r.push(o))}return r}function NF(t,e,n,r,i,o){let s=hn(t,e);PF(e[Se],s,o,t.value,n,r,i)}function PF(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Jr(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function MF(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];Cy(r,n,c,l)}}function SS(t,e,n,r,i){let o=je+n,s=e[G],a=i(s,e,t,r,n);e[o]=a,Is(t,!0);let c=t.type===2;return c?(yS(e[Se],a,t),(Cb()===0||wd(t))&&Cs(a,e),Sb()):Cs(a,e),Pd()&&(!c||!ev(t))&&pv(s,e,a,t),t}function AS(t){let e=t;return Um()?kb():(e=e.parent,Is(e,!1)),e}function kF(t,e,n){return(t===null||dn(t))&&(n=Am(n[e.index])),n[Se]}function xF(t,e){let n=t[eo];if(!n)return;n.get(Nt,null)?.(e)}function yv(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],h=s[c+1],p=e.data[l];Cy(p,n[l],h,i),a=!0}if(o)for(let c of o){let l=n[c],h=e.data[c];Cy(h,l,r,i),a=!0}return a}function OF(t,e){let n=nn(e,t),r=n[G];FF(r,n);let i=n[Zt];i!==null&&n[ys]===null&&(n[ys]=eS(i,n[eo])),De(18),vv(r,n,n[xe]),De(19,n[xe])}function FF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function vv(t,e,n){Rd(e);try{let r=t.viewQuery;r!==null&&yy(1,r,n);let i=t.template;i!==null&&TS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[xn]?.finishViewCreation(t),t.staticContentQueries&&tS(t,e),t.staticViewQueries&&yy(2,t.viewQuery,n);let o=t.components;o!==null&&LF(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[te]&=-5,Nd()}}function LF(t,e){for(let n=0;n<e.length;n++)OF(t,e[n])}function mh(t,e,n,r){let i=ee(null);try{let o=e.tView,a=t[te]&4096?4096:16,c=lv(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[ei]=l;let h=t[xn];return h!==null&&(c[xn]=h.createEmbeddedView(o)),vv(o,c,n),c}finally{ee(i)}}function Nc(t,e){return!e||e.firstChild===null||zC(t)}var cC=!1,VF=new U("");function Pc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(tn(o)),ln(o)&&RS(o,r);let s=n.type;if(s&8)Pc(t,e,n.child,r);else if(s&32){let a=hv(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=wS(e,n);if(Array.isArray(a))r.push(...a);else{let c=Kr(e[Lt]);Pc(c[G],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function RS(t,e){for(let n=tt;n<t.length;n++){let r=t[n],i=r[G].firstChild;i!==null&&Pc(r[G],r,i,e)}t[ti]!==t[Zt]&&e.push(t[ti])}function NS(t){if(t[Id]!==null){for(let e of t[Id])e.impl.addSequence(e);t[Id].length=0}}var PS=[];function jF(t){return t[Ht]??UF(t)}function UF(t){let e=PS.pop()??Object.create($F);return e.lView=t,e}function BF(t){t.lView[Ht]!==t&&(t.lView=null,PS.push(t))}var $F=ye(V({},Gi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Ic(t.lView)},consumerOnSignalRead(){this.lView[Ht]=this}});function HF(t){let e=t[Ht]??Object.create(zF);return e.lView=t,e}var zF=ye(V({},Gi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Kr(t.lView);for(;e&&!MS(e[G]);)e=Kr(e);e&&Mm(e)},consumerOnSignalRead(){this.lView[Ht]=this}});function MS(t){return t.type!==2}function kS(t){if(t[yc]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[yc])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[te]&8192)}}var qF=100;function _v(t,e=0){let r=t[kn].rendererFactory,i=!1;i||r.begin?.();try{GF(t,e)}finally{i||r.end?.()}}function GF(t,e){let n=$m();try{Hm(!0),Ay(t,e);let r=0;for(;Ec(t);){if(r===qF)throw new F(103,!1);r++,Ay(t,1)}}finally{Hm(n)}}function xS(t,e){Bm(e?wc.Exhaustive:wc.OnlyDirtyViews);try{_v(t)}finally{Bm(wc.Off)}}function WF(t,e,n,r){if(io(e))return;let i=e[te],o=!1,s=!1;Rd(e);let a=!0,c=null,l=null;o||(MS(t)?(l=jF(e),c=Wi(l)):nd()===null?(a=!1,l=HF(e),c=Wi(l)):e[Ht]&&(id(e[Ht]),e[Ht]=null));try{Pm(e),Fb(t.bindingStartIndex),n!==null&&TS(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Vd(e,y,null)}else{let y=t.preOrderHooks;y!==null&&jd(e,y,0,null),ey(e,0)}if(s||KF(e),kS(e),OS(e,0),t.contentQueries!==null&&tS(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Vd(e,y)}else{let y=t.contentHooks;y!==null&&jd(e,y,1),ey(e,1)}YF(t,e);let p=t.components;p!==null&&LS(e,p,0);let g=t.viewQuery;if(g!==null&&yy(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Vd(e,y)}else{let y=t.viewHooks;y!==null&&jd(e,y,2),ey(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ed]){for(let y of e[Ed])y();e[Ed]=null}o||(NS(e),e[te]&=-73)}catch(h){throw o||Ic(e),h}finally{l!==null&&(hs(l,c),a&&BF(l)),Nd()}}function OS(t,e){for(let n=GC(t);n!==null;n=WC(n))for(let r=tt;r<n.length;r++){let i=n[r];FS(i,e)}}function KF(t){for(let e=GC(t);e!==null;e=WC(e)){if(!(e[te]&2))continue;let n=e[ro];for(let r=0;r<n.length;r++){let i=n[r];Mm(i)}}}function QF(t,e,n){De(18);let r=nn(e,t);FS(r,n),De(19,r[xe])}function FS(t,e){Dd(t)&&Ay(t,e)}function Ay(t,e){let r=t[G],i=t[te],o=t[Ht],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ac(o)),s||=!1,o&&(o.dirty=!1),t[te]&=-9217,s)WF(r,t,r.template,t[xe]);else if(i&8192){let a=ee(null);try{kS(t),OS(t,1);let c=r.components;c!==null&&LS(t,c,1),NS(t)}finally{ee(a)}}}function LS(t,e,n){for(let r=0;r<e.length;r++)QF(t,e[r],n)}function YF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ri(~i);else{let o=i,s=n[++r],a=n[++r];Vb(s,o);let c=e[o];De(24,c),a(2,c),De(25,c)}}}finally{ri(-1)}}function Ev(t,e){let n=$m()?64:1088;for(t[kn].changeDetectionScheduler?.notify(e);t;){t[te]|=n;let r=Kr(t);if(Es(t)&&!r)return t;t=r}return null}function VS(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function jS(t,e){let n=tt+e;if(n<t.length)return t[n]}function yh(t,e,n,r=!0){let i=e[G];if(JF(i,e,t,n),r){let s=Sy(n,t),a=e[Se],c=a.parentNode(t[ti]);c!==null&&uF(i,t[en],a,e,c,s)}let o=e[ys];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function US(t,e){let n=Mc(t,e);return n!==void 0&&ph(n[G],n),n}function Mc(t,e){if(t.length<=tt)return;let n=tt+e,r=t[n];if(r){let i=r[ei];i!==null&&i!==t&&fv(i,r),e>0&&(t[n-1][Xt]=r[Xt]);let o=fc(t,tt+e);cF(r[G],r);let s=o[xn];s!==null&&s.detachView(o[G]),r[Je]=null,r[Xt]=null,r[te]&=-129}return r}function JF(t,e,n,r){let i=tt+r,o=n.length;r>0&&(n[i-1][Xt]=e),r<o-tt?(e[Xt]=n[i],gm(n,tt+r,e)):(n.push(e),e[Xt]=null),e[Je]=n;let s=e[ei];s!==null&&n!==s&&BS(s,e);let a=e[xn];a!==null&&a.insertView(t),bd(e),e[te]|=128}function BS(t,e){let n=t[ro],r=e[Je];if(On(r))t[te]|=2;else{let i=r[Je][Lt];e[Lt]!==i&&(t[te]|=2)}n===null?t[ro]=[e]:n.push(e)}var oi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[G];return Pc(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[xe]}set context(e){this._lView[xe]=e}get destroyed(){return io(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Je];if(ln(e)){let n=e[vc],r=n?n.indexOf(this):-1;r>-1&&(Mc(e,r),fc(n,r))}this._attachedToViewContainer=!1}ph(this._lView[G],this._lView)}onDestroy(e){km(this._lView,e)}markForCheck(){Ev(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[te]&=-129}reattach(){bd(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,_v(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[eo].get(VF,cC)}catch{this.exhaustive=cC}}attachToViewContainerRef(){if(this._appRef)throw new F(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Es(this._lView),n=this._lView[ei];n!==null&&!e&&fv(n,this._lView),IS(this._lView[G],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new F(902,!1);this._appRef=e;let n=Es(this._lView),r=this._lView[ei];r!==null&&!n&&BS(r,this._lView),bd(this._lView)}};var Ss=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=ZF;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=mh(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new oi(o)}}return t})();function ZF(){return Iv(ht(),Z())}function Iv(t,e){return t.type&4?new Ss(e,t,Ps(t,e)):null}function vh(t,e,n,r,i){let o=t.data[e];if(o===null)o=XF(t,e,n,r,i),Lb()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Mb();o.injectorIndex=s===null?-1:s.injectorIndex}return Is(o,!0),o}function XF(t,e,n,r,i){let o=jm(),s=Um(),a=s?o:o&&o.parent,c=t.data[e]=tL(t,a,n,e,r,i);return eL(t,c,o,s),c}function eL(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function tL(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Rb()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var BQ=new RegExp(`^(\\d+)*(${y1}|${m1})*(.*)`);function nL(t){let e=t[Cm]??[],r=t[Je][Se],i=[];for(let o of e)o.data[JC]!==void 0?i.push(o):rL(o,r);t[Cm]=i}function rL(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[YC];for(;n<i;){let o=r.nextSibling;mS(e,r,!1),r=o,n++}}}var iL=()=>null,oL=()=>null;function Ry(t,e){return iL(t,e)}function $S(t,e,n){return oL(t,e,n)}var HS=class{},_h=class{},Ny=class{resolveComponentFactory(e){throw new F(917,!1)}},Vc=class{static NULL=new Ny},co=class{},fo=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>sL()}return t})();function sL(){let t=Z(),e=ht(),n=nn(e.index,t);return(On(n)?n:t)[Se]}var zS=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:()=>null})}return t})();var Bd={},Py=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Bd,r);return i!==Bd||n===Bd?i:this.parentInjector.get(e,n,r)}};function Qd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=fd(i,a);else if(o==2){let c=a,l=e[++s];r=fd(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Ee(t,e=0){let n=Z();if(n===null)return q(t,e);let r=ht();return BC(r,n,dt(t),e)}function aL(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,c=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,c,l]=h.resolveHostDirectives(s);break}lL(t,e,n,a,o,c,l)}o!==null&&r!==null&&cL(n,r,o)}function cL(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new F(-301,!1);r.push(e[i],o)}}function uL(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function lL(t,e,n,r,i,o,s){let a=r.length,c=!1;for(let g=0;g<a;g++){let y=r[g];!c&&dn(y)&&(c=!0,uL(t,n,g)),fy(Gd(n,e),t,y.type)}mL(n,t.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=_S(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=bs(n.mergedAttrs,y.hostAttrs),hL(t,n,e,p,y),gL(p,y,i),s!==null&&s.has(y)){let[N,S]=s.get(y);n.directiveToIndex.set(y.type,[p,N+n.directiveStart,S+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let w=y.type.prototype;!l&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(w.ngOnChanges||w.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}dL(t,n,o)}function dL(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))uC(0,e,i,r),uC(1,e,i,r),dC(e,r,!1);else{let o=n.get(i);lC(0,e,o,r),lC(1,e,o,r),dC(e,r,!0)}}}function uC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),qS(e,o)}}function lC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),qS(e,s)}}function qS(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function dC(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||cv(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let h of l)if(h===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function hL(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Wr(i.type,!0)),s=new ao(o,dn(i),Ee,null);t.blueprint[r]=s,n[r]=s,fL(t,e,r,_S(t,n,i.hostVars,It),i)}function fL(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;pL(s)!=a&&s.push(a),s.push(n,r,o)}}function pL(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function gL(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;dn(e)&&(n[""]=t)}}function mL(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function GS(t,e,n,r,i,o,s,a){let c=e[G],l=c.consts,h=Fn(l,s),p=vh(c,t,n,r,h);return o&&aL(c,e,p,Fn(l,a),i),p.mergedAttrs=bs(p.mergedAttrs,p.attrs),p.attrs!==null&&Qd(p,p.attrs,!1),p.mergedAttrs!==null&&Qd(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function WS(t,e){WO(t,e),Sm(e)&&t.queries.elementEnd(e)}function yL(t,e,n,r,i,o){let s=e.consts,a=Fn(s,i),c=vh(e,t,n,r,a);if(c.mergedAttrs=bs(c.mergedAttrs,c.attrs),o!=null){let l=Fn(s,o);c.localNames=[];for(let h=0;h<l.length;h+=2)c.localNames.push(l[h],-1)}return c.attrs!==null&&Qd(c,c.attrs,!1),c.mergedAttrs!==null&&Qd(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function wv(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Tv(t,e,n){return t[e]=n}function vL(t,e){return t[e]}function zt(t,e,n){if(n===It)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function KS(t,e,n,r){let i=zt(t,e,n);return zt(t,e+1,r)||i}function ry(t,e,n){return function r(i){let o=ni(t)?nn(t.index,e):e;Ev(o,5);let s=e[xe],a=hC(e,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=hC(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function hC(t,e,n,r){let i=ee(null);try{return De(6,e,n),n(r)!==!1}catch(o){return xF(t,o),!1}finally{De(7,e,n),ee(i)}}function _L(t,e,n,r,i,o,s,a){let c=wd(t),l=!1,h=null;if(!r&&c&&(h=EL(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=hn(t,n),g=r?r(p):p;_1(n,g,o,a);let y=i.listen(g,o,a),w=r?N=>r(tn(N[t.index])):t.index;QS(w,e,n,o,a,y,!1)}return l}function EL(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[vs],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function QS(t,e,n,r,i,o,s){let a=e.firstCreatePass?Om(e):null,c=xm(n),l=c.length;c.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function fC(t,e,n,r,i,o){let s=e[n],a=e[G],l=a.data[n].outputs[r],p=s[l].subscribe(o);QS(t.index,a,e,i,o,p,!0)}var My=Symbol("BINDING");var Yd=class extends Vc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Xr(e);return new As(n,this.ngModule)}};function IL(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&fh.SignalBased)!==0};return i&&(o.transform=i),o})}function wL(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function TL(t,e,n){let r=e instanceof ke?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Py(n,r):n}function DL(t){let e=t.get(co,null);if(e===null)throw new F(407,!1);let n=t.get(zS,null),r=t.get(Qr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function bL(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return pS(e,n,n==="svg"?_b:n==="math"?Eb:null)}var As=class extends _h{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=IL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=wL(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=J1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){De(22);let a=ee(null);try{let c=this.componentDef,l=CL(r,c,s,o),h=TL(c,i||this.ngModule,e),p=DL(h),g=p.rendererFactory.createRenderer(null,c),y=r?IF(g,r,c.encapsulation,h):bL(c,g),w=s?.some(pC)||o?.some(P=>typeof P!="function"&&P.bindings.some(pC)),N=lv(null,l,null,512|vS(c),null,null,p,g,h,null,eS(y,h,!0));N[je]=y,Rd(N);let S=null;try{let P=GS(je,N,2,"#host",()=>l.directiveRegistry,!0,0);y&&(yS(g,y,P),Cs(y,N)),DS(l,N,P),nS(l,P,N),WS(l,P),n!==void 0&&AL(P,this.ngContentSelectors,n),S=nn(P.index,N),N[xe]=S[xe],vv(l,N,null)}catch(P){throw S!==null&&gy(S),gy(N),P}finally{De(23),Nd()}return new Jd(this.componentType,N,!!w)}finally{ee(a)}}};function CL(t,e,n,r){let i=t?["ng-version","20.1.4"]:Z1(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[My].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[My].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let c=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=_m(p);c.push(g)}return uv(0,null,SL(o,s),1,a,c,null,null,null,[i],null)}function SL(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function pC(t){let e=t[My].kind;return e==="input"||e==="twoWay"}var Jd=class extends HS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=_c(n[G],je),this.location=Ps(this._tNode,n),this.instance=nn(this._tNode.index,n)[xe],this.hostView=this.changeDetectorRef=new oi(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=yv(r,i[G],i,e,n);this.previousInputValues.set(e,n);let s=nn(r.index,i);Ev(s,1)}get injector(){return new so(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function AL(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var po=(()=>{class t{static __NG_ELEMENT_ID__=RL}return t})();function RL(){let t=ht();return JS(t,Z())}var NL=po,YS=class extends NL{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ps(this._hostTNode,this._hostLView)}get injector(){return new so(this._hostTNode,this._hostLView)}get parentInjector(){let e=Jy(this._hostTNode,this._hostLView);if(OC(e)){let n=zd(e,this._hostLView),r=Hd(e),i=n[G].data[r+8];return new so(i,n)}else return new so(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=gC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-tt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Ry(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Nc(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let c=e&&!$O(e),l;if(c)l=n;else{let S=n||{};l=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef,s=S.directives,a=S.bindings}let h=c?e:new As(Xr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let P=(c?p:this.parentInjector).get(ke,null);P&&(o=P)}let g=Xr(h.componentType??{}),y=Ry(this._lContainer,g?.id??null),w=y?.firstChild??null,N=h.create(p,i,w,o,s,a);return this.insertImpl(N.hostView,l,Nc(this._hostTNode,y)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(wb(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Je],l=new YS(c,c[en],c[Je]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return yh(s,i,o,r),e.attachToViewContainerRef(),gm(iy(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=gC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Mc(this._lContainer,n);r&&(fc(iy(this._lContainer),n),ph(r[G],r))}detach(e){let n=this._adjustIndex(e,-1),r=Mc(this._lContainer,n);return r&&fc(iy(this._lContainer),n)!=null?new oi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function gC(t){return t[vc]}function iy(t){return t[vc]||(t[vc]=[])}function JS(t,e){let n,r=e[t.index];return ln(r)?n=r:(n=VS(r,e,null,t),e[t.index]=n,dv(e,n)),ML(n,e,t,r),new YS(n,t,e)}function PL(t,e){let n=t[Se],r=n.createComment(""),i=hn(e,t),o=n.parentNode(i);return Kd(n,o,r,n.nextSibling(i),!1),r}var ML=OL,kL=()=>!1;function xL(t,e,n){return kL(t,e,n)}function OL(t,e,n,r){if(t[ti])return;let i;n.type&8?i=tn(r):i=PL(e,n),t[ti]=i}var ky=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},xy=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Dv(e,n).matches!==null&&this.queries[n].setDirty()}},Zd=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=HL(e):this.predicate=e}},Oy=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Fy=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,FL(n,o)),this.matchTNodeWithReadOption(e,n,Ud(n,e,o,!1,!1))}else r===Ss?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Ud(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===qt||i===po||i===Ss&&n.type&4)this.addMatch(n.index,-2);else{let o=Ud(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function FL(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function LL(t,e){return t.type&11?Ps(t,e):t.type&4?Iv(t,e):null}function VL(t,e,n,r){return n===-1?LL(e,t):n===-2?jL(t,e,r):Rc(t,t[G],n,e)}function jL(t,e,n){if(n===qt)return Ps(e,t);if(n===Ss)return Iv(e,t);if(n===po)return JS(e,t)}function ZS(t,e,n,r){let i=e[xn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let h=o[l];a.push(VL(e,h,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Ly(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=ZS(t,e,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-c];for(let p=tt;p<h.length;p++){let g=h[p];g[ei]===g[Je]&&Ly(g[G],g,l,r)}if(h[ro]!==null){let p=h[ro];for(let g=0;g<p.length;g++){let y=p[g];Ly(y[G],y,l,r)}}}}}return r}function UL(t,e){return t[xn].queries[e].queryList}function XS(t,e,n){let r=new Wd((n&4)===4);return bb(t,e,r,r.destroy),(e[xn]??=new xy).queries.push(new ky(r))-1}function BL(t,e,n){let r=Ue();return r.firstCreatePass&&(eA(r,new Zd(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),XS(r,Z(),e)}function $L(t,e,n,r){let i=Ue();if(i.firstCreatePass){let o=ht();eA(i,new Zd(e,n,r),o.index),zL(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return XS(i,Z(),n)}function HL(t){return t.split(",").map(e=>e.trim())}function eA(t,e,n){t.queries===null&&(t.queries=new Oy),t.queries.track(new Fy(e,n))}function zL(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Dv(t,e){return t.queries.getByIndex(e)}function qL(t,e){let n=t[G],r=Dv(n,e);return r.crossesNgTemplate?Ly(n,t,e,[]):ZS(n,t,r,e)}var mC=new Set;function ai(t){mC.has(t)||(mC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var uo=class{},Eh=class{};var Xd=class extends uo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Yd(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=vm(e);this._bootstrapComponents=hS(o.bootstrap),this._r3Injector=Km(e,n,[{provide:uo,useValue:this},{provide:Vc,useValue:this.componentFactoryResolver},...r],hr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},eh=class extends Eh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Xd(this.moduleType,e,[])}};var kc=class extends uo{injector;componentFactoryResolver=new Yd(this);instance=null;constructor(e){super();let n=new Ji([...e.providers,{provide:uo,useValue:this},{provide:Vc,useValue:this.componentFactoryResolver}],e.parent||gc(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function jc(t,e,n=null){return new kc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var GL=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Em(!1,n.type),i=r.length>0?jc([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=$({token:t,providedIn:"environment",factory:()=>new t(q(ke))})}return t})();function bv(t){return Ns(()=>{let e=tA(t),n=ye(V({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Zy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(GL).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||mr.Emulated,styles:t.styles||Rt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&ai("NgStandalone"),nA(n);let r=t.dependencies;return n.directiveDefs=yC(r,WL),n.pipeDefs=yC(r,fb),n.id=YL(n),n})}function WL(t){return Xr(t)||_m(t)}function go(t){return Ns(()=>({type:t.type,bootstrap:t.bootstrap||Rt,declarations:t.declarations||Rt,imports:t.imports||Rt,exports:t.exports||Rt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function KL(t,e){if(t==null)return Zr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=fh.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function QL(t){if(t==null)return Zr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function vn(t){return Ns(()=>{let e=tA(t);return nA(e),e})}function Ms(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function tA(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Zr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Rt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:KL(t.inputs,e),outputs:QL(t.outputs),debugInfo:null}}function nA(t){t.features?.forEach(e=>e(t))}function yC(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function YL(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function JL(t){return Object.getPrototypeOf(t.prototype).constructor}function rA(t){let e=JL(t.type),n=!0,r=[t];for(;e;){let i;if(dn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new F(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=oy(t.inputs),s.declaredInputs=oy(t.declaredInputs),s.outputs=oy(t.outputs);let a=i.hostBindings;a&&nV(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&eV(t,c),l&&tV(t,l),ZL(t,i),ob(t.outputs,i.outputs),dn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===rA&&(n=!1)}}e=Object.getPrototypeOf(e)}XL(r)}function ZL(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function XL(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=bs(i.hostAttrs,n=bs(n,i.hostAttrs))}}function oy(t){return t===Zr?{}:t===Rt?[]:t}function eV(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function tV(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function nV(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function rV(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=bs(t.mergedAttrs,t.attrs);let h=t.tView=uv(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Is(t,!1);let c=iV(n,e,t,r);Pd()&&pv(n,e,c,t),Cs(c,e);let l=VS(c,e,c,t);e[r+je]=l,dv(e,l),xL(l,t,e)}function th(t,e,n,r,i,o,s,a,c,l,h){let p=n+je,g;if(e.firstCreatePass){if(g=vh(e,p,4,s||null,a||null),l!=null){let y=Fn(e.consts,l);g.localNames=[];for(let w=0;w<y.length;w+=2)g.localNames.push(y[w],-1)}}else g=e.data[p];return rV(g,t,e,n,r,i,o,c),l!=null&&mv(t,g,h),g}var iV=oV;function oV(t,e,n,r){return Md(!0),e[Se].createComment("")}var Cv=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(Cv||{}),Uc=new U(""),iA=!1,Vy=class extends Ye{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,vb()&&(this.destroyRef=M(gr,{optional:!0})??void 0,this.pendingTasks=M(Vn,{optional:!0})??void 0)}emit(e){let n=ee(null);try{super.next(e)}finally{ee(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Me&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Et=Vy;function oA(t){let e,n;function r(){t=Cc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function vC(t){return queueMicrotask(()=>t()),()=>{t=Cc}}var Sv="isAngularZone",nh=Sv+"_ID",sV=0,ge=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Et(!1);onMicrotaskEmpty=new Et(!1);onStable=new Et(!1);onError=new Et(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=iA}=e;if(typeof Zone>"u")throw new F(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,uV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Sv)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new F(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new F(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,aV,Cc,Cc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},aV={};function Av(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function cV(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){oA(()=>{t.callbackScheduled=!1,jy(t),t.isCheckStableRunning=!0,Av(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),jy(t)}function uV(t){let e=()=>{cV(t)},n=sV++;t._inner=t._inner.fork({name:"angular",properties:{[Sv]:!0,[nh]:n,[nh+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(lV(c))return r.invokeTask(o,s,a,c);try{return _C(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),EC(t)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return _C(t),r.invoke(o,s,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!dV(c)&&e(),EC(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,jy(t),Av(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function jy(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function _C(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function EC(t){t._nesting--,Av(t)}var rh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Et;onMicrotaskEmpty=new Et;onStable=new Et;onError=new Et;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function lV(t){return sA(t,"__ignore_ng_zone__")}function dV(t){return sA(t,"__scheduler_tick__")}function sA(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var aA=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})();var Ih=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Rv=new U("");function mo(t){return!!t&&typeof t.then=="function"}function wh(t){return!!t&&typeof t.subscribe=="function"}var cA=new U("");var Nv=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=M(cA,{optional:!0})??[];injector=M(Ze);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Ve(this.injector,i);if(mo(o))n.push(o);else if(wh(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Th=new U("");function uA(){$g(()=>{let t="";throw new F(600,t)})}function lA(t){return t.isBoundToModule}var hV=10;var ci=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(Nt);afterRenderManager=M(aA);zonelessEnabled=M(ws);rootEffectScheduler=M(Xm);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ye;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(Vn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(X(n=>!n))}constructor(){M(Uc,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=M(ke);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Ze.NULL){return this._injector.get(ge).run(()=>{De(10);let s=n instanceof _h;if(!this._injector.get(Nv).done){let w="";throw new F(405,w)}let c;s?c=n:c=this._injector.get(Vc).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=lA(c)?void 0:this._injector.get(uo),h=r||c.selector,p=c.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(Rv,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),Ac(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),De(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){De(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Cv.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new F(101,!1);let n=ee(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ee(n),this.afterTick.next(),De(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(co,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<hV;)De(14),this.synchronizeOnce(),De(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ec(i))continue;let o=r&&!this.zonelessEnabled?0:1;_v(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ec(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Ac(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Th,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Ac(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new F(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ac(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Dh(t,e,n,r){let i=Z(),o=pr();if(zt(i,o,e)){let s=Ue(),a=Dc();NF(a,i,t,e,n,r)}return Dh}function fV(){return Z()[Lt][xe]}var Uy=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function sy(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function pV(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let l=t.at(o),h=e[o],p=sy(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let g=t.at(s),y=e[c],w=sy(s,g,c,y,n);if(w!==0){w<0&&t.updateValue(s,y),s--,c--;continue}let N=n(o,l),S=n(s,g),P=n(o,h);if(Object.is(P,S)){let L=n(c,y);Object.is(L,N)?(t.swap(o,s),t.updateValue(s,y),c--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new ih,i??=wC(t,o,s,n),By(t,r,o,P))t.updateValue(o,h),o++,s++;else if(i.has(P))r.set(N,t.detach(o)),s--;else{let L=t.create(o,e[o]);t.attach(o,L),o++,s++}}for(;o<=c;)IC(t,r,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,g=sy(o,h,o,p,n);if(g!==0)g<0&&t.updateValue(o,p),o++,l=c.next();else{r??=new ih,i??=wC(t,o,s,n);let y=n(o,p);if(By(t,r,o,y))t.updateValue(o,p),o++,s++,l=c.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=c.next();else{let w=n(o,h);r.set(w,t.detach(o)),s--}}}for(;!l.done;)IC(t,r,n,t.length,l.value),l=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}function By(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function IC(t,e,n,r,i){if(By(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function wC(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var ih=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function gV(t,e,n,r,i,o,s,a){ai("NgControlFlow");let c=Z(),l=Ue(),h=Fn(l.consts,o);return th(c,l,t,e,n,r,i,h,256,s,a),Pv}function Pv(t,e,n,r,i,o,s,a){ai("NgControlFlow");let c=Z(),l=Ue(),h=Fn(l.consts,o);return th(c,l,t,e,n,r,i,h,512,s,a),Pv}function mV(t,e){ai("NgControlFlow");let n=Z(),r=pr(),i=n[r]!==It?n[r]:-1,o=i!==-1?oh(n,je+i):void 0,s=0;if(zt(n,r,t)){let a=ee(null);try{if(o!==void 0&&US(o,s),t!==-1){let c=je+t,l=oh(n,c),h=qy(n[G],c),p=$S(l,h,n),g=mh(n,h,e,{dehydratedView:p});yh(l,g,s,Nc(h,p))}}finally{ee(a)}}else if(o!==void 0){let a=jS(o,s);a!==void 0&&(a[xe]=e)}}var $y=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-tt}};function yV(t){return t}function vV(t,e){return e}var Hy=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function _V(t,e,n,r,i,o,s,a,c,l,h,p,g){ai("NgControlFlow");let y=Z(),w=Ue(),N=c!==void 0,S=Z(),P=a?s.bind(S[Lt][xe]):s,L=new Hy(N,P);S[je+t]=L,th(y,w,t+1,e,n,r,i,Fn(w.consts,o),256),N&&th(y,w,t+2,c,l,h,p,Fn(w.consts,g),512)}var zy=class extends Uy{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-tt}at(e){return this.getLView(e)[xe].$implicit}attach(e,n){let r=n[ys];this.needsIndexUpdate||=e!==this.length,yh(this.lContainer,n,e,Nc(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,IV(this.lContainer,e)}create(e,n){let r=Ry(this.lContainer,this.templateTNode.tView.ssrId),i=mh(this.hostLView,this.templateTNode,new $y(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){ph(e[G],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[xe].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[xe].$index=e}getLView(e){return wV(this.lContainer,e)}};function EV(t){let e=ee(null),n=Ln();try{let r=Z(),i=r[G],o=r[n],s=n+1,a=oh(r,s);if(o.liveCollection===void 0){let l=qy(i,s);o.liveCollection=new zy(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(pV(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let l=pr(),h=c.length===0;if(zt(r,l,h)){let p=n+2,g=oh(r,p);if(h){let y=qy(i,p),w=$S(g,y,r),N=mh(r,y,void 0,{dehydratedView:w});yh(g,N,0,Nc(y,w))}else i.firstUpdatePass&&nL(g),US(g,0)}}}finally{ee(e)}}function oh(t,e){return t[e]}function IV(t,e){return Mc(t,e)}function wV(t,e){return jS(t,e)}function qy(t,e){return _c(t,e)}function dA(t,e,n){let r=Z(),i=pr();if(zt(r,i,e)){let o=Ue(),s=Dc();bS(s,r,t,e,r[Se],n)}return dA}function Gy(t,e,n,r,i){yv(e,t,n,i?"class":"style",r)}function Mv(t,e,n,r){let i=Z(),o=i[G],s=t+je,a=o.firstCreatePass?GS(s,i,2,e,RF,Ab(),n,r):o.data[s];if(SS(a,i,t,e,pA),wd(a)){let c=i[G];DS(c,i,a),nS(c,a,i)}return r!=null&&mv(i,a),Mv}function kv(){let t=Ue(),e=ht(),n=AS(e);return t.firstCreatePass&&WS(t,n),Lm(n)&&Vm(),Fm(),n.classesWithoutHost!=null&&QO(n)&&Gy(t,n,Z(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&YO(n)&&Gy(t,n,Z(),n.stylesWithoutHost,!1),kv}function bh(t,e,n,r){return Mv(t,e,n,r),kv(),bh}function hA(t,e,n,r){let i=Z(),o=i[G],s=t+je,a=o.firstCreatePass?yL(s,o,2,e,n,r):o.data[s];return SS(a,i,t,e,pA),r!=null&&mv(i,a),hA}function fA(){let t=ht(),e=AS(t);return Lm(e)&&Vm(),Fm(),fA}var pA=(t,e,n,r,i)=>(Md(!0),pS(e[Se],r,zb()));function TV(){return Z()}function Ch(t,e,n){let r=Z(),i=pr();if(zt(r,i,e)){let o=Ue(),s=Dc(),a=zm(o.data),c=kF(a,s,r);CS(s,r,t,e,c,n)}return Ch}var oo=void 0;function DV(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var bV=["en",[["a","p"],["AM","PM"],oo],[["AM","PM"],oo,oo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],oo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],oo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",oo,"{1} 'at' {0}",oo],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",DV],ay={};function Vt(t){let e=CV(t),n=TC(e);if(n)return n;let r=e.split("-")[0];if(n=TC(r),n)return n;if(r==="en")return bV;throw new F(701,!1)}function TC(t){return t in ay||(ay[t]=Jt.ng&&Jt.ng.common&&Jt.ng.common.locales&&Jt.ng.common.locales[t]),ay[t]}var Oe=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Oe||{});function CV(t){return t.toLowerCase().replace(/_/g,"-")}var Bc="en-US";var SV=Bc;function gA(t){typeof t=="string"&&(SV=t.toLowerCase().replace(/_/g,"-"))}function Sh(t,e,n){let r=Z(),i=Ue(),o=ht();return mA(i,r,r[Se],o,t,e,n),Sh}function mA(t,e,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=ry(r,e,o),_L(r,t,e,s,n,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];c??=ry(r,e,o),fC(r,e,g,y,i,c)}if(l&&l.length)for(let p of l)c??=ry(r,e,o),fC(r,e,p,i,i,c)}}function AV(t=1){return Hb(t)}function xv(t,e,n,r){$L(t,e,n,r)}function RV(t,e,n){BL(t,e,n)}function Ov(t){let e=Z(),n=Ue(),r=qm();Ad(r+1);let i=Dv(n,r);if(t.dirty&&Ib(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=qL(e,r);t.reset(o,u1),t.notifyOnChanges()}return!0}return!1}function Fv(){return UL(Z(),qm())}function NV(t){let e=xb();return Td(e,je+t)}function Ld(t,e){return t<<17|e<<2}function lo(t){return t>>17&32767}function PV(t){return(t&2)==2}function MV(t,e){return t&131071|e<<17}function Wy(t){return t|2}function Rs(t){return(t&131068)>>2}function cy(t,e){return t&-131069|e<<2}function kV(t){return(t&1)===1}function Ky(t){return t|1}function xV(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=lo(s),c=Rs(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||ms(p,h)>0)&&(l=!0)}else h=n;if(i)if(c!==0){let g=lo(t[a+1]);t[r+1]=Ld(g,a),g!==0&&(t[g+1]=cy(t[g+1],r)),t[a+1]=MV(t[a+1],r)}else t[r+1]=Ld(a,0),a!==0&&(t[a+1]=cy(t[a+1],r)),a=r;else t[r+1]=Ld(c,0),a===0?a=r:t[c+1]=cy(t[c+1],r),c=r;l&&(t[r+1]=Wy(t[r+1])),DC(t,h,r,!0),DC(t,h,r,!1),OV(e,h,t,r,o),s=Ld(a,c),o?e.classBindings=s:e.styleBindings=s}function OV(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ms(o,e)>=0&&(n[r+1]=Ky(n[r+1]))}function DC(t,e,n,r){let i=t[n+1],o=e===null,s=r?lo(i):Rs(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];FV(c,e)&&(a=!0,t[s+1]=r?Ky(l):Wy(l)),s=r?lo(l):Rs(l)}a&&(t[n+1]=r?Wy(i):Ky(i))}function FV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ms(t,e)>=0:!1}var pn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function LV(t){return t.substring(pn.key,pn.keyEnd)}function VV(t){return jV(t),yA(t,vA(t,0,pn.textEnd))}function yA(t,e){let n=pn.textEnd;return n===e?-1:(e=pn.keyEnd=UV(t,pn.key=e,n),vA(t,e,n))}function jV(t){pn.key=0,pn.keyEnd=0,pn.value=0,pn.valueEnd=0,pn.textEnd=t.length}function vA(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function UV(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function _A(t,e){return HV(t,e,null,!0),_A}function BV(t){zV(YV,$V,t,!0)}function $V(t,e){for(let n=VV(e);n>=0;n=yA(e,n))vd(t,LV(e),!0)}function HV(t,e,n,r){let i=Z(),o=Ue(),s=Cd(2);if(o.firstUpdatePass&&IA(o,t,s,r),e!==It&&zt(i,s,e)){let a=o.data[Ln()];wA(o,a,i,i[Se],t,i[s+1]=ZV(e,n),r,s)}}function zV(t,e,n,r){let i=Ue(),o=Cd(2);i.firstUpdatePass&&IA(i,null,o,r);let s=Z();if(n!==It&&zt(s,o,n)){let a=i.data[Ln()];if(TA(a,r)&&!EA(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=fd(c,n||"")),Gy(i,a,s,n,r)}else JV(i,a,s,s[Se],s[o+1],s[o+1]=QV(t,e,n),r,o)}}function EA(t,e){return e>=t.expandoStartIndex}function IA(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Ln()],s=EA(t,n);TA(o,r)&&e===null&&!s&&(e=!1),e=qV(i,o,e,r),xV(i,o,e,n,s,r)}}function qV(t,e,n,r){let i=zm(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=uy(null,t,e,n,r),n=xc(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=uy(i,t,e,n,r),o===null){let c=GV(t,e,r);c!==void 0&&Array.isArray(c)&&(c=uy(null,t,e,c[1],r),c=xc(c,e.attrs,r),WV(t,e,r,c))}else o=KV(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function GV(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Rs(r)!==0)return t[lo(r)]}function WV(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[lo(i)]=r}function KV(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=xc(r,s,n)}return xc(r,e.attrs,n)}function uy(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=xc(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function xc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),vd(t,s,n?!0:e[++o]))}return t===void 0?null:t}function QV(t,e,n){if(n==null||n==="")return Rt;let r=[],i=mn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function YV(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&vd(t,r,n)}function JV(t,e,n,r,i,o,s,a){i===It&&(i=Rt);let c=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let g=c<i.length?i[c+1]:void 0,y=l<o.length?o[l+1]:void 0,w=null,N;h===p?(c+=2,l+=2,g!==y&&(w=p,N=y)):p===null||h!==null&&h<p?(c+=2,w=h):(l+=2,w=p,N=y),w!==null&&wA(t,e,n,r,w,N,s,a),h=c<i.length?i[c]:null,p=l<o.length?o[l]:null}}function wA(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],h=kV(l)?bC(c,e,n,i,Rs(l),s):void 0;if(!sh(h)){sh(o)||PV(l)&&(o=bC(c,null,n,i,a,s));let p=Rm(Ln(),n);EF(r,s,p,i,o)}}function bC(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,g=n[i+1];g===It&&(g=p?Rt:void 0);let y=p?_d(g,r):h===r?g:void 0;if(l&&!sh(y)&&(y=_d(c,r)),sh(y)&&(a=y,s))return a;let w=t[i+1];i=s?lo(w):Rs(w)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=_d(c,r))}return a}function sh(t){return t!==void 0}function ZV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=hr(mn(t)))),t}function TA(t,e){return(t.flags&(e?8:16))!==0}function XV(t,e=""){let n=Z(),r=Ue(),i=t+je,o=r.firstCreatePass?vh(r,i,1,e,null):r.data[i],s=ej(r,n,o,e,t);n[i]=s,Pd()&&pv(r,n,s,o),Is(o,!1)}var ej=(t,e,n,r,i)=>(Md(!0),X1(e[Se],r));function DA(t,e,n,r=""){return zt(t,pr(),n)?e+Jr(n)+r:It}function tj(t,e,n,r,i,o=""){let s=Ob(),a=KS(t,s,n,i);return Cd(2),a?e+Jr(n)+r+Jr(i)+o:It}function bA(t){return Lv("",t),bA}function Lv(t,e,n){let r=Z(),i=DA(r,t,e,n);return i!==It&&SA(r,Ln(),i),Lv}function CA(t,e,n,r,i){let o=Z(),s=tj(o,t,e,n,r,i);return s!==It&&SA(o,Ln(),s),CA}function SA(t,e,n){let r=Rm(e,t);eF(t[Se],r,n)}function AA(t,e,n){Ym(e)&&(e=e());let r=Z(),i=pr();if(zt(r,i,e)){let o=Ue(),s=Dc();bS(s,r,t,e,r[Se],n)}return AA}function nj(t,e){let n=Ym(t);return n&&t.set(e),n}function RA(t,e){let n=Z(),r=Ue(),i=ht();return mA(r,n,n[Se],i,t,e),RA}function rj(t){return zt(Z(),pr(),t)?Jr(t):It}function ij(t,e,n=""){return DA(Z(),t,e,n)}function oj(t,e,n){let r=Ue();if(r.firstCreatePass){let i=dn(t);Qy(n,r.data,r.blueprint,i,!0),Qy(e,r.data,r.blueprint,i,!1)}}function Qy(t,e,n,r,i){if(t=dt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Qy(t[o],e,n,r,i);else{let o=Ue(),s=Z(),a=ht(),c=Yi(t)?t:dt(t.provide),l=wm(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Yi(t)||!t.multi){let y=new ao(l,i,Ee,null),w=dy(c,e,i?h:h+g,p);w===-1?(fy(Gd(a,s),o,c),ly(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[w]=y,s[w]=y)}else{let y=dy(c,e,h+g,p),w=dy(c,e,h,h+g),N=y>=0&&n[y],S=w>=0&&n[w];if(i&&!S||!i&&!N){fy(Gd(a,s),o,c);let P=cj(i?aj:sj,n.length,i,r,l,t);!i&&S&&(n[w].providerFactory=P),ly(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(P),s.push(P)}else{let P=NA(n[i?w:y],l,!i&&r);ly(o,t,y>-1?y:w,P)}!i&&r&&S&&n[w].componentProviders++}}}function ly(t,e,n,r){let i=Yi(e),o=yb(e);if(i||o){let c=(o?dt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,c]):l[h+1].push(r,c)}else l.push(n,c)}}}function NA(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function dy(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function sj(t,e,n,r,i){return Yy(this.multi,[])}function aj(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Rc(r,r[G],this.providerFactory.index,i);s=c.slice(0,a),Yy(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Yy(o,s);return s}function Yy(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function cj(t,e,n,r,i,o){let s=new ao(t,n,Ee,null);return s.multi=[],s.index=e,s.componentProviders=0,NA(s,i,r&&!n),s}function uj(t,e=[]){return n=>{n.providersResolver=(r,i)=>oj(r,i?i(t):t,e)}}function lj(t,e,n){let r=Tc()+t,i=Z();return i[r]===It?Tv(i,r,n?e.call(n):e()):vL(i,r)}function dj(t,e,n,r){return MA(Z(),Tc(),t,e,n,r)}function PA(t,e){let n=t[e];return n===It?void 0:n}function MA(t,e,n,r,i,o){let s=e+n;return zt(t,s,i)?Tv(t,s+1,o?r.call(o,i):r(i)):PA(t,s+1)}function hj(t,e,n,r,i,o,s){let a=e+n;return KS(t,a,i,o)?Tv(t,a+2,s?r.call(s,i,o):r(i,o)):PA(t,a+2)}function fj(t,e){let n=Ue(),r,i=t+je;n.firstCreatePass?(r=pj(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Wr(r.type,!0)),s,a=At(Ee);try{let c=qd(!1),l=o();return qd(c),Nm(n,Z(),i,l),l}finally{At(a)}}function pj(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function gj(t,e,n){let r=t+je,i=Z(),o=Td(i,r);return kA(i,r)?MA(i,Tc(),e,o.transform,n,o):o.transform(n)}function mj(t,e,n,r){let i=t+je,o=Z(),s=Td(o,i);return kA(o,i)?hj(o,Tc(),e,s.transform,n,r,s):s.transform(n,r)}function kA(t,e){return t[G].data[e].pure}var ah=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Vv=(()=>{class t{compileModuleSync(n){return new eh(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=vm(n),o=hS(i.declarations).reduce((s,a)=>{let c=Xr(a);return c&&s.push(new As(c)),s},[]);return new ah(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var yj=(()=>{class t{zone=M(ge);changeDetectionScheduler=M(Qr);applicationRef=M(ci);applicationErrorHandler=M(Nt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xA=new U("",{factory:()=>!1});function jv({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ge(ye(V({},Uv()),{scheduleInRootZone:n})),[{provide:ge,useFactory:t},{provide:fr,multi:!0,useFactory:()=>{let r=M(yj,{optional:!0});return()=>r.initialize()}},{provide:fr,multi:!0,useFactory:()=>{let r=M(_j);return()=>{r.initialize()}}},e===!0?{provide:Jm,useValue:!0}:[],{provide:Zm,useValue:n??iA},{provide:Nt,useFactory:()=>{let r=M(ge),i=M(ke),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Mn),o.handleError(s))})}}}]}function vj(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=jv({ngZoneFactory:()=>{let i=Uv(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&ai("NgZone_CoalesceEvent"),new ge(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Ft([{provide:xA,useValue:!0},{provide:ws,useValue:!1},r])}function Uv(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var _j=(()=>{class t{subscription=new Me;initialized=!1;zone=M(ge);pendingTasks=M(Vn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ge.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var OA=(()=>{class t{applicationErrorHandler=M(Nt);appRef=M(ci);taskService=M(Vn);ngZone=M(ge);zonelessEnabled=M(ws);tracing=M(Uc,{optional:!0});disableScheduling=M(Jm,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Me;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(nh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(Zm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof rh||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?vC:oA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(nh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,vC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ej(){return typeof $localize<"u"&&$localize.locale||Bc}var ks=new U("",{providedIn:"root",factory:()=>M(ks,{optional:!0,skipSelf:!0})||Ej()});function xs(t){return nb(t)}function Ij(t,e){return sd(t,e?.equal)}var FA=class{[_t];constructor(e){this[_t]=e}destroy(){this[_t].destroy()}};var jA=Symbol("InputSignalNode#UNSET"),Oj=ye(V({},ad),{transformFn:void 0,applyValueToInputSignal(t,e){ps(t,e)}});function UA(t,e){let n=Object.create(Oj);n.value=t,n.transformFn=e?.transform;function r(){if(ds(n),n.value===jA){let i=null;throw new F(-950,i)}return n.value}return r[_t]=n,r}var Rh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Oc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},Fj=new U("");Fj.__NG_ELEMENT_ID__=t=>{let e=ht();if(e===null)throw new F(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new F(204,!1)};function LA(t,e){return UA(t,e)}function Lj(t){return UA(jA,t)}var BA=(LA.required=Lj,LA);var Os=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},$A=new Os("20.1.4");var Bv=new U(""),Vj=new U("");function $c(t){return!t.moduleRef}function jj(t){let e=$c(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ge);return n.run(()=>{$c(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Nt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),$c(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Bv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Bv);s.add(o),t.moduleRef.onDestroy(()=>{Ac(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return Bj(r,n,()=>{let o=e.get(Vn),s=o.add(),a=e.get(Nv);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(ks,Bc);if(gA(c||Bc),!e.get(Vj,!0))return $c(t)?e.get(ci):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if($c(t)){let h=e.get(ci);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return Uj?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var Uj;function Bj(t,e,n){try{let r=n();return mo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Ah=null;function $j(t=[],e){return Ze.create({name:e,providers:[{provide:pc,useValue:"platform"},{provide:Bv,useValue:new Set([()=>Ah=null])},...t]})}function Hj(t=[]){if(Ah)return Ah;let e=$j(t);return Ah=e,uA(),zj(e),e}function zj(t){let e=t.get(lh,null);Ve(t,()=>{e?.forEach(n=>n())})}function qv(){return!1}var Fs=(()=>{class t{static __NG_ELEMENT_ID__=qj}return t})();function qj(t){return Gj(ht(),Z(),(t&16)===16)}function Gj(t,e,n){if(ni(t)&&!n){let r=nn(t.index,e);return new oi(r,r)}else if(t.type&175){let r=e[Lt];return new oi(r,e)}return null}var $v=class{constructor(){}supports(e){return e instanceof Map||wv(e)}create(){return new Hv}},Hv=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||wv(e)))throw new F(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new zv(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},zv=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function VA(){return new Gv([new $v])}var Gv=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:VA});factories;constructor(n){this.factories=n}static create(n,r){if(r){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||VA()),deps:[[t,new AC,new Pt]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r)return r;throw new F(901,!1)}}return t})();function HA(t){De(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Hj(r),o=[jv({}),{provide:Qr,useExisting:OA},Gb,...n||[]],s=new kc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return jj({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{De(9)}}function Nh(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var GA=null;function Er(){return GA}function Wv(t){GA??=t}var Hc=class{},Kv=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M(WA),providedIn:"platform"})}return t})();var WA=(()=>{class t extends Kv{_location;_history;_doc=M(ze);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Er().getBaseHref(this._doc)}onPopState(n){let r=Er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function KA(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function zA(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function ui(t){return t&&t[0]!=="?"?`?${t}`:t}var Ls=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M(YA),providedIn:"root"})}return t})(),QA=new U(""),YA=(()=>{class t extends Ls{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(ze).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return KA(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ui(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+ui(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+ui(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(q(Kv),q(QA,8))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Vs=(()=>{class t{_subject=new Ye;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Qj(zA(qA(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ui(r))}normalize(n){return t.stripTrailingSlash(Kj(this._basePath,qA(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ui(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ui(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ui;static joinWithSlash=KA;static stripTrailingSlash=zA;static \u0275fac=function(r){return new(r||t)(q(Ls))};static \u0275prov=$({token:t,factory:()=>Wj(),providedIn:"root"})}return t})();function Wj(){return new Vs(q(Ls))}function Kj(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function qA(t){return t.replace(/\/index.html$/,"")}function Qj(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var r_=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(r_||{});var wt=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(wt||{}),we=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(we||{}),jt=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(jt||{}),Ut={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function e0(t){return Vt(t)[Oe.LocaleId]}function t0(t,e,n){let r=Vt(t),i=[r[Oe.DayPeriodsFormat],r[Oe.DayPeriodsStandalone]],o=rn(i,e);return rn(o,n)}function n0(t,e,n){let r=Vt(t),i=[r[Oe.DaysFormat],r[Oe.DaysStandalone]],o=rn(i,e);return rn(o,n)}function r0(t,e,n){let r=Vt(t),i=[r[Oe.MonthsFormat],r[Oe.MonthsStandalone]],o=rn(i,e);return rn(o,n)}function i0(t,e){let r=Vt(t)[Oe.Eras];return rn(r,e)}function zc(t,e){let n=Vt(t);return rn(n[Oe.DateFormat],e)}function qc(t,e){let n=Vt(t);return rn(n[Oe.TimeFormat],e)}function Gc(t,e){let r=Vt(t)[Oe.DateTimeFormat];return rn(r,e)}function Un(t,e){let n=Vt(t),r=n[Oe.NumberSymbols][e];if(typeof r>"u"){if(e===Ut.CurrencyDecimal)return n[Oe.NumberSymbols][Ut.Decimal];if(e===Ut.CurrencyGroup)return n[Oe.NumberSymbols][Ut.Group]}return r}function o0(t,e){return Vt(t)[Oe.NumberFormats][e]}function s0(t){if(!t[Oe.ExtraData])throw new F(2303,!1)}function a0(t){let e=Vt(t);return s0(e),(e[Oe.ExtraData][2]||[]).map(r=>typeof r=="string"?Qv(r):[Qv(r[0]),Qv(r[1])])}function c0(t,e,n){let r=Vt(t);s0(r);let i=[r[Oe.ExtraData][0],r[Oe.ExtraData][1]],o=rn(i,e)||[];return rn(o,n)||[]}function rn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new F(2304,!1)}function Qv(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var Yj=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ph={},Jj=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function u0(t,e,n,r){let i=s2(t);e=Ir(n,e)||e;let s=[],a;for(;e;)if(a=Jj.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=d0(r,c),i=o2(i,r));let l="";return s.forEach(h=>{let p=r2(h);l+=p?p(i,n,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Fh(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Ir(t,e){let n=e0(t);if(Ph[n]??={},Ph[n][e])return Ph[n][e];let r="";switch(e){case"shortDate":r=zc(t,jt.Short);break;case"mediumDate":r=zc(t,jt.Medium);break;case"longDate":r=zc(t,jt.Long);break;case"fullDate":r=zc(t,jt.Full);break;case"shortTime":r=qc(t,jt.Short);break;case"mediumTime":r=qc(t,jt.Medium);break;case"longTime":r=qc(t,jt.Long);break;case"fullTime":r=qc(t,jt.Full);break;case"short":let i=Ir(t,"shortTime"),o=Ir(t,"shortDate");r=Mh(Gc(t,jt.Short),[i,o]);break;case"medium":let s=Ir(t,"mediumTime"),a=Ir(t,"mediumDate");r=Mh(Gc(t,jt.Medium),[s,a]);break;case"long":let c=Ir(t,"longTime"),l=Ir(t,"longDate");r=Mh(Gc(t,jt.Long),[c,l]);break;case"full":let h=Ir(t,"fullTime"),p=Ir(t,"fullDate");r=Mh(Gc(t,jt.Full),[h,p]);break}return r&&(Ph[n][e]=r),r}function Mh(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function En(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function Zj(t,e){return En(t,3).substring(0,e)}function qe(t,e,n=0,r=!1,i=!1){return function(o,s){let a=Xj(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return Zj(a,e);let c=Un(s,Ut.MinusSign);return En(a,e,c,r,i)}}function Xj(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new F(2301,!1)}}function be(t,e,n=wt.Format,r=!1){return function(i,o){return e2(i,o,t,e,n,r)}}function e2(t,e,n,r,i,o){switch(n){case 2:return r0(e,i,r)[t.getMonth()];case 1:return n0(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=a0(e),h=c0(e,i,r),p=l.findIndex(g=>{if(Array.isArray(g)){let[y,w]=g,N=s>=y.hours&&a>=y.minutes,S=s<w.hours||s===w.hours&&a<w.minutes;if(y.hours<w.hours){if(N&&S)return!0}else if(N||S)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return t0(e,i,r)[s<12?0:1];case 3:return i0(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new F(2302,!1)}}function kh(t){return function(e,n,r){let i=-1*r,o=Un(n,Ut.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+En(s,2,o)+En(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+En(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+En(s,2,o)+":"+En(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+En(s,2,o)+":"+En(Math.abs(i%60),2,o);default:throw new F(2302,!1)}}}var t2=0,Oh=4;function n2(t){let e=Fh(t,t2,1).getDay();return Fh(t,0,1+(e<=Oh?Oh:Oh+7)-e)}function l0(t){let e=t.getDay(),n=e===0?-3:Oh-e;return Fh(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Yv(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=l0(n),s=n2(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return En(i,t,Un(r,Ut.MinusSign))}}function xh(t,e=!1){return function(n,r){let o=l0(n).getFullYear();return En(o,t,Un(r,Ut.MinusSign),e)}}var Jv={};function r2(t){if(Jv[t])return Jv[t];let e;switch(t){case"G":case"GG":case"GGG":e=be(3,we.Abbreviated);break;case"GGGG":e=be(3,we.Wide);break;case"GGGGG":e=be(3,we.Narrow);break;case"y":e=qe(0,1,0,!1,!0);break;case"yy":e=qe(0,2,0,!0,!0);break;case"yyy":e=qe(0,3,0,!1,!0);break;case"yyyy":e=qe(0,4,0,!1,!0);break;case"Y":e=xh(1);break;case"YY":e=xh(2,!0);break;case"YYY":e=xh(3);break;case"YYYY":e=xh(4);break;case"M":case"L":e=qe(1,1,1);break;case"MM":case"LL":e=qe(1,2,1);break;case"MMM":e=be(2,we.Abbreviated);break;case"MMMM":e=be(2,we.Wide);break;case"MMMMM":e=be(2,we.Narrow);break;case"LLL":e=be(2,we.Abbreviated,wt.Standalone);break;case"LLLL":e=be(2,we.Wide,wt.Standalone);break;case"LLLLL":e=be(2,we.Narrow,wt.Standalone);break;case"w":e=Yv(1);break;case"ww":e=Yv(2);break;case"W":e=Yv(1,!0);break;case"d":e=qe(2,1);break;case"dd":e=qe(2,2);break;case"c":case"cc":e=qe(7,1);break;case"ccc":e=be(1,we.Abbreviated,wt.Standalone);break;case"cccc":e=be(1,we.Wide,wt.Standalone);break;case"ccccc":e=be(1,we.Narrow,wt.Standalone);break;case"cccccc":e=be(1,we.Short,wt.Standalone);break;case"E":case"EE":case"EEE":e=be(1,we.Abbreviated);break;case"EEEE":e=be(1,we.Wide);break;case"EEEEE":e=be(1,we.Narrow);break;case"EEEEEE":e=be(1,we.Short);break;case"a":case"aa":case"aaa":e=be(0,we.Abbreviated);break;case"aaaa":e=be(0,we.Wide);break;case"aaaaa":e=be(0,we.Narrow);break;case"b":case"bb":case"bbb":e=be(0,we.Abbreviated,wt.Standalone,!0);break;case"bbbb":e=be(0,we.Wide,wt.Standalone,!0);break;case"bbbbb":e=be(0,we.Narrow,wt.Standalone,!0);break;case"B":case"BB":case"BBB":e=be(0,we.Abbreviated,wt.Format,!0);break;case"BBBB":e=be(0,we.Wide,wt.Format,!0);break;case"BBBBB":e=be(0,we.Narrow,wt.Format,!0);break;case"h":e=qe(3,1,-12);break;case"hh":e=qe(3,2,-12);break;case"H":e=qe(3,1);break;case"HH":e=qe(3,2);break;case"m":e=qe(4,1);break;case"mm":e=qe(4,2);break;case"s":e=qe(5,1);break;case"ss":e=qe(5,2);break;case"S":e=qe(6,1);break;case"SS":e=qe(6,2);break;case"SSS":e=qe(6,3);break;case"Z":case"ZZ":case"ZZZ":e=kh(0);break;case"ZZZZZ":e=kh(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=kh(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=kh(2);break;default:return null}return Jv[t]=e,e}function d0(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function i2(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function o2(t,e,n){let i=t.getTimezoneOffset(),o=d0(e,i);return i2(t,-1*(o-i))}function s2(t){if(JA(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return Fh(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(Yj))return a2(r)}let e=new Date(t);if(!JA(e))throw new F(2302,!1);return e}function a2(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,c,l),e}function JA(t){return t instanceof Date&&!isNaN(t.valueOf())}var c2=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ZA=22,Lh=".",Wc="0",u2=";",l2=",",Zv="#";function d2(t,e,n,r,i,o,s=!1){let a="",c=!1;if(!isFinite(t))a=Un(n,Ut.Infinity);else{let l=p2(t);s&&(l=f2(l));let h=e.minInt,p=e.minFrac,g=e.maxFrac;if(o){let L=o.match(c2);if(L===null)throw new F(2306,!1);let H=L[1],z=L[3],Ne=L[5];H!=null&&(h=Xv(H)),z!=null&&(p=Xv(z)),Ne!=null?g=Xv(Ne):z!=null&&p>g&&(g=p)}g2(l,p,g);let y=l.digits,w=l.integerLen,N=l.exponent,S=[];for(c=y.every(L=>!L);w<h;w++)y.unshift(0);for(;w<0;w++)y.unshift(0);w>0?S=y.splice(w,y.length):(S=y,y=[0]);let P=[];for(y.length>=e.lgSize&&P.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)P.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&P.unshift(y.join("")),a=P.join(Un(n,r)),S.length&&(a+=Un(n,i)+S.join("")),N&&(a+=Un(n,Ut.Exponential)+"+"+N)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function h0(t,e,n){let r=o0(e,r_.Decimal),i=h2(r,Un(e,Ut.MinusSign));return d2(t,i,e,Ut.Group,Ut.Decimal,n)}function h2(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(u2),i=r[0],o=r[1],s=i.indexOf(Lh)!==-1?i.split(Lh):[i.substring(0,i.lastIndexOf(Wc)+1),i.substring(i.lastIndexOf(Wc)+1)],a=s[0],c=s[1]||"";n.posPre=a.substring(0,a.indexOf(Zv));for(let h=0;h<c.length;h++){let p=c.charAt(h);p===Wc?n.minFrac=n.maxFrac=h+1:p===Zv?n.maxFrac=h+1:n.posSuf+=p}let l=a.split(l2);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let h=i.length-n.posPre.length-n.posSuf.length,p=o.indexOf(Zv);n.negPre=o.substring(0,p).replace(/'/g,""),n.negSuf=o.slice(p+h).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function f2(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function p2(t){let e=Math.abs(t)+"",n=0,r,i,o,s,a;for((i=e.indexOf(Lh))>-1&&(e=e.replace(Lh,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Wc;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Wc;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>ZA&&(r=r.splice(0,ZA-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function g2(t,e,n){if(e>n)throw new F(2307,!1);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+t.integerLen,h=r.reduceRight(function(p,g,y,w){return g=g+p,w[y]=g<10?g:g-10,c&&(w[y]===0&&y>=l?w.pop():c=!1),g>=10?1:0},0);h&&(r.unshift(h),t.integerLen++)}function Xv(t){let e=parseInt(t);if(isNaN(e))throw new F(2305,!1);return e}var e_=/\s+/,XA=[],m2=(()=>{class t{_ngEl;_renderer;initialClasses=XA;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(e_):XA}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(e_):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(e_).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(Ee(qt),Ee(fo))};static \u0275dir=vn({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var y2=(()=>{class t{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(n,r,i){this._ngEl=n,this._differs=r,this._renderer=i}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){let n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,r){let[i,o]=n.split("."),s=i.indexOf("-")===-1?void 0:gn.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(n){n.forEachRemovedItem(r=>this._setStyle(r.key,null)),n.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),n.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||t)(Ee(qt),Ee(Gv),Ee(fo))};static \u0275dir=vn({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return t})();function Vh(t,e){return new F(2100,!1)}var t_=class{createSubscription(e,n,r){return xs(()=>e.subscribe({next:n,error:r}))}dispose(e){xs(()=>e.unsubscribe())}},n_=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},v2=new n_,_2=new t_,E2=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=M(Nt);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(mo(n))return v2;if(wh(n))return _2;throw Vh(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(Ee(Fs,16))};static \u0275pipe=Ms({name:"async",type:t,pure:!1})}return t})();var I2=(()=>{class t{transform(n){if(n==null)return null;if(typeof n!="string")throw Vh(t,n);return n.toUpperCase()}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=Ms({name:"uppercase",type:t,pure:!0})}return t})(),w2="mediumDate",f0=new U(""),p0=new U(""),T2=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??w2,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return u0(n,s,o||this.locale,a)}catch(s){throw Vh(t,s.message)}}static \u0275fac=function(r){return new(r||t)(Ee(ks,16),Ee(f0,24),Ee(p0,24))};static \u0275pipe=Ms({name:"date",type:t,pure:!0})}return t})();var D2=(()=>{class t{_locale;constructor(n){this._locale=n}transform(n,r,i){if(!b2(n))return null;i||=this._locale;try{let o=C2(n);return h0(o,i,r)}catch(o){throw Vh(t,o.message)}}static \u0275fac=function(r){return new(r||t)(Ee(ks,16))};static \u0275pipe=Ms({name:"number",type:t,pure:!0})}return t})();function b2(t){return!(t==null||t===""||t!==t)}function C2(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new F(2309,!1);return t}var g0=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=go({type:t});static \u0275inj=Yr({})}return t})();function Kc(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var yo=class{};var m0="browser";var Uh=new U(""),c_=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new F(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(q(Uh),q(ge))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),Qc=class{_doc;constructor(e){this._doc=e}manager},i_="ng-app-id";function y0(t){for(let e of t)e.remove()}function v0(t,e){let n=e.createElement("style");return n.textContent=t,n}function R2(t,e,n,r){let i=t.head?.querySelectorAll(`style[${i_}="${e}"],link[${i_}="${e}"]`);if(i)for(let o of i)o.removeAttribute(i_),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function s_(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var u_=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,R2(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,v0);r?.forEach(i=>this.addUsage(i,this.external,s_))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(y0(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])y0(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,v0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,s_(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(q(ze),q(uh),q(dh,8),q(si))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),o_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},l_=/%COMP%/g;var E0="%COMP%",N2=`_nghost-${E0}`,P2=`_ngcontent-${E0}`,M2=!0,k2=new U("",{providedIn:"root",factory:()=>M2});function x2(t){return P2.replace(l_,t)}function O2(t){return N2.replace(l_,t)}function I0(t,e){return e.map(n=>n.replace(l_,t))}var d_=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new Yc(n,s,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof jh?i.applyToHost(n):i instanceof Jc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case mr.Emulated:o=new jh(c,l,r,this.appId,h,s,a,p,g);break;case mr.ShadowDom:return new a_(c,l,n,r,s,a,this.nonce,p,g);default:o=new Jc(c,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(q(c_),q(u_),q(uh),q(k2),q(ze),q(si),q(ge),q(dh),q(Uc,8))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),Yc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(o_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(_0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(_0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new F(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=o_[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=o_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(gn.DashCase|gn.Important)?e.style.setProperty(n,r,i&gn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&gn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Er().getGlobalEventTarget(this.doc,e),!e))throw new F(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function _0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var a_=class extends Yc{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=I0(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=s_(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Jc=class extends Yc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?I0(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},jh=class extends Jc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,c,l,h),this.contentAttr=x2(h),this.hostAttr=O2(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Bh=class t extends Hc{supportsDOMEvents=!0;static makeCurrent(){Wv(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=F2();return n==null?null:L2(n)}resetBaseElement(){Zc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Kc(document.cookie,e)}},Zc=null;function F2(){return Zc=Zc||document.head.querySelector("base"),Zc?Zc.getAttribute("href"):null}function L2(t){return new URL(t,document.baseURI).pathname}var V2=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),T0=(()=>{class t extends Qc{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(q(ze))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),w0=["alt","control","meta","shift"],j2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},U2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},D0=(()=>{class t extends Qc{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Er().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),w0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=j2[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),w0.forEach(s=>{if(s!==i){let a=U2[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(q(ze))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();function B2(t,e){let n=V({rootComponent:t},$2(e));return HA(n)}function $2(t){return{appProviders:[...W2,...t?.providers??[]],platformProviders:G2}}function H2(){Bh.makeCurrent()}function z2(){return new Mn}function q2(){return Xy(document),document}var G2=[{provide:si,useValue:m0},{provide:lh,useValue:H2,multi:!0},{provide:ze,useFactory:q2}];var W2=[{provide:pc,useValue:"root"},{provide:Mn,useFactory:z2},{provide:Uh,useClass:T0,multi:!0,deps:[ze]},{provide:Uh,useClass:D0,multi:!0,deps:[ze]},d_,u_,c_,{provide:co,useExisting:d_},{provide:yo,useClass:V2},[]];var Bs=class{},Xc=class{},li=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Hh=class{encodeKey(e){return b0(e)}encodeValue(e){return b0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function K2(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var Q2=/%(\d[a-f0-9])/gi,Y2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function b0(t){return encodeURIComponent(t).replace(Q2,(e,n)=>Y2[n]??e)}function $h(t){return`${t}`}var wr=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Hh,e.fromString){if(e.fromObject)throw new F(2805,!1);this.map=K2(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map($h):[$h(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push($h(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf($h(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var zh=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function J2(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function C0(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function S0(t){return typeof Blob<"u"&&t instanceof Blob}function A0(t){return typeof FormData<"u"&&t instanceof FormData}function Z2(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var R0="Content-Type",N0="Accept",P0="X-Request-URL",M0="text/plain",k0="application/json",X2=`${k0}, ${M0}, */*`,js=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,n,r,i){this.url=n,this.method=e.toUpperCase();let o;if(J2(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new Error("");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),this.transferCache=o.transferCache}if(this.headers??=new li,this.context??=new zh,!this.params)this.params=new wr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||C0(this.body)||S0(this.body)||A0(this.body)||Z2(this.body)?this.body:this.body instanceof wr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||A0(this.body)?null:S0(this.body)?this.body.type||null:C0(this.body)?null:typeof this.body=="string"?M0:this.body instanceof wr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?k0:null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,l=e.redirect||this.redirect,h=e.credentials||this.credentials,p=e.transferCache??this.transferCache,g=e.timeout??this.timeout,y=e.body!==void 0?e.body:this.body,w=e.withCredentials??this.withCredentials,N=e.reportProgress??this.reportProgress,S=e.headers||this.headers,P=e.params||this.params,L=e.context??this.context;return e.setHeaders!==void 0&&(S=Object.keys(e.setHeaders).reduce((H,z)=>H.set(z,e.setHeaders[z]),S)),e.setParams&&(P=Object.keys(e.setParams).reduce((H,z)=>H.set(z,e.setParams[z]),P)),new t(n,r,y,{params:P,headers:S,context:L,reportProgress:N,responseType:i,withCredentials:w,transferCache:p,keepalive:o,cache:a,priority:s,timeout:g,mode:c,redirect:l,credentials:h})}},vo=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(vo||{}),$s=class{headers;status;statusText;url;ok;type;constructor(e,n=200,r="OK"){this.headers=e.headers||new li,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},qh=class t extends $s{constructor(e={}){super(e)}type=vo.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},eu=class t extends $s{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=vo.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Us=class extends $s{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},eU=200,tU=204;function h_(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect}}var x0=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof js)o=n;else{let c;i.headers instanceof li?c=i.headers:c=new li(i.headers);let l;i.params&&(i.params instanceof wr?l=i.params:l=new wr({fromObject:i.params})),o=new js(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials})}let s=K(o).pipe(ur(c=>this.handler.handle(c)));if(n instanceof js||i.observe==="events")return s;let a=s.pipe(ut(c=>c instanceof eu));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(X(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new F(2806,!1);return c.body}));case"blob":return a.pipe(X(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new F(2807,!1);return c.body}));case"text":return a.pipe(X(c=>{if(c.body!==null&&typeof c.body!="string")throw new F(2808,!1);return c.body}));case"json":default:return a.pipe(X(c=>c.body))}case"response":return a;default:throw new F(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new wr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,h_(i,r))}post(n,r,i={}){return this.request("POST",n,h_(i,r))}put(n,r,i={}){return this.request("PUT",n,h_(i,r))}static \u0275fac=function(r){return new(r||t)(q(Bs))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();var nU=new U("");function rU(t,e){return e(t)}function iU(t,e,n){return(r,i)=>Ve(n,()=>e(r,o=>t(o,i)))}var O0=new U(""),F0=new U(""),L0=new U("",{providedIn:"root",factory:()=>!0});var Gh=(()=>{class t extends Bs{backend;injector;chain=null;pendingTasks=M(ii);contributeToStability=M(L0);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(O0),...this.injector.get(F0,[])]));this.chain=r.reduceRight((i,o)=>iU(i,o,this.injector),rU)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(zi(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(q(Xc),q(ke))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();var oU=/^\)\]\}',?\n/,sU=RegExp(`^${P0}:`,"m");function aU(t){return"responseURL"in t&&t.responseURL?t.responseURL:sU.test(t.getAllResponseHeaders())?t.getResponseHeader(P0):null}var f_=(()=>{class t{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new F(-2800,!1);let r=this.xhrFactory;return K(null).pipe(lt(()=>new J(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((S,P)=>s.setRequestHeader(S,P.join(","))),n.headers.has(N0)||s.setRequestHeader(N0,X2),!n.headers.has(R0)){let S=n.detectContentTypeHeader();S!==null&&s.setRequestHeader(R0,S)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let S=n.responseType.toLowerCase();s.responseType=S!=="json"?S:"text"}let a=n.serializeBody(),c=null,l=()=>{if(c!==null)return c;let S=s.statusText||"OK",P=new li(s.getAllResponseHeaders()),L=aU(s)||n.url;return c=new qh({headers:P,status:s.status,statusText:S,url:L}),c},h=()=>{let{headers:S,status:P,statusText:L,url:H}=l(),z=null;P!==tU&&(z=typeof s.response>"u"?s.responseText:s.response),P===0&&(P=z?eU:0);let Ne=P>=200&&P<300;if(n.responseType==="json"&&typeof z=="string"){let pe=z;z=z.replace(oU,"");try{z=z!==""?JSON.parse(z):null}catch(D){z=pe,Ne&&(Ne=!1,z={error:D,text:z})}}Ne?(o.next(new eu({body:z,headers:S,status:P,statusText:L,url:H||void 0})),o.complete()):o.error(new Us({error:z,headers:S,status:P,statusText:L,url:H||void 0}))},p=S=>{let{url:P}=l(),L=new Us({error:S,status:s.status||0,statusText:s.statusText||"Unknown Error",url:P||void 0});o.error(L)},g=p;n.timeout&&(g=S=>{let{url:P}=l(),L=new Us({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:P||void 0});o.error(L)});let y=!1,w=S=>{y||(o.next(l()),y=!0);let P={type:vo.DownloadProgress,loaded:S.loaded};S.lengthComputable&&(P.total=S.total),n.responseType==="text"&&s.responseText&&(P.partialText=s.responseText),o.next(P)},N=S=>{let P={type:vo.UploadProgress,loaded:S.loaded};S.lengthComputable&&(P.total=S.total),o.next(P)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",g),s.addEventListener("abort",p),n.reportProgress&&(s.addEventListener("progress",w),a!==null&&s.upload&&s.upload.addEventListener("progress",N)),s.send(a),o.next({type:vo.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",g),n.reportProgress&&(s.removeEventListener("progress",w),a!==null&&s.upload&&s.upload.removeEventListener("progress",N)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(q(yo))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),V0=new U(""),cU="XSRF-TOKEN",uU=new U("",{providedIn:"root",factory:()=>cU}),lU="X-XSRF-TOKEN",dU=new U("",{providedIn:"root",factory:()=>lU}),tu=class{},hU=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Kc(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)(q(ze),q(uU))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();function fU(t,e){let n=t.url.toLowerCase();if(!M(V0)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=M(tu).getToken(),i=M(dU);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function pU(...t){let e=[x0,f_,Gh,{provide:Bs,useExisting:Gh},{provide:Xc,useFactory:()=>M(nU,{optional:!0})??M(f_)},{provide:O0,useValue:fU,multi:!0},{provide:V0,useValue:!0},{provide:tu,useClass:hU}];for(let n of t)e.push(...n.\u0275providers);return Ft(e)}var j0=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(q(ze))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var gU=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=q(mU),i},providedIn:"root"})}return t})(),mU=(()=>{class t extends gU{_doc;constructor(n){super(),this._doc=n}sanitize(n,r){if(r==null)return null;switch(n){case yn.NONE:return r;case yn.HTML:return vr(r,"HTML")?mn(r):sv(this._doc,String(r)).toString();case yn.STYLE:return vr(r,"Style")?mn(r):r;case yn.SCRIPT:if(vr(r,"Script"))return mn(r);throw new F(5200,!1);case yn.URL:return vr(r,"URL")?mn(r):Fc(String(r));case yn.RESOURCE_URL:if(vr(r,"ResourceURL"))return mn(r);throw new F(5201,!1);default:throw new F(5202,!1)}}bypassSecurityTrustHtml(n){return tv(n)}bypassSecurityTrustStyle(n){return nv(n)}bypassSecurityTrustScript(n){return rv(n)}bypassSecurityTrustUrl(n){return iv(n)}bypassSecurityTrustResourceUrl(n){return ov(n)}static \u0275fac=function(r){return new(r||t)(q(ze))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var oe="primary",mu=Symbol("RouteTitle"),v_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Io(t){return new v_(t)}function W0(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function vU(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Bn(t[n],e[n]))return!1;return!0}function Bn(t,e){let n=t?__(t):void 0,r=e?__(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!K0(t[i],e[i]))return!1;return!0}function __(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function K0(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function Q0(t){return t.length>0?t[t.length-1]:null}function br(t){return xg(t)?t:mo(t)?Ie(Promise.resolve(t)):K(t)}var _U={exact:J0,subset:Z0},Y0={exact:EU,subset:IU,ignored:()=>!0};function U0(t,e,n){return _U[n.paths](t.root,e.root,n.matrixParams)&&Y0[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function EU(t,e){return Bn(t,e)}function J0(t,e,n){if(!_o(t.segments,e.segments)||!Qh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!J0(t.children[r],e.children[r],n))return!1;return!0}function IU(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>K0(t[n],e[n]))}function Z0(t,e,n){return X0(t,e,e.segments,n)}function X0(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!_o(i,n)||e.hasChildren()||!Qh(i,n,r))}else if(t.segments.length===n.length){if(!_o(t.segments,n)||!Qh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Z0(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!_o(t.segments,i)||!Qh(t.segments,i,r)||!t.children[oe]?!1:X0(t.children[oe],e,o,r)}}function Qh(t,e,n){return e.every((r,i)=>Y0[n](t[i].parameters,r.parameters))}var Hn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Io(this.queryParams),this._queryParamMap}toString(){return DU.serialize(this)}},me=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yh(this)}},di=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Io(this.parameters),this._parameterMap}toString(){return tR(this)}};function wU(t,e){return _o(t,e)&&t.every((n,r)=>Bn(n.parameters,e[r].parameters))}function _o(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function TU(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===oe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==oe&&(n=n.concat(e(i,r)))}),n}var yu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>new wo,providedIn:"root"})}return t})(),wo=class{parse(e){let n=new I_(e);return new Hn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${nu(e.root,!0)}`,r=SU(e.queryParams),i=typeof e.fragment=="string"?`#${bU(e.fragment)}`:"";return`${n}${r}${i}`}},DU=new wo;function Yh(t){return t.segments.map(e=>tR(e)).join("/")}function nu(t,e){if(!t.hasChildren())return Yh(t);if(e){let n=t.children[oe]?nu(t.children[oe],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${nu(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=TU(t,(r,i)=>i===oe?[nu(t.children[oe],!1)]:[`${i}:${nu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[oe]!=null?`${Yh(t)}/${n[0]}`:`${Yh(t)}/(${n.join("//")})`}}function eR(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wh(t){return eR(t).replace(/%3B/gi,";")}function bU(t){return encodeURI(t)}function E_(t){return eR(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jh(t){return decodeURIComponent(t)}function B0(t){return Jh(t.replace(/\+/g,"%20"))}function tR(t){return`${E_(t.path)}${CU(t.parameters)}`}function CU(t){return Object.entries(t).map(([e,n])=>`;${E_(e)}=${E_(n)}`).join("")}function SU(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Wh(n)}=${Wh(i)}`).join("&"):`${Wh(n)}=${Wh(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var AU=/^[^\/()?;#]+/;function p_(t){let e=t.match(AU);return e?e[0]:""}var RU=/^[^\/()?;=#]+/;function NU(t){let e=t.match(RU);return e?e[0]:""}var PU=/^[^=?&#]+/;function MU(t){let e=t.match(PU);return e?e[0]:""}var kU=/^[^&#]+/;function xU(t){let e=t.match(kU);return e?e[0]:""}var I_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[oe]=new me(e,n)),r}parseSegment(){let e=p_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new F(4009,!1);return this.capture(e),new di(Jh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=NU(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=p_(this.remaining);i&&(r=i,this.capture(r))}e[Jh(n)]=Jh(r)}parseQueryParam(e){let n=MU(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=xU(this.remaining);s&&(r=s,this.capture(r))}let i=B0(n),o=B0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=p_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new F(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[oe]:new me([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new F(4011,!1)}};function nR(t){return t.segments.length>0?new me([],{[oe]:t}):t}function rR(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=rR(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new me(t.segments,e);return OU(n)}function OU(t){if(t.numberOfChildren===1&&t.children[oe]){let e=t.children[oe];return new me(t.segments.concat(e.segments),e.children)}return t}function hi(t){return t instanceof Hn}function iR(t,e,n=null,r=null){let i=oR(t);return sR(i,e,n,r)}function oR(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new me(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=nR(r);return e??i}function sR(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return g_(i,i,i,n,r);let o=FU(e);if(o.toRoot())return g_(i,i,new me([],{}),n,r);let s=LU(o,i,t),a=s.processChildren?iu(s.segmentGroup,s.index,o.commands):cR(s.segmentGroup,s.index,o.commands);return g_(i,s.segmentGroup,a,n,r)}function Zh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function au(t){return typeof t=="object"&&t!=null&&t.outlets}function g_(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=aR(t,e,n);let a=nR(rR(s));return new Hn(a,o,i)}function aR(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=aR(o,e,n)}),new me(t.segments,r)}var Xh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Zh(r[0]))throw new F(4003,!1);let i=r.find(au);if(i&&i!==Q0(r))throw new F(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function FU(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Xh(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Xh(n,e,r)}var qs=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function LU(t,e,n){if(t.isAbsolute)return new qs(e,!0,0);if(!n)return new qs(e,!1,NaN);if(n.parent===null)return new qs(n,!0,0);let r=Zh(t.commands[0])?0:1,i=n.segments.length-1+r;return VU(n,i,t.numberOfDoubleDots)}function VU(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new F(4005,!1);i=r.segments.length}return new qs(r,!1,i-o)}function jU(t){return au(t[0])?t[0].outlets:{[oe]:t}}function cR(t,e,n){if(t??=new me([],{}),t.segments.length===0&&t.hasChildren())return iu(t,e,n);let r=UU(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new me(t.segments.slice(0,r.pathIndex),{});return o.children[oe]=new me(t.segments.slice(r.pathIndex),t.children),iu(o,0,i)}else return r.match&&i.length===0?new me(t.segments,{}):r.match&&!t.hasChildren()?w_(t,e,n):r.match?iu(t,0,i):w_(t,e,n)}function iu(t,e,n){if(n.length===0)return new me(t.segments,{});{let r=jU(n),i={};if(Object.keys(r).some(o=>o!==oe)&&t.children[oe]&&t.numberOfChildren===1&&t.children[oe].segments.length===0){let o=iu(t.children[oe],e,n);return new me(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=cR(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new me(t.segments,i)}}function UU(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(au(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!H0(c,l,s))return o;r+=2}else{if(!H0(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function w_(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(au(o)){let c=BU(o.outlets);return new me(r,c)}if(i===0&&Zh(n[0])){let c=t.segments[e];r.push(new di(c.path,$0(n[0]))),i++;continue}let s=au(o)?o.outlets[oe]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Zh(a)?(r.push(new di(s,$0(a))),i+=2):(r.push(new di(s,{})),i++)}return new me(r,{})}function BU(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=w_(new me([],{}),0,r))}),e}function $0(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function H0(t,e,n){return t==n.path&&Bn(e,n.parameters)}var ou="imperative",nt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(nt||{}),Wt=class{id;url;constructor(e,n){this.id=e,this.url=n}},To=class extends Wt{type=nt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},wn=class extends Wt{urlAfterRedirects;type=nt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(Mt||{}),cu=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(cu||{}),$n=class extends Wt{reason;code;type=nt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Tr=class extends Wt{reason;code;type=nt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Ws=class extends Wt{error;target;type=nt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},uu=class extends Wt{urlAfterRedirects;state;type=nt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ef=class extends Wt{urlAfterRedirects;state;type=nt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tf=class extends Wt{urlAfterRedirects;state;shouldActivate;type=nt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},nf=class extends Wt{urlAfterRedirects;state;type=nt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rf=class extends Wt{urlAfterRedirects;state;type=nt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},of=class{route;type=nt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},sf=class{route;type=nt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},af=class{snapshot;type=nt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cf=class{snapshot;type=nt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uf=class{snapshot;type=nt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lf=class{snapshot;type=nt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var lu=class{},Ks=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function $U(t){return!(t instanceof lu)&&!(t instanceof Ks)}function HU(t,e){return t.providers&&!t._injector&&(t._injector=jc(t.providers,e,`Route: ${t.path}`)),t._injector??e}function In(t){return t.outlet||oe}function zU(t,e){let n=t.filter(r=>In(r)===e);return n.push(...t.filter(r=>In(r)!==e)),n}function Js(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var df=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Js(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Zs(this.rootInjector)}},Zs=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new df(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(q(ke))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=T_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=T_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=D_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return D_(e,this._root).map(n=>n.value)}};function T_(t,e){if(t===e.value)return e;for(let n of e.children){let r=T_(t,n);if(r)return r}return null}function D_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=D_(t,n);if(r.length)return r.unshift(e),r}return[]}var Gt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function zs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var du=class extends hf{snapshot;constructor(e,n){super(e),this.snapshot=n,M_(this,e)}toString(){return this.snapshot.toString()}};function uR(t){let e=qU(t),n=new ct([new di("",{})]),r=new ct({}),i=new ct({}),o=new ct({}),s=new ct(""),a=new Dr(n,r,o,s,i,oe,t,e.root);return a.snapshot=e.root,new du(new Gt(a,[]),e)}function qU(t){let e={},n={},r={},i="",o=new Eo([],e,r,i,n,oe,t,null,{});return new hu("",new Gt(o,[]))}var Dr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(X(l=>l[mu]))??K(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(X(e=>Io(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(X(e=>Io(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ff(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),t.params),data:V(V({},e.data),t.data),resolve:V(V(V(V({},t.data),e.data),i?.data),t._resolvedData)}:r={params:V({},t.params),data:V({},t.data),resolve:V(V({},t.data),t._resolvedData??{})},i&&dR(i)&&(r.resolve[mu]=i.title),r}var Eo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[mu]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Io(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Io(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},hu=class extends hf{url;constructor(e,n){super(n),this.url=e,M_(this,n)}toString(){return lR(this._root)}};function M_(t,e){e.value._routerState=t,e.children.forEach(n=>M_(t,n))}function lR(t){let e=t.children.length>0?` { ${t.children.map(lR).join(", ")} } `:"";return`${t.value}${e}`}function m_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Bn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Bn(e.params,n.params)||t.paramsSubject.next(n.params),vU(e.url,n.url)||t.urlSubject.next(n.url),Bn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function b_(t,e){let n=Bn(t.params,e.params)&&wU(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||b_(t.parent,e.parent))}function dR(t){return typeof t.title=="string"||t.title===null}var hR=new U(""),k_=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=oe;activateEvents=new Et;deactivateEvents=new Et;attachEvents=new Et;detachEvents=new Et;routerOutletData=BA(void 0);parentContexts=M(Zs);location=M(po);changeDetector=M(Fs);inputBinder=M(yf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new F(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new C_(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=vn({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ho]})}return t})(),C_=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Dr?this.route:e===Zs?this.childContexts:e===hR?this.outletData:this.parent.get(e,n)}},yf=new U("");var x_=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=bv({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&bh(0,"router-outlet")},dependencies:[k_],encapsulation:2})}return t})();function O_(t){let e=t.children&&t.children.map(O_),n=e?ye(V({},t),{children:e}):V({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==oe&&(n.component=x_),n}function GU(t,e,n){let r=fu(t,e._root,n?n._root:void 0);return new du(r,e)}function fu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=WU(t,e,n);return new Gt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>fu(t,a)),s}}let r=KU(e.value),i=e.children.map(o=>fu(t,o));return new Gt(r,i)}}function WU(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return fu(t,r,i);return fu(t,r)})}function KU(t){return new Dr(new ct(t.url),new ct(t.params),new ct(t.queryParams),new ct(t.fragment),new ct(t.data),t.outlet,t.component,t)}var Qs=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},fR="ngNavigationCancelingError";function pf(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=hi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=pR(!1,Mt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function pR(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[fR]=!0,n.cancellationCode=e,n}function QU(t){return gR(t)&&hi(t.url)}function gR(t){return!!t&&t[fR]}var YU=(t,e,n,r)=>X(i=>(new S_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),S_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),m_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=zs(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=zs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=zs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=zs(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new lf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new cf(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(m_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),m_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},gf=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Gs=class{component;route;constructor(e,n){this.component=e,this.route=n}};function JU(t,e,n){let r=t._root,i=e?e._root:null;return ru(r,i,n,[r.value])}function ZU(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Xs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!om(t)?t:e.get(t):r}function ru(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=zs(e);return t.children.forEach(s=>{XU(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>su(a,n.getContext(s),i)),i}function XU(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=eB(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new gf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ru(t,e,a?a.children:null,r,i):ru(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Gs(a.outlet.component,s))}else s&&su(e,a,i),i.canActivateChecks.push(new gf(r)),o.component?ru(t,null,a?a.children:null,r,i):ru(t,null,n,r,i);return i}function eB(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!_o(t.url,e.url);case"pathParamsOrQueryParamsChange":return!_o(t.url,e.url)||!Bn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!b_(t,e)||!Bn(t.queryParams,e.queryParams);case"paramsChange":default:return!b_(t,e)}}function su(t,e,n){let r=zs(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?su(s,e.children.getContext(o),n):su(s,null,n):su(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Gs(e.outlet.component,i)):n.canDeactivateChecks.push(new Gs(null,i)):n.canDeactivateChecks.push(new Gs(null,i))}function vu(t){return typeof t=="function"}function tB(t){return typeof t=="boolean"}function nB(t){return t&&vu(t.canLoad)}function rB(t){return t&&vu(t.canActivate)}function iB(t){return t&&vu(t.canActivateChild)}function oB(t){return t&&vu(t.canDeactivate)}function sB(t){return t&&vu(t.canMatch)}function mR(t){return t instanceof ar||t?.name==="EmptyError"}var Kh=Symbol("INITIAL_VALUE");function Ys(){return lt(t=>Gl(t.map(e=>e.pipe(Nn(1),Ql(Kh)))).pipe(X(e=>{for(let n of e)if(n!==!0){if(n===Kh)return Kh;if(n===!1||aB(n))return n}return!0}),ut(e=>e!==Kh),Nn(1)))}function aB(t){return hi(t)||t instanceof Qs}function cB(t,e){return He(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?K(ye(V({},n),{guardsResult:!0})):uB(s,r,i,t).pipe(He(a=>a&&tB(a)?lB(r,o,t,e):K(a)),X(a=>ye(V({},n),{guardsResult:a})))})}function uB(t,e,n,r){return Ie(t).pipe(He(i=>gB(i.component,i.route,n,e,r)),lr(i=>i!==!0,!0))}function lB(t,e,n,r){return Ie(e).pipe(ur(i=>cs(hB(i.route.parent,r),dB(i.route,r),pB(t,i.path,n),fB(t,i.route,n))),lr(i=>i!==!0,!0))}function dB(t,e){return t!==null&&e&&e(new uf(t)),K(!0)}function hB(t,e){return t!==null&&e&&e(new af(t)),K(!0)}function fB(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return K(!0);let i=r.map(o=>oc(()=>{let s=Js(e)??n,a=Xs(o,s),c=rB(a)?a.canActivate(e,t):Ve(s,()=>a(e,t));return br(c).pipe(lr())}));return K(i).pipe(Ys())}function pB(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>ZU(s)).filter(s=>s!==null).map(s=>oc(()=>{let a=s.guards.map(c=>{let l=Js(s.node)??n,h=Xs(c,l),p=iB(h)?h.canActivateChild(r,t):Ve(l,()=>h(r,t));return br(p).pipe(lr())});return K(a).pipe(Ys())}));return K(o).pipe(Ys())}function gB(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return K(!0);let s=o.map(a=>{let c=Js(e)??i,l=Xs(a,c),h=oB(l)?l.canDeactivate(t,e,n,r):Ve(c,()=>l(t,e,n,r));return br(h).pipe(lr())});return K(s).pipe(Ys())}function mB(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return K(!0);let o=i.map(s=>{let a=Xs(s,t),c=nB(a)?a.canLoad(e,n):Ve(t,()=>a(e,n));return br(c)});return K(o).pipe(Ys(),yR(r))}function yR(t){return Sl(et(e=>{if(typeof e!="boolean")throw pf(t,e)}),X(e=>e===!0))}function yB(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return K(!0);let o=i.map(s=>{let a=Xs(s,t),c=sB(a)?a.canMatch(e,n):Ve(t,()=>a(e,n));return br(c)});return K(o).pipe(Ys(),yR(r))}var pu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},gu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Hs(t){return ss(new pu(t))}function vB(t){return ss(new F(4e3,!1))}function _B(t){return ss(pR(!1,Mt.GuardRejected))}var A_=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return K(r);if(i.numberOfChildren>1||!i.children[oe])return vB(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,n,r,i,o){return EB(n,i,o).pipe(X(s=>{if(s instanceof Hn)throw new gu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new gu(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Hn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new me(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new F(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function EB(t,e,n){if(typeof t=="string")return K(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:h,title:p}=e;return br(Ve(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:p})))}var R_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function IB(t,e,n,r,i){let o=vR(t,e,n);return o.matched?(r=HU(e,r),yB(r,e,n,i).pipe(X(s=>s===!0?o:V({},R_)))):K(o)}function vR(t,e,n){if(e.path==="**")return wB(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?V({},R_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||W0)(n,t,e);if(!i)return V({},R_);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function wB(t){return{matched:!0,parameters:t.length>0?Q0(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function z0(t,e,n,r){return n.length>0&&bB(t,n,r)?{segmentGroup:new me(e,DB(r,new me(n,t.children))),slicedSegments:[]}:n.length===0&&CB(t,n,r)?{segmentGroup:new me(t.segments,TB(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new me(t.segments,t.children),slicedSegments:n}}function TB(t,e,n,r){let i={};for(let o of n)if(vf(t,e,o)&&!r[In(o)]){let s=new me([],{});i[In(o)]=s}return V(V({},r),i)}function DB(t,e){let n={};n[oe]=e;for(let r of t)if(r.path===""&&In(r)!==oe){let i=new me([],{});n[In(r)]=i}return n}function bB(t,e,n){return n.some(r=>vf(t,e,r)&&In(r)!==oe)}function CB(t,e,n){return n.some(r=>vf(t,e,r))}function vf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function SB(t,e,n){return e.length===0&&!t.children[n]}var N_=class{};function AB(t,e,n,r,i,o,s="emptyOnly"){return new P_(t,e,n,r,i,s,o).recognize()}var RB=31,P_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new A_(this.urlSerializer,this.urlTree)}noMatchError(e){return new F(4002,`'${e.segmentGroup}'`)}recognize(){let e=z0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(X(({children:n,rootSnapshot:r})=>{let i=new Gt(r,n),o=new hu("",i),s=iR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Eo([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,n).pipe(X(r=>({children:r,rootSnapshot:n})),cr(r=>{if(r instanceof gu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof pu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(X(s=>s instanceof Gt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ie(o).pipe(ur(s=>{let a=r.children[s],c=zU(n,s);return this.processSegmentGroup(e,c,a,s,i)}),Kl((s,a)=>(s.push(...a),s)),Gr(null),Fg(),He(s=>{if(s===null)return Hs(r);let a=_R(s);return NB(a),K(a)}))}processSegment(e,n,r,i,o,s,a){return Ie(n).pipe(ur(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(cr(l=>{if(l instanceof pu)return K(null);throw l}))),lr(c=>!!c),cr(c=>{if(mR(c))return SB(r,i,o)?K(new N_):Hs(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return In(r)!==s&&(s===oe||!vf(i,o,r))?Hs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):Hs(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=vR(n,i,o);if(!c)return Hs(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>RB&&(this.allowRedirects=!1));let y=new Eo(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,q0(i),In(i),i.component??i._loadedComponent??null,i,G0(i)),w=ff(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(w.params),y.data=Object.freeze(w.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(lt(S=>this.applyRedirects.lineralizeSegments(i,S)),He(S=>this.processSegment(e,r,n,S.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=IB(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(lt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(lt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=c,w=new Eo(g,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,q0(r),In(r),r.component??r._loadedComponent??null,r,G0(r)),N=ff(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(N.params),w.data=Object.freeze(N.data);let{segmentGroup:S,slicedSegments:P}=z0(n,g,y,l);if(P.length===0&&S.hasChildren())return this.processChildren(h,l,S,w).pipe(X(H=>new Gt(w,H)));if(l.length===0&&P.length===0)return K(new Gt(w,[]));let L=In(r)===o;return this.processSegment(h,l,S,P,L?oe:o,!0,w).pipe(X(H=>new Gt(w,H instanceof Gt?[H]:[])))}))):Hs(n)))}getChildConfig(e,n,r){return n.children?K({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?K({routes:n._loadedRoutes,injector:n._loadedInjector}):mB(e,n,r,this.urlSerializer).pipe(He(i=>i?this.configLoader.loadChildren(e,n).pipe(et(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):_B(n))):K({routes:[],injector:e})}};function NB(t){t.sort((e,n)=>e.value.outlet===oe?-1:n.value.outlet===oe?1:e.value.outlet.localeCompare(n.value.outlet))}function PB(t){let e=t.value.routeConfig;return e&&e.path===""}function _R(t){let e=[],n=new Set;for(let r of t){if(!PB(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=_R(r.children);e.push(new Gt(r.value,i))}return e.filter(r=>!n.has(r))}function q0(t){return t.data||{}}function G0(t){return t.resolve||{}}function MB(t,e,n,r,i,o){return He(s=>AB(t,e,n,r,s.extractedUrl,i,o).pipe(X(({state:a,tree:c})=>ye(V({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function kB(t,e){return He(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return K(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of ER(c))s.add(l);let a=0;return Ie(s).pipe(ur(c=>o.has(c)?xB(c,r,t,e):(c.data=ff(c,c.parent,t).resolve,K(void 0))),et(()=>a++),us(1),He(c=>a===s.size?K(n):xt))})}function ER(t){let e=t.children.map(n=>ER(n)).flat();return[t,...e]}function xB(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!dR(i)&&(o[mu]=i.title),oc(()=>(t.data=ff(t,t.parent,n).resolve,OB(o,t,e,r).pipe(X(s=>(t._resolvedData=s,t.data=V(V({},t.data),s),null)))))}function OB(t,e,n,r){let i=__(t);if(i.length===0)return K({});let o={};return Ie(i).pipe(He(s=>FB(t[s],e,n,r).pipe(lr(),et(a=>{if(a instanceof Qs)throw pf(new wo,a);o[s]=a}))),us(1),X(()=>o),cr(s=>mR(s)?xt:ss(s)))}function FB(t,e,n,r){let i=Js(e)??r,o=Xs(t,i),s=o.resolve?o.resolve(e,n):Ve(i,()=>o(e,n));return br(s)}function y_(t){return lt(e=>{let n=t(e);return n?Ie(n).pipe(X(()=>e)):K(e)})}var F_=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(n){return n.data[mu]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M(IR),providedIn:"root"})}return t})(),IR=(()=>{class t extends F_{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(q(j0))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ea=new U("",{providedIn:"root",factory:()=>({})}),_u=new U(""),wR=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(Vv);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return K(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=br(Ve(n,()=>r.loadComponent())).pipe(X(DR),et(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),zi(()=>{this.componentLoaders.delete(r)})),o=new ns(i,()=>new Ye).pipe(ts());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return K({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=TR(r,this.compiler,n,this.onLoadEndListener).pipe(zi(()=>{this.childrenLoaders.delete(r)})),s=new ns(o,()=>new Ye).pipe(ts());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function TR(t,e,n,r){return br(Ve(n,()=>t.loadChildren())).pipe(X(DR),He(i=>i instanceof Eh||Array.isArray(i)?K(i):Ie(e.compileModuleAsync(i))),X(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(_u,[],{optional:!0,self:!0}).flat()),{routes:s.map(O_),injector:o}}))}function LB(t){return t&&typeof t=="object"&&"default"in t}function DR(t){return LB(t)?t.default:t}var _f=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M(VB),providedIn:"root"})}return t})(),VB=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bR=new U("");var CR=new U(""),SR=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ye;transitionAbortWithErrorSubject=new Ye;configLoader=M(wR);environmentInjector=M(ke);destroyRef=M(gr);urlSerializer=M(yu);rootContexts=M(Zs);location=M(Vs);inputBindingEnabled=M(yf,{optional:!0})!==null;titleStrategy=M(F_);options=M(ea,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(_f);createViewTransition=M(bR,{optional:!0});navigationErrorHandler=M(CR,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>K(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new of(i)),r=i=>this.events.next(new sf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ye(V({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(n){return this.transitions=new ct(null),this.transitions.pipe(ut(r=>r!==null),lt(r=>{let i=!1;return K(r).pipe(lt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Mt.SupersededByNewNavigation),xt;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ye(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload"){let c="";return this.events.next(new Tr(o.id,this.urlSerializer.serialize(o.rawUrl),c,cu.IgnoredSameUrlNavigation)),o.resolve(!1),xt}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return K(o).pipe(lt(c=>(this.events.next(new To(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?xt:Promise.resolve(c))),MB(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),et(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=ye(V({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let l=new uu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new To(c,this.urlSerializer.serialize(l),h,p);this.events.next(y);let w=uR(this.rootComponentType).snapshot;return this.currentTransition=r=ye(V({},o),{targetSnapshot:w,urlAfterRedirects:l,extras:ye(V({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,K(r)}else{let c="";return this.events.next(new Tr(o.id,this.urlSerializer.serialize(o.extractedUrl),c,cu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),xt}}),et(o=>{let s=new ef(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),X(o=>(this.currentTransition=r=ye(V({},o),{guards:JU(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),cB(this.environmentInjector,o=>this.events.next(o)),et(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw pf(this.urlSerializer,o.guardsResult);let s=new tf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),ut(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Mt.GuardRejected),!1)),y_(o=>{if(o.guards.canActivateChecks.length!==0)return K(o).pipe(et(s=>{let a=new nf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),lt(s=>{let a=!1;return K(s).pipe(kB(this.paramsInheritanceStrategy,this.environmentInjector),et({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Mt.NoDataFromResolver)}}))}),et(s=>{let a=new rf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),y_(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent){let l=Js(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(et(h=>{a.component=h}),X(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return Gl(s(o.targetSnapshot.root)).pipe(Gr(null),Nn(1))}),y_(()=>this.afterPreactivation()),lt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Ie(a).pipe(X(()=>r)):K(r)}),X(o=>{let s=GU(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ye(V({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),et(()=>{this.events.next(new lu)}),YU(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Nn(1),qi(new J(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(ut(()=>!i&&!r.targetRouterState),et(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Mt.Aborted)}))),et({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new wn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),qi(this.transitionAbortWithErrorSubject.pipe(et(o=>{throw o}))),zi(()=>{i||this.cancelNavigationTransition(r,"",Mt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),cr(o=>{if(this.destroyed)return r.resolve(!1),xt;if(i=!0,gR(o))this.events.next(new $n(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),QU(o)?this.events.next(new Ks(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Ws(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=Ve(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Qs){let{message:c,cancellationCode:l}=pf(this.urlSerializer,a);this.events.next(new $n(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new Ks(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return xt}))}))}cancelNavigationTransition(n,r,i){let o=new $n(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function jB(t){return t!==ou}var AR=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M(UB),providedIn:"root"})}return t})(),mf=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},UB=(()=>{class t extends mf{static \u0275fac=(()=>{let n;return function(i){return(n||(n=ch(t)))(i||t)}})();static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),RR=(()=>{class t{urlSerializer=M(yu);options=M(ea,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(Vs);urlHandlingStrategy=M(_f);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Hn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Hn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=uR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M(BB),providedIn:"root"})}return t})(),BB=(()=>{class t extends RR{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof To?this.updateStateMemento():n instanceof Tr?this.commitTransition(r):n instanceof uu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof lu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof $n&&n.code!==Mt.SupersededByNewNavigation&&n.code!==Mt.Redirect?this.restoreHistory(r):n instanceof Ws?this.restoreHistory(r,!0):n instanceof wn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=V(V({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=V(V({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=ch(t)))(i||t)}})();static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function L_(t,e){t.events.pipe(ut(n=>n instanceof wn||n instanceof $n||n instanceof Ws||n instanceof Tr),X(n=>n instanceof wn||n instanceof Tr?0:(n instanceof $n?n.code===Mt.Redirect||n.code===Mt.SupersededByNewNavigation:!1)?2:1),ut(n=>n!==2),Nn(1)).subscribe(()=>{e()})}var $B={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},HB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ta=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(Ih);stateManager=M(RR);options=M(ea,{optional:!0})||{};pendingTasks=M(Vn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(SR);urlSerializer=M(yu);location=M(Vs);urlHandlingStrategy=M(_f);injector=M(ke);_events=new Ye;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(AR);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(_u,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(yf,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Me;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof $n&&r.code!==Mt.Redirect&&r.code!==Mt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof wn)this.navigated=!0;else if(r instanceof Ks){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||jB(i.source)},s);this.scheduleNavigation(a,ou,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}$U(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ou,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=V({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Nt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(O_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=oR(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return sR(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=hi(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ou,null,r)}navigate(n,r={skipLocationChange:!1}){return zB(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=V({},$B):r===!1?i=V({},HB):i=r,hi(n))return U0(this.currentUrlTree,n,i);let o=this.parseUrl(n);return U0(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,c=g});let h=this.pendingTasks.add();return L_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zB(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new F(4008,!1)}var Ef=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=bc(null);get href(){return xs(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ye;applicationErrorHandler=M(Nt);options=M(ea,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(M(new Rh("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof wn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(hi(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:hi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(Ee(ta),Ee(Dr),Oc("tabindex"),Ee(fo),Ee(qt),Ee(Ls))};static \u0275dir=vn({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Sh("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Dh("href",i.reactiveHref(),av)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Nh],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Nh],replaceUrl:[2,"replaceUrl","replaceUrl",Nh],routerLink:"routerLink"},features:[ho]})}return t})(),GB=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Et;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof wn&&this.update()})}ngAfterContentInit(){K(this.links.changes,K(null)).pipe(as()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ie(n).pipe(as()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=WB(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?n.isActive(o,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(Ee(ta),Ee(qt),Ee(fo),Ee(Fs),Ee(Ef,8))};static \u0275dir=vn({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&xv(o,Ef,5),r&2){let s;Ov(s=Fv())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[ho]})}return t})();function WB(t){return!!t.paths}var KB=new U("");function QB(t,...e){return Ft([{provide:_u,multi:!0,useValue:t},[],{provide:Dr,useFactory:YB,deps:[ta]},{provide:Th,multi:!0,useFactory:JB},e.map(n=>n.\u0275providers)])}function YB(t){return t.routerState.root}function JB(){let t=M(Ze);return e=>{let n=t.get(ci);if(e!==n.components[0])return;let r=t.get(ta),i=t.get(ZB);t.get(XB)===1&&r.initialNavigation(),t.get(e$,null,{optional:!0})?.setUpPreloading(),t.get(KB,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ZB=new U("",{factory:()=>new Ye}),XB=new U("",{providedIn:"root",factory:()=>1});var e$=new U("");var fi=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(fi||{}),t$="*";function pi(t,e){return{type:fi.Trigger,name:t,definitions:e,options:{}}}function Tn(t,e=null){return{type:fi.Animate,styles:e,timings:t}}function foe(t,e=null){return{type:fi.Sequence,steps:t,options:e}}function ft(t){return{type:fi.Style,styles:t,offset:null}}function gi(t,e,n){return{type:fi.State,name:t,styles:e,options:n}}function Dn(t,e,n=null){return{type:fi.Transition,expr:t,animation:e,options:n}}var V_=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,n=0){this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},j_=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let n=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++n==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((n,r)=>n===null||r.totalTime>n.totalTime?r:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},n$="!";var boe=pi("slideInOut",[Dn(":enter",[ft({transform:"translateX(-100%)"}),Tn("600ms ease-in",ft({transform:"translateX(0)"}))]),Dn(":leave",[Tn("600ms ease-out",ft({transform:"translateX(-100%)"}))])]),Coe=pi("slideOutIn",[Dn(":enter",[ft({transform:"translateX(100%)"}),Tn("600ms ease-in",ft({transform:"translateX(0)"}))]),Dn(":leave",[Tn("600ms ease-out",ft({transform:"translateX(100%)"}))])]),Soe=pi("zoomIn",[gi("hidden",ft({transform:"scale(0)",opacity:0})),gi("enter",ft({transform:"scale(1)",opacity:1})),Dn("hidden => enter",[Tn("1000ms ease")])]),Aoe=pi("slideDown",[gi("hidden",ft({transform:"translateY(-100%)",opacity:0})),gi("enter",ft({transform:"translateY(0)",opacity:1})),Dn("hidden => enter",[Tn("1000ms ease")])]),Roe=pi("slideUp",[gi("hidden",ft({transform:"translateY(100%)",opacity:0})),gi("enter",ft({transform:"translateY(0)",opacity:1})),Dn("hidden => enter",[Tn("1000ms ease")])]),Noe=pi("slideDownUp",[Dn(":enter",[ft({transform:"translateY(100%)"}),Tn("300ms ease-in",ft({transform:"translateY(0)"}))]),Dn(":leave",[Tn("300ms ease-out",ft({transform:"translateY(100%)"}))])]);var NR=class t{constructor(e){this.el=e}animationTriggerName;zoomInState="hidden";slideDownState="hidden";slideUpState="hidden";observer;ngOnInit(){this.observer=new IntersectionObserver(e=>{e.forEach(n=>{if(n.isIntersecting){switch(this.animationTriggerName){case"zoomIn":this.zoomInState="enter";break;case"slideDown":this.slideDownState="enter";break;case"slideUp":this.slideUpState="enter";break}this.observer.disconnect()}})},{threshold:.1}),this.observer.observe(this.el.nativeElement)}ngOnDestroy(){this.observer&&this.observer.disconnect()}static \u0275fac=function(n){return new(n||t)(Ee(qt))};static \u0275dir=vn({type:t,selectors:[["","appAnimateOnScroll",""]],hostVars:3,hostBindings:function(n,r){n&2&&Ch("@zoomIn",r.zoomInState)("@slideDown",r.slideDownState)("@slideUp",r.slideUpState)},inputs:{animationTriggerName:[0,"appAnimateOnScroll","animationTriggerName"]}})};var PR=()=>{};var xR=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},r$=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},If={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;c||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):r$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new B_;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let w=l<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},B_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},i$=function(t){let e=xR(t);return If.encodeByteArray(e,!0)},Iu=function(t){return i$(t).replace(/\./g,"")},wf=function(t){try{return If.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function H_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var o$=()=>H_().__FIREBASE_DEFAULTS__,s$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},a$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&wf(t[1]);return e&&JSON.parse(e)},Tf=()=>{try{return PR()||o$()||s$()||a$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},z_=t=>{var e,n;return(n=(e=Tf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},OR=t=>{let e=z_(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},q_=()=>{var t;return(t=Tf())===null||t===void 0?void 0:t.config},G_=t=>{var e;return(e=Tf())===null||e===void 0?void 0:e[`_${t}`]};var Do=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function mi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function Df(t){return _(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function FR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Iu(JSON.stringify(n)),Iu(JSON.stringify(s)),""].join(".")}var Eu={};function c$(){let t={prod:[],emulator:[]};for(let e of Object.keys(Eu))Eu[e]?t.emulator.push(e):t.prod.push(e);return t}function u$(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var MR=!1;function bf(t,e){if(typeof window>"u"||typeof document>"u"||!mi(window.location.host)||Eu[t]===e||Eu[t]||MR)return;Eu[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=c$().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{MR=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=u$(r),y=n("text"),w=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),S=document.getElementById(N)||document.createElement("a"),P=n("preprendIcon"),L=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let H=g.element;a(H),h(S,N);let z=l();c(L,P),H.append(L,w,S,z),document.body.appendChild(H)}o?(w.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function l$(){var t;let e=(t=Tf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jR(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BR(){let t=rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function $R(){return!l$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wu(){try{return typeof indexedDB=="object"}catch{return!1}}function HR(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var d$="FirebaseError",Kt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=d$,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bn.prototype.create)}},bn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?h$(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Kt(i,a,r)}};function h$(t,e){return t.replace(f$,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var f$=/\{\$([^}]+)}/g;function zR(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(kR(o)&&kR(s)){if(!zn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function kR(t){return t!==null&&typeof t=="object"}function Tu(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function na(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ra(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function qR(t,e){let n=new $_(t,e);return n.subscribe.bind(n)}var $_=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");p$(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=U_),i.error===void 0&&(i.error=U_),i.complete===void 0&&(i.complete=U_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function p$(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function U_(){}var Ooe=4*60*60*1e3;function Be(t){return t&&t._delegate?t._delegate:t}var kt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var bo="[DEFAULT]";var W_=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Do;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(m$(e))try{this.getOrInitializeService({instanceIdentifier:bo})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=bo){return this.instances.has(e)}getOptions(e=bo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:g$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bo){return this.component?this.component.multipleInstances?e:bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function g$(t){return t===bo?void 0:t}function m$(t){return t.instantiationMode==="EAGER"}var Cf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new W_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var y$=[],le=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(le||{}),v$={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},_$=le.INFO,E$={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},I$=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=E$[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},qn=class{constructor(e){this.name=e,this._logLevel=_$,this._logHandler=I$,this._userLogHandler=null,y$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?v$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var w$=(t,e)=>e.some(n=>t instanceof n),GR,WR;function T$(){return GR||(GR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function D$(){return WR||(WR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var KR=new WeakMap,Q_=new WeakMap,QR=new WeakMap,K_=new WeakMap,J_=new WeakMap;function b$(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Gn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&KR.set(n,t)}).catch(()=>{}),J_.set(e,t),e}function C$(t){if(Q_.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Q_.set(t,e)}var Y_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Q_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||QR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function YR(t){Y_=t(Y_)}function S$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Sf(this),e,...n);return QR.set(r,e.sort?e.sort():[e]),Gn(r)}:D$().includes(t)?function(...e){return t.apply(Sf(this),e),Gn(KR.get(this))}:function(...e){return Gn(t.apply(Sf(this),e))}}function A$(t){return typeof t=="function"?S$(t):(t instanceof IDBTransaction&&C$(t),w$(t,T$())?new Proxy(t,Y_):t)}function Gn(t){if(t instanceof IDBRequest)return b$(t);if(K_.has(t))return K_.get(t);let e=A$(t);return e!==t&&(K_.set(t,e),J_.set(e,t)),e}var Sf=t=>J_.get(t);function ZR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Gn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Gn(s.result),c.oldVersion,c.newVersion,Gn(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var R$=["get","getKey","getAll","getAllKeys","count"],N$=["put","add","delete","clear"],Z_=new Map;function JR(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Z_.get(e))return Z_.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=N$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||R$.includes(n)))return;let o=function(s,...a){return _(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return Z_.set(e,o),o}YR(t=>ye(V({},t),{get:(e,n,r)=>JR(e,n)||t.get(e,n,r),has:(e,n)=>!!JR(e,n)||t.has(e,n)}));var eE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(P$(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function P$(t){let e=t.getComponent();return e?.type==="VERSION"}var tE="@firebase/app",XR="0.13.2";var Cr=new qn("@firebase/app"),M$="@firebase/app-compat",k$="@firebase/analytics-compat",x$="@firebase/analytics",O$="@firebase/app-check-compat",F$="@firebase/app-check",L$="@firebase/auth",V$="@firebase/auth-compat",j$="@firebase/database",U$="@firebase/data-connect",B$="@firebase/database-compat",$$="@firebase/functions",H$="@firebase/functions-compat",z$="@firebase/installations",q$="@firebase/installations-compat",G$="@firebase/messaging",W$="@firebase/messaging-compat",K$="@firebase/performance",Q$="@firebase/performance-compat",Y$="@firebase/remote-config",J$="@firebase/remote-config-compat",Z$="@firebase/storage",X$="@firebase/storage-compat",eH="@firebase/firestore",tH="@firebase/ai",nH="@firebase/firestore-compat",rH="firebase",iH="11.10.0";var nE="[DEFAULT]",oH={[tE]:"fire-core",[M$]:"fire-core-compat",[x$]:"fire-analytics",[k$]:"fire-analytics-compat",[F$]:"fire-app-check",[O$]:"fire-app-check-compat",[L$]:"fire-auth",[V$]:"fire-auth-compat",[j$]:"fire-rtdb",[U$]:"fire-data-connect",[B$]:"fire-rtdb-compat",[$$]:"fire-fn",[H$]:"fire-fn-compat",[z$]:"fire-iid",[q$]:"fire-iid-compat",[G$]:"fire-fcm",[W$]:"fire-fcm-compat",[K$]:"fire-perf",[Q$]:"fire-perf-compat",[Y$]:"fire-rc",[J$]:"fire-rc-compat",[Z$]:"fire-gcs",[X$]:"fire-gcs-compat",[eH]:"fire-fst",[nH]:"fire-fst-compat",[tH]:"fire-vertex","fire-js":"fire-js",[rH]:"fire-js-all"};var Du=new Map,sH=new Map,rE=new Map;function eN(t,e){try{t.container.addComponent(e)}catch(n){Cr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Cn(t){let e=t.name;if(rE.has(e))return Cr.debug(`There were multiple attempts to register component ${e}.`),!1;rE.set(e,t);for(let n of Du.values())eN(n,t);for(let n of sH.values())eN(n,t);return!0}function ia(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Bt(t){return t==null?!1:t.settings!==void 0}var aH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new bn("app","Firebase",aH);var iE=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}};var vi=iH;function iN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:nE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw yi.create("bad-app-name",{appName:String(i)});if(n||(n=q_()),!n)throw yi.create("no-options");let o=Du.get(i);if(o){if(zn(n,o.options)&&zn(r,o.config))return o;throw yi.create("duplicate-app",{appName:i})}let s=new Cf(i);for(let c of rE.values())s.addComponent(c);let a=new iE(n,r,s);return Du.set(i,a),a}function Co(t=nE){let e=Du.get(t);if(!e&&t===nE&&q_())return iN();if(!e)throw yi.create("no-app",{appName:t});return e}function Af(){return Array.from(Du.values())}function Fe(t,e,n){var r;let i=(r=oH[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cr.warn(a.join(" "));return}Cn(new kt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var cH="firebase-heartbeat-database",uH=1,bu="firebase-heartbeat-store",X_=null;function oN(){return X_||(X_=ZR(cH,uH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bu)}catch(n){console.warn(n)}}}}).catch(t=>{throw yi.create("idb-open",{originalErrorMessage:t.message})})),X_}function lH(t){return _(this,null,function*(){try{let n=(yield oN()).transaction(bu),r=yield n.objectStore(bu).get(sN(t));return yield n.done,r}catch(e){if(e instanceof Kt)Cr.warn(e.message);else{let n=yi.create("idb-get",{originalErrorMessage:e?.message});Cr.warn(n.message)}}})}function tN(t,e){return _(this,null,function*(){try{let r=(yield oN()).transaction(bu,"readwrite");yield r.objectStore(bu).put(e,sN(t)),yield r.done}catch(n){if(n instanceof Kt)Cr.warn(n.message);else{let r=yi.create("idb-set",{originalErrorMessage:n?.message});Cr.warn(r.message)}}})}function sN(t){return`${t.name}!${t.options.appId}`}var dH=1024,hH=30,oE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new sE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=nN();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>hH){let s=pH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Cr.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=nN(),{heartbeatsToSend:r,unsentEntries:i}=fH(this._heartbeatsCache.heartbeats),o=Iu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Cr.warn(n),""}})}};function nN(){return new Date().toISOString().substring(0,10)}function fH(t,e=dH){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),rN(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),rN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var sE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return wu()?HR().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield lH(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return tN(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return tN(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function rN(t){return Iu(JSON.stringify({version:2,heartbeats:t})).length}function pH(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function gH(t){Cn(new kt("platform-logger",e=>new eE(e),"PRIVATE")),Cn(new kt("heartbeat",e=>new oE(e),"PRIVATE")),Fe(tE,XR,t),Fe(tE,XR,"esm2017"),Fe("fire-js","")}gH("");var mH="firebase",yH="11.10.0";Fe(mH,yH,"app");function fse(t){t||(t=M(gr));let e=new J(n=>{if(t.destroyed){n.next();return}return t.onDestroy(n.next.bind(n))});return n=>n.pipe(qi(e))}function aN(t){t===void 0&&(t=M(Ze));let e=t.get(ii);return n=>new J(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var _i=new Os("ANGULARFIRE2_VERSION");function Cu(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var sa=(t,e)=>{let n=e?[e]:Af(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},oa=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(oa||{}),cN=qv()&&typeof Zone<"u"?oa.WARN:oa.SILENT;var Rf=class{zone;delegate;constructor(e,n=kg){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Ei=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=M(ge);this.outsideAngular=n.runOutsideAngular(()=>new Rf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Rf(typeof Zone>"u"?void 0:Zone.current,ic))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),uN=!1;function vH(t,e){!uN&&(cN>oa.SILENT||qv())&&(uN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),cN>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function _H(t){let e=M(ge,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function So(t){let e=M(ge,{optional:!0});return e?e.run(()=>t()):t()}var EH=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Ve(n,()=>So(()=>t.apply(void 0,r)))),Sn=(t,e,n)=>(n||=e?oa.WARN:oa.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=M(Ei),s=M(ii),a=M(ke)}catch{return vH(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=So(()=>s.add())),i[l]=EH(i[l],r,a));let c=_H(()=>t.apply(this,i));return e?c instanceof J?c.pipe(qr(o.outsideAngular),zr(o.insideAngular),aN(a)):c instanceof Promise?So(()=>{let l=s.add();return new Promise((h,p)=>{c.then(g=>Ve(a,()=>So(()=>h(g))),g=>Ve(a,()=>So(()=>p(g)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:So(()=>c):c instanceof J?c.pipe(qr(o.outsideAngular),zr(o.insideAngular)):So(()=>c)});var Sr=class{constructor(e){return e}},Ao=class{constructor(){return Af()}};function IH(t){return t&&t.length===1?t[0]:new Sr(Co())}var aE=new U("angularfire2._apps"),wH={provide:Sr,useFactory:IH,deps:[[new Pt,aE]]},TH={provide:Ao,deps:[[new Pt,aE]]};function DH(t){return(e,n)=>{let r=n.get(si);Fe("angularfire",_i.full,"core"),Fe("angularfire",_i.full,"app"),Fe("angular",$A.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Sr(i)}}function Mse(t,...e){return Ft([wH,TH,{provide:aE,useFactory:DH(t),multi:!0,deps:[ge,Ze,Ei,...e]}])}var bH=new Map,CH={activated:!1,tokenObservers:[]},SH={initialized:!1,enabled:!1};function An(t){return bH.get(t)||Object.assign({},CH)}function fN(){return SH}var AH="https://content-firebaseappcheck.googleapis.com/v1";var RH="exchangeDebugToken",lN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Bse=24*60*60*1e3;var lE=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new Do,this.pending.promise.catch(n=>{}),yield NH(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Do,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function NH(t){return new Promise(e=>{setTimeout(e,t)})}var PH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ii=new bn("appCheck","AppCheck",PH);function pN(t){if(!An(t).activated)throw Ii.create("use-before-activation",{appName:t.name})}function gN(r,i){return _(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(y){throw Ii.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw Ii.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(y){throw Ii.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Ii.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function mN(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${AH}/projects/${n}/apps/${r}:${RH}?key=${i}`,body:{debug_token:e}}}var MH="firebase-app-check-database",kH=1,dE="firebase-app-check-store";var Nf=null;function xH(){return Nf||(Nf=new Promise((t,e)=>{try{let n=indexedDB.open(MH,kH);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Ii.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(dE,{keyPath:"compositeKey"})}}}catch(n){e(Ii.create("storage-open",{originalErrorMessage:n?.message}))}}),Nf)}function OH(t,e){return FH(LH(t),e)}function FH(t,e){return _(this,null,function*(){let r=(yield xH()).transaction(dE,"readwrite"),o=r.objectStore(dE).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Ii.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function LH(t){return`${t.options.appId}-${t.name}`}var Su=new qn("@firebase/app-check");function cE(t,e){return wu()?OH(t,e).catch(n=>{Su.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function yN(){return fN().enabled}function vN(){return _(this,null,function*(){let t=fN();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var VH={error:"UNKNOWN_ERROR"};function jH(t){return If.encodeString(JSON.stringify(t),!1)}function hE(t,e=!1,n=!1){return _(this,null,function*(){let r=t.app;pN(r);let i=An(r),o=i.token,s;if(o&&!Au(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Au(l)?o=l:yield cE(r,void 0))}if(!e&&o&&Au(o))return{token:o.token};let a=!1;if(yN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=gN(mN(r,yield vN()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield cE(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Su.warn(l.message):n&&Su.error(l),uE(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield An(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Su.warn(l.message):n&&Su.error(l),s=l}let c;return o?s?Au(o)?c={token:o.token,internalError:s}:c=uE(s):(c={token:o.token},i.token=o,yield cE(r,o)):c=uE(s),a&&HH(r,c),c})}function UH(t){return _(this,null,function*(){let e=t.app;pN(e);let{provider:n}=An(e);if(yN()){let r=yield vN(),{token:i}=yield gN(mN(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function BH(t,e,n,r){let{app:i}=t,o=An(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Au(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),dN(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>dN(t))}function _N(t,e){let n=An(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function dN(t){let{app:e}=t,n=An(e),r=n.tokenRefresher;r||(r=$H(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function $H(t){let{app:e}=t;return new lE(()=>_(null,null,function*(){let n=An(e),r;if(n.token?r=yield hE(t,!0):r=yield hE(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=An(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},lN.RETRIAL_MIN_WAIT,lN.RETRIAL_MAX_WAIT)}function HH(t,e){let n=An(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Au(t){return t.expireTimeMillis-Date.now()>0}function uE(t){return{token:jH(VH),error:t}}var fE=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=An(this.app);for(let n of e)_N(this.app,n.next);return Promise.resolve()}};function zH(t,e){return new fE(t,e)}function qH(t){return{getToken:e=>hE(t,e),getLimitedUseToken:()=>UH(t),addTokenListener:e=>BH(t,"INTERNAL",e),removeTokenListener:e=>_N(t.app,e)}}var GH="@firebase/app-check",WH="0.10.1";var KH="app-check",hN="app-check-internal";function QH(){Cn(new kt(KH,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return zH(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(hN).initialize()})),Cn(new kt(hN,t=>{let e=t.getProvider("app-check").getImmediate();return qH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Fe(GH,WH)}QH();var YH="app-check";var aa=class{constructor(){return sa(YH)}};var JH=["localhost","0.0.0.0","127.0.0.1"],eae=typeof window<"u"&&JH.includes(window.location.hostname);function ON(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var FN=ON,LN=new bn("auth","Firebase",ON());var Ff=new qn("@firebase/auth");function ZH(t,...e){Ff.logLevel<=le.WARN&&Ff.warn(`Auth (${vi}): ${t}`,...e)}function Mf(t,...e){Ff.logLevel<=le.ERROR&&Ff.error(`Auth (${vi}): ${t}`,...e)}function Kn(t,...e){throw VE(t,...e)}function Ro(t,...e){return VE(t,...e)}function VN(t,e,n){let r=Object.assign(Object.assign({},FN()),{[e]:n});return new bn("auth","Firebase",r).create(e,{appName:t.name})}function Nr(t){return VN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function VE(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return LN.create(t,...e)}function Y(t,e,...n){if(!t)throw VE(e,...n)}function Ar(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Mf(e),new Error(e)}function Di(t,e){t||Ar(e)}function yE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function XH(){return EN()==="http:"||EN()==="https:"}function EN(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function e4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XH()||jR()||"connection"in navigator)?navigator.onLine:!0}function t4(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var No=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Di(n>e,"Short delay should be less than long delay!"),this.isMobile=LR()||UR()}get(){return e4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function jE(t,e){Di(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Lf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var n4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var r4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],i4=new No(3e4,6e4);function bi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Ci(o,s,a,c){return _(this,arguments,function*(t,e,n,r,i={}){return jN(t,i,()=>_(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Tu(Object.assign({key:t.config.apiKey},h)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:g},l);return VR()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&mi(t.emulatorConfig.host)&&(y.credentials="include"),Lf.fetch()(yield UN(t,t.config.apiHost,n,p),y)}))})}function jN(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},n4),e);try{let i=new vE(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Pf(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pf(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Pf(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Pf(t,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw VN(t,h,l);Kn(t,h)}}catch(i){if(i instanceof Kt)throw i;Kn(t,"network-request-failed",{message:String(i)})}})}function Lu(o,s,a,c){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield Ci(t,e,n,r,i);return"mfaPendingCredential"in l&&Kn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function UN(t,e,n,r){return _(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?jE(t.config,i):`${t.config.apiScheme}://${i}`;return r4.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function o4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var vE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ro(this.auth,"network-request-failed")),i4.get())})}};function Pf(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Ro(t,e,r);return i.customData._tokenResponse=n,i}function IN(t){return t!==void 0&&t.enterprise!==void 0}var _E=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return o4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function s4(t,e){return _(this,null,function*(){return Ci(t,"GET","/v2/recaptchaConfig",bi(t,e))})}function a4(t,e){return _(this,null,function*(){return Ci(t,"POST","/v1/accounts:delete",e)})}function Vf(t,e){return _(this,null,function*(){return Ci(t,"POST","/v1/accounts:lookup",e)})}function Nu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function UE(t,e=!1){return _(this,null,function*(){let n=Be(t),r=yield n.getIdToken(e),i=BE(r);Y(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Nu(pE(i.auth_time)),issuedAtTime:Nu(pE(i.iat)),expirationTime:Nu(pE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function pE(t){return Number(t)*1e3}function BE(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Mf("JWT malformed, contained fewer than 3 sections"),null;try{let i=wf(n);return i?JSON.parse(i):(Mf("Failed to decode base64 JWT payload"),null)}catch(i){return Mf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function wN(t){let e=BE(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Mu(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Kt&&c4(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function c4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var EE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ku=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nu(this.lastLoginAt),this.creationTime=Nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function jf(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Mu(t,Vf(n,{idToken:r}));Y(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?BN(o.providerUserInfo):[],a=u4(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=c?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new ku(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function $E(t){return _(this,null,function*(){let e=Be(t);yield jf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function u4(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function BN(t){return t.map(e=>{var{providerId:n}=e,r=Rg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function l4(t,e){return _(this,null,function*(){let n=yield jN(t,{},()=>_(null,null,function*(){let r=Tu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield UN(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return t.emulatorConfig&&mi(t.emulatorConfig.host)&&(c.credentials="include"),Lf.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function d4(t,e){return _(this,null,function*(){return Ci(t,"POST","/v2/accounts:revokeToken",bi(t,e))})}var Pu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let n=wN(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield l4(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(Y(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Y(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Ar("not implemented")}};function wi(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ti=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Rg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ku(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield Mu(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return UE(this,e)}reload(){return $E(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield jf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Bt(this.auth.app))return Promise.reject(Nr(this.auth));let e=yield this.getIdToken();return yield Mu(this,a4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,P=(l=n.createdAt)!==null&&l!==void 0?l:void 0,L=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:H,emailVerified:z,isAnonymous:Ne,providerData:pe,stsTokenManager:D}=n;Y(H&&D,e,"internal-error");let v=Pu.fromJSON(this.name,D);Y(typeof H=="string",e,"internal-error"),wi(p,e.name),wi(g,e.name),Y(typeof z=="boolean",e,"internal-error"),Y(typeof Ne=="boolean",e,"internal-error"),wi(y,e.name),wi(w,e.name),wi(N,e.name),wi(S,e.name),wi(P,e.name),wi(L,e.name);let I=new t({uid:H,auth:e,email:g,emailVerified:z,displayName:p,isAnonymous:Ne,photoURL:w,phoneNumber:y,tenantId:N,stsTokenManager:v,createdAt:P,lastLoginAt:L});return pe&&Array.isArray(pe)&&(I.providerData=pe.map(T=>Object.assign({},T))),S&&(I._redirectEventId=S),I}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new Pu;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield jf(o),o})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];Y(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?BN(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Pu;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ku(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var TN=new Map;function Rr(t){Di(t instanceof Function,"Expected a class definition");let e=TN.get(t);return e?(Di(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,TN.set(t,e),e)}var h4=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),IE=h4;function kf(t,e,n){return`firebase:${t}:${e}:${n}`}var Uf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=kf(this.userKey,i.apiKey,o),this.fullPersistenceKey=kf("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Vf(this.auth,{idToken:e}).catch(()=>{});return n?Ti._fromGetAccountInfoResponse(this.auth,n,e):null}return Ti._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(Rr(IE),e,r);let i=(yield Promise.all(n.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Rr(IE),s=kf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let g=yield Vf(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield Ti._fromGetAccountInfoResponse(e,g,h)}else p=Ti._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function DN(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($N(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WN(e))return"Blackberry";if(KN(e))return"Webos";if(HN(e))return"Safari";if((e.includes("chrome/")||zN(e))&&!e.includes("edge/"))return"Chrome";if(GN(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function $N(t=rt()){return/firefox\//i.test(t)}function HN(t=rt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zN(t=rt()){return/crios\//i.test(t)}function qN(t=rt()){return/iemobile/i.test(t)}function GN(t=rt()){return/android/i.test(t)}function WN(t=rt()){return/blackberry/i.test(t)}function KN(t=rt()){return/webos/i.test(t)}function HE(t=rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function f4(t=rt()){var e;return HE(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function p4(){return BR()&&document.documentMode===10}function QN(t=rt()){return HE(t)||GN(t)||KN(t)||WN(t)||/windows phone/i.test(t)||qN(t)}function YN(t,e=[]){let n;switch(t){case"Browser":n=DN(rt());break;case"Worker":n=`${DN(rt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vi}/${r}`}var wE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function g4(n){return _(this,arguments,function*(t,e={}){return Ci(t,"GET","/v2/passwordPolicy",bi(t,e))})}var m4=6,TE=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:m4,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var DE=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bf(this),this.idTokenSubscription=new Bf(this),this.beforeStateQueue=new wE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rr(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Uf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield Vf(this,{idToken:e}),r=yield Ti._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(Bt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield jf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=t4()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Bt(this.app))return Promise.reject(Nr(this));let n=e?Be(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Bt(this.app)?Promise.reject(Nr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Bt(this.app)?Promise.reject(Nr(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Rr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield g4(this),n=new TE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield d4(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Rr(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=yield Uf.create(this,[Rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;if(Bt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&ZH(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Mo(t){return Be(t)}var Bf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=qR(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Kf={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y4(t){Kf=t}function JN(t){return Kf.loadJS(t)}function v4(){return Kf.recaptchaEnterpriseScript}function _4(){return Kf.gapiScript}function ZN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var bE=class{constructor(){this.enterprise=new CE}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},CE=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var E4="recaptcha-enterprise",XN="NO_RECAPTCHA",SE=class{constructor(e){this.type=E4,this.auth=Mo(e)}verify(e="verify",n=!1){return _(this,null,function*(){function r(o){return _(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>_(null,null,function*(){s4(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new _E(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;IN(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(XN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new bE().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&IN(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=v4();c.length!==0&&(c+=a),JN(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Ru(t,e,n,r=!1,i=!1){return _(this,null,function*(){let o=new SE(t),s;if(i)s=XN;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function AE(t,e,n,r,i){return _(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Ru(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(a=>_(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Ru(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Ru(t,e,n);return r(t,a).catch(c=>_(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=yield Ru(t,e,n,!1,!0);return r(t,h)}return Promise.reject(c)}))}else{let a=yield Ru(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")})}function zE(t,e){let n=ia(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(zn(o,e??{}))return i;Kn(i,"already-initialized")}return n.initialize({options:e})}function I4(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Rr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function qE(t,e,n){let r=Mo(t);Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=eP(e),{host:s,port:a}=w4(e),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Y(zn(l,r.config.emulator)&&zn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,mi(s)?(Df(`${o}//${s}${c}`),bf("Auth",!0)):i||T4()}function eP(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function w4(t){let e=eP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:bN(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:bN(s)}}}function bN(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function T4(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var xu=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,n){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}};function D4(t,e){return _(this,null,function*(){return Ci(t,"POST","/v1/accounts:signUp",e)})}function b4(t,e){return _(this,null,function*(){return Lu(t,"POST","/v1/accounts:signInWithPassword",bi(t,e))})}function C4(t,e){return _(this,null,function*(){return Lu(t,"POST","/v1/accounts:signInWithEmailLink",bi(t,e))})}function S4(t,e){return _(this,null,function*(){return Lu(t,"POST","/v1/accounts:signInWithEmailLink",bi(t,e))})}var Ou=class t extends xu{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return AE(e,n,"signInWithPassword",b4,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return C4(e,{email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}})}_linkToIdToken(e,n){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return AE(e,r,"signUpPassword",D4,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return S4(e,{idToken:n,email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function gE(t,e){return _(this,null,function*(){return Lu(t,"POST","/v1/accounts:signInWithIdp",bi(t,e))})}function A4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function R4(t){let e=na(ra(t)).link,n=e?na(ra(e)).deep_link_id:null,r=na(ra(t)).deep_link_id;return(r?na(ra(r)).link:null)||r||n||e||t}var $f=class t{constructor(e){var n,r,i,o,s,a;let c=na(ra(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,p=A4((i=c.mode)!==null&&i!==void 0?i:null);Y(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=R4(e);try{return new t(n)}catch{return null}}};var tP=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Ou._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=$f.parseLink(r);return Y(i,"argument-error"),Ou._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Hf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var RE=class extends Hf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function N4(t,e){return _(this,null,function*(){return Lu(t,"POST","/v1/accounts:signUp",bi(t,e))})}var ca=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let o=yield Ti._fromIdTokenResponse(e,r,i),s=CN(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=CN(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function CN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var NE=class t extends Kt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function nP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?NE._fromErrorAndOperation(t,o,e,r):o})}function P4(t,e,n=!1){return _(this,null,function*(){let r=yield Mu(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return ca._forOperation(t,"link",r)})}function M4(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(Bt(r.app))return Promise.reject(Nr(r));let i="reauthenticate";try{let o=yield Mu(t,nP(r,i,e,t),n);Y(o.idToken,r,"internal-error");let s=BE(o.idToken);Y(s,r,"internal-error");let{sub:a}=s;return Y(t.uid===a,r,"user-mismatch"),ca._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Kn(r,"user-mismatch"),o}})}function rP(t,e,n=!1){return _(this,null,function*(){if(Bt(t.app))return Promise.reject(Nr(t));let r="signIn",i=yield nP(t,r,e),o=yield ca._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function GE(t,e){return _(this,null,function*(){return rP(Mo(t),e)})}function iP(t){return _(this,null,function*(){let e=Mo(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function WE(t,e,n){return _(this,null,function*(){if(Bt(t.app))return Promise.reject(Nr(t));let r=Mo(t),s=yield AE(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",N4,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&iP(t),c}),a=yield ca._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function KE(t,e,n){return Bt(t.app)?Promise.reject(Nr(t)):GE(Be(t),tP.credential(e,n)).catch(r=>_(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&iP(t),r}))}function Qf(t,e,n,r){return Be(t).onIdTokenChanged(e,n,r)}function QE(t,e,n){return Be(t).beforeAuthStateChanged(e,n)}function Yf(t,e,n,r){return Be(t).onAuthStateChanged(e,n,r)}function YE(t){return Be(t).signOut()}var zf="__sak";var qf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zf,"1"),this.storage.removeItem(zf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var k4=1e3,x4=10,O4=(()=>{class t extends qf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QN(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);p4()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,x4):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},k4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield $r(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield $r(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield $r(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),oP=O4;var F4=(()=>{class t extends qf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),JE=F4;function L4(t){return Promise.all(t.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var V4=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield L4(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function sP(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var PE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=sP("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Wn(){return window}function j4(t){Wn().location.href=t}function aP(){return typeof Wn().WorkerGlobalScope<"u"&&typeof Wn().importScripts=="function"}function U4(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function B4(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $4(){return aP()?self:null}var cP="firebaseLocalStorageDb",H4=1,Gf="firebaseLocalStorage",uP="fbase_key",Po=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Jf(t,e){return t.transaction([Gf],e?"readwrite":"readonly").objectStore(Gf)}function z4(){let t=indexedDB.deleteDatabase(cP);return new Po(t).toPromise()}function ME(){let t=indexedDB.open(cP,H4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Gf,{keyPath:uP})}catch(i){n(i)}}),t.addEventListener("success",()=>_(null,null,function*(){let r=t.result;r.objectStoreNames.contains(Gf)?e(r):(r.close(),yield z4(),e(yield ME()))}))})}function SN(t,e,n){return _(this,null,function*(){let r=Jf(t,!0).put({[uP]:e,value:n});return new Po(r).toPromise()})}function q4(t,e){return _(this,null,function*(){let n=Jf(t,!1).get(e),r=yield new Po(n).toPromise();return r===void 0?null:r.value})}function AN(t,e){let n=Jf(t,!0).delete(e);return new Po(n).toPromise()}var G4=800,W4=3,K4=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield ME(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>W4)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return aP()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=V4._getInstance($4()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield U4(),!this.activeServiceWorker)return;this.sender=new PE(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||B4()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield ME();return yield SN(n,zf,"1"),yield AN(n,zf),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>SN(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>q4(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>AN(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(o=>{let s=Jf(o,!1).getAll();return new Po(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),G4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),lP=K4;var cae=ZN("rcb"),uae=new No(3e4,6e4);function Q4(t,e){return e?Rr(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Fu=class extends xu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gE(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gE(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gE(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function Y4(t){return rP(t.auth,new Fu(t),t.bypassAuthState)}function J4(t){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),M4(n,new Fu(t),t.bypassAuthState)}function Z4(t){return _(this,null,function*(){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),P4(n,new Fu(t),t.bypassAuthState)})}var kE=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y4;case"linkViaPopup":case"linkViaRedirect":return Z4;case"reauthViaPopup":case"reauthViaRedirect":return J4;default:Kn(this.auth,"internal-error")}}resolve(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var lae=new No(2e3,1e4);var X4="pendingRedirect",xf=new Map,xE=class t extends kE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=xf.get(this.auth._key());if(!e){try{let r=(yield ez(this.resolver,this.auth))?yield $r(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}xf.set(this.auth._key(),e)}return this.bypassAuthState||xf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return $r(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,$r(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function ez(t,e){return _(this,null,function*(){let n=rz(e),r=nz(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function tz(t,e){xf.set(t._key(),e)}function nz(t){return Rr(t._redirectPersistence)}function rz(t){return kf(X4,t.config.apiKey,t.name)}function iz(t,e,n=!1){return _(this,null,function*(){if(Bt(t.app))return Promise.reject(Nr(t));let r=Mo(t),i=Q4(r,e),s=yield new xE(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var oz=10*60*1e3,OE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sz(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!dP(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ro(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oz&&this.cachedEventUids.clear(),this.cachedEventUids.has(RN(e))}saveEventToCache(e){this.cachedEventUids.add(RN(e)),this.lastProcessedEventTime=Date.now()}};function RN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dP({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function sz(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dP(t);default:return!1}}function az(n){return _(this,arguments,function*(t,e={}){return Ci(t,"GET","/v1/projects",e)})}var cz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uz=/^https?/;function lz(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield az(t);for(let n of e)try{if(dz(n))return}catch{}Kn(t,"unauthorized-domain")})}function dz(t){let e=yE(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!uz.test(n))return!1;if(cz.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var hz=new No(3e4,6e4);function NN(){let t=Wn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function fz(t){return new Promise((e,n)=>{var r,i,o;function s(){NN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{NN(),n(Ro(t,"network-request-failed"))},timeout:hz.get()})}if(!((i=(r=Wn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Wn().gapi)===null||o===void 0)&&o.load)s();else{let a=ZN("iframefcb");return Wn()[a]=()=>{gapi.load?s():n(Ro(t,"network-request-failed"))},JN(`${_4()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Of=null,e})}var Of=null;function pz(t){return Of=Of||fz(t),Of}var gz=new No(5e3,15e3),mz="__/auth/iframe",yz="emulator/auth/iframe",vz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_z=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ez(t){let e=t.config;Y(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?jE(e,yz):`https://${t.config.authDomain}/${mz}`,r={apiKey:e.apiKey,appName:t.name,v:vi},i=_z.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Tu(r).slice(1)}`}function Iz(t){return _(this,null,function*(){let e=yield pz(t),n=Wn().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:Ez(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vz,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Ro(t,"network-request-failed"),a=Wn().setTimeout(()=>{o(s)},gz.get());function c(){Wn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var wz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Tz=500,Dz=600,bz="_blank",Cz="http://localhost",Wf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Sz(t,e,n,r=Tz,i=Dz){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},wz),{width:r.toString(),height:i.toString(),top:o,left:s}),l=rt().toLowerCase();n&&(a=zN(l)?bz:n),$N(l)&&(e=e||Cz,c.scrollbars="yes");let h=Object.entries(c).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(f4(l)&&a!=="_self")return Az(e||"",a),new Wf(null);let p=window.open(e||"",a,h);Y(p,t,"popup-blocked");try{p.focus()}catch{}return new Wf(p)}function Az(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Rz="__/auth/handler",Nz="emulator/auth/handler",Pz=encodeURIComponent("fac");function PN(t,e,n,r,i,o){return _(this,null,function*(){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:vi,eventId:i};if(e instanceof Hf){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",zR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof RE){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield t._getAppCheckToken(),l=c?`#${Pz}=${encodeURIComponent(c)}`:"";return`${Mz(t)}?${Tu(a).slice(1)}${l}`})}function Mz({config:t}){return t.emulator?jE(t,Nz):`https://${t.authDomain}/${Rz}`}var mE="webStorageSupport",FE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JE,this._completeRedirectFn=iz,this._overrideRedirectResult=tz}_openPopup(e,n,r,i){return _(this,null,function*(){var o;Di((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield PN(e,n,r,yE(),i);return Sz(e,s,sP())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield PN(e,n,r,yE(),i);return j4(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Di(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield Iz(e),r=new OE(e);return n.register("authEvent",i=>(Y(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(mE,{type:mE},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[mE];s!==void 0&&n(!!s),Kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lz(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return QN()||HN()||HE()}},hP=FE;var MN="@firebase/auth",kN="1.10.8";var LE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function kz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xz(t){Cn(new kt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Y(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YN(t)},l=new DE(r,i,o,c);return I4(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Cn(new kt("auth-internal",e=>{let n=Mo(e.getProvider("auth").getImmediate());return(r=>new LE(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fe(MN,kN,kz(t)),Fe(MN,kN,"esm2017")}var Oz=5*60,Fz=G_("authIdTokenMaxAge")||Oz,xN=null,Lz=t=>e=>_(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Fz)return;let i=n?.token;xN!==i&&(xN=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function ZE(t=Co()){let e=ia(t,"auth");if(e.isInitialized())return e.getImmediate();let n=zE(t,{popupRedirectResolver:hP,persistence:[lP,oP,JE]}),r=G_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=Lz(o.toString());QE(n,s,()=>s(n.currentUser)),Qf(n,a=>s(a))}}let i=z_("auth");return i&&qE(n,`http://${i}`),n}function Vz(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}y4({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Ro("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",Vz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xz("Browser");function pP(t){return new J(function(e){var n=Yf(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var gP="auth",ko=class{constructor(e){return e}},Vu=class{constructor(){return sa(gP)}};var XE=new U("angularfire2.auth-instances");function bq(t,e){let n=Cu(gP,t,e);return n&&new ko(n)}function Cq(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ko(r)}}var Sq={provide:Vu,deps:[[new Pt,XE]]},Aq={provide:ko,useFactory:bq,deps:[[new Pt,XE],Sr]};function nce(t,...e){return Fe("angularfire",_i.full,"auth"),Ft([Aq,Sq,{provide:XE,useFactory:Cq(t),multi:!0,deps:[ge,Ze,Ei,Ao,[new Pt,aa],...e]}])}var mP=Sn(pP,!0);var yP=Sn(WE,!0,2);var rce=Sn(ZE,!0);var vP=Sn(KE,!0,2);var _P=Sn(YE,!0,2);var EP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},IP={};var Pr,eI;(function(){var t;function e(D,v){function I(){}I.prototype=v.prototype,D.D=v.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(T,b,A){for(var E=Array(arguments.length-2),ir=2;ir<arguments.length;ir++)E[ir-2]=arguments[ir];return v.prototype[b].apply(T,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,I){I||(I=0);var T=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)T[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)T[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=D.g[0],I=D.g[1],b=D.g[2];var A=D.g[3],E=v+(A^I&(b^A))+T[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=A+(b^v&(I^b))+T[1]+3905402710&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(I^A&(v^I))+T[2]+606105819&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(v^b&(A^v))+T[3]+3250441966&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(A^I&(b^A))+T[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(b^v&(I^b))+T[5]+1200080426&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(I^A&(v^I))+T[6]+2821735955&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(v^b&(A^v))+T[7]+4249261313&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(A^I&(b^A))+T[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(b^v&(I^b))+T[9]+2336552879&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(I^A&(v^I))+T[10]+4294925233&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(v^b&(A^v))+T[11]+2304563134&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(A^I&(b^A))+T[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(b^v&(I^b))+T[13]+4254626195&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(I^A&(v^I))+T[14]+2792965006&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(v^b&(A^v))+T[15]+1236535329&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(b^A&(I^b))+T[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(v^I))+T[6]+3225465664&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(A^v))+T[11]+643717713&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(b^A))+T[0]+3921069994&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(I^b))+T[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(v^I))+T[10]+38016083&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(A^v))+T[15]+3634488961&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(b^A))+T[4]+3889429448&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(I^b))+T[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(v^I))+T[14]+3275163606&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(A^v))+T[3]+4107603335&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(b^A))+T[8]+1163531501&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(I^b))+T[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(v^I))+T[2]+4243563512&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(A^v))+T[7]+1735328473&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(b^A))+T[12]+2368359562&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(I^b^A)+T[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^b)+T[8]+2272392833&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^I)+T[11]+1839030562&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^v)+T[14]+4259657740&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^A)+T[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^b)+T[4]+1272893353&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^I)+T[7]+4139469664&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^v)+T[10]+3200236656&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^A)+T[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^b)+T[0]+3936430074&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^I)+T[3]+3572445317&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^v)+T[6]+76029189&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^A)+T[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^b)+T[12]+3873151461&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^I)+T[15]+530742520&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^v)+T[2]+3299628645&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(b^(I|~A))+T[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~b))+T[7]+1126891415&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~I))+T[14]+2878612391&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~v))+T[5]+4237533241&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~A))+T[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~b))+T[3]+2399980690&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~I))+T[10]+4293915773&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~v))+T[1]+2240044497&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~A))+T[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~b))+T[15]+4264355552&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~I))+T[6]+2734768916&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~v))+T[13]+1309151649&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~A))+T[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~b))+T[11]+3174756917&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~I))+T[2]+718787259&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~v))+T[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,D.g[2]=D.g[2]+b&4294967295,D.g[3]=D.g[3]+A&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var I=v-this.blockSize,T=this.B,b=this.h,A=0;A<v;){if(b==0)for(;A<=I;)i(this,D,A),A+=this.blockSize;if(typeof D=="string"){for(;A<v;)if(T[b++]=D.charCodeAt(A++),b==this.blockSize){i(this,T),b=0;break}}else for(;A<v;)if(T[b++]=D[A++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var I=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=I&255,I/=256;for(this.u(D),D=Array(16),v=I=0;4>v;++v)for(var T=0;32>T;T+=8)D[I++]=this.g[v]>>>T&255;return D};function o(D,v){var I=a;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=v(D)}function s(D,v){this.h=v;for(var I=[],T=!0,b=D.length-1;0<=b;b--){var A=D[b]|0;T&&A==v||(I[b]=A,T=!1)}this.g=I}var a={};function c(D){return-128<=D&&128>D?o(D,function(v){return new s([v|0],0>v?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return S(l(-D));for(var v=[],I=1,T=0;D>=I;T++)v[T]=D/I|0,I*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return S(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),T=p,b=0;b<D.length;b+=8){var A=Math.min(8,D.length-b),E=parseInt(D.substring(b,b+A),v);8>A?(A=l(Math.pow(v,A)),T=T.j(A).add(l(E))):(T=T.j(I),T=T.add(l(E)))}return T}var p=c(0),g=c(1),y=c(16777216);t=s.prototype,t.m=function(){if(N(this))return-S(this).m();for(var D=0,v=1,I=0;I<this.g.length;I++){var T=this.i(I);D+=(0<=T?T:4294967296+T)*v,v*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(w(this))return"0";if(N(this))return"-"+S(this).toString(D);for(var v=l(Math.pow(D,6)),I=this,T="";;){var b=z(I,v).g;I=P(I,b.j(v));var A=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=b,w(I))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function w(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function N(D){return D.h==-1}t.l=function(D){return D=P(this,D),N(D)?-1:w(D)?0:1};function S(D){for(var v=D.g.length,I=[],T=0;T<v;T++)I[T]=~D.g[T];return new s(I,~D.h).add(g)}t.abs=function(){return N(this)?S(this):this},t.add=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0,b=0;b<=v;b++){var A=T+(this.i(b)&65535)+(D.i(b)&65535),E=(A>>>16)+(this.i(b)>>>16)+(D.i(b)>>>16);T=E>>>16,A&=65535,E&=65535,I[b]=E<<16|A}return new s(I,I[I.length-1]&-2147483648?-1:0)};function P(D,v){return D.add(S(v))}t.j=function(D){if(w(this)||w(D))return p;if(N(this))return N(D)?S(this).j(S(D)):S(S(this).j(D));if(N(D))return S(this.j(S(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,I=[],T=0;T<2*v;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<D.g.length;b++){var A=this.i(T)>>>16,E=this.i(T)&65535,ir=D.i(b)>>>16,La=D.i(b)&65535;I[2*T+2*b]+=E*La,L(I,2*T+2*b),I[2*T+2*b+1]+=A*La,L(I,2*T+2*b+1),I[2*T+2*b+1]+=E*ir,L(I,2*T+2*b+1),I[2*T+2*b+2]+=A*ir,L(I,2*T+2*b+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new s(I,0)};function L(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function H(D,v){this.g=D,this.h=v}function z(D,v){if(w(v))throw Error("division by zero");if(w(D))return new H(p,p);if(N(D))return v=z(S(D),v),new H(S(v.g),S(v.h));if(N(v))return v=z(D,S(v)),new H(S(v.g),v.h);if(30<D.g.length){if(N(D)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,T=v;0>=T.l(D);)I=Ne(I),T=Ne(T);var b=pe(I,1),A=pe(T,1);for(T=pe(T,2),I=pe(I,2);!w(T);){var E=A.add(T);0>=E.l(D)&&(b=b.add(I),A=E),T=pe(T,1),I=pe(I,1)}return v=P(D,b.j(v)),new H(b,v)}for(b=p;0<=D.l(v);){for(I=Math.max(1,Math.floor(D.m()/v.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=l(I),E=A.j(v);N(E)||0<E.l(D);)I-=T,A=l(I),E=A.j(v);w(A)&&(A=g),b=b.add(A),D=P(D,E)}return new H(b,D)}t.A=function(D){return z(this,D).h},t.and=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)&D.i(T);return new s(I,this.h&D.h)},t.or=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)|D.i(T);return new s(I,this.h|D.h)},t.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)^D.i(T);return new s(I,this.h^D.h)};function Ne(D){for(var v=D.g.length+1,I=[],T=0;T<v;T++)I[T]=D.i(T)<<1|D.i(T-1)>>>31;return new s(I,D.h)}function pe(D,v){var I=v>>5;v%=32;for(var T=D.g.length-I,b=[],A=0;A<T;A++)b[A]=0<v?D.i(A+I)>>>v|D.i(A+I+1)<<32-v:D.i(A+I);return new s(b,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,eI=IP.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Pr=IP.Integer=s}).apply(typeof EP<"u"?EP:typeof self<"u"?self:typeof window<"u"?window:{});var Zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mr={};var tI,Rq,ua,nI,ju,Xf,rI,iI,oI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zf=="object"&&Zf];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var C=u[m];if(!(C in f))break e;f=f[C]}u=u[u.length-1],m=f[u],d=d(m),d!=m&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,m=!1,C={next:function(){if(!m&&f<u.length){var R=f++;return{value:d(R,u[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),u.apply(d,C)}}return function(){return u.apply(d,arguments)}}function g(u,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function w(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(m,C,R){for(var O=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)O[Te-2]=arguments[Te];return d.prototype[C].apply(m,O)}}function N(u){let d=u.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=u[m];return f}return[]}function S(u,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(c(m)){let C=u.length||0,R=m.length||0;u.length=C+R;for(let O=0;O<R;O++)u[C+O]=m[O]}else u.push(m)}}class P{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function L(u){return/^[\s\xa0]*$/.test(u)}function H(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function z(u){return z[" "](u),u}z[" "]=function(){};var Ne=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function pe(u,d,f){for(let m in u)d.call(f,u[m],m,u)}function D(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function v(u){let d={};for(let f in u)d[f]=u[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,d){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)u[f]=m[f];for(let R=0;R<I.length;R++)f=I[R],Object.prototype.hasOwnProperty.call(m,f)&&(u[f]=m[f])}}function b(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function A(u){a.setTimeout(()=>{throw u},0)}function E(){var u=Zp;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class ir{constructor(){this.h=this.g=null}add(d,f){let m=La.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var La=new P(()=>new Wk,u=>u.reset());class Wk{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Va,ja=!1,Zp=new ir,wT=()=>{let u=a.Promise.resolve(void 0);Va=()=>{u.then(Kk)}};var Kk=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(f){A(f)}var d=La;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}ja=!1};function Vr(){this.s=this.s,this.C=this.C}Vr.prototype.s=!1,Vr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Vr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pt(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}pt.prototype.h=function(){this.defaultPrevented=!0};var Qk=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function Ua(u,d){if(pt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(Ne){e:{try{z(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Yk[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ua.aa.h.call(this)}}w(Ua,pt);var Yk={2:"touch",3:"pen",4:"mouse"};Ua.prototype.h=function(){Ua.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ba="closure_listenable_"+(1e6*Math.random()|0),Jk=0;function Zk(u,d,f,m,C){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=C,this.key=++Jk,this.da=this.fa=!1}function ol(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function sl(u){this.src=u,this.g={},this.h=0}sl.prototype.add=function(u,d,f,m,C){var R=u.toString();u=this.g[R],u||(u=this.g[R]=[],this.h++);var O=eg(u,d,m,C);return-1<O?(d=u[O],f||(d.fa=!1)):(d=new Zk(d,this.src,R,!!m,C),d.fa=f,u.push(d)),d};function Xp(u,d){var f=d.type;if(f in u.g){var m=u.g[f],C=Array.prototype.indexOf.call(m,d,void 0),R;(R=0<=C)&&Array.prototype.splice.call(m,C,1),R&&(ol(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function eg(u,d,f,m){for(var C=0;C<u.length;++C){var R=u[C];if(!R.da&&R.listener==d&&R.capture==!!f&&R.ha==m)return C}return-1}var tg="closure_lm_"+(1e6*Math.random()|0),ng={};function TT(u,d,f,m,C){if(m&&m.once)return bT(u,d,f,m,C);if(Array.isArray(d)){for(var R=0;R<d.length;R++)TT(u,d[R],f,m,C);return null}return f=sg(f),u&&u[Ba]?u.K(d,f,l(m)?!!m.capture:!!m,C):DT(u,d,f,!1,m,C)}function DT(u,d,f,m,C,R){if(!d)throw Error("Invalid event type");var O=l(C)?!!C.capture:!!C,Te=ig(u);if(Te||(u[tg]=Te=new sl(u)),f=Te.add(d,f,m,O,R),f.proxy)return f;if(m=Xk(),f.proxy=m,m.src=u,m.listener=f,u.addEventListener)Qk||(C=O),C===void 0&&(C=!1),u.addEventListener(d.toString(),m,C);else if(u.attachEvent)u.attachEvent(ST(d.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Xk(){function u(f){return d.call(u.src,u.listener,f)}let d=ex;return u}function bT(u,d,f,m,C){if(Array.isArray(d)){for(var R=0;R<d.length;R++)bT(u,d[R],f,m,C);return null}return f=sg(f),u&&u[Ba]?u.L(d,f,l(m)?!!m.capture:!!m,C):DT(u,d,f,!0,m,C)}function CT(u,d,f,m,C){if(Array.isArray(d))for(var R=0;R<d.length;R++)CT(u,d[R],f,m,C);else m=l(m)?!!m.capture:!!m,f=sg(f),u&&u[Ba]?(u=u.i,d=String(d).toString(),d in u.g&&(R=u.g[d],f=eg(R,f,m,C),-1<f&&(ol(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete u.g[d],u.h--)))):u&&(u=ig(u))&&(d=u.g[d.toString()],u=-1,d&&(u=eg(d,f,m,C)),(f=-1<u?d[u]:null)&&rg(f))}function rg(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Ba])Xp(d.i,u);else{var f=u.type,m=u.proxy;d.removeEventListener?d.removeEventListener(f,m,u.capture):d.detachEvent?d.detachEvent(ST(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=ig(d))?(Xp(f,u),f.h==0&&(f.src=null,d[tg]=null)):ol(u)}}}function ST(u){return u in ng?ng[u]:ng[u]="on"+u}function ex(u,d){if(u.da)u=!0;else{d=new Ua(d,this);var f=u.listener,m=u.ha||u.src;u.fa&&rg(u),u=f.call(m,d)}return u}function ig(u){return u=u[tg],u instanceof sl?u:null}var og="__closure_events_fn_"+(1e9*Math.random()>>>0);function sg(u){return typeof u=="function"?u:(u[og]||(u[og]=function(d){return u.handleEvent(d)}),u[og])}function gt(){Vr.call(this),this.i=new sl(this),this.M=this,this.F=null}w(gt,Vr),gt.prototype[Ba]=!0,gt.prototype.removeEventListener=function(u,d,f,m){CT(this,u,d,f,m)};function bt(u,d){var f,m=u.F;if(m)for(f=[];m;m=m.F)f.push(m);if(u=u.M,m=d.type||d,typeof d=="string")d=new pt(d,u);else if(d instanceof pt)d.target=d.target||u;else{var C=d;d=new pt(m,u),T(d,C)}if(C=!0,f)for(var R=f.length-1;0<=R;R--){var O=d.g=f[R];C=al(O,m,!0,d)&&C}if(O=d.g=u,C=al(O,m,!0,d)&&C,C=al(O,m,!1,d)&&C,f)for(R=0;R<f.length;R++)O=d.g=f[R],C=al(O,m,!1,d)&&C}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],m=0;m<f.length;m++)ol(f[m]);delete u.g[d],u.h--}}this.F=null},gt.prototype.K=function(u,d,f,m){return this.i.add(String(u),d,!1,f,m)},gt.prototype.L=function(u,d,f,m){return this.i.add(String(u),d,!0,f,m)};function al(u,d,f,m){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,R=0;R<d.length;++R){var O=d[R];if(O&&!O.da&&O.capture==f){var Te=O.listener,at=O.ha||O.src;O.fa&&Xp(u.i,O),C=Te.call(at,m)!==!1&&C}}return C&&!m.defaultPrevented}function AT(u,d,f){if(typeof u=="function")f&&(u=g(u,f));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function RT(u){u.g=AT(()=>{u.g=null,u.i&&(u.i=!1,RT(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class tx extends Vr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:RT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $a(u){Vr.call(this),this.h=u,this.g={}}w($a,Vr);var NT=[];function PT(u){pe(u.g,function(d,f){this.g.hasOwnProperty(f)&&rg(d)},u),u.g={}}$a.prototype.N=function(){$a.aa.N.call(this),PT(this)},$a.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ag=a.JSON.stringify,nx=a.JSON.parse,rx=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function cg(){}cg.prototype.h=null;function MT(u){return u.h||(u.h=u.i())}function kT(){}var Ha={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ug(){pt.call(this,"d")}w(ug,pt);function lg(){pt.call(this,"c")}w(lg,pt);var Fi={},xT=null;function cl(){return xT=xT||new gt}Fi.La="serverreachability";function OT(u){pt.call(this,Fi.La,u)}w(OT,pt);function za(u){let d=cl();bt(d,new OT(d))}Fi.STAT_EVENT="statevent";function FT(u,d){pt.call(this,Fi.STAT_EVENT,u),this.stat=d}w(FT,pt);function Ct(u){let d=cl();bt(d,new FT(d,u))}Fi.Ma="timingevent";function LT(u,d){pt.call(this,Fi.Ma,u),this.size=d}w(LT,pt);function qa(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Ga(){this.g=!0}Ga.prototype.xa=function(){this.g=!1};function ix(u,d,f,m,C,R){u.info(function(){if(u.g)if(R)for(var O="",Te=R.split("&"),at=0;at<Te.length;at++){var fe=Te[at].split("=");if(1<fe.length){var mt=fe[0];fe=fe[1];var yt=mt.split("_");O=2<=yt.length&&yt[1]=="type"?O+(mt+"="+fe+"&"):O+(mt+"=redacted&")}}else O=null;else O=R;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+d+`
`+f+`
`+O})}function ox(u,d,f,m,C,R,O){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+d+`
`+f+`
`+R+" "+O})}function Go(u,d,f,m){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+ax(u,f)+(m?" "+m:"")})}function sx(u,d){u.info(function(){return"TIMEOUT: "+d})}Ga.prototype.info=function(){};function ax(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var m=f[u];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var R=C[0];if(R!="noop"&&R!="stop"&&R!="close")for(var O=1;O<C.length;O++)C[O]=""}}}}return ag(f)}catch{return d}}var ul={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},VT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dg;function ll(){}w(ll,cg),ll.prototype.g=function(){return new XMLHttpRequest},ll.prototype.i=function(){return{}},dg=new ll;function jr(u,d,f,m){this.j=u,this.i=d,this.l=f,this.R=m||1,this.U=new $a(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jT}function jT(){this.i=null,this.g="",this.h=!1}var UT={},hg={};function fg(u,d,f){u.L=1,u.v=pl(or(d)),u.m=f,u.P=!0,BT(u,null)}function BT(u,d){u.F=Date.now(),dl(u),u.A=or(u.v);var f=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),tD(f.i,"t",m),u.C=0,f=u.j.J,u.h=new jT,u.g=_D(u.j,f?d:null,!u.m),0<u.O&&(u.M=new tx(g(u.Y,u,u.g),u.O)),d=u.U,f=u.g,m=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(NT[0]=C.toString()),C=NT);for(var R=0;R<C.length;R++){var O=TT(f,C[R],m||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),za(),ix(u.i,u.u,u.A,u.l,u.R,u.m)}jr.prototype.ca=function(u){u=u.target;let d=this.M;d&&sr(u)==3?d.j():this.Y(u)},jr.prototype.Y=function(u){try{if(u==this.g)e:{let yt=sr(this.g);var d=this.g.Ba();let Qo=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||cD(this.g)))){this.J||yt!=4||d==7||(d==8||0>=Qo?za(3):za(2)),pg(this);var f=this.g.Z();this.X=f;t:if($T(this)){var m=cD(this.g);u="";var C=m.length,R=sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),Wa(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,u+=this.h.i.decode(m[d],{stream:!(R&&d==C-1)});m.length=0,this.h.g+=u,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,ox(this.i,this.u,this.A,this.l,this.R,yt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,at=this.g;if((Te=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Te)){var fe=Te;break t}}fe=null}if(f=fe)Go(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gg(this,f);else{this.o=!1,this.s=3,Ct(12),Li(this),Wa(this);break e}}if(this.P){f=!0;let cn;for(;!this.J&&this.C<O.length;)if(cn=cx(this,O),cn==hg){yt==4&&(this.s=4,Ct(14),f=!1),Go(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==UT){this.s=4,Ct(15),Go(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else Go(this.i,this.l,cn,null),gg(this,cn);if($T(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||O.length!=0||this.h.h||(this.s=1,Ct(16),f=!1),this.o=this.o&&f,!f)Go(this.i,this.l,O,"[Invalid Chunked Response]"),Li(this),Wa(this);else if(0<O.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Ig(mt),mt.M=!0,Ct(11))}}else Go(this.i,this.l,O,null),gg(this,O);yt==4&&Li(this),this.o&&!this.J&&(yt==4?gD(this.j,this):(this.o=!1,dl(this)))}else bx(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),Li(this),Wa(this)}}}catch{}finally{}};function $T(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function cx(u,d){var f=u.C,m=d.indexOf(`
`,f);return m==-1?hg:(f=Number(d.substring(f,m)),isNaN(f)?UT:(m+=1,m+f>d.length?hg:(d=d.slice(m,m+f),u.C=m+f,d)))}jr.prototype.cancel=function(){this.J=!0,Li(this)};function dl(u){u.S=Date.now()+u.I,HT(u,u.I)}function HT(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=qa(g(u.ba,u),d)}function pg(u){u.B&&(a.clearTimeout(u.B),u.B=null)}jr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(sx(this.i,this.A),this.L!=2&&(za(),Ct(17)),Li(this),this.s=2,Wa(this)):HT(this,this.S-u)};function Wa(u){u.j.G==0||u.J||gD(u.j,u)}function Li(u){pg(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,PT(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function gg(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||mg(f.h,u))){if(!u.K&&mg(f.h,u)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)_l(f),yl(f);else break e;Eg(f),Ct(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=qa(g(f.Za,f),6e3));if(1>=GT(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ji(f,11)}else if((u.K||f.g==u)&&_l(f),!L(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let fe=C[d];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];let mt=fe[3];mt!=null&&(f.la=mt,f.j.info("VER="+f.la));let yt=fe[4];yt!=null&&(f.Aa=yt,f.j.info("SVER="+f.Aa));let Qo=fe[5];Qo!=null&&typeof Qo=="number"&&0<Qo&&(m=1.5*Qo,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let cn=u.g;if(cn){let Il=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var R=m.h;R.g||Il.indexOf("spdy")==-1&&Il.indexOf("quic")==-1&&Il.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(yg(R,R.h),R.h=null))}if(m.D){let wg=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;wg&&(m.ya=wg,Ce(m.I,m.D,wg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var O=u;if(m.qa=vD(m,m.J?m.ia:null,m.W),O.K){WT(m.h,O);var Te=O,at=m.L;at&&(Te.I=at),Te.B&&(pg(Te),dl(Te)),m.g=O}else fD(m);0<f.i.length&&vl(f)}else fe[0]!="stop"&&fe[0]!="close"||ji(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?ji(f,7):_g(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}za(4)}catch{}}var ux=class{constructor(u,d){this.g=u,this.map=d}};function zT(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qT(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function GT(u){return u.h?1:u.g?u.g.size:0}function mg(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function yg(u,d){u.g?u.g.add(d):u.h=d}function WT(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}zT.prototype.cancel=function(){if(this.i=KT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function KT(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return N(u.i)}function lx(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,m=0;m<f;m++)d.push(u[m]);return d}d=[],f=0;for(m in u)d[f++]=u[m];return d}function dx(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let m in u)d[f++]=m;return d}}}function QT(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=dx(u),m=lx(u),C=m.length,R=0;R<C;R++)d.call(void 0,m[R],f&&f[R],u)}var YT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hx(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var m=u[f].indexOf("="),C=null;if(0<=m){var R=u[f].substring(0,m);C=u[f].substring(m+1)}else R=u[f];d(R,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Vi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Vi){this.h=u.h,hl(this,u.j),this.o=u.o,this.g=u.g,fl(this,u.s),this.l=u.l;var d=u.i,f=new Ya;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),JT(this,f),this.m=u.m}else u&&(d=String(u).match(YT))?(this.h=!1,hl(this,d[1]||"",!0),this.o=Ka(d[2]||""),this.g=Ka(d[3]||"",!0),fl(this,d[4]),this.l=Ka(d[5]||"",!0),JT(this,d[6]||"",!0),this.m=Ka(d[7]||"")):(this.h=!1,this.i=new Ya(null,this.h))}Vi.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Qa(d,ZT,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Qa(d,ZT,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Qa(f,f.charAt(0)=="/"?gx:px,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Qa(f,yx)),u.join("")};function or(u){return new Vi(u)}function hl(u,d,f){u.j=f?Ka(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function fl(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function JT(u,d,f){d instanceof Ya?(u.i=d,vx(u.i,u.h)):(f||(d=Qa(d,mx)),u.i=new Ya(d,u.h))}function Ce(u,d,f){u.i.set(d,f)}function pl(u){return Ce(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ka(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qa(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,fx),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function fx(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ZT=/[#\/\?@]/g,px=/[#\?:]/g,gx=/[#\?]/g,mx=/[#\?@]/g,yx=/#/g;function Ya(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Ur(u){u.g||(u.g=new Map,u.h=0,u.i&&hx(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ya.prototype,t.add=function(u,d){Ur(this),this.i=null,u=Wo(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function XT(u,d){Ur(u),d=Wo(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function eD(u,d){return Ur(u),d=Wo(u,d),u.g.has(d)}t.forEach=function(u,d){Ur(this),this.g.forEach(function(f,m){f.forEach(function(C){u.call(d,C,m,this)},this)},this)},t.na=function(){Ur(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let C=u[m];for(let R=0;R<C.length;R++)f.push(d[m])}return f},t.V=function(u){Ur(this);let d=[];if(typeof u=="string")eD(this,u)&&(d=d.concat(this.g.get(Wo(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},t.set=function(u,d){return Ur(this),this.i=null,u=Wo(this,u),eD(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function tD(u,d,f){XT(u,d),0<f.length&&(u.i=null,u.g.set(Wo(u,d),N(f)),u.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let R=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var C=R;O[m]!==""&&(C+="="+encodeURIComponent(String(O[m]))),u.push(C)}}return this.i=u.join("&")};function Wo(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function vx(u,d){d&&!u.j&&(Ur(u),u.i=null,u.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(XT(this,m),tD(this,C,f))},u)),u.j=d}function _x(u,d){let f=new Ga;if(a.Image){let m=new Image;m.onload=y(Br,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Br,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Br,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Br,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else d(!1)}function Ex(u,d){let f=new Ga,m=new AbortController,C=setTimeout(()=>{m.abort(),Br(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:m.signal}).then(R=>{clearTimeout(C),R.ok?Br(f,"TestPingServer: ok",!0,d):Br(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Br(f,"TestPingServer: error",!1,d)})}function Br(u,d,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function Ix(){this.g=new rx}function wx(u,d,f){let m=f||"";try{QT(u,function(C,R){let O=C;l(C)&&(O=ag(C)),d.push(m+R+"="+encodeURIComponent(O))})}catch(C){throw d.push(m+"type="+encodeURIComponent("_badmap")),C}}function Ja(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Ja,cg),Ja.prototype.g=function(){return new gl(this.l,this.j)},Ja.prototype.i=function(u){return function(){return u}}({});function gl(u,d){gt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(gl,gt),t=gl.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Xa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Za(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Xa(this)),this.g&&(this.readyState=3,Xa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nD(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function nD(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Za(this):Xa(this),this.readyState==3&&nD(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Za(this))},t.Qa=function(u){this.g&&(this.response=u,Za(this))},t.ga=function(){this.g&&Za(this)};function Za(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Xa(u)}t.setRequestHeader=function(u,d){this.u.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function Xa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function rD(u){let d="";return pe(u,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function vg(u,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=rD(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Ce(u,d,f))}function Pe(u){gt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Pe,gt);var Tx=/^https?$/i,Dx=["POST","PUT"];t=Pe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dg.g(),this.v=this.o?MT(this.o):MT(dg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(R){iD(this,R);return}if(u=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())f.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Dx,d,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,O]of f)this.g.setRequestHeader(R,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{aD(this),this.u=!0,this.g.send(u),this.u=!1}catch(R){iD(this,R)}};function iD(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,oD(u),ml(u)}function oD(u){u.A||(u.A=!0,bt(u,"complete"),bt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,bt(this,"complete"),bt(this,"abort"),ml(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ml(this,!0)),Pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sD(this):this.bb())},t.bb=function(){sD(this)};function sD(u){if(u.h&&typeof s<"u"&&(!u.v[1]||sr(u)!=4||u.Z()!=2)){if(u.u&&sr(u)==4)AT(u.Ea,0,u);else if(bt(u,"readystatechange"),sr(u)==4){u.h=!1;try{let O=u.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=O===0){var C=String(u.D).match(YT)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!Tx.test(C?C.toLowerCase():"")}f=m}if(f)bt(u,"complete"),bt(u,"success");else{u.m=6;try{var R=2<sr(u)?u.g.statusText:""}catch{R=""}u.l=R+" ["+u.Z()+"]",oD(u)}}finally{ml(u)}}}}function ml(u,d){if(u.g){aD(u);let f=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||bt(u,"ready");try{f.onreadystatechange=m}catch{}}}function aD(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function sr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<sr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),nx(d)}};function cD(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function bx(u){let d={};u=(u.g&&2<=sr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(L(u[m]))continue;var f=b(u[m]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let R=d[C]||[];d[C]=R,R.push(f)}D(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ec(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function uD(u){this.Aa=0,this.i=[],this.j=new Ga,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ec("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ec("baseRetryDelayMs",5e3,u),this.cb=ec("retryDelaySeedMs",1e4,u),this.Wa=ec("forwardChannelMaxRetries",2,u),this.wa=ec("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new zT(u&&u.concurrentRequestLimit),this.Da=new Ix,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=uD.prototype,t.la=8,t.G=1,t.connect=function(u,d,f,m){Ct(0),this.W=u,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=vD(this,null,this.W),vl(this)};function _g(u){if(lD(u),u.G==3){var d=u.U++,f=or(u.I);if(Ce(f,"SID",u.K),Ce(f,"RID",d),Ce(f,"TYPE","terminate"),tc(u,f),d=new jr(u,u.j,d),d.L=2,d.v=pl(or(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=_D(d.j,null),d.g.ea(d.v)),d.F=Date.now(),dl(d)}yD(u)}function yl(u){u.g&&(Ig(u),u.g.cancel(),u.g=null)}function lD(u){yl(u),u.u&&(a.clearTimeout(u.u),u.u=null),_l(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function vl(u){if(!qT(u.h)&&!u.s){u.s=!0;var d=u.Ga;Va||wT(),ja||(Va(),ja=!0),Zp.add(d,u),u.B=0}}function Cx(u,d){return GT(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=qa(g(u.Ga,u,d),mD(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new jr(this,this.j,u),R=this.o;if(this.S&&(R?(R=v(R),T(R,this.S)):R=this.S),this.m!==null||this.O||(C.H=R,R=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=hD(this,C,d),f=or(this.I),Ce(f,"RID",u),Ce(f,"CVER",22),this.D&&Ce(f,"X-HTTP-Session-Id",this.D),tc(this,f),R&&(this.O?d="headers="+encodeURIComponent(String(rD(R)))+"&"+d:this.m&&vg(f,this.m,R)),yg(this.h,C),this.Ua&&Ce(f,"TYPE","init"),this.P?(Ce(f,"$req",d),Ce(f,"SID","null"),C.T=!0,fg(C,f,null)):fg(C,f,d),this.G=2}}else this.G==3&&(u?dD(this,u):this.i.length==0||qT(this.h)||dD(this))};function dD(u,d){var f;d?f=d.l:f=u.U++;let m=or(u.I);Ce(m,"SID",u.K),Ce(m,"RID",f),Ce(m,"AID",u.T),tc(u,m),u.m&&u.o&&vg(m,u.m,u.o),f=new jr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=hD(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),yg(u.h,f),fg(f,m,d)}function tc(u,d){u.H&&pe(u.H,function(f,m){Ce(d,m,f)}),u.l&&QT({},function(f,m){Ce(d,m,f)})}function hD(u,d,f){f=Math.min(u.i.length,f);var m=u.l?g(u.l.Na,u.l,u):null;e:{var C=u.i;let R=-1;for(;;){let O=["count="+f];R==-1?0<f?(R=C[0].g,O.push("ofs="+R)):R=0:O.push("ofs="+R);let Te=!0;for(let at=0;at<f;at++){let fe=C[at].g,mt=C[at].map;if(fe-=R,0>fe)R=Math.max(0,C[at].g-100),Te=!1;else try{wx(mt,O,"req"+fe+"_")}catch{m&&m(mt)}}if(Te){m=O.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,m}function fD(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Va||wT(),ja||(Va(),ja=!0),Zp.add(d,u),u.v=0}}function Eg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=qa(g(u.Fa,u),mD(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,pD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=qa(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),yl(this),pD(this))};function Ig(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function pD(u){u.g=new jr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=or(u.qa);Ce(d,"RID","rpc"),Ce(d,"SID",u.K),Ce(d,"AID",u.T),Ce(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ce(d,"TO",u.ja),Ce(d,"TYPE","xmlhttp"),tc(u,d),u.m&&u.o&&vg(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=pl(or(d)),f.m=null,f.P=!0,BT(f,u)}t.Za=function(){this.C!=null&&(this.C=null,yl(this),Eg(this),Ct(19))};function _l(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function gD(u,d){var f=null;if(u.g==d){_l(u),Ig(u),u.g=null;var m=2}else if(mg(u.h,d))f=d.D,WT(u.h,d),m=1;else return;if(u.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=u.B;m=cl(),bt(m,new LT(m,f)),vl(u)}else fD(u);else if(C=d.s,C==3||C==0&&0<d.X||!(m==1&&Cx(u,d)||m==2&&Eg(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),C){case 1:ji(u,5);break;case 4:ji(u,10);break;case 3:ji(u,6);break;default:ji(u,2)}}}function mD(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function ji(u,d){if(u.j.info("Error code "+d),d==2){var f=g(u.fb,u),m=u.Xa;let C=!m;m=new Vi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||hl(m,"https"),pl(m),C?_x(m.toString(),f):Ex(m.toString(),f)}else Ct(2);u.G=0,u.l&&u.l.sa(d),yD(u),lD(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function yD(u){if(u.G=0,u.ka=[],u.l){let d=KT(u.h);(d.length!=0||u.i.length!=0)&&(S(u.ka,d),S(u.ka,u.i),u.h.i.length=0,N(u.i),u.i.length=0),u.l.ra()}}function vD(u,d,f){var m=f instanceof Vi?or(f):new Vi(f);if(m.g!="")d&&(m.g=d+"."+m.g),fl(m,m.s);else{var C=a.location;m=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var R=new Vi(null);m&&hl(R,m),d&&(R.g=d),C&&fl(R,C),f&&(R.l=f),m=R}return f=u.D,d=u.ya,f&&d&&Ce(m,f,d),Ce(m,"VER",u.la),tc(u,m),m}function _D(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Pe(new Ja({eb:f})):new Pe(u.pa),d.Ha(u.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ED(){}t=ED.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function El(){}El.prototype.g=function(u,d){return new $t(u,d)};function $t(u,d){gt.call(this),this.g=new uD(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!L(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!L(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new Ko(this)}w($t,gt),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){_g(this.g)},$t.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=ag(u),u=f);d.i.push(new ux(d.Ya++,u)),d.G==3&&vl(d)},$t.prototype.N=function(){this.g.l=null,delete this.j,_g(this.g),delete this.g,$t.aa.N.call(this)};function ID(u){ug.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}w(ID,ug);function wD(){lg.call(this),this.status=1}w(wD,lg);function Ko(u){this.g=u}w(Ko,ED),Ko.prototype.ua=function(){bt(this.g,"a")},Ko.prototype.ta=function(u){bt(this.g,new ID(u))},Ko.prototype.sa=function(u){bt(this.g,new wD)},Ko.prototype.ra=function(){bt(this.g,"b")},El.prototype.createWebChannel=El.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,oI=Mr.createWebChannelTransport=function(){return new El},iI=Mr.getStatEventTarget=function(){return cl()},rI=Mr.Event=Fi,Xf=Mr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ul.NO_ERROR=0,ul.TIMEOUT=8,ul.HTTP_ERROR=6,ju=Mr.ErrorCode=ul,VT.COMPLETE="complete",nI=Mr.EventType=VT,kT.EventType=Ha,Ha.OPEN="a",Ha.CLOSE="b",Ha.ERROR="c",Ha.MESSAGE="d",gt.prototype.listen=gt.prototype.K,ua=Mr.WebChannel=kT,Rq=Mr.FetchXmlHttpFactory=Ja,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,tI=Mr.XhrIo=Pe}).apply(typeof Zf<"u"?Zf:typeof self<"u"?self:typeof window<"u"?window:{});var wP="@firebase/firestore",TP="4.8.0";var it=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");var Ma="11.10.0";var Vo=new qn("@firebase/firestore");function la(){return Vo.logLevel}function j(t,...e){if(Vo.logLevel<=le.DEBUG){let n=e.map(qw);Vo.debug(`Firestore (${Ma}): ${t}`,...n)}}function kr(t,...e){if(Vo.logLevel<=le.ERROR){let n=e.map(qw);Vo.error(`Firestore (${Ma}): ${t}`,...n)}}function Pi(t,...e){if(Vo.logLevel<=le.WARN){let n=e.map(qw);Vo.warn(`Firestore (${Ma}): ${t}`,...n)}}function qw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function Q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,hM(t,r,n)}function hM(t,e,n){let r=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw kr(r),new Error(r)}function _e(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||hM(e,i,r)}function ne(t,e){return t}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends Kt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Qn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var sp=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},lI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(it.UNAUTHENTICATED))}shutdown(){}},dI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},hI=class{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>_(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string",31837,{l:r}),new sp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new it(e)}},fI=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},pI=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new fI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ap=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},gI=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_e(this.o===void 0,3512);let r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ap(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ap(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Nq(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function fM(){return new TextEncoder}var qu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Nq(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ce(t,e){return t<e?-1:t>e?1:0}function mI(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ce(r,i);{let o=fM(),s=Pq(o.encode(DP(t,n)),o.encode(DP(e,n)));return s!==0?s:ce(r,i)}}n+=r>65535?2:1}return ce(t.length,e.length)}function DP(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Pq(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ce(t[n],e[n]);return ce(t.length,e.length)}function va(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var bP="__name__",cp=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ce(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):mI(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pr.fromString(e.substring(4,e.length-2))}},Re=class t extends cp{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},Mq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Yt=class t extends cp{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return Mq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bP}static keyField(){return new t([bP])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new B(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new B(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var W=class t{constructor(e){this.path=e}static fromPath(e){return new t(Re.fromString(e))}static fromName(e){return new t(Re.fromString(e).popFirst(5))}static empty(){return new t(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Re(e.slice()))}};function pM(t,e,n){if(!n)throw new B(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kq(t,e,n,r){if(e===!0&&r===!0)throw new B(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function CP(t){if(!W.isDocumentKey(t))throw new B(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function SP(t){if(W.isDocumentKey(t))throw new B(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gM(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Gw(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q(12329,{type:typeof t})}function an(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Gw(t);throw new B(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ke(t,e){let n={typeString:t};return e&&(n.value=e),n}function nl(t,e){if(!gM(t))throw new B(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new B(k.INVALID_ARGUMENT,n);return!0}var AP=-62135596800,RP=1e6,Qe=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*RP);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<AP)throw new B(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/RP}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nl(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-AP;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:Ke("string",Qe._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};var ie=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Qe(0,0))}static max(){return new t(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Gu=-1,yI=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};yI.UNKNOWN_ID=-1;function xq(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new jo(i,W.empty(),e)}function Oq(t){return new jo(t.readTime,t.key,Gu)}var jo=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ie.min(),W.empty(),Gu)}static max(){return new t(ie.max(),W.empty(),Gu)}};function Fq(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}var Lq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ka(t){return _(this,null,function*(){if(t.code!==k.FAILED_PRECONDITION||t.message!==Lq)throw t;j("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function Vq(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xa(t){return t.name==="IndexedDbTransactionError"}var Ww=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),Kw=-1;function Bp(t){return t==null}function Wu(t){return t===0&&1/t==-1/0}function jq(t){return typeof t=="number"&&Number.isInteger(t)&&!Wu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var mM="";function Uq(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=NP(e)),e=Bq(t.get(n),e);return NP(e)}function Bq(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case mM:n+="";break;default:n+=o}}return n}function NP(t){return t+mM+""}var $q="remoteDocuments",yM="owner";var vM="mutationQueues";var _M="mutations";var EM="documentMutations",Hq="remoteDocumentsV14";var IM="remoteDocumentGlobal";var wM="targets";var TM="targetDocuments";var DM="targetGlobal",bM="collectionParents";var CM="clientMetadata";var SM="bundles";var AM="namedQueries";var zq="indexConfiguration";var qq="indexState";var Gq="indexEntries";var RM="documentOverlays";var Wq="globals";var Kq=[vM,_M,EM,$q,wM,yM,DM,TM,CM,IM,bM,SM,AM],vce=[...Kq,RM],Qq=[vM,_M,EM,Hq,wM,yM,DM,TM,CM,IM,bM,SM,AM,RM],Yq=Qq,Jq=[...Yq,zq,qq,Gq];var _ce=[...Jq,Wq];function PP(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Oi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function NM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Le=class t{constructor(e,n){this.comparator=e,this.root=n||Yn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pa(this.root,e,this.comparator,!1)}getReverseIterator(){return new pa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pa(this.root,e,this.comparator,!0)}},pa=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Yn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}};Yn.EMPTY=null,Yn.RED=!0,Yn.BLACK=!1;Yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ot=class t{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new up(this.data.getIterator())}getIteratorFrom(e){return new up(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},up=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var sn=class t{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new t([])}unionWith(e){let n=new ot(Yt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return va(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var lp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Dt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new lp("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Dt.EMPTY_BYTE_STRING=new Dt("");var Zq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(t){if(_e(!!t,39018),typeof t=="string"){let e=0,n=Zq.exec(t);if(_e(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?Dt.fromBase64String(t):Dt.fromUint8Array(t)}var PM="server_timestamp",MM="__type__",kM="__previous_value__",xM="__local_write_time__";function Qw(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[MM])===null||n===void 0?void 0:n.stringValue)===PM}function $p(t){let e=t.mapValue.fields[kM];return Qw(e)?$p(e):e}function Ku(t){let e=xr(t.mapValue.fields[xM].timestampValue);return new Qe(e.seconds,e.nanos)}var _I=class{constructor(e,n,r,i,o,s,a,c,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=h}},dp="(default)",hp=class t{constructor(e,n){this.projectId=e,this.database=n||dp}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===dp}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Yw="__type__",OM="__max__",ep={mapValue:{fields:{__type__:{stringValue:OM}}}},Jw="__vector__",_a="value";function Mi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qw(t)?4:LM(t)?9007199254740991:FM(t)?10:11:Q(28295,{value:t})}function er(t,e){if(t===e)return!0;let n=Mi(t);if(n!==Mi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ku(t).isEqual(Ku(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=xr(i.timestampValue),a=xr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Or(i.bytesValue).isEqual(Or(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ae(i.geoPointValue.latitude)===Ae(o.geoPointValue.latitude)&&Ae(i.geoPointValue.longitude)===Ae(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ae(i.integerValue)===Ae(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ae(i.doubleValue),a=Ae(o.doubleValue);return s===a?Wu(s)===Wu(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return va(t.arrayValue.values||[],e.arrayValue.values||[],er);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(PP(s)!==PP(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!er(s[c],a[c])))return!1;return!0}(t,e);default:return Q(52216,{left:t})}}function Qu(t,e){return(t.values||[]).find(n=>er(n,e))!==void 0}function Ea(t,e){if(t===e)return 0;let n=Mi(t),r=Mi(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ae(o.integerValue||o.doubleValue),c=Ae(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return MP(t.timestampValue,e.timestampValue);case 4:return MP(Ku(t),Ku(e));case 5:return mI(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Or(o),c=Or(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=ce(a[l],c[l]);if(h!==0)return h}return ce(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ce(Ae(o.latitude),Ae(s.latitude));return a!==0?a:ce(Ae(o.longitude),Ae(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return kP(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[_a])===null||a===void 0?void 0:a.arrayValue,w=(c=g[_a])===null||c===void 0?void 0:c.arrayValue,N=ce(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=w?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:kP(y,w)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===ep.mapValue&&s===ep.mapValue)return 0;if(o===ep.mapValue)return 1;if(s===ep.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let g=mI(c[p],h[p]);if(g!==0)return g;let y=Ea(a[c[p]],l[h[p]]);if(y!==0)return y}return ce(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Q(23264,{le:n})}}function MP(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);let n=xr(t),r=xr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function kP(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Ea(n[i],r[i]);if(o)return o}return ce(n.length,r.length)}function Ia(t){return EI(t)}function EI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=xr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Or(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=EI(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${EI(n.fields[s])}`;return i+"}"}(t.mapValue):Q(61005,{value:t})}function rp(t){switch(Mi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=$p(t);return e?16+rp(e):16;case 5:return 2*t.stringValue.length;case 6:return Or(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+rp(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Oi(r.fields,(o,s)=>{i+=o.length+rp(s)}),i}(t.mapValue);default:throw Q(13486,{value:t})}}function II(t){return!!t&&"integerValue"in t}function Zw(t){return!!t&&"arrayValue"in t}function xP(t){return!!t&&"nullValue"in t}function OP(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ip(t){return!!t&&"mapValue"in t}function FM(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Yw])===null||n===void 0?void 0:n.stringValue)===Jw}function Bu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Oi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function LM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===OM}var Ice={mapValue:{fields:{[Yw]:{stringValue:Jw},[_a]:{arrayValue:{}}}}};var Qt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ip(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bu(n)}setAll(e){let n=Yt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Bu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());ip(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ip(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Oi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Bu(this.value))}};function VM(t){let e=[];return Oi(t.fields,(n,r)=>{let i=new Yt([n]);if(ip(r)){let o=VM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new sn(e)}var Rn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ie.min(),ie.min(),ie.min(),Qt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ie.min(),ie.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ie.min(),ie.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var wa=class{constructor(e,n){this.position=e,this.inclusive=n}};function FP(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=W.comparator(W.fromName(s.referenceValue),n.key):r=Ea(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function LP(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!er(t.position[n],e.position[n]))return!1;return!0}var Ta=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Xq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var fp=class{},Xe=class t extends fp{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new TI(e,n,r):n==="array-contains"?new CI(e,r):n==="in"?new SI(e,r):n==="not-in"?new AI(e,r):n==="array-contains-any"?new RI(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new DI(e,r):new bI(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ea(n,this.value)):n!==null&&Mi(this.value)===Mi(n)&&this.matchesComparison(Ea(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},tr=class t extends fp{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return jM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function jM(t){return t.op==="and"}function UM(t){return e3(t)&&jM(t)}function e3(t){for(let e of t.filters)if(e instanceof tr)return!1;return!0}function wI(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+Ia(t.value);if(UM(t))return t.filters.map(e=>wI(e)).join(",");{let e=t.filters.map(n=>wI(n)).join(",");return`${t.op}(${e})`}}function BM(t,e){return t instanceof Xe?function(r,i){return i instanceof Xe&&r.op===i.op&&r.field.isEqual(i.field)&&er(r.value,i.value)}(t,e):t instanceof tr?function(r,i){return i instanceof tr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&BM(s,i.filters[a]),!0):!1}(t,e):void Q(19439)}function $M(t){return t instanceof Xe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ia(n.value)}`}(t):t instanceof tr?function(n){return n.op.toString()+" {"+n.getFilters().map($M).join(" ,")+"}"}(t):"Filter"}var TI=class extends Xe{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){let n=W.comparator(e.key,this.key);return this.matchesComparison(n)}},DI=class extends Xe{constructor(e,n){super(e,"in",n),this.keys=HM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},bI=class extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=HM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function HM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}var CI=class extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Zw(n)&&Qu(n.arrayValue,this.value)}},SI=class extends Xe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Qu(this.value.arrayValue,n)}},AI=class extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qu(this.value.arrayValue,n)}},RI=class extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Zw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qu(this.value.arrayValue,r))}};var NI=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function VP(t,e=null,n=[],r=[],i=null,o=null,s=null){return new NI(t,e,n,r,i,o,s)}function Xw(t){let e=ne(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wI(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Bp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ia(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ia(r)).join(",")),e.Pe=n}return e.Pe}function eT(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Xq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!BM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!LP(t.startAt,e.startAt)&&LP(t.endAt,e.endAt)}function PI(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Da=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function t3(t,e,n,r,i,o,s,a){return new Da(t,e,n,r,i,o,s,a)}function Hp(t){return new Da(t)}function jP(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function n3(t){return t.collectionGroup!==null}function $u(t){let e=ne(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ot(Yt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Ta(o,r))}),n.has(Yt.keyField().canonicalString())||e.Te.push(new Ta(Yt.keyField(),r))}return e.Te}function Jn(t){let e=ne(t);return e.Ie||(e.Ie=r3(e,$u(t))),e.Ie}function r3(t,e){if(t.limitType==="F")return VP(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ta(i.field,o)});let n=t.endAt?new wa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wa(t.startAt.position,t.startAt.inclusive):null;return VP(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function MI(t,e,n){return new Da(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zp(t,e){return eT(Jn(t),Jn(e))&&t.limitType===e.limitType}function zM(t){return`${Xw(Jn(t))}|lt:${t.limitType}`}function da(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$M(i)).join(", ")}]`),Bp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ia(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ia(i)).join(",")),`Target(${r})`}(Jn(t))}; limitType=${t.limitType})`}function qp(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):W.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of $u(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=FP(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,$u(r),i)||r.endAt&&!function(s,a,c){let l=FP(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,$u(r),i))}(t,e)}function i3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qM(t){return(e,n)=>{let r=!1;for(let i of $u(t)){let o=o3(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function o3(t,e,n){let r=t.field.isKeyField()?W.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Ea(c,l):Q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:t.dir})}}var Fr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Oi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return NM(this.inner)}size(){return this.innerSize}};var s3=new Le(W.comparator);function Lr(){return s3}var GM=new Le(W.comparator);function Uu(...t){let e=GM;for(let n of t)e=e.insert(n.key,n);return e}function WM(t){let e=GM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xo(){return Hu()}function KM(){return Hu()}function Hu(){return new Fr(t=>t.toString(),(t,e)=>t.isEqual(e))}var a3=new Le(W.comparator),c3=new ot(W.comparator);function de(...t){let e=c3;for(let n of t)e=e.add(n);return e}var u3=new ot(ce);function l3(){return u3}function tT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(e)?"-0":e}}function QM(t){return{integerValue:""+t}}function d3(t,e){return jq(e)?QM(e):tT(t,e)}var ba=class{constructor(){this._=void 0}};function h3(t,e,n){return t instanceof Ca?function(i,o){let s={fields:{[MM]:{stringValue:PM},[xM]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Qw(o)&&(o=$p(o)),o&&(s.fields[kM]=o),{mapValue:s}}(n,e):t instanceof Uo?JM(t,e):t instanceof Bo?ZM(t,e):function(i,o){let s=YM(i,o),a=UP(s)+UP(i.Ee);return II(s)&&II(i.Ee)?QM(a):tT(i.serializer,a)}(t,e)}function f3(t,e,n){return t instanceof Uo?JM(t,e):t instanceof Bo?ZM(t,e):n}function YM(t,e){return t instanceof Sa?function(r){return II(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ca=class extends ba{},Uo=class extends ba{constructor(e){super(),this.elements=e}};function JM(t,e){let n=XM(e);for(let r of t.elements)n.some(i=>er(i,r))||n.push(r);return{arrayValue:{values:n}}}var Bo=class extends ba{constructor(e){super(),this.elements=e}};function ZM(t,e){let n=XM(e);for(let r of t.elements)n=n.filter(i=>!er(i,r));return{arrayValue:{values:n}}}var Sa=class extends ba{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function UP(t){return Ae(t.integerValue||t.doubleValue)}function XM(t){return Zw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function p3(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Uo&&i instanceof Uo||r instanceof Bo&&i instanceof Bo?va(r.elements,i.elements,er):r instanceof Sa&&i instanceof Sa?er(r.Ee,i.Ee):r instanceof Ca&&i instanceof Ca}(t.transform,e.transform)}var kI=class{constructor(e,n){this.version=e,this.transformResults=n}},Zn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function op(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Aa=class{};function ek(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Yu(t.key,Zn.none()):new $o(t.key,t.data,Zn.none());{let n=t.data,r=Qt.empty(),i=new ot(Yt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new nr(t.key,r,new sn(i.toArray()),Zn.none())}}function g3(t,e,n){t instanceof $o?function(i,o,s){let a=i.value.clone(),c=$P(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof nr?function(i,o,s){if(!op(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=$P(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(tk(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function zu(t,e,n,r){return t instanceof $o?function(o,s,a,c){if(!op(o.precondition,s))return a;let l=o.value.clone(),h=HP(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof nr?function(o,s,a,c){if(!op(o.precondition,s))return a;let l=HP(o.fieldTransforms,c,s),h=s.data;return h.setAll(tk(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return op(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function m3(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=YM(r.transform,i||null);o!=null&&(n===null&&(n=Qt.empty()),n.set(r.field,o))}return n||null}function BP(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&va(r,i,(o,s)=>p3(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var $o=class extends Aa{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},nr=class extends Aa{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function tk(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function $P(t,e,n){let r=new Map;_e(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,f3(s,a,n[i]))}return r}function HP(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,h3(o,s,e))}return r}var Yu=class extends Aa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},xI=class extends Aa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var OI=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&g3(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=zu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=zu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=KM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=ek(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&va(this.mutations,e.mutations,(n,r)=>BP(n,r))&&va(this.baseMutations,e.baseMutations,(n,r)=>BP(n,r))}},FI=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){_e(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return a3}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var LI=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var VI=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ge,he;function y3(t){switch(t){case k.OK:return Q(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return Q(15467,{code:t})}}function nk(t){if(t===void 0)return kr("GRPC error has no .code"),k.UNKNOWN;switch(t){case Ge.OK:return k.OK;case Ge.CANCELLED:return k.CANCELLED;case Ge.UNKNOWN:return k.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return k.INTERNAL;case Ge.UNAVAILABLE:return k.UNAVAILABLE;case Ge.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Ge.NOT_FOUND:return k.NOT_FOUND;case Ge.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Ge.ABORTED:return k.ABORTED;case Ge.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Ge.DATA_LOSS:return k.DATA_LOSS;default:return Q(39323,{code:t})}}(he=Ge||(Ge={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var zP=null;var v3=new Pr([4294967295,4294967295],0);function qP(t){let e=fM().encode(t),n=new eI;return n.update(e),new Uint8Array(n.digest())}function GP(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Pr([n,r],0),new Pr([i,o],0)]}var jI=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oo(`Invalid padding: ${n}`);if(r<0)throw new Oo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Pr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Pr.fromNumber(r)));return i.compare(v3)===1&&(i=new Pr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=qP(e),[r,i]=GP(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=qP(e),[r,i]=GP(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Oo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var pp=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ju.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ie.min(),i,new Le(ce),Lr(),de())}},Ju=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,de(),de(),de())}};var ga=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},gp=class{constructor(e,n){this.targetId=e,this.De=n}},mp=class{constructor(e,n,r=Dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},yp=class{constructor(){this.ve=0,this.Ce=WP(),this.Fe=Dt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=de(),n=de(),r=de();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q(38017,{changeType:o})}}),new Ju(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=WP()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},UI=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Lr(),this.je=tp(),this.Je=tp(),this.He=new Le(ce)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(PI(o))if(r===0){let s=new W(o.path);this.Xe(n,s,Rn.newNoDocument(s,ie.min()))}else _e(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}zP?.ct(function(h,p,g,y,w){var N,S,P,L,H,z;let Ne={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},pe=p.unchangedNames;return pe&&(Ne.bloomFilter={applied:w===0,hashCount:(N=pe?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(L=(P=(S=pe?.bits)===null||S===void 0?void 0:S.bitmap)===null||P===void 0?void 0:P.length)!==null&&L!==void 0?L:0,padding:(z=(H=pe?.bits)===null||H===void 0?void 0:H.padding)!==null&&z!==void 0?z:0,mightContain:D=>{var v;return(v=y?.mightContain(D))!==null&&v!==void 0&&v}}),Ne}(s,e.De,this.We.lt(),a,c))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Or(r).toUint8Array()}catch(c){if(c instanceof lp)return Pi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new jI(s,i,o)}catch(c){return Pi(c instanceof Oo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&PI(a.target)){let c=new W(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,Rn.newNoDocument(c,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=de();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new pp(e,n,this.He,this.ze,r);return this.ze=Lr(),this.je=tp(),this.Je=tp(),this.He=new Le(ce),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new yp,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new ot(ce),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new ot(ce),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new yp),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function tp(){return new Le(W.comparator)}function WP(){return new Le(W.comparator)}var _3={asc:"ASCENDING",desc:"DESCENDING"},E3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},I3={and:"AND",or:"OR"},BI=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function $I(t,e){return t.useProto3Json||Bp(e)?e:{value:e}}function vp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function w3(t,e){return vp(t,e.toTimestamp())}function Xn(t){return _e(!!t,49232),ie.fromTimestamp(function(n){let r=xr(n);return new Qe(r.seconds,r.nanos)}(t))}function nT(t,e){return HI(t,e).canonicalString()}function HI(t,e){let n=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ik(t){let e=Re.fromString(t);return _e(uk(e),10190,{key:e.toString()}),e}function zI(t,e){return nT(t.databaseId,e.path)}function sI(t,e){let n=ik(e);if(n.get(1)!==t.databaseId.projectId)throw new B(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(sk(n))}function ok(t,e){return nT(t.databaseId,e)}function T3(t){let e=ik(t);return e.length===4?Re.emptyPath():sk(e)}function qI(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sk(t){return _e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function KP(t,e,n){return{name:zI(t,e),fields:n.value.mapValue.fields}}function D3(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(_e(h===void 0||typeof h=="string",58123),Dt.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Dt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?k.UNKNOWN:nk(l.code);return new B(h,l.message||"")}(s);n=new mp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=sI(t,r.document.name),o=Xn(r.document.updateTime),s=r.document.createTime?Xn(r.document.createTime):ie.min(),a=new Qt({mapValue:{fields:r.document.fields}}),c=Rn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ga(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=sI(t,r.document),o=r.readTime?Xn(r.readTime):ie.min(),s=Rn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ga([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=sI(t,r.document),o=r.removedTargetIds||[];n=new ga([],o,i,null)}else{if(!("filter"in e))return Q(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new VI(i,o),a=r.targetId;n=new gp(a,s)}}return n}function b3(t,e){let n;if(e instanceof $o)n={update:KP(t,e.key,e.value)};else if(e instanceof Yu)n={delete:zI(t,e.key)};else if(e instanceof nr)n={update:KP(t,e.key,e.data),updateMask:x3(e.fieldMask)};else{if(!(e instanceof xI))return Q(16599,{Rt:e.type});n={verify:zI(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Ca)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Uo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Sa)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw Q(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:w3(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Q(27497)}(t,e.precondition)),n}function C3(t,e){return t&&t.length>0?(_e(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?Xn(i.updateTime):Xn(o);return s.isEqual(ie.min())&&(s=Xn(o)),new kI(s,i.transformResults||[])}(n,e))):[]}function S3(t,e){return{documents:[ok(t,e.path)]}}function A3(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ok(t,i);let o=function(l){if(l.length!==0)return ck(tr.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:ha(g.field),direction:P3(g.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=$I(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:n,parent:i}}function R3(t){let e=T3(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_e(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let g=ak(p);return g instanceof tr&&UM(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(g=>function(w){return new Ta(fa(w.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Bp(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){let g=!!p.before,y=p.values||[];return new wa(y,g)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new wa(y,g)}(n.endAt)),t3(e,i,s,o,a,"F",c,l)}function N3(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ak(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=fa(n.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=fa(n.unaryFilter.field);return Xe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=fa(n.unaryFilter.field);return Xe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=fa(n.unaryFilter.field);return Xe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(t):t.fieldFilter!==void 0?function(n){return Xe.create(fa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return tr.create(n.compositeFilter.filters.map(r=>ak(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(t):Q(30097,{filter:t})}function P3(t){return _3[t]}function M3(t){return E3[t]}function k3(t){return I3[t]}function ha(t){return{fieldPath:t.canonicalString()}}function fa(t){return Yt.fromServerFormat(t.fieldPath)}function ck(t){return t instanceof Xe?function(n){if(n.op==="=="){if(OP(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NAN"}};if(xP(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(OP(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NOT_NAN"}};if(xP(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ha(n.field),op:M3(n.op),value:n.value}}}(t):t instanceof tr?function(n){let r=n.getFilters().map(i=>ck(i));return r.length===1?r[0]:{compositeFilter:{op:k3(n.op),filters:r}}}(t):Q(54877,{filter:t})}function x3(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Zu=class t{constructor(e,n,r,i,o=ie.min(),s=ie.min(),a=Dt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var GI=class{constructor(e){this.gt=e}};function O3(t){let e=R3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?MI(e,e.limit,"L"):e}var _p=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Ae(e.integerValue));else if("doubleValue"in e){let r=Ae(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Wu(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=xr(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Or(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?LM(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):FM(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):Q(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=_a,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Ae(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),W.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};_p.Ut=new _p;var WI=class{constructor(){this.Dn=new KI}addToCollectionParentIndex(e,n){return this.Dn.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(jo.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(jo.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},KI=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ot(Re.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ot(Re.comparator)).toArray()}};var wce=new Uint8Array(0);var QP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lk=41943040,on=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(lk,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);var Xu=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var YP="LruGarbageCollector",F3=1048576;function JP([t,e],[n,r]){let i=ce(t,n);return i===0?ce(e,r):i}var QI=class{constructor(e){this.Tr=e,this.buffer=new ot(JP),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();JP(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},YI=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){j(YP,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){xa(n)?j(YP,"Ignoring IndexedDB error during garbage collection: ",n):yield ka(n)}yield this.Rr(3e5)}))}},JI=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return x.resolve(Ww.ue);let r=new QI(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(QP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QP):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),la()<=le.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function L3(t,e){return new JI(t,e)}var ZI=class{constructor(){this.changes=new Fr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var XI=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var ew=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&zu(r.mutation,i,sn.empty(),Qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){let i=xo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Uu();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=xo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Lr(),s=Hu(),a=function(){return Hu()}();return n.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof nr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),zu(h.mutation,l,h.mutation.getFieldMask(),Qe.now())):s.set(l.key,sn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new XI(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Hu(),i=new Le((s,a)=>s-a),o=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let h=r.get(c)||sn.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||de()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=KM();h.forEach(g=>{if(!o.has(g)){let y=ek(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return W.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):n3(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):x.resolve(xo()),a=Gu,c=o;return s.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,de())).next(h=>({batchId:a,changes:WM(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let i=Uu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Uu();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,c=>{let l=function(p,g){return new Da(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Rn.newInvalidDocument(h)))});let a=Uu();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&zu(h.mutation,l,sn.empty(),Qe.now()),qp(n,l)&&(a=a.insert(c,l))}),a})}};var tw=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return x.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Xn(i.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:O3(i.bundledQuery),readTime:Xn(i.readTime)}}(n)),x.resolve()}};var nw=class{constructor(){this.overlays=new Le(W.comparator),this.kr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=xo();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=xo(),o=n.length+1,s=new W(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Le((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=xo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=xo(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new LI(n,r));let o=this.kr.get(n);o===void 0&&(o=de(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var rw=class{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var el=class{constructor(){this.qr=new ot(We.Qr),this.$r=new ot(We.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new We(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new We(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new W(new Re([])),r=new We(n,e),i=new We(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new W(new Re([])),r=new We(n,e),i=new We(n,e+1),o=de();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new We(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},We=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return W.comparator(e.key,n.key)||ce(e.Hr,n.Hr)}static Ur(e,n){return ce(e.Hr,n.Hr)||W.comparator(e.key,n.key)}};var iw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new ot(We.Qr)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new OI(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new We(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,n){return x.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?Kw:this.er-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new We(n,0),i=new We(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ot(ce);return n.forEach(i=>{let o=new We(i,0),s=new We(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),x.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;W.isDocumentKey(o)||(o=o.child(""));let s=new We(new W(o),0),a=new ot(ce);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},s),x.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_e(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return x.forEach(n.mutations,i=>{let o=new We(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new We(n,0),i=this.Yr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var ow=class{constructor(e){this.ni=e,this.docs=function(){return new Le(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Rn.newInvalidDocument(n))}getEntries(e,n){let r=Lr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Rn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Lr(),s=n.path,a=new W(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Fq(Oq(h),r)<=0||(i.has(h.key)||qp(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Q(9500)}ri(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new sw(this)}getSize(e){return x.resolve(this.size)}},sw=class extends ZI{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var aw=class{constructor(e){this.persistence=e,this.ii=new Fr(n=>Xw(n),eT),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.si=0,this.oi=new el,this.targetCount=0,this._i=Xu.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),x.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new Xu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.hr(n),x.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.oi.containsKey(n))}};var Ep=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new Ww(0),this.ci=!1,this.ci=!0,this.li=new rw,this.referenceDelegate=e(this),this.hi=new aw(this),this.indexManager=new WI,this.remoteDocumentCache=function(i){return new ow(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new GI(n),this.Ti=new tw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new iw(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);let i=new cw(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return x.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},cw=class extends vI{constructor(e){super(),this.currentSequenceNumber=e}},uw=class t{constructor(e){this.persistence=e,this.Ai=new el,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw Q(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),x.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.mi,r=>{let i=W.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,ie.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return x.or([()=>x.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},Ip=class t{constructor(e,n){this.persistence=e,this.gi=new Fr(r=>Uq(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=L3(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return x.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return x.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?x.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ie.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),x.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),x.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rp(e.data.value)),n}Sr(e,n,r){return x.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var lw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=de(),i=de();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var dw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var hw=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return $R()?8:Vq(rt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new dw;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(la()<=le.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",da(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(la()<=le.DEBUG&&j("QueryEngine","Query:",da(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(la()<=le.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",da(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(n))):x.resolve())}ps(e,n){if(jP(n))return x.resolve(null);let r=Jn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=MI(n,null,"F"),r=Jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=de(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(n,a);return this.Ds(n,l,s,c.readTime)?this.ps(e,MI(n,null,"F")):this.vs(e,l,n,c)}))})))}ys(e,n,r,i){return jP(n)||i.isEqual(ie.min())?x.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?x.resolve(null):(la()<=le.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),da(n)),this.vs(e,s,n,xq(i,Gu)).next(a=>a))})}bs(e,n){let r=new ot(qM(e));return n.forEach((i,o)=>{qp(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return la()<=le.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",da(n)),this.gs.getDocumentsMatchingQuery(e,n,jo.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var rT="LocalStore",V3=3e8,fw=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Le(ce),this.Ms=new Fr(o=>Xw(o),eT),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ew(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function j3(t,e,n,r){return new fw(t,e,n,r)}function dk(t,e){return _(this,null,function*(){let n=ne(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=de();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function U3(t,e){let n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,g=p.keys(),y=x.resolve();return g.forEach(w=>{y=y.next(()=>h.getEntry(c,w)).next(N=>{let S=l.docVersions.get(w);_e(S!==null,48541),N.version.compareTo(S)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function hk(t){let e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function B3(t,e){let n=ne(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Dt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(N,S,P){return N.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=V3?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,y,h)&&a.push(n.hi.updateTargetData(o,y))});let c=Lr(),l=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push($3(o,s,e.documentUpdates).next(h=>{c=h.Ls,l=h.ks})),!r.isEqual(ie.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(n.Fs=i,o))}function $3(t,e,n){let r=de(),i=de();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Lr();return n.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ie.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):j(rT,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function H3(t,e){let n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Kw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function z3(t,e){let n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Zu(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function pw(t,e,n){return _(this,null,function*(){let r=ne(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!xa(s))throw s;j(rT,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function ZP(t,e,n){let r=ne(t),i=ie.min(),o=de();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=ne(c),g=p.Ms.get(h);return g!==void 0?x.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)}(r,s,Jn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:ie.min(),n?o:de())).next(a=>(q3(r,i3(e),a),{documents:a,qs:o})))}function q3(t,e,n){let r=t.xs.get(e)||ie.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var wp=class{constructor(){this.activeTargetIds=l3()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var gw=class{constructor(){this.Fo=new wp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new wp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var mw=class{xo(e){}shutdown(){}};var XP="ConnectivityMonitor",Tp=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){j(XP,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){j(XP,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var np=null;function yw(){return np===null?np=function(){return 268435456+Math.round(2147483648*Math.random())}():np++,"0x"+np.toString(16)}var aI="RestConnection",G3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},vw=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===dp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=yw(),a=this.Go(e,n.toUriEncodedString());j(aI,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:l}=new URL(a),h=mi(l);return this.jo(e,a,c,r,h).then(p=>(j(aI,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Pi(aI,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ma}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=G3[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var _w=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Tt="WebChannelConnection",Ew=class extends vw{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=yw();return new Promise((a,c)=>{let l=new tI;l.setWithCredentials(!0),l.listenOnce(nI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ju.NO_ERROR:let p=l.getResponseJson();j(Tt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case ju.TIMEOUT:j(Tt,`RPC '${e}' ${s} timed out`),c(new B(k.DEADLINE_EXCEEDED,"Request time out"));break;case ju.HTTP_ERROR:let g=l.getStatus();if(j(Tt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let w=y?.error;if(w&&w.status&&w.message){let N=function(P){let L=P.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(L)>=0?L:k.UNKNOWN}(w.status);c(new B(N,w.message))}else c(new B(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new B(k.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{j(Tt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);j(Tt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=yw(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=oI(),a=iI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let h=o.join("");j(Tt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c);this.T_(p);let g=!1,y=!1,w=new _w({Ho:S=>{y?j(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(g||(j(Tt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),j(Tt,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},Yo:()=>p.close()}),N=(S,P,L)=>{S.listen(P,H=>{try{L(H)}catch(z){setTimeout(()=>{throw z},0)}})};return N(p,ua.EventType.OPEN,()=>{y||(j(Tt,`RPC '${e}' stream ${i} transport opened.`),w.s_())}),N(p,ua.EventType.CLOSE,()=>{y||(y=!0,j(Tt,`RPC '${e}' stream ${i} transport closed`),w.__(),this.I_(p))}),N(p,ua.EventType.ERROR,S=>{y||(y=!0,Pi(Tt,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),w.__(new B(k.UNAVAILABLE,"The operation could not be completed")))}),N(p,ua.EventType.MESSAGE,S=>{var P;if(!y){let L=S.data[0];_e(!!L,16349);let H=L,z=H?.error||((P=H[0])===null||P===void 0?void 0:P.error);if(z){j(Tt,`RPC '${e}' stream ${i} received error:`,z);let Ne=z.status,pe=function(I){let T=Ge[I];if(T!==void 0)return nk(T)}(Ne),D=z.message;pe===void 0&&(pe=k.INTERNAL,D="Unknown error status: "+Ne+" with message "+z.message),y=!0,w.__(new B(pe,D)),p.close()}else j(Tt,`RPC '${e}' stream ${i} received:`,L),w.a_(L)}}),N(a,rI.STAT_EVENT,S=>{S.stat===Xf.PROXY?j(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===Xf.NOPROXY&&j(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function cI(){return typeof document<"u"?document:null}function Gp(t){return new BI(t,!0)}var Dp=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var eM="PersistentStream",bp=class{constructor(e,n,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Dp(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return _(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return _(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return _(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(kr(n.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new B(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>_(this,null,function*(){this.state=0,this.start()}))}G_(e){return j(eM,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(j(eM,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Iw=class extends bp{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=D3(this.serializer,e),r=function(o){if(!("targetChange"in o))return ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?Xn(s.readTime):ie.min()}(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=qI(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=PI(c)?{documents:S3(o,c)}:{query:A3(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=rk(o,s.resumeToken);let l=$I(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ie.min())>0){a.readTime=vp(o,s.snapshotVersion.toTimestamp());let l=$I(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=N3(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=qI(this.serializer),n.removeTarget=e,this.k_(n)}},ww=class extends bp{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=C3(e.writeResults,e.commitTime),r=Xn(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=qI(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>b3(this.serializer,r))};this.k_(n)}};var Tw=class{},Dw=class extends Tw{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new B(k.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,HI(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(k.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,HI(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(k.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},bw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(kr(n),this._a=!1):j("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Ho="RemoteStore",Cw=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>_(this,null,function*(){zo(this)&&(j(Ho,"Restarting streams for network reachability change."),yield function(c){return _(this,null,function*(){let l=ne(c);l.Ia.add(4),yield rl(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Wp(l)})}(this))}))}),this.Aa=new bw(r,i)}};function Wp(t){return _(this,null,function*(){if(zo(t))for(let e of t.da)yield e(!0)})}function rl(t){return _(this,null,function*(){for(let e of t.da)yield e(!1)})}function fk(t,e){let n=ne(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),aT(n)?sT(n):Oa(n).x_()&&oT(n,e))}function iT(t,e){let n=ne(t),r=Oa(n);n.Ta.delete(e),r.x_()&&pk(n,e),n.Ta.size===0&&(r.x_()?r.B_():zo(n)&&n.Aa.set("Unknown"))}function oT(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oa(t).H_(e)}function pk(t,e){t.Ra.$e(e),Oa(t).Y_(e)}function sT(t){t.Ra=new UI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Oa(t).start(),t.Aa.aa()}function aT(t){return zo(t)&&!Oa(t).M_()&&t.Ta.size>0}function zo(t){return ne(t).Ia.size===0}function gk(t){t.Ra=void 0}function W3(t){return _(this,null,function*(){t.Aa.set("Online")})}function K3(t){return _(this,null,function*(){t.Ta.forEach((e,n)=>{oT(t,e)})})}function Q3(t,e){return _(this,null,function*(){gk(t),aT(t)?(t.Aa.la(e),sT(t)):t.Aa.set("Unknown")})}function Y3(t,e,n){return _(this,null,function*(){if(t.Aa.set("Online"),e instanceof mp&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})}(t,e)}catch(r){j(Ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Cp(t,r)}else if(e instanceof ga?t.Ra.Ye(e):e instanceof gp?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ie.min()))try{let r=yield hk(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.Ta.get(c);if(!h)return;o.Ta.set(c,h.withResumeToken(Dt.EMPTY_BYTE_STRING,h.snapshotVersion)),pk(o,c);let p=new Zu(h.target,c,l,h.sequenceNumber);oT(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){j(Ho,"Failed to raise snapshot:",r),yield Cp(t,r)}})}function Cp(t,e,n){return _(this,null,function*(){if(!xa(e))throw e;t.Ia.add(1),yield rl(t),t.Aa.set("Offline"),n||(n=()=>hk(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){j(Ho,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield Wp(t)}))})}function mk(t,e){return e().catch(n=>Cp(t,n,e))}function Kp(t){return _(this,null,function*(){let e=ne(t),n=ki(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Kw;for(;J3(e);)try{let i=yield H3(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,Z3(e,i)}catch(i){yield Cp(e,i)}yk(e)&&vk(e)})}function J3(t){return zo(t)&&t.Pa.length<10}function Z3(t,e){t.Pa.push(e);let n=ki(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function yk(t){return zo(t)&&!ki(t).M_()&&t.Pa.length>0}function vk(t){ki(t).start()}function X3(t){return _(this,null,function*(){ki(t).na()})}function e6(t){return _(this,null,function*(){let e=ki(t);for(let n of t.Pa)e.X_(n.mutations)})}function t6(t,e,n){return _(this,null,function*(){let r=t.Pa.shift(),i=FI.from(r,e,n);yield mk(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Kp(t)})}function n6(t,e){return _(this,null,function*(){e&&ki(t).Z_&&(yield function(r,i){return _(this,null,function*(){if(function(s){return y3(s)&&s!==k.ABORTED}(i.code)){let o=r.Pa.shift();ki(r).N_(),yield mk(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Kp(r)}})}(t,e)),yk(t)&&vk(t)})}function tM(t,e){return _(this,null,function*(){let n=ne(t);n.asyncQueue.verifyOperationInProgress(),j(Ho,"RemoteStore received new credentials");let r=zo(n);n.Ia.add(3),yield rl(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield Wp(n)})}function r6(t,e){return _(this,null,function*(){let n=ne(t);e?(n.Ia.delete(2),yield Wp(n)):e||(n.Ia.add(2),yield rl(n),n.Aa.set("Unknown"))})}function Oa(t){return t.Va||(t.Va=function(n,r,i){let o=ne(n);return o.ia(),new Iw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:W3.bind(null,t),e_:K3.bind(null,t),n_:Q3.bind(null,t),J_:Y3.bind(null,t)}),t.da.push(e=>_(null,null,function*(){e?(t.Va.N_(),aT(t)?sT(t):t.Aa.set("Unknown")):(yield t.Va.stop(),gk(t))}))),t.Va}function ki(t){return t.ma||(t.ma=function(n,r,i){let o=ne(n);return o.ia(),new ww(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:X3.bind(null,t),n_:n6.bind(null,t),ea:e6.bind(null,t),ta:t6.bind(null,t)}),t.da.push(e=>_(null,null,function*(){e?(t.ma.N_(),yield Kp(t)):(yield t.ma.stop(),t.Pa.length>0&&(j(Ho,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var Sw=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function cT(t,e){if(kr("AsyncQueue",`${e}: ${t}`),xa(t))return new B(k.UNAVAILABLE,`${e}: ${t}`);throw t}var Sp=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=Uu(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ap=class{constructor(){this.fa=new Le(W.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Q(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Ra=class t{constructor(e,n,r,i,o,s,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Sp.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Aw=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},Rw=class{constructor(){this.queries=nM(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=ne(n),o=i.queries;i.queries=nM(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new B(k.ABORTED,"Firestore shutting down"))}};function nM(){return new Fr(t=>zM(t),zp)}function _k(t,e){return _(this,null,function*(){let n=ne(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new Aw,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=cT(s,`Initialization of query '${da(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&uT(n)})}function Ek(t,e){return _(this,null,function*(){let n=ne(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function i6(t,e){let n=ne(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&uT(n)}function o6(t,e,n){let r=ne(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function uT(t){t.Da.forEach(e=>{e.next()})}var Nw,rM;(rM=Nw||(Nw={})).Fa="default",rM.Cache="cache";var Rp=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ra(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Nw.Cache}};var Np=class{constructor(e){this.key=e}},Pp=class{constructor(e){this.key=e}},Pw=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=de(),this.mutatedKeys=de(),this.Xa=qM(e),this.eu=new Sp(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new Ap,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=qp(this.query,p)?p:null,w=!!g&&this.mutatedKeys.has(g.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),S=!1;g&&y?g.data.isEqual(y.data)?w!==N&&(r.track({type:3,doc:y}),S=!0):this.iu(g,y)||(r.track({type:2,doc:y}),S=!0,(c&&this.Xa(y,c)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),S=!0):g&&!y&&(r.track({type:1,doc:g}),S=!0,(c||l)&&(a=!0)),S&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,w){let N=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{At:S})}};return N(y)-N(w)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,s.length!==0||l?{snapshot:new Ra(this.query,e.eu,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Ap,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=de(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Pp(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Np(r))}),n}uu(e){this.Ha=e.qs,this.Za=de();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ra.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},lT="SyncEngine",Mw=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},kw=class{constructor(e){this.key=e,this.lu=!1}},xw=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Fr(a=>zM(a),zp),this.Tu=new Map,this.Iu=new Set,this.du=new Le(W.comparator),this.Eu=new Map,this.Au=new el,this.Ru={},this.Vu=new Map,this.mu=Xu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function s6(t,e,n=!0){return _(this,null,function*(){let r=Ck(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield Ik(r,e,n,!0),i})}function a6(t,e){return _(this,null,function*(){let n=Ck(t);yield Ik(n,e,!0,!1)})}function Ik(t,e,n,r){return _(this,null,function*(){let i=yield z3(t.localStore,Jn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield c6(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&fk(t.remoteStore,i),a})}function c6(t,e,n,r,i){return _(this,null,function*(){t.gu=(p,g,y)=>function(N,S,P,L){return _(this,null,function*(){let H=S.view.nu(P);H.Ds&&(H=yield ZP(N.localStore,S.query,!1).then(({documents:D})=>S.view.nu(D,H)));let z=L&&L.targetChanges.get(S.targetId),Ne=L&&L.targetMismatches.get(S.targetId)!=null,pe=S.view.applyChanges(H,N.isPrimaryClient,z,Ne);return oM(N,S.targetId,pe._u),pe.snapshot})}(t,p,g,y);let o=yield ZP(t.localStore,e,!0),s=new Pw(e,o.qs),a=s.nu(o.documents),c=Ju.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,c);oM(t,n,l._u);let h=new Mw(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function u6(t,e,n){return _(this,null,function*(){let r=ne(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!zp(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield pw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&iT(r.remoteStore,i.targetId),Ow(r,i.targetId)}).catch(ka))):(Ow(r,i.targetId),yield pw(r.localStore,i.targetId,!0))})}function l6(t,e){return _(this,null,function*(){let n=ne(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),iT(n.remoteStore,r.targetId))})}function d6(t,e,n){return _(this,null,function*(){let r=v6(t);try{let i=yield function(s,a){let c=ne(s),l=Qe.now(),h=a.reduce((y,w)=>y.add(w.key),de()),p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Lr(),N=de();return c.Os.getEntries(y,h).next(S=>{w=S,w.forEach((P,L)=>{L.isValidDocument()||(N=N.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,w)).next(S=>{p=S;let P=[];for(let L of a){let H=m3(L,p.get(L.key).overlayedDocument);H!=null&&P.push(new nr(L.key,H,VM(H.value.mapValue),Zn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,P,a)}).next(S=>{g=S;let P=S.applyToLocalDocumentSet(p,N);return c.documentOverlayCache.saveOverlays(y,S.batchId,P)})}).then(()=>({batchId:g.batchId,changes:WM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ru[s.currentUser.toKey()];l||(l=new Le(ce)),l=l.insert(a,c),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,n),yield il(r,i.changes),yield Kp(r.remoteStore)}catch(i){let o=cT(i,"Failed to persist write");n.reject(o)}})}function wk(t,e){return _(this,null,function*(){let n=ne(t);try{let r=yield B3(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?_e(s.lu,14607):i.removedDocuments.size>0&&(_e(s.lu,42227),s.lu=!1))}),yield il(n,r,e)}catch(r){yield ka(r)}})}function iM(t,e,n){let r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=ne(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&uT(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function h6(t,e,n){return _(this,null,function*(){let r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Le(W.comparator);s=s.insert(o,Rn.newNoDocument(o,ie.min()));let a=de().add(o),c=new pp(ie.min(),new Map,new Le(ce),s,a);yield wk(r,c),r.du=r.du.remove(o),r.Eu.delete(e),dT(r)}else yield pw(r.localStore,e,!1).then(()=>Ow(r,e,n)).catch(ka)})}function f6(t,e){return _(this,null,function*(){let n=ne(t),r=e.batch.batchId;try{let i=yield U3(n.localStore,e);Dk(n,r,null),Tk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield il(n,i)}catch(i){yield ka(i)}})}function p6(t,e,n){return _(this,null,function*(){let r=ne(t);try{let i=yield function(s,a){let c=ne(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(_e(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);Dk(r,e,n),Tk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield il(r,i)}catch(i){yield ka(i)}})}function Tk(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function Dk(t,e,n){let r=ne(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Ow(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||bk(t,r)})}function bk(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(iT(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),dT(t))}function oM(t,e,n){for(let r of n)r instanceof Np?(t.Au.addReference(r.key,e),g6(t,r)):r instanceof Pp?(j(lT,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||bk(t,r.key)):Q(19791,{yu:r})}function g6(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(j(lT,"New document in limbo: "+n),t.Iu.add(r),dT(t))}function dT(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new W(Re.fromString(e)),r=t.mu.next();t.Eu.set(r,new kw(n)),t.du=t.du.insert(n,r),fk(t.remoteStore,new Zu(Jn(Hp(n.path)),r,"TargetPurposeLimboResolution",Ww.ue))}}function il(t,e,n){return _(this,null,function*(){let r=ne(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=lw.Es(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(c,l){return _(this,null,function*(){let h=ne(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,g=>x.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>x.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!xa(p))throw p;j(rT,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),w=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(w);h.Fs=h.Fs.insert(g,N)}}})}(r.localStore,o))})}function m6(t,e){return _(this,null,function*(){let n=ne(t);if(!n.currentUser.isEqual(e)){j(lT,"User change. New user:",e.toKey());let r=yield dk(n.localStore,e);n.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new B(k.CANCELLED,s))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield il(n,r.Bs)}})}function y6(t,e){let n=ne(t),r=n.Eu.get(e);if(r&&r.lu)return de().add(r.key);{let i=de(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function Ck(t){let e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=y6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h6.bind(null,e),e.hu.J_=i6.bind(null,e.eventManager),e.hu.pu=o6.bind(null,e.eventManager),e}function v6(t){let e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=f6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p6.bind(null,e),e}var Sk=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=Gp(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return j3(this.persistence,new hw,n.initialUser,this.serializer)}Du(n){return new Ep(uw.Vi,this.serializer)}bu(n){return new gw}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),Fw=class extends Sk{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){_e(this.persistence.referenceDelegate instanceof Ip,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new YI(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new Ep(r=>Ip.Vi(r,n),this.serializer)}};var _6=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>iM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=m6.bind(null,this.syncEngine),yield r6(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new Rw}()}createDatastore(n){let r=Gp(n.databaseInfo.databaseId),i=function(s){return new Ew(s)}(n.databaseInfo);return function(s,a,c,l){return new Dw(s,a,c,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,a,c){return new Cw(i,o,s,a,c)}(this.localStore,this.datastore,n.asyncQueue,r=>iM(this.syncEngine,r,0),function(){return Tp.C()?new Tp:new mw}())}createSyncEngine(n,r){return function(o,s,a,c,l,h,p){let g=new xw(o,s,a,c,l,h);return p&&(g.fu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield function(o){return _(this,null,function*(){let s=ne(o);j(Ho,"RemoteStore shutting down."),s.Ia.add(5),yield rl(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Mp=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var xi="FirestoreClient",Lw=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=it.UNAUTHENTICATED,this.clientId=qu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){j(xi,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(j(xi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=cT(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function uI(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),j(xi,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield dk(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Pi("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{j("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Pi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function sM(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield E6(t);j(xi,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>tM(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>tM(e.remoteStore,i)),t._onlineComponents=e})}function E6(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j(xi,"Using user provided OfflineComponentProvider");try{yield uI(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===k.FAILED_PRECONDITION||i.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Pi("Error using user provided cache. Falling back to memory cache: "+n),yield uI(t,new Sk)}}else j(xi,"Using default OfflineComponentProvider"),yield uI(t,new Fw(void 0));return t._offlineComponents})}function Ak(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(j(xi,"Using user provided OnlineComponentProvider"),yield sM(t,t._uninitializedComponentsProvider._online)):(j(xi,"Using default OnlineComponentProvider"),yield sM(t,new _6))),t._onlineComponents})}function I6(t){return Ak(t).then(e=>e.syncEngine)}function Vw(t){return _(this,null,function*(){let e=yield Ak(t),n=e.eventManager;return n.onListen=s6.bind(null,e.syncEngine),n.onUnlisten=u6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=a6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=l6.bind(null,e.syncEngine),n})}function w6(t,e,n={}){let r=new Qn;return t.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(o,s,a,c,l){let h=new Mp({next:g=>{h.Ou(),s.enqueueAndForget(()=>Ek(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new B(k.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?l.reject(new B(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Rp(Hp(a.path),h,{includeMetadataChanges:!0,ka:!0});return _k(o,p)}(yield Vw(t),t.asyncQueue,e,n,r)})),r.promise}function Rk(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var aM=new Map;var Nk="firestore.googleapis.com",cM=!0,kp=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Nk,this.ssl=cM}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:cM;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<F3)throw new B(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Na=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lI;switch(r.type){case"firstParty":return new pI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=aM.get(n);r&&(j("ComponentProvider","Removing Datastore"),aM.delete(n),r.terminate())}(this),Promise.resolve()}};function Pk(t,e,n,r={}){var i;t=an(t,Na);let o=mi(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;o&&(Df(`https://${c}`),bf("Firestore",!0)),s.host!==Nk&&s.host!==c&&Pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!zn(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=it.MOCK_USER;else{h=FR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new B(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new it(g)}t._authCredentials=new dI(new sp(h,p))}}var xp=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},st=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Si(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(nl(n,t._jsonSchema))return new t(e,r||null,new W(Re.fromString(n.referencePath)))}};st._jsonSchemaVersion="firestore/documentReference/1.0",st._jsonSchema={type:Ke("string",st._jsonSchemaVersion),referencePath:Ke("string")};var Si=class t extends xp{constructor(e,n,r){super(e,n,Hp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new W(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function T6(t,e,...n){if(t=Be(t),pM("collection","path",e),t instanceof Na){let r=Re.fromString(e,...n);return SP(r),new Si(t,null,r)}{if(!(t instanceof st||t instanceof Si))throw new B(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Re.fromString(e,...n));return SP(r),new Si(t.firestore,null,r)}}function Fa(t,e,...n){if(t=Be(t),arguments.length===1&&(e=qu.newId()),pM("doc","path",e),t instanceof Na){let r=Re.fromString(e,...n);return CP(r),new st(t,null,new W(r))}{if(!(t instanceof st||t instanceof Si))throw new B(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Re.fromString(e,...n));return CP(r),new st(t.firestore,t instanceof Si?t.converter:null,new W(r))}}var uM="AsyncQueue",Op=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Dp(this,"async_queue_retry"),this.oc=()=>{let r=cI();r&&j(uM,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=cI();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=cI();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new Qn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return _(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!xa(e))throw e;j(uM,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,kr("INTERNAL UNHANDLED ERROR: ",lM(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=Sw.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Q(47125,{hc:lM(this.tc)})}verifyOperationInProgress(){}Pc(){return _(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function lM(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function dM(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var rr=class extends Na{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Op,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Op(e),this._firestoreClient=void 0,yield e}})}};function Mk(t,e){let n=typeof t=="object"?t:Co(),r=typeof t=="string"?t:e||dp,i=ia(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=OR("firestore");o&&Pk(i,...o)}return i}function hT(t){if(t._terminated)throw new B(k.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||D6(t),t._firestoreClient}function D6(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,l,h){return new _I(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Rk(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Lw(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}var Ai=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Dt.fromBase64String(e))}catch(n){throw new B(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nl(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Ai._jsonSchemaVersion="firestore/bytes/1.0",Ai._jsonSchema={type:Ke("string",Ai._jsonSchemaVersion),bytes:Ke("string")};var Pa=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var tl=class{constructor(e){this._methodName=e}};var Ri=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(nl(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Ri._jsonSchemaVersion="firestore/geoPoint/1.0",Ri._jsonSchema={type:Ke("string",Ri._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};var Ni=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nl(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new B(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ni._jsonSchemaVersion="firestore/vectorValue/1.0",Ni._jsonSchema={type:Ke("string",Ni._jsonSchemaVersion),vectorValues:Ke("object")};var b6=/^__.*__$/,jw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new nr(e,this.data,this.fieldMask,n,this.fieldTransforms):new $o(e,this.data,n,this.fieldTransforms)}},Fp=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new nr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function kk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ec:t})}}var Uw=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Vp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(kk(this.Ec)&&b6.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},Bw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gp(e)}Dc(e,n,r,i=!1){return new Uw({Ec:e,methodName:n,bc:r,path:Yt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function fT(t){let e=t._freezeSettings(),n=Gp(t._databaseId);return new Bw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xk(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);pT("Data must be an object, but it was:",s,r);let a=Ok(r,s),c,l;if(o.merge)c=new sn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=$w(e,p,n);if(!s.contains(g))throw new B(k.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Lk(h,g)||h.push(g)}c=new sn(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new jw(new Qt(a),c,l)}var Lp=class t extends tl{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function C6(t,e,n,r){let i=t.Dc(1,e,n);pT("Data must be an object, but it was:",i,r);let o=[],s=Qt.empty();Oi(r,(c,l)=>{let h=gT(e,c,n);l=Be(l);let p=i.gc(h);if(l instanceof Lp)o.push(h);else{let g=Qp(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new sn(o);return new Fp(s,a,i.fieldTransforms)}function S6(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[$w(e,r,n)],c=[i];if(o.length%2!=0)throw new B(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push($w(e,o[g])),c.push(o[g+1]);let l=[],h=Qt.empty();for(let g=a.length-1;g>=0;--g)if(!Lk(l,a[g])){let y=a[g],w=c[g];w=Be(w);let N=s.gc(y);if(w instanceof Lp)l.push(y);else{let S=Qp(w,N);S!=null&&(l.push(y),h.set(y,S))}}let p=new sn(l);return new Fp(h,p,s.fieldTransforms)}function Qp(t,e){if(Fk(t=Be(t)))return pT("Unsupported field value:",e,t),Ok(t,e);if(t instanceof tl)return function(r,i){if(!kk(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Qp(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Be(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return d3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Qe.fromDate(r);return{timestampValue:vp(i.serializer,o)}}if(r instanceof Qe){let o=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vp(i.serializer,o)}}if(r instanceof Ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ai)return{bytesValue:rk(i.serializer,r._byteString)};if(r instanceof st){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:nT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ni)return function(s,a){return{mapValue:{fields:{[Yw]:{stringValue:Jw},[_a]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return tT(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Gw(r)}`)}(t,e)}function Ok(t,e){let n={};return NM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oi(t,(r,i)=>{let o=Qp(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function Fk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof Ri||t instanceof Ai||t instanceof st||t instanceof tl||t instanceof Ni)}function pT(t,e,n){if(!Fk(n)||!gM(n)){let r=Gw(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function $w(t,e,n){if((e=Be(e))instanceof Pa)return e._internalPath;if(typeof e=="string")return gT(t,e);throw Vp("Field path arguments must be of type string or ",t,!1,void 0,n)}var A6=new RegExp("[~\\*/\\[\\]]");function gT(t,e,n){if(e.search(A6)>=0)throw Vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pa(...e.split("."))._internalPath}catch{throw Vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vp(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new B(k.INVALID_ARGUMENT,a+t+c)}function Lk(t,e){return t.some(n=>n.isEqual(e))}var jp=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Hw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Vk("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Hw=class extends jp{data(){return super.data()}};function Vk(t,e){return typeof e=="string"?gT(t,e):e instanceof Pa?e._internalPath:e._delegate._internalPath}function R6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var zw=class{convertValue(e,n="none"){switch(Mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Oi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[_a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ae(s.doubleValue));return new Ni(o)}convertGeoPoint(e){return new Ri(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=$p(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ku(e));default:return null}}convertTimestamp(e){let n=xr(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Re.fromString(e);_e(uk(r),9688,{name:e});let i=new hp(r.get(1),r.get(3)),o=new W(r.popFirst(5));return i.isEqual(n)||kr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function jk(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Fo=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Lo=class t extends jp{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ma(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Vk("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lo._jsonSchema={type:Ke("string",Lo._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};var ma=class extends Lo{data(e={}){return super.data(e)}},ya=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ma(this._firestore,this._userDataWriter,r.key,r,new Fo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new ma(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new ma(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:N6(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function N6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}function mT(t){t=an(t,st);let e=an(t.firestore,rr);return w6(hT(e),t._key).then(n=>Uk(e,t,n))}ya._jsonSchemaVersion="firestore/querySnapshot/1.0",ya._jsonSchema={type:Ke("string",ya._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};var Up=class extends zw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ai(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}};function yT(t,e,n){t=an(t,st);let r=an(t.firestore,rr),i=jk(t.converter,e,n);return Yp(r,[xk(fT(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Zn.none())])}function vT(t,e,n,...r){t=an(t,st);let i=an(t.firestore,rr),o=fT(i),s;return s=typeof(e=Be(e))=="string"||e instanceof Pa?S6(o,"updateDoc",t._key,e,n,r):C6(o,"updateDoc",t._key,e),Yp(i,[s.toMutation(t._key,Zn.exists(!0))])}function P6(t){return Yp(an(t.firestore,rr),[new Yu(t._key,Zn.none())])}function M6(t,e){let n=an(t.firestore,rr),r=Fa(t),i=jk(t.converter,e);return Yp(n,[xk(fT(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Zn.exists(!1))]).then(()=>r)}function _T(t,...e){var n,r,i;t=Be(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||dM(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(dM(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(t instanceof st)l=an(t.firestore,rr),h=Hp(t._key.path),c={next:p=>{e[s]&&e[s](Uk(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=an(t,xp);l=an(p.firestore,rr),h=p._query;let g=new Up(l);c={next:y=>{e[s]&&e[s](new ya(l,g,p,y))},error:e[s+1],complete:e[s+2]},R6(t._query)}return function(g,y,w,N){let S=new Mp(N),P=new Rp(y,S,w);return g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return _k(yield Vw(g),P)})),()=>{S.Ou(),g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return Ek(yield Vw(g),P)}))}}(hT(l),h,a,c)}function Yp(t,e){return function(r,i){let o=new Qn;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return d6(yield I6(r),i,o)})),o.promise}(hT(t),e)}function Uk(t,e,n){let r=n.docs.get(e._key),i=new Up(t);return new Lo(t,i,e._key,r,new Fo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ma=i})(vi),Cn(new kt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new rr(new hI(r.getProvider("auth-internal")),new gI(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hp(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Fe(wP,TP,e),Fe(wP,TP,"esm2017")})();var Jp=function(){return Jp=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Jp.apply(this,arguments)};var O6={includeMetadataChanges:!1};function Bk(t,e){return e===void 0&&(e=O6),new J(function(n){var r=_T(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function $k(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Jp(Jp({},r),(n={},n[e.idField]=t.id,n))}function Hk(t){return Bk(t,{includeMetadataChanges:!0}).pipe(X(function(e){return e.docs}))}function zk(t,e){return e===void 0&&(e={}),Hk(t).pipe(X(function(n){return n.map(function(r){return $k(r,e)})}))}var qo=class{constructor(e){return e}},qk="firestore",ET=class{constructor(){return sa(qk)}};var IT=new U("angularfire2.firestore-instances");function F6(t,e){let n=Cu(qk,t,e);return n&&new qo(n)}function L6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new qo(r)}}var V6={provide:ET,deps:[[new Pt,IT]]},j6={provide:qo,useFactory:F6,deps:[[new Pt,IT],Sr]};function Uue(t,...e){return Fe("angularfire",_i.full,"fst"),Ft([j6,V6,{provide:IT,useFactory:L6(t),multi:!0,deps:[ge,Ze,Ei,Ao,[new Pt,Vu],[new Pt,aa],...e]}])}var Bue=Sn(zk,!0);var $ue=Sn(Mk,!0);var Gk=class t{auth=M(ko);db=M(qo);user$;constructor(){this.user$=mP(this.auth)}get currentUser$(){return this.user$}isLoggedIn(){return this.currentUser$.pipe(X(e=>!!e))}signUp(e){return Ie(yP(this.auth,e.email,e.password)).pipe(lt(n=>{let r={uid:n.user.uid,email:e.email,name:e.name,age:e.age,imageUrl:e.imageUrl};return yT(Fa(this.db,"users",n.user.uid),r)}))}signIn(e,n){return Ie(vP(this.auth,e,n))}logout(){return Ie(_P(this.auth))}getUserData(e){return Ie(mT(Fa(this.db,"users",e)))}updateProfileImage(e,n){return new Promise((r,i)=>{let o=new FileReader;o.onload=()=>_(this,null,function*(){try{let s=o.result,a=Fa(this.db,"users",n);yield vT(a,{imageUrl:s}),r(s)}catch(s){i(s)}}),o.onerror=s=>i(s),o.readAsDataURL(e)})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})};export{V as a,ye as b,Mx as c,Me as d,Ye as e,ct as f,Ie as g,K as h,X as i,Zx as j,ut as k,eO as l,Nn as m,Og as n,lt as o,qi as p,F as q,pd as r,$ as s,Yr as t,U as u,q as v,M as w,Nb as x,Pb as y,ze as z,bc as A,ho as B,ch as C,qt as D,g1 as E,uS as F,lS as G,U1 as H,B1 as I,sF as J,co as K,fo as L,Ee as M,ai as N,bv as O,go as P,vn as Q,Ms as R,rA as S,Et as T,ge as U,mo as V,fV as W,gV as X,mV as Y,yV as Z,vV as _,_V as $,EV as aa,dA as ba,Mv as ca,kv as da,bh as ea,hA as fa,fA as ga,TV as ha,Sh as ia,AV as ja,RV as ka,Ov as la,Fv as ma,NV as na,_A as oa,BV as pa,XV as qa,bA as ra,Lv as sa,CA as ta,AA as ua,nj as va,RA as wa,rj as xa,ij as ya,uj as za,lj as Aa,dj as Ba,fj as Ca,gj as Da,mj as Ea,vj as Fa,xs as Ga,Ij as Ha,Fs as Ia,Nh as Ja,Er as Ka,m2 as La,y2 as Ma,E2 as Na,I2 as Oa,T2 as Pa,D2 as Qa,g0 as Ra,d_ as Sa,B2 as Ta,li as Ua,x0 as Va,pU as Wa,gU as Xa,wn as Ya,Dr as Za,k_ as _a,ta as $a,Ef as ab,GB as bb,QB as cb,fi as db,t$ as eb,foe as fb,ft as gb,V_ as hb,j_ as ib,n$ as jb,boe as kb,Coe as lb,Soe as mb,Aoe as nb,Roe as ob,Noe as pb,NR as qb,iN as rb,fse as sb,Mse as tb,nce as ub,rce as vb,T6 as wb,Fa as xb,P6 as yb,M6 as zb,qo as Ab,Uue as Bb,Bue as Cb,$ue as Db,Gk as Eb};
