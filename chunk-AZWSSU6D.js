import{Tb as a,Ub as m,V as o,Vb as g,Wb as l,Xb as h,Yb as b,_b as w,a as p,b as d,t as f,x as y}from"./chunk-K4E5XMB2.js";var k=class s{transform(e,t){if(!e||typeof e!="string")return"";let r=e.split(" ");return r.slice(0,t).join(" ")+(r.length>t?"...":"")}static \u0275fac=function(t){return new(t||s)};static \u0275pipe=o({name:"seeMore",type:s,pure:!0})};var P=class s{transform(e){let t=new Date(e),i=Math.floor((new Date().getTime()-t.getTime())/1e3),n={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60};for(let u in n){let c=Math.floor(i/n[u]);if(c>=1)return`${c} ${this.getLabel(u,c)} ago`}return"just now"}getLabel(e,t){return t===1?{year:"year",month:"month",week:"week",day:"day",hour:"hour",minute:"minute"}[e]:{year:"years",month:"months",week:"weeks",day:"days",hour:"hours",minute:"minutes"}[e]}static \u0275fac=function(t){return new(t||s)};static \u0275pipe=o({name:"timeAgo",type:s,pure:!0})};var $=class s{db=y(b);addToHistory(e,t){let r=a(this.db,`users/${e}/history`),i=new Date().toISOString();return h(r,d(p({},t),{openedAt:i}))}getHistory(e){let t=a(this.db,`users/${e}/history`);return w(t,{idField:"docId"})}removeFromHistory(e,t){let r=m(this.db,`users/${e}/history/${t}`);return l(r)}clearHistory(e){let t=a(this.db,`users/${e}/history`);return g(t).then(r=>{let i=r.docs.map(n=>l(m(this.db,`users/${e}/history/${n.id}`)));return Promise.all(i)})}static \u0275fac=function(t){return new(t||s)};static \u0275prov=f({token:s,factory:s.\u0275fac,providedIn:"root"})};export{k as a,P as b,$ as c};
