import{a as ee,c as te,e as ie,k as ne}from"./chunk-YPVMFPV3.js";import{a as oe}from"./chunk-NY63K76Q.js";import{a as K,c as G,d as Z}from"./chunk-ECZJFKJ6.js";import{$ as b,$a as W,Ca as g,Da as S,Ea as O,Eb as X,F as w,G as A,J as o,M,O as z,X as c,Xa as B,Y as m,Za as Q,aa as y,ba as v,ca as i,d as F,da as a,ea as _,ha as f,ia as u,j as V,ja as r,lb as N,m as R,mb as H,nb as J,ob as Y,qa as l,qb as q,ra as D,sa as C,ua as $,va as U,wa as j,x,y as h,ya as L}from"./chunk-E6NB745P.js";var T=(t,n)=>n.id;function le(t,n){if(t&1&&(i(0,"div",0),_(1,"img",2)(2,"div",3),a()),t&2){let e=r();o(),v("src","https://image.tmdb.org/t/p/w1280"+e.mediaDetails.backdrop_path,w)}}function de(t,n){if(t&1&&_(0,"iframe",9),t&2){let e=r(2);v("src",e.trailerKey,A)}}function se(t,n){if(t&1&&_(0,"img",36),t&2){let e=r(3);v("src","https://image.tmdb.org/t/p/w500"+e.mediaDetails.poster_path,w)}}function ce(t,n){if(t&1&&(i(0,"div",10),c(1,se,1,1,"img",36),i(2,"p",37),l(3,"Trailer is not available for this media."),a()()),t&2){let e=r(2);o(),m(e.mediaDetails?1:-1)}}function me(t,n){if(t&1&&(i(0,"p"),_(1,"i",38),l(2),g(3,"timeAgo"),a()),t&2){let e=r(2);o(2),C(" ",S(3,1,e.mediaDetails.release_date))}}function pe(t,n){if(t&1&&(i(0,"p"),_(1,"i",38),l(2),g(3,"timeAgo"),a()),t&2){let e=r(2);o(2),C(" ",S(3,1,e.mediaDetails.first_air_date))}}function _e(t,n){if(t&1&&(i(0,"h3",21),l(1),a()),t&2){let e=r(2);o(),D(e.mediaDetails.title)}}function Ce(t,n){if(t&1&&(i(0,"h3",21),l(1),a()),t&2){let e=r(2);o(),D(e.mediaDetails.name)}}function xe(t,n){if(t&1){let e=f();i(0,"div",42),u("click",function(){x(e);let d=r().$implicit,s=r(3);return h(s.goToProfileDetails("person",d.id))}),_(1,"img",43),i(2,"p",37),l(3),a()()}if(t&2){let e=r().$implicit;o(),v("src","https://image.tmdb.org/t/p/w500"+e.profile_path,w)("alt",e.name),o(2),D(e.name)}}function he(t,n){if(t&1&&c(0,xe,4,3,"div",41),t&2){let e=n.$implicit;m(e.profile_path?0:-1)}}function ve(t,n){if(t&1&&(i(0,"h4",39),l(1,"Cast"),a(),i(2,"div",40),b(3,he,1,1,null,null,T),a()),t&2){let e=r(2);o(3),y(e.cast)}}function ue(t,n){if(t&1){let e=f();i(0,"div",45),u("click",function(){x(e);let d=r().$implicit,s=r(3);return h(s.goToProfileDetails("person",d.id))}),_(1,"img",43),i(2,"p",37),l(3),a()()}if(t&2){let e=r().$implicit;o(),v("src","https://image.tmdb.org/t/p/w500"+e.profile_path,w)("alt",e.name),o(2),C(" ",e.name," ")}}function ge(t,n){if(t&1&&c(0,ue,4,3,"div",44),t&2){let e=n.$implicit;m(e.profile_path?0:-1)}}function we(t,n){if(t&1&&(i(0,"h4",39),l(1,"Crew"),a(),i(2,"div",40),b(3,ge,1,1,null,null,T),a()),t&2){let e=r(2);o(3),y(e.crew)}}function fe(t,n){if(t&1&&(i(0,"div",46)(1,"div",47),_(2,"img",48),a(),i(3,"p",37),l(4),g(5,"seeMore"),a()()),t&2){let e=r().$implicit;o(2),v("alt",L("",e.name," Logo"))("src","https://image.tmdb.org/t/p/w500"+e.logo_path,w),o(2),D(O(5,4,e.name,2))}}function Me(t,n){if(t&1&&c(0,fe,6,7,"div",46),t&2){let e=n.$implicit;m(e.logo_path?0:-1)}}function be(t,n){if(t&1){let e=f();i(0,"a",24),u("click",function(){x(e);let d=r(2).$implicit,s=r(2);return h(s.toggleComment(d.id))}),l(1),a()}if(t&2){let e=r(2).$implicit,p=r(2);o(),C(" ",p.isFullShown(e.id)?"See less":"See more"," ")}}function ye(t,n){if(t&1&&(i(0,"div",49)(1,"div",50)(2,"div"),_(3,"img",51),i(4,"span",52),l(5),a(),i(6,"span",53),l(7),g(8,"timeAgo"),a()(),i(9,"div",54)(10,"button",55),l(11,"Reply"),a()()(),i(12,"div",56),l(13),g(14,"seeMore"),c(15,be,2,1,"a",57),a()()),t&2){let e=r().$implicit,p=r(2);o(3),v("src","https://image.tmdb.org/t/p/w500"+e.author_details.avatar_path,w),o(2),C(" @",e.author_details.username),o(2),D(S(8,5,e.created_at)),o(6),C(" ",p.isFullShown(e.id)?e.content:O(14,7,e.content,35)," "),o(2),m(p.isLongComment(e.content)?15:-1)}}function De(t,n){if(t&1&&c(0,ye,16,10,"div",49),t&2){let e=n.$implicit;m(e.author_details.avatar_path?0:-1)}}function Se(t,n){if(t&1){let e=f();i(0,"p",62),u("click",function(){x(e);let d=r(2).$implicit,s=r(3);return h([s.goToMediaDetails(s.type,d.id),s.onToggleRecommend()])}),l(1),g(2,"seeMore"),a()}if(t&2){let e=r(2).$implicit;o(),C(" ",O(2,1,e.title,4)," ")}}function Oe(t,n){if(t&1){let e=f();i(0,"p",62),u("click",function(){x(e);let d=r(2).$implicit,s=r(3);return h([s.goToMediaDetails(s.type,d.id),s.onToggleRecommend()])}),l(1),g(2,"seeMore"),a()}if(t&2){let e=r(2).$implicit;o(),C(" ",O(2,1,e.name,4)," ")}}function Te(t,n){if(t&1&&(i(0,"span"),_(1,"i",38),l(2),g(3,"timeAgo"),a()),t&2){let e=r(2).$implicit;o(2),C(" ",S(3,1,e.release_date)," ")}}function ke(t,n){if(t&1&&(i(0,"span"),_(1,"i",38),l(2),g(3,"timeAgo"),a()),t&2){let e=r(2).$implicit;o(2),C(" ",S(3,1,e.first_air_date)," ")}}function Pe(t,n){if(t&1){let e=f();i(0,"div",58)(1,"img",59),u("click",function(){x(e);let d=r().$implicit,s=r(3);return h([s.goToMediaDetails(s.type,d.id),s.onToggleRecommend()])}),a(),i(2,"div",60),c(3,Se,3,4,"p",61),c(4,Oe,3,4,"p",61),c(5,Te,4,3,"span"),c(6,ke,4,3,"span"),_(7,"br"),i(8,"span"),_(9,"i",13),l(10),a()()()}if(t&2){let e=r().$implicit;o(),v("src","https://image.tmdb.org/t/p/w500"+e.poster_path,w),o(2),m(e.title?3:-1),o(),m(e.name?4:-1),o(),m(e.release_date?5:-1),o(),m(e.first_air_date?6:-1),o(4),C(" ",e.vote_count," views")}}function Ee(t,n){if(t&1&&c(0,Pe,11,6,"div",58),t&2){let e=n.$implicit;m(e.poster_path?0:-1)}}function Ie(t,n){if(t&1&&(i(0,"div",35),b(1,Ee,1,1,null,null,T),a()),t&2){let e=r(2);v("@slideOutIn",void 0),o(),y(e.mediaRecommendations)}}function Fe(t,n){if(t&1){let e=f();i(0,"div",1)(1,"div",4),u("click",function(){x(e);let d=r();return h(d.onToggleRecommend())}),_(2,"i",5),a(),i(3,"div",6)(4,"div",7)(5,"div",8),c(6,de,1,1,"iframe",9)(7,ce,4,1,"div",10),i(8,"div",11),c(9,me,4,3,"p"),c(10,pe,4,3,"p"),i(11,"p",12),_(12,"i",13),l(13),a(),i(14,"div")(15,"button",14),_(16,"i",15),l(17," Like"),a(),i(18,"button",16),_(19,"i",17),l(20," Dislike"),a()(),i(21,"div")(22,"button",14),_(23,"i",18),l(24," Share"),a()()()(),i(25,"div",19)(26,"div",20),c(27,_e,2,1,"h3",21),c(28,Ce,2,1,"h3",21),a(),i(29,"div",22)(30,"p",23),l(31),g(32,"seeMore"),a(),c(33,ve,5,0),c(34,we,5,0),i(35,"a",24),u("click",function(){x(e);let d=r();return h(d.toggleOverview())}),l(36),a()(),i(37,"div",25)(38,"h5"),l(39,"Production companies"),a(),i(40,"div",26),b(41,Me,1,1,null,null,T),a()(),i(43,"div",27)(44,"div",28)(45,"h5",29),l(46,"Comments"),a(),i(47,"div",30)(48,"textarea",31),j("ngModelChange",function(d){x(e);let s=r();return U(s.newComment,d)||(s.newComment=d),h(d)}),a(),i(49,"div",32)(50,"button",33),u("click",function(){x(e);let d=r();return h(d.cancelComment())}),l(51,"Cancel"),a(),i(52,"button",34),u("click",function(){x(e);let d=r();return h(d.postComment())}),l(53,"Post Comment"),a()()(),b(54,De,1,1,null,null,T),a()()()(),c(56,Ie,3,1,"div",35),a()()}if(t&2){let e=r();o(6),m(e.trailerKey?6:7),o(3),m(e.mediaDetails.release_date?9:-1),o(),m(e.mediaDetails.first_air_date?10:-1),o(3),C(" ",e.mediaDetails.vote_count," views"),o(14),m(e.mediaDetails.title?27:-1),o(),m(e.mediaDetails.name?28:-1),o(3),C(" ",e.showFullOverview?e.mediaDetails.overview:O(32,13,e.mediaDetails.overview,30)," "),o(2),m(e.showFullOverview?33:-1),o(),m(e.showFullOverview?34:-1),o(2),C(" ",e.showFullOverview?"See less":"See more"," "),o(5),y(e.mediaDetails.production_companies),o(7),$("ngModel",e.newComment),o(4),v("disabled",!e.newComment.trim()),o(2),y(e.reviewsList),o(2),m(e.MoveRight?56:-1)}}var ae=class t{constructor(n,e,p,d,s,k){this._MediaDetailsService=n;this.route=e;this.sanitizer=p;this._Router=d;this.profileService=s;this.userService=k}visibleItems={};overviewVisible=!1;newComment="";type;id;mediaDetails=null;showFullOverview=!1;showFullComments={};trailerKey=null;mediaRecommendations=[];cast=[];crew=[];reviewsList=[];MoveRight=!1;mediaQuery;subscriptions=new F;uid="";checkScreenWidth(){this.MoveRight=this.mediaQuery.matches}ngOnInit(){this.userService.currentUser$.pipe(R(1)).subscribe(e=>{e&&(this.uid=e.uid)}),this.mediaQuery=window.matchMedia("(min-width: 1301px), (min-width: 901px) and (max-width: 999px)"),this.checkScreenWidth(),this.mediaQuery.addEventListener("change",this.checkScreenWidth.bind(this));let n=this.route.paramMap.subscribe(e=>{this.type=e.get("mediaType")||"",this.id=e.get("mediaId")||"";let p=V({details:this._MediaDetailsService.getMediaDetails(this.type,this.id),credits:this._MediaDetailsService.getMostDetails(this.type,this.id,"credits"),videos:this._MediaDetailsService.getMostDetails(this.type,this.id,"videos"),recommendations:this._MediaDetailsService.getMostDetails(this.type,this.id,"recommendations"),reviews:this._MediaDetailsService.getMostDetails(this.type,this.id,"reviews")}).subscribe({next:({details:d,videos:s,recommendations:k,credits:P,reviews:re})=>{this.mediaDetails=d,this.uid&&this.mediaDetails&&this.addToHistory(),this.mediaRecommendations=k.results||[],this.cast=P.cast?.slice(0,8)||[],this.crew=P.crew?.slice(0,8)||[],this.reviewsList=re.results||[];let E=s.results.find(I=>I.type==="Trailer"&&I.site==="YouTube");this.trailerKey=E?this.sanitizer.bypassSecurityTrustResourceUrl("https://www.youtube.com/embed/"+E.key):null},error:d=>console.error("Error loading data:",d)});this.subscriptions.add(p)});this.subscriptions.add(n)}onToggleRecommend(){this.mediaQuery.matches||(this.MoveRight=!this.MoveRight)}toggleOverview(){this.showFullOverview=!this.showFullOverview}toggleComment(n){this.showFullComments[n]=!this.showFullComments[n]}isLongComment(n){return n?.split(" ").length>35}isFullShown(n){return this.showFullComments[n]||!1}postComment(){this.newComment.trim()&&(this.reviewsList.unshift({username:"NewUser",timeAgo:"just now",text:this.newComment,avatar:"https://randomuser.me/api/portraits/lego/1.jpg"}),this.newComment="")}cancelComment(){this.newComment=""}goToMediaDetails(n,e){this._Router.navigate(["media-details",n,e]),window.scrollTo({top:0,behavior:"smooth"})}goToProfileDetails(n,e){this._Router.navigate(["person-details",n,e])}addToHistory(){this.uid&&this.profileService.addToHistory(this.uid,{id:this.mediaDetails.id,title:this.mediaDetails.title||this.mediaDetails.name,imageUrl:this.mediaDetails.poster_path?"https://image.tmdb.org/t/p/w500/"+this.mediaDetails.poster_path:"",type:this.type})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.mediaDetails=null,this.cast=[],this.crew=[],this.reviewsList=[],this.mediaRecommendations=[],this.trailerKey=null,this.mediaQuery.removeEventListener("change",this.checkScreenWidth.bind(this))}static \u0275fac=function(e){return new(e||t)(M(oe),M(Q),M(B),M(W),M(Z),M(X))};static \u0275cmp=z({type:t,selectors:[["app-media-details"]],decls:4,vars:2,consts:[[1,"header-img","w-100","rounded-3","position-relative"],[1,"position-relative","overflow-hidden","w-100","py-5"],["appAnimateOnScroll","zoomIn","alt","backdrop_path",1,"w-100","h-100","rounded-3",3,"src"],[1,"overley-poster","position-absolute","top-0","start-0","w-100","h-100"],[1,"recommend-list","p-3","position-absolute",3,"click"],[1,"fa-solid","fa-bars","fs-5"],[1,"media-details","position-relative"],[1,"media-details-show","px-lg-2"],[1,"video-show","w-100","rounded-4"],["width","100%","height","400","frameborder","0","allow","autoplay; encrypted-media","allowfullscreen","",3,"src"],[1,"text-center","py-3"],[1,"d-flex","justify-content-lg-between","gap-2","flex-wrap","bg-black","pt-2","px-2","border-bottom","border-secondary"],[1,"ps-lg-0","ps-2"],[1,"fa-solid","fa-eye"],[1,"px-2","py-1","text-white","bg-dark"],[1,"fa-solid","fa-thumbs-up"],[1,"px-2","py-1","ms-1","bg-dark","text-white"],[1,"fa-solid","fa-thumbs-down"],[1,"fa-solid","fa-share"],[1,"details-show","mt-2"],[1,"pt-5","pb-1","border-bottom","border-secondary","overflow-hidden"],["appAnimateOnScroll","slideDown"],[1,"py-3","border-bottom","border-secondary","overflow-hidden"],["appAnimateOnScroll","slideUp"],[1,"see-more-link",3,"click"],[1,"pt-4"],["appAnimateOnScroll","zoomIn",1,"d-flex","justify-content-center","flex-wrap","gap-4","pt-4","border-bottom","border-secondary"],[1,"pt-5"],[1,"comments-container","rounded-3","p-xl-3","py-3","px-2","w-100","overflow-hidden"],["appAnimateOnScroll","slideDown",1,"fw-bold","mb-3"],[1,"mb-3"],["appAnimateOnScroll","slideUp","placeholder","Add a comment...","rows","3",1,"form-control","bg-black","text-white","border-0",3,"ngModelChange","ngModel"],[1,"mt-2","d-flex","justify-content-start","gap-2"],["appAnimateOnScroll","zoomIn",1,"btn","btn-outline-light","btn-sm",3,"click"],["appAnimateOnScroll","zoomIn",1,"button-mix-color","text-white",3,"click","disabled"],[1,"recommendations","rounded-3","p-3"],["appAnimateOnScroll","zoomIn","alt","Poster","width","70%","height","300",1,"rounded-4",3,"src"],[1,"pt-2"],[1,"fa-solid","fa-clock"],["appAnimateOnScroll","slideDown",1,"pt-3"],[1,"d-flex","justify-content-center","gap-3","flex-wrap"],[1,"cast-person","p-2","text-center","overflow-hidden",2,"cursor","pointer"],[1,"cast-person","p-2","text-center","overflow-hidden",2,"cursor","pointer",3,"click"],["width","100","height","100",1,"rounded-circle",3,"src","alt"],[1,"crew-person","p-2","text-center","overflow-hidden",2,"cursor","pointer"],[1,"crew-person","p-2","text-center","overflow-hidden",2,"cursor","pointer",3,"click"],[1,"company-container","text-center","overflow-hidden"],[1,"rounded-3","bg-white"],[3,"src","alt"],[1,"bg-black","mb-3","rounded-3","p-3"],[1,"d-flex","justify-content-between"],["width","50","height","50","alt","avatar",1,"rounded-circle","me-2",3,"src"],[1,"fw-semibold","text-white","ps-2"],[1,"date-content","ps-3"],[1,"pt-1"],[1,"px-2","py-1","bg-primary"],[1,"text-light","small","my-2"],[1,"see-more-link"],[1,"recommendation-container","w-100","d-flex","p-2","mb-2","bg-black","rounded-3","overflow-hidden"],["height","100","alt","",1,"rounded-3",3,"click","src"],[1,"ps-2"],[1,"media-title"],[1,"media-title",3,"click"]],template:function(e,p){e&1&&(i(0,"header"),c(1,le,3,1,"div",0),a(),i(2,"section"),c(3,Fe,57,16,"div",1),a()),e&2&&(o(),m(p.mediaDetails?1:-1),o(2),m(p.mediaDetails?3:-1))},dependencies:[ne,ee,te,ie,q,K,G],styles:[".overley-poster[_ngcontent-%COMP%]{background-color:#00000080}.header-img[_ngcontent-%COMP%]{height:300px}p[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{color:var(--pragrah-color)}.media-details[_ngcontent-%COMP%]{display:flex}.media-details-show[_ngcontent-%COMP%]{width:65%}.recommendations[_ngcontent-%COMP%]{width:35%;background-color:var(--input-color)}.recommendation-container[_ngcontent-%COMP%]{transition:box-shadow .5s ease}.recommendation-container[_ngcontent-%COMP%]:hover{box-shadow:0 10px 10px #fff9}.recommend-list[_ngcontent-%COMP%]{display:none;top:0;left:0;transition:right .5s ease}.recommendations[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;cursor:pointer}.video-show[_ngcontent-%COMP%]{background-color:var(--input-color)}.company-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .company-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:70px}.comments-container[_ngcontent-%COMP%]{background-color:var(--bg-section)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--pragrah-color);font-style:italic;font-size:14px;opacity:1}@media screen and (max-width:1300px){.recommend-list[_ngcontent-%COMP%]{display:block}.recommendations[_ngcontent-%COMP%]{position:absolute;top:0%;right:0;z-index:4444;width:40%;transition:.5s ease-in-out;overflow-y:scroll;height:100%}.media-details-show[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width:1000px){.recommend-list[_ngcontent-%COMP%]{display:none}.recommendations[_ngcontent-%COMP%]{position:static;width:35%;overflow-y:auto}.media-details-show[_ngcontent-%COMP%]{width:65%}}@media screen and (max-width:900px){.recommend-list[_ngcontent-%COMP%]{display:block}.recommendations[_ngcontent-%COMP%]{position:absolute;width:60%;overflow-y:scroll}.media-details-show[_ngcontent-%COMP%]{width:100%}.company-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .company-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:60px}}@media screen and (max-width:600px){.recommendations[_ngcontent-%COMP%]{width:100%}.company-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .company-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:130px;height:100px}}"],data:{animation:[J,Y,H,N]}})};export{ae as MediaDetailsComponent};
